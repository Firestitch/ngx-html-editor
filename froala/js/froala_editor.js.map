/*!
 * froala_editor v3.2.1 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

{"version":3,"file":"froala_editor.js","sources":["../../src/js/polyfills.js","../../src/js/defaults.js","../../src/js/editor.js","../../src/js/modules/core/dom/node.js","../../src/js/modules/core/clean.js","../../src/js/modules/core/helpers.js","../../src/js/modules/core/events.js","../../src/js/modules/core/commands.js","../../src/js/modules/core/cursor_lists.js","../../src/js/modules/core/cursor.js","../../src/js/modules/core/data.js","../../src/js/modules/core/edit.js","../../src/js/modules/core/format.js","../../src/js/modules/core/dom/spaces.js","../../src/js/modules/core/dom/markers.js","../../src/js/modules/core/dom/selection.js","../../src/js/modules/core/options/language.js","../../src/js/modules/core/options/placeholder.js","../../src/js/modules/core/html.js","../../src/js/modules/core/keys.js","../../src/js/modules/core/paste.js","../../src/js/modules/core/shortcuts.js","../../src/js/modules/core/snapshot.js","../../src/js/modules/core/undo.js","../../src/js/modules/core/options/size.js","../../src/js/modules/core.js","../../src/js/modules/ui/popups.js","../../src/js/modules/ui/accessibility.js","../../src/js/modules/ui/tooltip.js","../../src/js/modules/ui/button.js","../../src/js/modules/ui/icon.js","../../src/js/modules/ui/modals.js","../../src/js/modules/ui/position.js","../../src/js/modules/ui/refresh.js","../../src/js/modules/ui/toolbar.js","../../src/js/$.js","../../src/js/index.js"],"sourcesContent":["// Closest polyfill.\r\nif (!Element.prototype.matches)\r\n    Element.prototype.matches = Element.prototype.msMatchesSelector ||\r\n                                Element.prototype.webkitMatchesSelector;\r\n\r\nif (!Element.prototype.closest)\r\n  Element.prototype.closest = function(s) {\r\n    var el = this;\r\n    if (!document.documentElement.contains(el)) return null;\r\n    do {\r\n        if (el.matches(s)) return el;\r\n        el = el.parentElement || el.parentNode;\r\n    } while (el !== null && el.nodeType === 1);\r\n    return null;\r\n};\r\n\r\n// Matches polyfill.\r\nif (!Element.prototype.matches) {\r\n    Element.prototype.matches =\r\n        Element.prototype.matchesSelector ||\r\n        Element.prototype.mozMatchesSelector ||\r\n        Element.prototype.msMatchesSelector ||\r\n        Element.prototype.oMatchesSelector ||\r\n        Element.prototype.webkitMatchesSelector ||\r\n        function(s) {\r\n            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n                i = matches.length;\r\n            while (--i >= 0 && matches.item(i) !== this) {}\r\n            return i > -1;\r\n        };\r\n}\r\n\r\n// isArray polyfill.\r\nif (!Array.isArray) {\r\n  Array.isArray = function(arg) {\r\n    return Object.prototype.toString.call(arg) === '[object Array]';\r\n  };\r\n}\r\n\r\n\r\n// Object.assign\r\nif (typeof Object.assign != 'function') {\r\n  // Must be writable: true, enumerable: false, configurable: true\r\n  Object.defineProperty(Object, \"assign\", {\r\n    value: function assign(target, varArgs) { // .length of function is 2\r\n      'use strict';\r\n      if (target == null) { // TypeError if undefined or null\r\n        throw new TypeError('Cannot convert undefined or null to object');\r\n      }\r\n\r\n      var to = Object(target);\r\n\r\n      for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n\r\n        if (nextSource != null) { // Skip over if undefined or null\r\n          for (var nextKey in nextSource) {\r\n            // Avoid bugs when hasOwnProperty is shadowed\r\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n              to[nextKey] = nextSource[nextKey];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return to;\r\n    },\r\n    writable: true,\r\n    configurable: true\r\n  });\r\n};\r\n\r\n// https://github.com/lazd/scopedQuerySelectorShim/blob/master/src/scopedQuerySelectorShim.js\r\n(function _scopeShim() {\r\n  // Match usage of scope\r\n  const scopeRE = /^\\s*:scope/gi\r\n  const scopeREComma = /,\\s*:scope/gi\r\n\r\n  // A temporary element to query against for elements not currently in the DOM\r\n  // We'll also use this element to test for :scope support\r\n  const container = document.createElement('div')\r\n\r\n  // Overrides\r\n  function overrideNodeMethod(prototype, methodName) {\r\n\r\n    // Store the old method for use later\r\n    const oldMethod = prototype[methodName]\r\n\r\n    // Override the method\r\n    prototype[methodName] = function (query) {\r\n      let nodeList\r\n      let gaveId = false\r\n      let gaveContainer = false\r\n\r\n      if (query && (query.match(scopeRE) || query.match(scopeREComma))) {\r\n\r\n        if (!this.parentNode) {\r\n\r\n          // Add to temporary container\r\n          container.appendChild(this)\r\n          gaveContainer = true\r\n        }\r\n\r\n        const parentNode = this.parentNode\r\n\r\n        if (!this.id) {\r\n\r\n          // Give temporary ID\r\n          this.id = `rootedQuerySelector_id_${(new Date()).getTime()}`\r\n          gaveId = true\r\n        }\r\n\r\n        // Find elements against parent node\r\n        // Replace :scope with node's id\r\n        nodeList = oldMethod.call(parentNode, query.replace(scopeRE, `#${this.id}`).replace(scopeREComma, `,#${this.id}`))\r\n\r\n        // Reset the ID\r\n        if (gaveId) {\r\n          this.id = ''\r\n        }\r\n\r\n        // Remove from temporary container\r\n        if (gaveContainer) {\r\n          container.removeChild(this)\r\n        }\r\n\r\n        return nodeList\r\n      }\r\n\r\n\r\n      // No immediate child selector used\r\n\r\n      return oldMethod.call(this, query)\r\n\r\n    }\r\n  }\r\n\r\n  // Check if the browser supports :scope\r\n  try {\r\n\r\n    // Browser supports :scope, do nothing\r\n    container.querySelectorAll(':scope *')\r\n  }\r\n  catch (e) {\r\n    // Browser doesn't support :scope, add polyfill\r\n    overrideNodeMethod(Element.prototype, 'querySelector')\r\n    overrideNodeMethod(Element.prototype, 'querySelectorAll')\r\n    overrideNodeMethod(HTMLElement.prototype, 'querySelector')\r\n    overrideNodeMethod(HTMLElement.prototype, 'querySelectorAll')\r\n  }\r\n})();\r\n\r\n//classlist library code\r\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\r\n\"document\" in self && (\"classList\" in document.createElement(\"_\") && (!document.createElementNS || \"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\")) || ! function (t) {\r\n  \"use strict\";\r\n  if (\"Element\" in t) {\r\n    var e = \"classList\",\r\n      n = \"prototype\",\r\n      i = t.Element[n],\r\n      s = Object,\r\n      r = String[n].trim || function () {\r\n        return this.replace(/^\\s+|\\s+$/g, \"\")\r\n      },\r\n      o = Array[n].indexOf || function (t) {\r\n        for (var e = 0, n = this.length; n > e; e++)\r\n          if (e in this && this[e] === t) return e;\r\n        return -1\r\n      },\r\n      c = function (t, e) {\r\n        this.name = t, this.code = DOMException[t], this.message = e\r\n      },\r\n      a = function (t, e) {\r\n        if (\"\" === e) throw new c(\"SYNTAX_ERR\", \"The token must not be empty.\");\r\n        if (/\\s/.test(e)) throw new c(\"INVALID_CHARACTER_ERR\", \"The token must not contain space characters.\");\r\n        return o.call(t, e)\r\n      },\r\n      l = function (t) {\r\n        for (var e = r.call(t.getAttribute(\"class\") || \"\"), n = e ? e.split(/\\s+/) : [], i = 0, s = n.length; s > i; i++) this.push(n[i]);\r\n        this._updateClassName = function () {\r\n          t.setAttribute(\"class\", this.toString())\r\n        }\r\n      },\r\n      u = l[n] = [],\r\n      h = function () {\r\n        return new l(this)\r\n      };\r\n    if (c[n] = Error[n], u.item = function (t) {\r\n        return this[t] || null\r\n      }, u.contains = function (t) {\r\n        return ~a(this, t + \"\")\r\n      }, u.add = function () {\r\n        var t, e = arguments,\r\n          n = 0,\r\n          i = e.length,\r\n          s = !1;\r\n        do t = e[n] + \"\", ~a(this, t) || (this.push(t), s = !0); while (++n < i);\r\n        s && this._updateClassName()\r\n      }, u.remove = function () {\r\n        var t, e, n = arguments,\r\n          i = 0,\r\n          s = n.length,\r\n          r = !1;\r\n        do\r\n          for (t = n[i] + \"\", e = a(this, t); ~e;) this.splice(e, 1), r = !0, e = a(this, t); while (++i < s);\r\n        r && this._updateClassName()\r\n      }, u.toggle = function (t, e) {\r\n        var n = this.contains(t),\r\n          i = n ? e !== !0 && \"remove\" : e !== !1 && \"add\";\r\n        return i && this[i](t), e === !0 || e === !1 ? e : !n\r\n      }, u.replace = function (t, e) {\r\n        var n = a(t + \"\");\r\n        ~n && (this.splice(n, 1, e), this._updateClassName())\r\n      }, u.toString = function () {\r\n        return this.join(\" \")\r\n      }, s.defineProperty) {\r\n      var f = {\r\n        get: h,\r\n        enumerable: !0,\r\n        configurable: !0\r\n      };\r\n      try {\r\n        s.defineProperty(i, e, f)\r\n      } catch (p) {\r\n        void 0 !== p.number && -2146823252 !== p.number || (f.enumerable = !1, s.defineProperty(i, e, f))\r\n      }\r\n    } else s[n].__defineGetter__ && i.__defineGetter__(e, h)\r\n  }\r\n}(self), function () {\r\n  \"use strict\";\r\n  var t = document.createElement(\"_\");\r\n  if (t.classList.add(\"c1\", \"c2\"), !t.classList.contains(\"c2\")) {\r\n    var e = function (t) {\r\n      var e = DOMTokenList.prototype[t];\r\n      DOMTokenList.prototype[t] = function (t) {\r\n        var n, i = arguments.length;\r\n        for (n = 0; i > n; n++) t = arguments[n], e.call(this, t)\r\n      }\r\n    };\r\n    e(\"add\"), e(\"remove\")\r\n  }\r\n  if (t.classList.toggle(\"c3\", !1), t.classList.contains(\"c3\")) {\r\n    var n = DOMTokenList.prototype.toggle;\r\n    DOMTokenList.prototype.toggle = function (t, e) {\r\n      return 1 in arguments && !this.contains(t) == !e ? e : n.call(this, t)\r\n    }\r\n  }\r\n  \"replace\" in document.createElement(\"_\").classList || (DOMTokenList.prototype.replace = function (t, e) {\r\n    var n = this.toString().split(\" \"),\r\n      i = n.indexOf(t + \"\");\r\n    ~i && (n = n.slice(i), this.remove.apply(this, n), this.add(e), this.add.apply(this, n.slice(1)))\r\n  }), t = null\r\n}());","export default {\r\n  DEFAULTS: {\r\n    initOnClick: false,\r\n    pluginsEnabled: null\r\n  },\r\n\r\n  MODULES: {},\r\n\r\n  PLUGINS: {},\r\n\r\n  VERSION: '3.2.1',\r\n\r\n  INSTANCES: [],\r\n\r\n  OPTS_MAPPING: {},\r\n\r\n  SHARED: {},\r\n\r\n  ID: 0\r\n}","import './polyfills.js'\n\nimport defaults from './defaults.js'\n\nfunction FroalaEditor(selector, options, initCallback) {\n  if (typeof selector === 'string') {\n    let els = document.querySelectorAll(selector)\n    if (options && options.iframe_document) {\n      els = options.iframe_document.querySelectorAll(selector)\n    }\n    const inst = []\n    for (let i = 0; i < els.length; i++) {\n      let existing_instance = els[i]['data-froala.editor'];\n\n      if (existing_instance) {\n        console.warn('Froala Editor instance already exists.');\n        inst.push(existing_instance);\n      }\n      else {\n        inst.push(new FroalaEditor.Bootstrap(els[i], options, initCallback))\n      }\n    }\n\n    // Only one element.\n    if (inst.length == 1) {\n      return inst[0]\n    }\n\n    return inst\n  }\n\n  return new FroalaEditor.Bootstrap(selector, options, initCallback)\n}\n\nFroalaEditor.RegisterPlugins = function (plgList) {\n  for (let i = 0; i < plgList.length; i++) {\n    plgList[i].call(FroalaEditor)\n  }\n}\n\nObject.assign(FroalaEditor, defaults)\n\nexport default FroalaEditor","import FE from '../../../editor.js'\n\nFE.MODULES.node = function (editor) {\n  const $ = editor.$\n\n  function getContents(node) {\n    if (!node || node.tagName === 'IFRAME') {\n      return []\n    }\n\n    return Array.prototype.slice.call(node.childNodes || [])\n  }\n\n  /**\n   * Determine if the node is a block tag.\n   */\n  function isBlock(node) {\n    if (!node) {\n      return false\n    }\n\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n      return false\n    }\n\n    return FE.BLOCK_TAGS.indexOf(node.tagName.toLowerCase()) >= 0\n  }\n\n  /**\n   * Determine if the node is a link tag.\n   */\n  function isLink(node) {\n    if (!node) {\n      return false\n    }\n\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n      return false\n    }\n\n    return node.tagName.toLowerCase() === 'a'\n  }\n\n  /**\n   * Check if a DOM element is empty.\n   */\n  function isEmpty(el, ignore_markers) {\n    if (!el) {\n      return true\n    }\n\n    if (el.querySelector('table')) {\n      return false\n    }\n\n    // Get element contents.\n    let contents = getContents(el)\n\n    // Check if there is a block tag.\n    if (contents.length === 1 && isBlock(contents[0])) {\n      contents = getContents(contents[0])\n    }\n\n    let has_br = false\n\n    for (let i = 0; i < contents.length; i++) {\n      const node = contents[i]\n\n      if (ignore_markers && editor.node.hasClass(node, 'fr-marker')) {\n        continue\n      }\n\n      if (node.nodeType === Node.TEXT_NODE && node.textContent.length === 0) {\n        continue\n      }\n\n      if (node.tagName !== 'BR' && (node.textContent || '').replace(/\\u200B/gi, '').replace(/\\n/g, '').length > 0) {\n        return false\n      }\n\n      if (has_br) {\n        return false\n      }\n      else if (node.tagName === 'BR') {\n        has_br = true\n      }\n    }\n\n    // Look for void nodes.\n    if (el.querySelectorAll(FE.VOID_ELEMENTS.join(',')).length - el.querySelectorAll('br').length) {\n      return false\n    }\n\n    // Look for empty allowed tags.\n    if (el.querySelector(`${editor.opts.htmlAllowedEmptyTags.join(':not(.fr-marker),')}:not(.fr-marker)`)) {\n      return false\n    }\n\n    // Look for block tags.\n    if (el.querySelectorAll(FE.BLOCK_TAGS.join(',')).length > 1) {\n      return false\n    }\n\n    // Look for do not wrap tags.\n    if (el.querySelector(`${editor.opts.htmlDoNotWrapTags.join(':not(.fr-marker),')}:not(.fr-marker)`)) {\n      return false\n    }\n\n\n    return true\n  }\n\n  /**\n   * Get the block parent.\n   */\n  function blockParent(node) {\n    while (node && node.parentNode !== editor.el && !(node.parentNode && editor.node.hasClass(node.parentNode, 'fr-inner'))) {\n      node = node.parentNode\n\n      if (isBlock(node)) {\n        return node\n      }\n    }\n\n    return null\n  }\n\n  /**\n   * Get deepest parent till the element.\n   */\n  function deepestParent(node, until, simple_enter) {\n    if (typeof until === 'undefined') {\n      until = []\n    }\n\n    if (typeof simple_enter === 'undefined') {\n      simple_enter = true\n    }\n    until.push(editor.el)\n\n    if (until.indexOf(node.parentNode) >= 0 || node.parentNode && editor.node.hasClass(node.parentNode, 'fr-inner') || node.parentNode && FE.SIMPLE_ENTER_TAGS.indexOf(node.parentNode.tagName) >= 0 && simple_enter) {\n      return null\n    }\n\n    // 1. Before until.\n    // 2. Parent node doesn't has class fr-inner.\n    // 3. Parent node is not a simple enter tag or quote.\n    // 4. Parent node is not a block tag\n    while (until.indexOf(node.parentNode) < 0 && node.parentNode && !editor.node.hasClass(node.parentNode, 'fr-inner') && (FE.SIMPLE_ENTER_TAGS.indexOf(node.parentNode.tagName) < 0 || !simple_enter) && !(isBlock(node) && !isBlock(node.parentNode)) && (!(isBlock(node) && isBlock(node.parentNode)) || !simple_enter)) {\n      node = node.parentNode\n    }\n\n    return node\n  }\n\n  function rawAttributes(node) {\n    const attrs = {}\n\n    const atts = node.attributes\n\n    if (atts) {\n      for (let i = 0; i < atts.length; i++) {\n        const att = atts[i]\n        attrs[att.nodeName] = att.value\n      }\n    }\n\n    return attrs\n  }\n\n  /**\n   * Get attributes for a node as a string.\n   */\n  function attributes(node) {\n    let str = ''\n    const atts = rawAttributes(node)\n\n    const keys = Object.keys(atts).sort()\n\n    for (let i = 0; i < keys.length; i++) {\n      const nodeName = keys[i]\n      let value = atts[nodeName]\n\n      // Double quote + no single quote. (\")\n      if (value.indexOf('\\'') < 0 && value.indexOf('\"') >= 0) {\n        str += ` ${nodeName}='${value}'`\n      }\n\n      // Double quote + single quote. (\"')\n      else if (value.indexOf('\"') >= 0 && value.indexOf('\\'') >= 0) {\n        value = value.replace(/\"/g, '&quot;')\n        str += ` ${nodeName}=\"${value}\"`\n      }\n\n      // Single quote or no quote at all.\n      else {\n        str += ` ${nodeName}=\"${value}\"`\n      }\n    }\n\n    return str\n  }\n\n  function clearAttributes(node) {\n    const atts = node.attributes\n\n    for (let i = atts.length - 1; i >= 0; i--) {\n      const att = atts[i]\n      node.removeAttribute(att.nodeName)\n    }\n  }\n\n  /**\n   * Open string for a node.\n   */\n  function openTagString(node) {\n    return `<${node.tagName.toLowerCase()}${attributes(node)}>`\n  }\n\n  /**\n   * Close string for a node.\n   */\n  function closeTagString(node) {\n    return `</${node.tagName.toLowerCase()}>`\n  }\n\n  /**\n   * Determine if the node has any left sibling.\n   */\n  function isFirstSibling(node, ignore_markers) {\n    if (typeof ignore_markers === 'undefined') {\n      ignore_markers = true\n    }\n    let sibling = node.previousSibling\n\n    while (sibling && ignore_markers && editor.node.hasClass(sibling, 'fr-marker')) {\n      sibling = sibling.previousSibling\n    }\n\n    if (!sibling) {\n      return true\n    }\n\n    if (sibling.nodeType === Node.TEXT_NODE && sibling.textContent === '') {\n      return isFirstSibling(sibling)\n    }\n\n    return false\n  }\n\n  /**\n   * Determine if the node has any right sibling.\n   */\n  function isLastSibling(node, ignore_markers) {\n    if (typeof ignore_markers === 'undefined') {\n      ignore_markers = true\n    }\n    let sibling = node.nextSibling\n\n    while (sibling && ignore_markers && editor.node.hasClass(sibling, 'fr-marker')) {\n      sibling = sibling.nextSibling\n    }\n\n    if (!sibling) {\n      return true\n    }\n\n    if (sibling.nodeType === Node.TEXT_NODE && sibling.textContent === '') {\n      return isLastSibling(sibling)\n    }\n\n    return false\n  }\n\n  function isVoid(node) {\n    return node && node.nodeType === Node.ELEMENT_NODE && FE.VOID_ELEMENTS.indexOf((node.tagName || '').toLowerCase()) >= 0\n  }\n\n  /**\n   * Check if the node is a list.\n   */\n  function isList(node) {\n    if (!node) {\n      return false\n    }\n\n    return ['UL', 'OL'].indexOf(node.tagName) >= 0\n  }\n\n  /**\n   * Check if the node is the editable element.\n   */\n  function isElement(node) {\n    return node === editor.el\n  }\n\n  /**\n   * Check if the node is the editable element.\n   */\n  function isDeletable(node) {\n    return node && node.nodeType === Node.ELEMENT_NODE && node.getAttribute('class') && (node.getAttribute('class') || '').indexOf('fr-deletable') >= 0\n  }\n\n  /**\n   * Check if the node has focus.\n   */\n  function hasFocus(node) {\n    return node === editor.doc.activeElement && (!editor.doc.hasFocus || editor.doc.hasFocus()) && Boolean(isElement(node) || node.type || node.href || ~node.tabIndex)\n  }\n\n  function isEditable(node) {\n    return (!node.getAttribute || node.getAttribute('contenteditable') !== 'false')\n              && ['STYLE', 'SCRIPT'].indexOf(node.tagName) < 0\n  }\n\n  function hasClass(el, cls) {\n    if (el instanceof $) {\n      el = el.get(0)\n    }\n\n    return el && el.classList && el.classList.contains(cls)\n  }\n\n  function filter(callback) {\n    if (editor.browser.msie) {\n\n      return callback\n    }\n\n\n    return {\n      acceptNode: callback\n    }\n\n  }\n\n  return {\n    isBlock,\n    isEmpty,\n    blockParent,\n    deepestParent,\n    rawAttributes,\n    attributes,\n    clearAttributes,\n    openTagString,\n    closeTagString,\n    isFirstSibling,\n    isLastSibling,\n    isList,\n    isLink,\n    isElement,\n    contents: getContents,\n    isVoid,\n    hasFocus,\n    isEditable,\n    isDeletable,\n    hasClass,\n    filter\n  }\n}\n","import './dom/node.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n\r\n  // Tags that describe head from HEAD http://www.w3schools.com/html/html_head.asp.\r\n  htmlAllowedTags: ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'blockquote', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'pre', 'progress', 'queue', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'style', 'section', 'select', 'small', 'source', 'span', 'strike', 'strong', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr'],\r\n  htmlRemoveTags: ['script', 'style'],\r\n  htmlAllowedAttrs: ['accept', 'accept-charset', 'accesskey', 'action', 'align', 'allowfullscreen', 'allowtransparency', 'alt', 'async', 'autocomplete', 'autofocus', 'autoplay', 'autosave', 'background', 'bgcolor', 'border', 'charset', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'color', 'cols', 'colspan', 'content', 'contenteditable', 'contextmenu', 'controls', 'coords', 'data', 'data-.*', 'datetime', 'default', 'defer', 'dir', 'dirname', 'disabled', 'download', 'draggable', 'dropzone', 'enctype', 'for', 'form', 'formaction', 'frameborder', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'http-equiv', 'icon', 'id', 'ismap', 'itemprop', 'keytype', 'kind', 'label', 'lang', 'language', 'list', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'mozallowfullscreen', 'multiple', 'muted', 'name', 'novalidate', 'open', 'optimum', 'pattern', 'ping', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'reversed', 'rows', 'rowspan', 'sandbox', 'scope', 'scoped', 'scrolling', 'seamless', 'selected', 'shape', 'size', 'sizes', 'span', 'src', 'srcdoc', 'srclang', 'srcset', 'start', 'step', 'summary', 'spellcheck', 'style', 'tabindex', 'target', 'title', 'type', 'translate', 'usemap', 'value', 'valign', 'webkitallowfullscreen', 'width', 'wrap'],\r\n  htmlAllowedStyleProps: ['.*'],\r\n  htmlAllowComments: true,\r\n  htmlUntouched: false,\r\n  fullPage: false // Will also turn iframe on.\r\n})\r\n\r\nFE.HTML5Map = {\r\n  B: 'STRONG',\r\n  I: 'EM',\r\n  STRIKE: 'S'\r\n}\r\n\r\nFE.MODULES.clean = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let allowedTagsRE\r\n  let removeTagsRE\r\n  let allowedAttrsRE\r\n  let allowedStylePropsRE\r\n\r\n  function _removeInvisible(node) {\r\n    if (node.nodeType === Node.ELEMENT_NODE && node.getAttribute('class') && node.getAttribute('class').indexOf('fr-marker') >= 0) {\r\n      return false\r\n    }\r\n\r\n    // Get node contents.\r\n    let contents = editor.node.contents(node)\r\n    let markers = []\r\n    let i\r\n\r\n    // Loop through contents.\r\n    for (i = 0; i < contents.length; i++) {\r\n\r\n      // If node is not void.\r\n      if (contents[i].nodeType === Node.ELEMENT_NODE && !editor.node.isVoid(contents[i])) {\r\n\r\n        // There are invisible spaces.\r\n        if (contents[i].textContent.replace(/\\u200b/g, '').length !== contents[i].textContent.length) {\r\n\r\n          // Do remove invisible spaces.\r\n          _removeInvisible(contents[i])\r\n        }\r\n      }\r\n\r\n      // If node is text node, replace invisible spaces.\r\n      else if (contents[i].nodeType === Node.TEXT_NODE) {\r\n        contents[i].textContent = contents[i].textContent.replace(/\\u200b/g, '')\r\n\r\n        // .replace(/&/g, '&amp;');\r\n      }\r\n    }\r\n\r\n    // Reasess contents after cleaning invisible spaces.\r\n    if (node.nodeType === Node.ELEMENT_NODE && !editor.node.isVoid(node)) {\r\n      node.normalize()\r\n      contents = editor.node.contents(node)\r\n      markers = node.querySelectorAll('.fr-marker')\r\n\r\n      // All we have left are markers.\r\n      if (contents.length - markers.length === 0) {\r\n\r\n        // Make sure contents are all markers.\r\n        for (i = 0; i < contents.length; i++) {\r\n          if (contents[i].nodeType === Node.ELEMENT_NODE && (contents[i].getAttribute('class') || '').indexOf('fr-marker') < 0) {\r\n\r\n            return false\r\n          }\r\n        }\r\n\r\n        for (i = 0; i < markers.length; i++) {\r\n          node.parentNode.insertBefore(markers[i].cloneNode(true), node)\r\n        }\r\n        node.parentNode.removeChild(node)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function _toHTML(el, is_pre) {\r\n    if (el.nodeType === Node.COMMENT_NODE) {\r\n      return `<!--${el.nodeValue}-->`\r\n    }\r\n\r\n    if (el.nodeType === Node.TEXT_NODE) {\r\n\r\n      if (is_pre) {\r\n\r\n        return el.textContent.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n      }\r\n\r\n      return el.textContent.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\u00A0/g, '&nbsp;').replace(/\\u0009/g, '')\r\n    }\r\n\r\n    if (el.nodeType !== Node.ELEMENT_NODE) {\r\n      return el.outerHTML\r\n    }\r\n\r\n    if (el.nodeType === Node.ELEMENT_NODE && ['STYLE', 'SCRIPT', 'NOSCRIPT'].indexOf(el.tagName) >= 0) {\r\n      return el.outerHTML\r\n    }\r\n\r\n    if (el.nodeType === Node.ELEMENT_NODE && el.tagName === 'svg') {\r\n      const temp = document.createElement('div')\r\n      const node_clone = el.cloneNode(true)\r\n      temp.appendChild(node_clone)\r\n\r\n      return temp.innerHTML\r\n    }\r\n\r\n    if (el.tagName === 'IFRAME') {\r\n      return el.outerHTML.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\r\n    }\r\n\r\n    const contents = el.childNodes\r\n\r\n    if (contents.length === 0) {\r\n      return el.outerHTML\r\n    }\r\n\r\n    let str = ''\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n\r\n      if (el.tagName === 'PRE') {\r\n        is_pre = true\r\n      }\r\n\r\n      str += _toHTML(contents[i], is_pre)\r\n    }\r\n\r\n\r\n    return editor.node.openTagString(el) + str + editor.node.closeTagString(el)\r\n  }\r\n\r\n  let scripts = []\r\n\r\n  function _encode(dirty_html) {\r\n\r\n    // Replace script tag with comments.\r\n    scripts = []\r\n\r\n    dirty_html = dirty_html.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, (str) => {\r\n      scripts.push(str)\r\n\r\n      return `[FROALA.EDITOR.SCRIPT ${scripts.length - 1}]`\r\n\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/<noscript\\b[^<]*(?:(?!<\\/noscript>)<[^<]*)*<\\/noscript>/gi, (str) => {\r\n      scripts.push(str)\r\n\r\n      return `[FROALA.EDITOR.NOSCRIPT ${scripts.length - 1}]`\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/<meta((?:[\\w\\W]*?)) http-equiv=\"/g, '<meta$1 data-fr-http-equiv=\"')\r\n\r\n    dirty_html = dirty_html.replace(/<img((?:[\\w\\W]*?)) src=\"/g, '<img$1 data-fr-src=\"')\r\n\r\n    return dirty_html\r\n  }\r\n\r\n  function _decode(dirty_html) {\r\n\r\n    // Replace script comments with the original script.\r\n    dirty_html = dirty_html.replace(/\\[FROALA\\.EDITOR\\.SCRIPT ([\\d]*)\\]/gi, (str, a1) => {\r\n      if (editor.opts.htmlRemoveTags.indexOf('script') >= 0) {\r\n        return ''\r\n      }\r\n\r\n      return scripts[parseInt(a1, 10)]\r\n\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/\\[FROALA\\.EDITOR\\.NOSCRIPT ([\\d]*)\\]/gi, (str, a1) => {\r\n      if (editor.opts.htmlRemoveTags.indexOf('noscript') >= 0) {\r\n        return ''\r\n      }\r\n\r\n      return scripts[parseInt(a1, 10)].replace(/&lt;/g, '<').replace(/&gt;/g, '>')\r\n\r\n    })\r\n\r\n    dirty_html = dirty_html.replace(/<img((?:[\\w\\W]*?)) data-fr-src=\"/g, '<img$1 src=\"')\r\n\r\n    return dirty_html\r\n  }\r\n\r\n  /*\r\n   * Clean style attribute.\r\n   */\r\n  function _cleanStyle(style) {\r\n    let cleaned_style = style.replace(/;;/gi, ';')\r\n    cleaned_style = cleaned_style.replace(/^;/gi, '')\r\n\r\n    if (cleaned_style.charAt(cleaned_style.length) !== ';') {\r\n      cleaned_style += ';'\r\n    }\r\n\r\n    return cleaned_style\r\n  }\r\n\r\n  function _cleanAttrs(attrs) {\r\n    let nm\r\n\r\n    for (nm in attrs) {\r\n\r\n      if (Object.prototype.hasOwnProperty.call(attrs, nm)) {\r\n\r\n        // Check if attr is allowed.\r\n        const is_attr_allowed = nm.match(allowedAttrsRE)\r\n\r\n        // Check for allowed style properties.\r\n        let allowed_style_props_matches = null\r\n\r\n        // There are allowed style props.\r\n        if (nm === 'style' && editor.opts.htmlAllowedStyleProps.length) {\r\n          allowed_style_props_matches = attrs[nm].match(allowedStylePropsRE)\r\n        }\r\n\r\n        // Attribute is allowed and there are style matches.\r\n        if (is_attr_allowed && allowed_style_props_matches) {\r\n\r\n          // Override attr value with only the allowed properties.\r\n          attrs[nm] = _cleanStyle(allowed_style_props_matches.join(';'))\r\n        }\r\n        else if (!is_attr_allowed || nm === 'style' && !allowed_style_props_matches) {\r\n          delete attrs[nm]\r\n        }\r\n      }\r\n    }\r\n\r\n    let str = ''\r\n    const keys = Object.keys(attrs).sort()\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      nm = keys[i]\r\n\r\n      // Make sure we don't break any HTML.\r\n      if (attrs[nm].indexOf('\"') < 0) {\r\n        str += ` ${nm}=\"${attrs[nm]}\"`\r\n      }\r\n      else {\r\n        str += ` ${nm}='${attrs[nm]}'`\r\n      }\r\n    }\r\n\r\n    return str\r\n  }\r\n\r\n  function _rebuild(body_html, head_html, original_html) {\r\n    if (editor.opts.fullPage) {\r\n\r\n      // Get DOCTYPE.\r\n      const doctype = editor.html.extractDoctype(original_html)\r\n\r\n      // Get HTML attributes.\r\n      const html_attrs = _cleanAttrs(editor.html.extractNodeAttrs(original_html, 'html'))\r\n\r\n      // Get HEAD data.\r\n      head_html = head_html === null ? editor.html.extractNode(original_html, 'head') || '<title></title>' : head_html\r\n      const head_attrs = _cleanAttrs(editor.html.extractNodeAttrs(original_html, 'head'))\r\n\r\n      // Get BODY attributes.\r\n      const body_attrs = _cleanAttrs(editor.html.extractNodeAttrs(original_html, 'body'))\r\n\r\n      return `${doctype}<html${html_attrs}><head${head_attrs}>${head_html}</head><body${body_attrs}>${body_html}</body></html>`\r\n    }\r\n\r\n    return body_html\r\n  }\r\n\r\n  function _process(html, func) {\r\n    let i\r\n\r\n    const doc  = document.implementation.createHTMLDocument('Froala DOC')\r\n    const el = doc.createElement('DIV')\r\n    $(el).append(html)\r\n\r\n    let new_html = ''\r\n\r\n    if (el) {\r\n      let els = editor.node.contents(el)\r\n\r\n      for (i = 0; i < els.length; i++) {\r\n        func(els[i])\r\n      }\r\n\r\n      els = editor.node.contents(el)\r\n\r\n      for (i = 0; i < els.length; i++) {\r\n        new_html += _toHTML(els[i])\r\n      }\r\n    }\r\n\r\n    return new_html\r\n  }\r\n\r\n  function exec(html, func, parse_head) {\r\n    html = _encode(html)\r\n    let b_html = html\r\n    let h_html = null\r\n\r\n    if (editor.opts.fullPage) {\r\n\r\n      // Get BODY data.\r\n      b_html = editor.html.extractNode(html, 'body') || (html.indexOf('<body') >= 0 ? '' : html)\r\n\r\n      if (parse_head) {\r\n        h_html = editor.html.extractNode(html, 'head') || ''\r\n      }\r\n    }\r\n\r\n    b_html = _process(b_html, func)\r\n\r\n    if (h_html) {\r\n      h_html = _process(h_html, func)\r\n    }\r\n\r\n    const new_html = _rebuild(b_html, h_html, html)\r\n\r\n    return _decode(new_html)\r\n  }\r\n\r\n  function invisibleSpaces(dirty_html) {\r\n    if (dirty_html.replace(/\\u200b/g, '').length === dirty_html.length) {\r\n      return dirty_html\r\n    }\r\n\r\n    return editor.clean.exec(dirty_html, _removeInvisible)\r\n  }\r\n\r\n  function toHTML5() {\r\n    const els = editor.el.querySelectorAll(Object.keys(FE.HTML5Map).join(','))\r\n\r\n    if (els.length) {\r\n      let sel_saved = false\r\n\r\n      if (!editor.el.querySelector('.fr-marker')) {\r\n        editor.selection.save()\r\n        sel_saved = true\r\n      }\r\n\r\n      for (let i = 0; i < els.length; i++) {\r\n        if (editor.node.attributes(els[i]) === '') {\r\n          $(els[i]).replaceWith(`<${FE.HTML5Map[els[i].tagName]}>${els[i].innerHTML}</${FE.HTML5Map[els[i].tagName]}>`)\r\n        }\r\n      }\r\n\r\n      if (sel_saved) {\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fixes paths coming as HTML entities which are later on converted to their coresponding chars.\r\n  function _convertHref(href) {\r\n    const div = editor.doc.createElement('DIV')\r\n    div.innerText = href\r\n\r\n    return div.textContent\r\n  }\r\n\r\n  function _node(node) {\r\n\r\n    // Skip when we're dealing with markers.\r\n    if (node.tagName === 'SPAN' && (node.getAttribute('class') || '').indexOf('fr-marker') >= 0) {\r\n      return false\r\n    }\r\n\r\n    if (node.tagName === 'PRE') {\r\n      _cleanPre(node)\r\n    }\r\n\r\n    if (node.nodeType === Node.ELEMENT_NODE) {\r\n      if (node.getAttribute('data-fr-src') && node.getAttribute('data-fr-src').indexOf('blob:') !== 0) {\r\n        node.setAttribute('data-fr-src', editor.helpers.sanitizeURL(_convertHref(node.getAttribute('data-fr-src'))))\r\n      }\r\n\r\n      if (node.getAttribute('href')) {\r\n        node.setAttribute('href', editor.helpers.sanitizeURL(_convertHref(node.getAttribute('href'))))\r\n      }\r\n\r\n      if (node.getAttribute('src')) {\r\n        node.setAttribute('src', editor.helpers.sanitizeURL(_convertHref(node.getAttribute('src'))))\r\n      }\r\n\r\n      if (['TABLE', 'TBODY', 'TFOOT', 'TR'].indexOf(node.tagName) >= 0) {\r\n        node.innerHTML = node.innerHTML.trim()\r\n      }\r\n    }\r\n\r\n    // Remove local images if option they are not allowed.\r\n    if (!editor.opts.pasteAllowLocalImages && node.nodeType === Node.ELEMENT_NODE && node.tagName === 'IMG' && node.getAttribute('data-fr-src') && node.getAttribute('data-fr-src').indexOf('file://') === 0) {\r\n      node.parentNode.removeChild(node)\r\n\r\n      return false\r\n    }\r\n\r\n    if (node.nodeType === Node.ELEMENT_NODE && FE.HTML5Map[node.tagName] && editor.node.attributes(node) === '') {\r\n      const tg = FE.HTML5Map[node.tagName]\r\n      const new_node = `<${tg}>${node.innerHTML}</${tg}>`\r\n      node.insertAdjacentHTML('beforebegin', new_node)\r\n      node = node.previousSibling\r\n      node.parentNode.removeChild(node.nextSibling)\r\n    }\r\n\r\n    if (!editor.opts.htmlAllowComments && node.nodeType === Node.COMMENT_NODE) {\r\n\r\n      // Do not remove FROALA.EDITOR comments.\r\n      if (node.data.indexOf('[FROALA.EDITOR') !== 0) {\r\n        node.parentNode.removeChild(node)\r\n      }\r\n    }\r\n\r\n    // Remove completely tags in denied tags.\r\n    else if (node.tagName && node.tagName.match(removeTagsRE)) {\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1787\r\n      // adding styles from style tag to inline styles\r\n      if (node.tagName == 'STYLE' && editor.helpers.isMac()) {\r\n        let styleString = node.innerHTML.trim()\r\n        let classValues = []\r\n        let rxp = /{([^}]+)}/g\r\n        let curMatch\r\n\r\n        // eslint-disable-next-line no-cond-assign\r\n        while(curMatch = rxp.exec( styleString )) {\r\n          classValues.push( curMatch[1] );\r\n        }\r\n        for (let i = 0; styleString.indexOf('{') != -1; i++) {\r\n          let className = styleString.substring(0, styleString.indexOf('{')).trim();\r\n          node.parentNode.querySelectorAll(className).forEach(function(item) {\r\n            item.removeAttribute('class')\r\n            item.setAttribute('style', classValues[i])\r\n          })\r\n          styleString = styleString.substring(styleString.indexOf('}') + 1);\r\n        }\r\n      }\r\n\r\n      node.parentNode.removeChild(node)\r\n    }\r\n\r\n    // Unwrap tags not in allowed tags.\r\n    else if (node.tagName && !node.tagName.match(allowedTagsRE)) {\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1711 . If svg is not allowed then remove it because it is a leaf node.\r\n      if (node.tagName === 'svg') {\r\n        node.parentNode.removeChild(node)\r\n      }\r\n\r\n      // Ignore path tag nodes that are inside a svg tag node.\r\n      else if (!(editor.browser.safari && node.tagName === 'path' && node.parentNode && node.parentNode.tagName === 'svg')) {\r\n        node.outerHTML = node.innerHTML\r\n      }\r\n\r\n    }\r\n\r\n    // Check denied attributes.\r\n    else {\r\n      const attrs = node.attributes\r\n\r\n      if (attrs) {\r\n\r\n        for (let i = attrs.length - 1; i >= 0; i--) {\r\n          const attr = attrs[i]\r\n\r\n          // Check if attr is allowed.\r\n          const is_attr_allowed = attr.nodeName.match(allowedAttrsRE)\r\n\r\n          // Check for allowed style properties.\r\n          let allowed_style_props_matches = null\r\n\r\n          // There are allowed style props.\r\n          if (attr.nodeName === 'style' && editor.opts.htmlAllowedStyleProps.length) {\r\n            allowed_style_props_matches = attr.value.match(allowedStylePropsRE)\r\n          }\r\n\r\n          // Attribute is allowed and there are style matches.\r\n          if (is_attr_allowed && allowed_style_props_matches) {\r\n\r\n            // Override attr value with only the allowed properties.\r\n            attr.value = _cleanStyle(allowed_style_props_matches.join(';'))\r\n          }\r\n          else if (!is_attr_allowed || attr.nodeName === 'style' && !allowed_style_props_matches) {\r\n            node.removeAttribute(attr.nodeName)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _run(node) {\r\n    const contents = editor.node.contents(node)\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n      if (contents[i].nodeType !== Node.TEXT_NODE) {\r\n        _run(contents[i])\r\n      }\r\n    }\r\n\r\n    _node(node)\r\n  }\r\n\r\n  /**\r\n   * Clean pre.\r\n   */\r\n  function _cleanPre(pre) {\r\n    const content = pre.innerHTML\r\n\r\n    if (content.indexOf('\\n') >= 0) {\r\n      pre.innerHTML = content.replace(/\\n/g, '<br>')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean the html input.\r\n   */\r\n  function html(dirty_html, denied_tags, denied_attrs, full_page) {\r\n    if (typeof denied_tags === 'undefined') {\r\n      denied_tags = []\r\n    }\r\n\r\n    if (typeof denied_attrs === 'undefined') {\r\n      denied_attrs = []\r\n    }\r\n\r\n    if (typeof full_page === 'undefined') {\r\n      full_page = false\r\n    }\r\n\r\n    // Empty spaces after BR always collapse.\r\n    // dirty_html = dirty_html.replace(/<br> */g, '<br>');\r\n\r\n    // Build the allowed tags array.\r\n    const allowed_tags = $.merge([], editor.opts.htmlAllowedTags)\r\n    let i\r\n\r\n    for (i = 0; i < denied_tags.length; i++) {\r\n      if (allowed_tags.indexOf(denied_tags[i]) >= 0) {\r\n        allowed_tags.splice(allowed_tags.indexOf(denied_tags[i]), 1)\r\n      }\r\n    }\r\n\r\n    // Build the allowed attrs array.\r\n    const allowed_attrs = $.merge([], editor.opts.htmlAllowedAttrs)\r\n\r\n    for (i = 0; i < denied_attrs.length; i++) {\r\n      if (allowed_attrs.indexOf(denied_attrs[i]) >= 0) {\r\n        allowed_attrs.splice(allowed_attrs.indexOf(denied_attrs[i]), 1)\r\n      }\r\n    }\r\n\r\n    // We should allow data-fr.\r\n    allowed_attrs.push('data-fr-.*')\r\n    allowed_attrs.push('fr-.*')\r\n\r\n    // Generate cleaning RegEx.\r\n    allowedTagsRE = new RegExp(`^${allowed_tags.join('$|^')}$`, 'gi')\r\n    allowedAttrsRE = new RegExp(`^${allowed_attrs.join('$|^')}$`, 'gi')\r\n    removeTagsRE = new RegExp(`^${editor.opts.htmlRemoveTags.join('$|^')}$`, 'gi')\r\n\r\n    if (editor.opts.htmlAllowedStyleProps.length) {\r\n      allowedStylePropsRE = new RegExp(`((^|;|\\\\s)${editor.opts.htmlAllowedStyleProps.join(':.+?(?=;|$))|((^|;|\\\\s)')}:.+?(?=(;)|$))`, 'gi')\r\n    }\r\n    else {\r\n      allowedStylePropsRE = null\r\n    }\r\n\r\n    dirty_html = exec(dirty_html, _run, true)\r\n\r\n    return dirty_html\r\n  }\r\n\r\n  function _tablesWrapTHEAD() {\r\n    const trs = editor.el.querySelectorAll('tr')\r\n\r\n    // Make sure the TH lives inside thead.\r\n    for (let i = 0; i < trs.length; i++) {\r\n\r\n      // Search for th inside tr.\r\n      const children = trs[i].children\r\n      let ok = true\r\n\r\n      for (let j = 0; j < children.length; j++) {\r\n        if (children[j].tagName !== 'TH') {\r\n          ok = false\r\n          break\r\n        }\r\n      }\r\n\r\n      // If there is something else than TH.\r\n      if (ok === false || children.length === 0) {\r\n        continue\r\n      }\r\n\r\n      let tr = trs[i]\r\n\r\n      while (tr && tr.tagName !== 'TABLE' && tr.tagName !== 'THEAD') {\r\n        tr = tr.parentNode\r\n      }\r\n\r\n      let thead = tr\r\n\r\n      if (thead.tagName !== 'THEAD') {\r\n        thead = editor.doc.createElement('THEAD')\r\n        tr.insertBefore(thead, tr.firstChild)\r\n      }\r\n\r\n      thead.appendChild(trs[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean tables.\r\n   */\r\n  function tables() {\r\n    _tablesWrapTHEAD()\r\n  }\r\n\r\n  function _listsWrapMissplacedLI() {\r\n\r\n    // Find missplaced list items.\r\n    let lis = []\r\n    function filterListItem(li) {\r\n\r\n      return !editor.node.isList(li.parentNode)\r\n    }\r\n\r\n    do {\r\n      if (lis.length) {\r\n        let li = lis[0]\r\n        const ul = editor.doc.createElement('ul')\r\n        li.parentNode.insertBefore(ul, li)\r\n\r\n        do {\r\n          const tmp = li\r\n          li = li.nextSibling\r\n          ul.appendChild(tmp)\r\n        } while (li && li.tagName === 'LI')\r\n      }\r\n\r\n      lis = []\r\n      const li_sel = editor.el.querySelectorAll('li')\r\n\r\n      for (let i = 0; i < li_sel.length; i++) {\r\n        if (filterListItem(li_sel[i])) {\r\n          lis.push(li_sel[i])\r\n        }\r\n      }\r\n    } while (lis.length > 0)\r\n  }\r\n\r\n  function _listsJoinSiblings() {\r\n\r\n    // Join lists.\r\n    const sibling_lists = editor.el.querySelectorAll('ol + ol, ul + ul')\r\n\r\n    for (let k = 0; k < sibling_lists.length; k++) {\r\n      const list = sibling_lists[k]\r\n\r\n      if (editor.node.isList(list.previousSibling) && editor.node.openTagString(list) === editor.node.openTagString(list.previousSibling)) {\r\n        const childs = editor.node.contents(list)\r\n\r\n        for (let i = 0; i < childs.length; i++) {\r\n          list.previousSibling.appendChild(childs[i])\r\n        }\r\n        list.parentNode.removeChild(list)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsRemoveEmpty() {\r\n\r\n    let i\r\n\r\n    // Remove empty lists.\r\n    let do_remove\r\n\r\n    function removeEmptyList(lst) {\r\n      if (!lst.querySelector('LI')) {\r\n        do_remove = true\r\n        lst.parentNode.removeChild(lst)\r\n      }\r\n    }\r\n\r\n    do {\r\n      do_remove = false\r\n\r\n      // Remove empty li.\r\n      const empty_lis = editor.el.querySelectorAll('li:empty')\r\n\r\n      for (i = 0; i < empty_lis.length; i++) {\r\n        empty_lis[i].parentNode.removeChild(empty_lis[i])\r\n      }\r\n\r\n      // Remove empty ul and ol.\r\n      const remaining_lists = editor.el.querySelectorAll('ul, ol')\r\n\r\n      for (i = 0; i < remaining_lists.length; i++) {\r\n        removeEmptyList(remaining_lists[i])\r\n      }\r\n    } while (do_remove === true)\r\n  }\r\n\r\n  function _listsWrapLists() {\r\n\r\n    // Do not allow list directly inside another list.\r\n    const direct_lists = editor.el.querySelectorAll('ul > ul, ol > ol, ul > ol, ol > ul')\r\n\r\n    for (let i = 0; i < direct_lists.length; i++) {\r\n      const list = direct_lists[i]\r\n      const prev_li = list.previousSibling\r\n\r\n      if (prev_li) {\r\n        if (prev_li.tagName === 'LI') {\r\n          prev_li.appendChild(list)\r\n        }\r\n        else {\r\n          $(list).wrap('<li></li>')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsNoTagAfterNested() {\r\n\r\n    // Check if nested lists don't have HTML after them.\r\n    const nested_lists = editor.el.querySelectorAll('li > ul, li > ol')\r\n\r\n    for (let i = 0; i < nested_lists.length; i++) {\r\n      const lst = nested_lists[i]\r\n\r\n      if (lst.nextSibling) {\r\n        let node = lst.nextSibling\r\n        const $new_li = $(editor.doc.createElement('LI'))\r\n        $(lst.parentNode).after($new_li.get(0))\r\n\r\n        do {\r\n          const tmp = node\r\n          node = node.nextSibling\r\n          $new_li.append(tmp)\r\n        } while (node)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsTypeInNested() {\r\n\r\n    // Make sure we can type in nested list.\r\n    const nested_lists = editor.el.querySelectorAll('li > ul, li > ol')\r\n\r\n    for (let i = 0; i < nested_lists.length; i++) {\r\n      const lst = nested_lists[i]\r\n\r\n      // List is the first in the LI.\r\n      if (editor.node.isFirstSibling(lst)) {\r\n        $(lst).before('<br/>')\r\n      }\r\n\r\n      // Make sure we don't leave BR before list.\r\n      else if (lst.previousSibling && lst.previousSibling.tagName === 'BR') {\r\n        let prev_node = lst.previousSibling.previousSibling\r\n\r\n        // Skip markers.\r\n        while (prev_node && editor.node.hasClass(prev_node, 'fr-marker')) {\r\n          prev_node = prev_node.previousSibling\r\n        }\r\n\r\n        // Remove BR only if there is something else than BR.\r\n        if (prev_node && prev_node.tagName !== 'BR') {\r\n          $(lst.previousSibling).remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _listsRemoveEmptyLI() {\r\n\r\n    // Remove empty li.\r\n    const empty_lis = editor.el.querySelectorAll('li:empty')\r\n\r\n    for (let i = 0; i < empty_lis.length; i++) {\r\n      $(empty_lis[i]).remove()\r\n    }\r\n  }\r\n\r\n  function _listsFindMissplacedText() {\r\n    const lists = editor.el.querySelectorAll('ul, ol')\r\n\r\n    for (let i = 0; i < lists.length; i++) {\r\n      const contents = editor.node.contents(lists[i])\r\n      let $li = null\r\n\r\n      for (let j = contents.length - 1; j >= 0; j--) {\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/3033\r\n        if (contents[j].tagName !== 'LI' && contents[j].tagName != 'UL' && contents[j].tagName != 'OL' ) {\r\n          if (!$li) {\r\n            $li = $(editor.doc.createElement('LI'))\r\n            $li.insertBefore(contents[j])\r\n          }\r\n\r\n          $li.prepend(contents[j])\r\n        }\r\n        else {\r\n          $li = null\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean lists.\r\n   */\r\n  function lists() {\r\n    _listsWrapMissplacedLI()\r\n\r\n    _listsJoinSiblings()\r\n\r\n    _listsFindMissplacedText()\r\n\r\n    _listsRemoveEmpty()\r\n\r\n    _listsWrapLists()\r\n\r\n    _listsNoTagAfterNested()\r\n\r\n    _listsTypeInNested()\r\n\r\n    _listsRemoveEmptyLI()\r\n  }\r\n\r\n  /**\r\n   * Initialize\r\n   */\r\n  function _init() {\r\n\r\n    // If fullPage is on allow head and title.\r\n    if (editor.opts.fullPage) {\r\n      $.merge(editor.opts.htmlAllowedTags, ['head', 'title', 'style', 'link', 'base', 'body', 'html', 'meta'])\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    html,\r\n    toHTML5,\r\n    tables,\r\n    lists,\r\n    invisibleSpaces,\r\n    exec\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\n//https://github.com/froala-labs/froala-editor-js-2/issues/1878\r\n//Screen Size constants\r\nFE.XS = 0\r\nFE.SM = 1\r\nFE.MD = 2\r\nFE.LG = 3\r\nconst screenSm=768\r\nconst screenMd=992\r\nconst screenLg=1200\r\n\r\n// Chars to allow.\r\nconst x = 'a-z\\\\u0080-\\\\u009f\\\\u00a1-\\\\uffff0-9-_\\\\.'\r\n\r\n// Common regex to avoid double chars.\r\nFE.LinkRegExCommon = `[${x}]{1,}`\r\n\r\n// PORT:something_else.php\r\nFE.LinkRegExEnd = '((:[0-9]{1,5})|)(((\\\\/|\\\\?|#)[a-z\\\\u00a1-\\\\uffff0-9@?\\\\|!^=%&amp;\\\\/~+#-\\\\\\'*-_{}]*)|())'\r\n\r\n// Common TLD\r\nFE.LinkRegExTLD = `((${FE.LinkRegExCommon})(\\\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))`\r\n\r\n// Starts with HTTP.\r\nFE.LinkRegExHTTP = `((ftp|http|https):\\\\/\\\\/${FE.LinkRegExCommon})`\r\n\r\n// Authenticate with HTTP.\r\nFE.LinkRegExAuth = `((ftp|http|https):\\\\/\\\\/[\\\\u0021-\\\\uffff]{1,}@${FE.LinkRegExCommon})`\r\n\r\n// Starts with WWWW.\r\nFE.LinkRegExWWW = `(www\\\\.${FE.LinkRegExCommon}\\\\.[a-z0-9-]{2,24})`\r\n\r\n// Join.\r\nFE.LinkRegEx =  `(${FE.LinkRegExTLD}|${FE.LinkRegExHTTP}|${FE.LinkRegExWWW}|${FE.LinkRegExAuth})${FE.LinkRegExEnd}`\r\n\r\n// Link protocols.\r\nFE.LinkProtocols = ['mailto', 'tel', 'sms', 'notes', 'data']\r\n\r\n// https://davidcel.is/posts/stop-validating-email-addresses-with-regex/\r\nFE.MAIL_REGEX = /.+@.+\\..+/i\r\n\r\nFE.MODULES.helpers = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Get the IE version.\r\n   */\r\n  function _ieVersion() {\r\n\r\n    /* global navigator */\r\n    let rv = -1\r\n    let ua\r\n    let re\r\n\r\n    if (navigator.appName === 'Microsoft Internet Explorer') {\r\n      ua = navigator.userAgent\r\n      re = new RegExp('MSIE ([0-9]{1,}[\\\\.0-9]{0,})')\r\n\r\n      if (re.exec(ua) !== null) {\r\n        rv = parseFloat(RegExp.$1)\r\n      }\r\n    }\r\n    else if (navigator.appName === 'Netscape') {\r\n      ua = navigator.userAgent\r\n      re = new RegExp('Trident/.*rv:([0-9]{1,}[\\\\.0-9]{0,})')\r\n\r\n      if (re.exec(ua) !== null) {\r\n        rv = parseFloat(RegExp.$1)\r\n      }\r\n    }\r\n\r\n    return rv\r\n  }\r\n\r\n  /**\r\n   * Determine the browser.\r\n   */\r\n  function _browser() {\r\n    const browser = {}\r\n    const ie_version = _ieVersion()\r\n\r\n    if (ie_version > 0) {\r\n      browser.msie = true\r\n    }\r\n    else {\r\n      const ua = navigator.userAgent.toLowerCase()\r\n\r\n      const match =\r\n          /(edge)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(chrome)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(webkit)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) ||\r\n          /(msie) ([\\w.]+)/.exec(ua) ||\r\n          ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\r\n          []\r\n\r\n      const matched = {\r\n        browser: match[1] || '',\r\n        version: match[2] || '0'\r\n      }\r\n\r\n      if (match[1]) {\r\n        browser[matched.browser] = true\r\n      }\r\n\r\n      // Chrome is Webkit, but Webkit is also Safari.\r\n      if (browser.chrome) {\r\n        browser.webkit = true\r\n      }\r\n      else if (browser.webkit) {\r\n        browser.safari = true\r\n      }\r\n    }\r\n\r\n    if (browser.msie) {\r\n      browser.version = ie_version\r\n    }\r\n\r\n    return browser\r\n  }\r\n\r\n  function isIOS() {\r\n\r\n    return /(iPad|iPhone|iPod)/g.test(navigator.userAgent) && !isWindowsPhone()\r\n  }\r\n\r\n  function isAndroid() {\r\n\r\n    return /(Android)/g.test(navigator.userAgent) && !isWindowsPhone()\r\n  }\r\n\r\n  function isBlackberry() {\r\n\r\n    return /(Blackberry)/g.test(navigator.userAgent)\r\n  }\r\n\r\n  function isWindowsPhone() {\r\n\r\n    return /(Windows Phone)/gi.test(navigator.userAgent)\r\n  }\r\n\r\n  function isMobile() {\r\n\r\n    return isAndroid() || isIOS() || isBlackberry()\r\n  }\r\n\r\n  function requestAnimationFrame() {\r\n\r\n    return window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n\r\n        function (callback) {\r\n          window.setTimeout(callback, 1000 / 60)\r\n        }\r\n  }\r\n\r\n  function getPX(val) {\r\n\r\n    return parseInt(val, 10) || 0\r\n  }\r\n\r\n  //https://github.com/froala-labs/froala-editor-js-2/issues/1878\r\n  //ScreenSize calculation on the fr-box class\r\n  function screenSize() {\r\n    try {\r\n      const width = $('.fr-box').width();\r\n\r\n      if(width < screenSm)\r\n      {\r\n        return FE.XS\r\n      }\r\n      if(width >= screenSm && width < screenMd)\r\n      {\r\n        return FE.SM\r\n      }\r\n      if(width >= screenMd && width < screenLg)\r\n      {\r\n        return FE.MD\r\n      }\r\n      if(width >= screenLg)\r\n      {\r\n        return FE.LG\r\n      }\r\n    }\r\n    catch (ex) {\r\n      return FE.LG\r\n    }\r\n  }\r\n\r\n  function isTouch() {\r\n\r\n    return 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch\r\n  }\r\n\r\n  function isURL(url) {\r\n    // Check if it starts with http.\r\n    if (!/^(https?:|ftps?:|)\\/\\//i.test(url)) {\r\n      return false\r\n    }\r\n\r\n    url = String(url)\r\n      .replace(/</g, '%3C')\r\n      .replace(/>/g, '%3E')\r\n      .replace(/\"/g, '%22')\r\n      .replace(/ /g, '%20')\r\n\r\n    const test_reg = new RegExp(`^${FE.LinkRegExHTTP}${FE.LinkRegExEnd}$`, 'gi')\r\n\r\n    return test_reg.test(url)\r\n  }\r\n\r\n  function isEmail(url) {\r\n    if (/^(https?:|ftps?:|)\\/\\//i.test(url)) {\r\n      return false\r\n    }\r\n\r\n    return FE.MAIL_REGEX.test(url)\r\n  }\r\n\r\n  // Sanitize URL.\r\n  function sanitizeURL(url) {\r\n    const local_path = /^([A-Za-z]:(\\\\){1,2}|[A-Za-z]:((\\\\){1,2}[^\\\\]+)+)(\\\\)?$/i\r\n\r\n    if (/^(https?:|ftps?:|)\\/\\//i.test(url)) {\r\n      return url\r\n    }\r\n    else if (local_path.test(url)) {\r\n      return url\r\n    }\r\n    else if (new RegExp(`^(${FE.LinkProtocols.join('|')}):`, 'i').test(url)) {\r\n      return url\r\n    }\r\n\r\n    url = encodeURIComponent(url)\r\n      .replace(/%23/g, '#')\r\n      .replace(/%2F/g, '/')\r\n      .replace(/%25/g, '%')\r\n      .replace(/mailto%3A/gi, 'mailto:')\r\n      .replace(/file%3A/gi, 'file:')\r\n      .replace(/sms%3A/gi, 'sms:')\r\n      .replace(/tel%3A/gi, 'tel:')\r\n      .replace(/notes%3A/gi, 'notes:')\r\n      .replace(/data%3Aimage/gi, 'data:image')\r\n      .replace(/blob%3A/gi, 'blob:')\r\n      .replace(/%3A(\\d)/gi, ':$1')\r\n      .replace(/webkit-fake-url%3A/gi, 'webkit-fake-url:')\r\n      .replace(/%3F/g, '?')\r\n      .replace(/%3D/g, '=')\r\n      .replace(/%26/g, '&')\r\n      .replace(/&amp;/g, '&')\r\n      .replace(/%2C/g, ',')\r\n      .replace(/%3B/g, ';')\r\n      .replace(/%2B/g, '+')\r\n      .replace(/%40/g, '@')\r\n      .replace(/%5B/g, '[')\r\n      .replace(/%5D/g, ']')\r\n      .replace(/%7B/g, '{')\r\n      .replace(/%7D/g, '}')\r\n\r\n    return url\r\n  }\r\n\r\n  function isArray(obj) {\r\n\r\n    return obj && !Object.prototype.propertyIsEnumerable.call(obj, 'length') &&\r\n\r\n        typeof obj === 'object' && typeof obj.length === 'number'\r\n  }\r\n\r\n  /*\r\n   * Transform RGB color to hex value.\r\n   */\r\n  function RGBToHex(rgb) {\r\n    function hex(x) {\r\n\r\n      return `0${parseInt(x, 10).toString(16)}`.slice(-2)\r\n    }\r\n\r\n    try {\r\n\r\n      if (!rgb || rgb === 'transparent') {\r\n        return ''\r\n      }\r\n\r\n      if (/^#[0-9A-F]{6}$/i.test(rgb)) {\r\n        return rgb\r\n      }\r\n\r\n      rgb = rgb.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/)\r\n\r\n      return `#${hex(rgb[1])}${hex(rgb[2])}${hex(rgb[3])}`.toUpperCase()\r\n    }\r\n    catch (ex) {\r\n\r\n      return null\r\n    }\r\n  }\r\n\r\n  function HEXtoRGB(hex) {\r\n\r\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\r\n\r\n    hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b)\r\n\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\r\n\r\n    return result ? `rgb(${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)})` : ''\r\n  }\r\n\r\n  /*\r\n   * Get block alignment.\r\n   */\r\n  let default_alignment\r\n\r\n  function getAlignment($block) {\r\n    if (!$block.css) {\r\n      $block = $($block)\r\n    }\r\n\r\n    let alignment = ($block.css('text-align') || '').replace(/-(.*)-/g, '')\r\n\r\n    // Detect rtl.\r\n    if (['left', 'right', 'justify', 'center'].indexOf(alignment) < 0) {\r\n      if (!default_alignment) {\r\n        const $div = $(`<div dir=\"${editor.opts.direction === 'rtl' ? 'rtl' : 'auto'}\" style=\"text-align: ${editor.$el.css('text-align')}; position: fixed; left: -3000px;\"><span id=\"s1\">.</span><span id=\"s2\">.</span></div>`)\r\n        $('body').first().append($div)\r\n\r\n        const l1 = $div.find('#s1').get(0).getBoundingClientRect().left\r\n        const l2 = $div.find('#s2').get(0).getBoundingClientRect().left\r\n\r\n        $div.remove()\r\n\r\n        default_alignment = l1 < l2 ? 'left' : 'right'\r\n      }\r\n\r\n      alignment = default_alignment\r\n    }\r\n\r\n    return alignment\r\n  }\r\n\r\n  /**\r\n   * Check if is mac.\r\n   */\r\n  let is_mac = null\r\n\r\n  function isMac() {\r\n    if (is_mac === null) {\r\n      is_mac = navigator.platform.toUpperCase().indexOf('MAC') >= 0\r\n    }\r\n\r\n    return is_mac\r\n  }\r\n\r\n  function scrollTop() {\r\n\r\n    // Firefox, Chrome, Opera, Safari\r\n    if (editor.o_win.pageYOffset) {\r\n      return editor.o_win.pageYOffset\r\n    }\r\n\r\n    // Internet Explorer 6 - standards mode\r\n    if (editor.o_doc.documentElement && editor.o_doc.documentElement.scrollTop) {\r\n      return editor.o_doc.documentElement.scrollTop\r\n    }\r\n\r\n    // Internet Explorer 6, 7 and 8\r\n    if (editor.o_doc.body.scrollTop) {\r\n      return editor.o_doc.body.scrollTop\r\n    }\r\n\r\n    return 0\r\n  }\r\n\r\n  function scrollLeft() {\r\n\r\n    // Firefox, Chrome, Opera, Safari\r\n    if (editor.o_win.pageXOffset) {\r\n      return editor.o_win.pageXOffset\r\n    }\r\n\r\n    // Internet Explorer 6 - standards mode\r\n    if (editor.o_doc.documentElement && editor.o_doc.documentElement.scrollLeft) {\r\n      return editor.o_doc.documentElement.scrollLeft\r\n    }\r\n\r\n    // Internet Explorer 6, 7 and 8\r\n    if (editor.o_doc.body.scrollLeft) {\r\n      return editor.o_doc.body.scrollLeft\r\n    }\r\n\r\n    return 0\r\n  }\r\n\r\n  // https://stackoverflow.com/a/7557433/1806855\r\n  function isInViewPort(el) {\r\n    let rect = el.getBoundingClientRect()\r\n\r\n    // Round for FF.\r\n    rect = {\r\n      top: Math.round(rect.top),\r\n      bottom: Math.round(rect.bottom)\r\n    }\r\n\r\n    return (\r\n      rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) || // Top is higher than 0 and bottom is smaller than the window height.\r\n        rect.top <= 0 && rect.bottom >= (window.innerHeight || document.documentElement.clientHeight) // Top is smaller than 0 and bottom is higher than window height.\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    editor.browser = _browser()\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    isIOS,\r\n    isMac,\r\n    isAndroid,\r\n    isBlackberry,\r\n    isWindowsPhone,\r\n    isMobile,\r\n    isEmail,\r\n    requestAnimationFrame,\r\n    getPX,\r\n    screenSize,\r\n    isTouch,\r\n    sanitizeURL,\r\n    isArray,\r\n    RGBToHex,\r\n    HEXtoRGB,\r\n    isURL,\r\n    getAlignment,\r\n    scrollTop,\r\n    scrollLeft,\r\n    isInViewPort\r\n  }\r\n}\r\n","import './helpers.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.MODULES.events = function (editor) {\r\n  const $ = editor.$\r\n\r\n  const _events = {}\r\n  let _do_blur\r\n\r\n  function _assignEvent($el, evs, handler) {\r\n    $on($el, evs, handler)\r\n  }\r\n\r\n  function _forPaste() {\r\n    _assignEvent(editor.$el, 'cut copy paste beforepaste', (e) => {\r\n      trigger(e.type, [e])\r\n    })\r\n  }\r\n\r\n  function _forElement() {\r\n    _assignEvent(editor.$el, 'click mouseup mousemove mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart', (e) => {\r\n      trigger(e.type, [e])\r\n    })\r\n\r\n    on('mousedown', () => {\r\n      for (let i = 0; i < FE.INSTANCES.length; i++) {\r\n        if (FE.INSTANCES[i] !== editor && FE.INSTANCES[i].popups && FE.INSTANCES[i].popups.areVisible()) {\r\n          FE.INSTANCES[i].$el.find('.fr-marker').remove()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  function _forKeys() {\r\n\r\n    // Map events.\r\n    _assignEvent(editor.$el, 'keydown keypress keyup input', (e) => {\r\n      trigger(e.type, [e])\r\n    })\r\n  }\r\n\r\n  function _forWindow() {\r\n    _assignEvent(editor.$win, editor._mousedown, (e) => {\r\n      trigger('window.mousedown', [e])\r\n      enableBlur()\r\n    })\r\n\r\n    _assignEvent(editor.$win, editor._mouseup, (e) => {\r\n      trigger('window.mouseup', [e])\r\n    })\r\n\r\n    _assignEvent(editor.$win, 'cut copy keydown keyup touchmove touchend', (e) => {\r\n      trigger(`window.${e.type}`, [e])\r\n    })\r\n  }\r\n\r\n  function _forDocument() {\r\n    _assignEvent(editor.$doc, 'dragend drop', (e) => {\r\n      trigger(`document.${e.type}`, [e])\r\n    })\r\n  }\r\n\r\n  function focus(do_focus) {\r\n    let info\r\n\r\n    if (typeof do_focus === 'undefined') {\r\n      do_focus = true\r\n    }\r\n\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    // Focus the editor window.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.$win.get(0).focus()\r\n    }\r\n\r\n    // If there is focus, stop.\r\n    if (editor.core.hasFocus()) {\r\n      return false\r\n    }\r\n\r\n    // If there is no focus, then force focus.\r\n    if (!editor.core.hasFocus() && do_focus) {\r\n      const st = editor.$win.scrollTop()\r\n\r\n      // Hack to prevent scrolling IE.\r\n      if (editor.browser.msie && editor.$box) {\r\n        editor.$box.css('position', 'fixed')\r\n      }\r\n\r\n      // hack to prevent scrolling.\r\n      if (editor.browser.msie && editor.$wp) {\r\n        editor.$wp.css('overflow', 'visible')\r\n      }\r\n\r\n      if (editor.browser.msie && editor.$sc) editor.$sc.css('position', 'fixed');\r\n\r\n      disableBlur()\r\n      editor.el.focus()\r\n      editor.events.trigger('focus')\r\n      enableBlur()\r\n\r\n      // Revert position IE.\r\n      if (editor.browser.msie && editor.$sc) editor.$sc.css('position', '');\r\n\r\n      // Revert position.\r\n      if (editor.browser.msie && editor.$box) {\r\n        editor.$box.css('position', '')\r\n      }\r\n\r\n      // Revert scroll.\r\n      if (editor.browser.msie && editor.$wp) {\r\n        editor.$wp.css('overflow', 'auto')\r\n      }\r\n\r\n      if (st !== editor.$win.scrollTop()) {\r\n        editor.$win.scrollTop(st)\r\n      }\r\n\r\n      info = editor.selection.info(editor.el)\r\n\r\n      // If selection is at start, we should make sure we're in the first block tag.\r\n      if (!info.atStart) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    // Don't go further if we haven't focused or there are markers.\r\n    if (!editor.core.hasFocus() || editor.$el.find('.fr-marker').length > 0) {\r\n\r\n      return false\r\n    }\r\n\r\n    info = editor.selection.info(editor.el)\r\n\r\n    if (info.atStart && editor.selection.isCollapsed()) {\r\n      if (editor.html.defaultTag() !== null) {\r\n        const marker = editor.markers.insert()\r\n\r\n        if (marker && !editor.node.blockParent(marker)) {\r\n          $(marker).remove()\r\n\r\n          const element = editor.$el.find(editor.html.blockTagsQuery()).get(0)\r\n\r\n          if (element) {\r\n            $(element).prepend(FE.MARKERS)\r\n            editor.selection.restore()\r\n          }\r\n        }\r\n        else if (marker) {\r\n          $(marker).remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let focused = false\r\n\r\n  function _forFocus() {\r\n    _assignEvent(editor.$el, 'focus', (e) => {\r\n      if (blurActive()) {\r\n        focus(false)\r\n\r\n        if (focused === false) {\r\n          trigger(e.type, [e])\r\n        }\r\n      }\r\n    })\r\n\r\n    _assignEvent(editor.$el, 'blur', (e) => {\r\n      if (blurActive() /* && document.activeElement !== this */) {\r\n        if (focused === true) {\r\n          trigger(e.type, [e])\r\n          enableBlur()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Prevent blur when clicking contenteditable.\r\n    $on(editor.$el, 'mousedown', '[contenteditable=\"true\"]', function () {\r\n      disableBlur();\r\n      editor.$el.blur();\r\n    })\r\n\r\n    on('focus', () => {\r\n      focused = true\r\n    })\r\n\r\n    on('blur', () => {\r\n      focused = false\r\n    })\r\n  }\r\n\r\n  function _forMouse() {\r\n    if (editor.helpers.isMobile()) {\r\n      editor._mousedown = 'touchstart'\r\n      editor._mouseup = 'touchend'\r\n      editor._move = 'touchmove'\r\n      editor._mousemove = 'touchmove'\r\n    }\r\n    else {\r\n      editor._mousedown = 'mousedown'\r\n      editor._mouseup = 'mouseup'\r\n      editor._move = ''\r\n      editor._mousemove = 'mousemove'\r\n    }\r\n  }\r\n\r\n  function _buttonMouseDown(e) {\r\n    const $btn = $(e.currentTarget)\r\n\r\n    if (editor.edit.isDisabled() || editor.node.hasClass($btn.get(0), 'fr-disabled')) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Not click button.\r\n    if (e.type === 'mousedown' && e.which !== 1) {\r\n      return true\r\n    }\r\n\r\n    // Scroll in list.\r\n    if (!editor.helpers.isMobile()) {\r\n      e.preventDefault()\r\n    }\r\n\r\n    if ((editor.helpers.isAndroid() || editor.helpers.isWindowsPhone()) && $btn.parents('.fr-dropdown-menu').length === 0) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    }\r\n\r\n    // Simulate click.\r\n    $btn.addClass('fr-selected')\r\n\r\n    editor.events.trigger('commands.mousedown', [$btn])\r\n  }\r\n\r\n  function _buttonMouseUp(e, handler) {\r\n    const $btn = $(e.currentTarget)\r\n\r\n    if (editor.edit.isDisabled() || editor.node.hasClass($btn.get(0), 'fr-disabled')) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    if (e.type === 'mouseup' && e.which !== 1) {\r\n      return true\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1877\r\n    // when you click the button and drag to the other button, current target would be different than clicked button\r\n    if (editor.button.getButtons('.fr-selected', true).get(0) == $btn.get(0) && !editor.node.hasClass($btn.get(0), 'fr-selected')) {\r\n      return true\r\n    }\r\n\r\n    if (e.type !== 'touchmove') {\r\n      e.stopPropagation()\r\n      e.stopImmediatePropagation()\r\n      e.preventDefault()\r\n\r\n      // Simulate click.\r\n      if (!editor.node.hasClass($btn.get(0), 'fr-selected')) {\r\n        editor.button.getButtons('.fr-selected', true).removeClass('fr-selected')\r\n\r\n        return false\r\n      }\r\n      editor.button.getButtons('.fr-selected', true).removeClass('fr-selected')\r\n\r\n      if ($btn.data('dragging') || $btn.attr('disabled')) {\r\n        $btn.removeData('dragging')\r\n\r\n        return false\r\n      }\r\n\r\n      const timeout = $btn.data('timeout')\r\n\r\n      if (timeout) {\r\n        clearTimeout(timeout)\r\n        $btn.removeData('timeout')\r\n      }\r\n\r\n      handler.apply(editor, [e])\r\n    }\r\n    else if (!$btn.data('timeout')) {\r\n      $btn.data('timeout', setTimeout(() => {\r\n        $btn.data('dragging', true)\r\n      }, 100))\r\n    }\r\n  }\r\n\r\n  function enableBlur() {\r\n    _do_blur = true\r\n  }\r\n\r\n  function disableBlur() {\r\n    _do_blur = false\r\n  }\r\n\r\n  function blurActive() {\r\n    return _do_blur\r\n  }\r\n\r\n  /**\r\n   * Bind click on an element.\r\n   */\r\n  function bindClick($element, selector, handler) {\r\n    $on($element, editor._mousedown, selector, (e) => {\r\n      if (!editor.edit.isDisabled()) {\r\n        _buttonMouseDown(e)\r\n      }\r\n    }, true)\r\n\r\n    $on($element, `${editor._mouseup} ${editor._move}`, selector, (e) => {\r\n      if (!editor.edit.isDisabled()) {\r\n        _buttonMouseUp(e, handler)\r\n      }\r\n    }, true)\r\n\r\n    $on($element, 'mousedown click mouseup', selector, (e) => {\r\n      if (!editor.edit.isDisabled()) {\r\n        e.stopPropagation()\r\n      }\r\n    }, true)\r\n\r\n    on('window.mouseup', () => {\r\n      if (!editor.edit.isDisabled()) {\r\n        $element.find(selector).removeClass('fr-selected')\r\n        enableBlur()\r\n      }\r\n    })\r\n\r\n    $on($element, 'mouseover', selector, function () {\r\n      if ($(this).hasClass('fr-options')) {\r\n        $(this).prev('.fr-btn').addClass('fr-btn-hover')\r\n      }\r\n\r\n      if ($(this).next('.fr-btn').hasClass('fr-options')) {\r\n        $(this).next('.fr-btn').addClass('fr-btn-hover')\r\n      }\r\n    })\r\n\r\n    $on($element, 'mouseout', selector, function () {\r\n      if ($(this).hasClass('fr-options')) {\r\n        $(this).prev('.fr-btn').removeClass('fr-btn-hover')\r\n      }\r\n\r\n      if ($(this).next('.fr-btn').hasClass('fr-options')) {\r\n        $(this).next('.fr-btn').removeClass('fr-btn-hover')\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Add event.\r\n   */\r\n  function on(name, callback, first) {\r\n    const names = name.split(' ')\r\n\r\n    if (names.length > 1) {\r\n      for (let i = 0; i < names.length; i++) {\r\n        on(names[i], callback, first)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    if (typeof first === 'undefined') {\r\n      first = false\r\n    }\r\n\r\n    let callbacks\r\n\r\n    if (name.indexOf('shared.') !== 0) {\r\n      _events[name] = _events[name] || []\r\n      callbacks = _events[name]\r\n    }\r\n    else {\r\n      editor.shared._events[name] = editor.shared._events[name] || []\r\n      callbacks = editor.shared._events[name]\r\n    }\r\n\r\n    if (first) {\r\n      callbacks.unshift(callback)\r\n    }\r\n    else {\r\n      callbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  let $_events = []\r\n\r\n  function $on($el, evs, selector, callback, shared) {\r\n    if (typeof selector === 'function') {\r\n      shared = callback\r\n      callback = selector\r\n      selector = false\r\n    }\r\n\r\n    const ary = !shared ? $_events : editor.shared.$_events\r\n    const id = !shared ? editor.id : editor.sid\r\n\r\n    const eventName = `${evs.trim().split(' ').join(`.ed${id} `)}.ed${id}`\r\n\r\n    if (!selector) {\r\n      $el.on(eventName, callback)\r\n    }\r\n    else {\r\n      $el.on(eventName, selector, callback)\r\n    }\r\n\r\n    ary.push([$el, eventName])\r\n  }\r\n\r\n  function _$off(evs) {\r\n    for (let i = 0; i < evs.length; i++) {\r\n      evs[i][0].off(evs[i][1])\r\n    }\r\n  }\r\n\r\n  function $off() {\r\n    _$off($_events)\r\n    $_events = []\r\n\r\n    if (editor.shared.count === 0) {\r\n      _$off(editor.shared.$_events)\r\n      editor.shared.$_events = []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Trigger an event.\r\n   */\r\n  function trigger(name, args, force) {\r\n    if (!editor.edit.isDisabled() || force) {\r\n      let callbacks\r\n\r\n      if (name.indexOf('shared.') !== 0) {\r\n        callbacks = _events[name]\r\n      }\r\n      else {\r\n        if (editor.shared.count > 0) {\r\n          return false\r\n        }\r\n\r\n        callbacks = editor.shared._events[name]\r\n      }\r\n\r\n      let val\r\n\r\n      if (callbacks) {\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n          val = callbacks[i].apply(editor, args)\r\n\r\n          if (val === false) {\r\n            return false\r\n          }\r\n        }\r\n      }\r\n\r\n      if (editor.opts.events && editor.opts.events[name]) {\r\n        val = editor.opts.events[name].apply(editor, args)\r\n\r\n        if (val === false) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      return val\r\n    }\r\n  }\r\n\r\n  function chainTrigger(name, param, force) {\r\n    if (!editor.edit.isDisabled() || force) {\r\n      let callbacks\r\n\r\n      if (name.indexOf('shared.') !== 0) {\r\n        callbacks = _events[name]\r\n      }\r\n      else {\r\n        if (editor.shared.count > 0) {\r\n          return false\r\n        }\r\n        callbacks = editor.shared._events[name]\r\n      }\r\n\r\n      let resp\r\n\r\n      if (callbacks) {\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n\r\n          // Get the callback response.\r\n          resp = callbacks[i].apply(editor, [param])\r\n\r\n          // If callback response is defined then assign it to param.\r\n          if (typeof resp !== 'undefined') {\r\n            param = resp\r\n          }\r\n        }\r\n      }\r\n\r\n      if (editor.opts.events && editor.opts.events[name]) {\r\n        resp = editor.opts.events[name].apply(editor, [param])\r\n\r\n        if (typeof resp !== 'undefined') {\r\n          param = resp\r\n        }\r\n      }\r\n\r\n      return param\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy\r\n   */\r\n  function _destroy() {\r\n\r\n    // Clear the events list.\r\n    for (const k in _events) {\r\n      if (Object.prototype.hasOwnProperty.call(_events, k)) {\r\n        delete _events[k]\r\n      }\r\n    }\r\n  }\r\n\r\n  function _sharedDestroy() {\r\n    for (const k in editor.shared._events) {\r\n      if (Object.prototype.hasOwnProperty.call(editor.shared._events, k)) {\r\n        delete editor.shared._events[k]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    editor.shared.$_events = editor.shared.$_events || []\r\n    editor.shared._events = {}\r\n\r\n    _forMouse()\r\n\r\n    _forElement()\r\n    _forWindow()\r\n    _forDocument()\r\n    _forKeys()\r\n\r\n    _forFocus()\r\n    enableBlur()\r\n\r\n    _forPaste()\r\n\r\n    on('destroy', _destroy)\r\n    on('shared.destroy', _sharedDestroy)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    on,\r\n    trigger,\r\n    bindClick,\r\n    disableBlur,\r\n    enableBlur,\r\n    blurActive,\r\n    focus,\r\n    chainTrigger,\r\n    $on,\r\n    $off\r\n  }\r\n}\r\n","import './events.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  indentMargin: 20\r\n})\r\n\r\nFE.COMMANDS = {\r\n  bold: {\r\n    title: 'Bold',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('strong')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  italic: {\r\n    title: 'Italic',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('em')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  underline: {\r\n    title: 'Underline',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('u')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  strikeThrough: {\r\n    title: 'Strikethrough',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('s')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  subscript: {\r\n    title: 'Subscript',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('sub')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  superscript: {\r\n    title: 'Superscript',\r\n    toggle: true,\r\n    refresh($btn) {\r\n      const format = this.format.is('sup')\r\n      $btn.toggleClass('fr-active', format).attr('aria-pressed', format)\r\n    }\r\n  },\r\n  outdent: {\r\n    title: 'Decrease Indent'\r\n  },\r\n  indent: {\r\n    title: 'Increase Indent'\r\n  },\r\n  undo: {\r\n    title: 'Undo',\r\n    undo: false,\r\n    forcedRefresh: true,\r\n    disabled: true\r\n  },\r\n  redo: {\r\n    title: 'Redo',\r\n    undo: false,\r\n    forcedRefresh: true,\r\n    disabled: true\r\n  },\r\n  insertHR: {\r\n    title: 'Insert Horizontal Line'\r\n  },\r\n  clearFormatting: {\r\n    title: 'Clear Formatting'\r\n  },\r\n  selectAll: {\r\n    title: 'Select All',\r\n    undo: false\r\n  },\r\n  moreText: {\r\n    title: 'More Text',\r\n    undo: false\r\n  },\r\n  moreParagraph: {\r\n    title: 'More Paragraph',\r\n    undo: false\r\n  },\r\n  moreRich: {\r\n    title: 'More Rich',\r\n    undo: false\r\n  },\r\n  moreMisc: {\r\n    title: 'More Misc',\r\n    undo: false\r\n  }\r\n}\r\n\r\nFE.RegisterCommand = function (name, info) {\r\n  FE.COMMANDS[name] = info\r\n}\r\n\r\nFE.MODULES.commands = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function _createDefaultTag(empty) {\r\n    if (editor.html.defaultTag()) {\r\n      empty = `<${editor.html.defaultTag()}>${empty}</${editor.html.defaultTag()}>`\r\n    }\r\n\r\n    return empty\r\n  }\r\n\r\n  const mapping = {\r\n    bold() {\r\n      _execCommand('bold', 'strong')\r\n    },\r\n\r\n    subscript() {\r\n\r\n      // Remove sup.\r\n      if (editor.format.is('sup')) {\r\n        editor.format.remove('sup')\r\n      }\r\n\r\n      _execCommand('subscript', 'sub')\r\n    },\r\n\r\n    superscript() {\r\n\r\n      // Remove sub.\r\n      if (editor.format.is('sub')) {\r\n        editor.format.remove('sub')\r\n      }\r\n\r\n      _execCommand('superscript', 'sup')\r\n    },\r\n\r\n    italic() {\r\n      _execCommand('italic', 'em')\r\n    },\r\n\r\n    strikeThrough() {\r\n      _execCommand('strikeThrough', 's')\r\n    },\r\n\r\n    underline() {\r\n      _execCommand('underline', 'u')\r\n    },\r\n\r\n    undo() {\r\n      editor.undo.run()\r\n    },\r\n\r\n    redo() {\r\n      editor.undo.redo()\r\n    },\r\n\r\n    indent() {\r\n      _processIndent(1)\r\n    },\r\n\r\n    outdent() {\r\n      _processIndent(-1)\r\n    },\r\n\r\n    show() {\r\n      if (editor.opts.toolbarInline) {\r\n        editor.toolbar.showInline(null, true)\r\n      }\r\n    },\r\n\r\n    insertHR() {\r\n      editor.selection.remove()\r\n\r\n      let empty = ''\r\n\r\n      if (editor.core.isEmpty()) {\r\n        empty = '<br>'\r\n        empty = _createDefaultTag(empty)\r\n      }\r\n\r\n      editor.html.insert(`<hr id=\"fr-just\" class=\"fr-just\">${empty}`)\r\n      const $hr = editor.$el.find('hr#fr-just').length ? editor.$el.find('hr#fr-just') : editor.$el.find('.fr-just')\r\n      $hr.removeAttr('id')\r\n      $hr.removeAttr('class')\r\n      let check\r\n\r\n      // Make sure we can type after HR.\r\n      if ($hr.next().length === 0) {\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (default_tag) {\r\n          $hr.after($(editor.doc.createElement(default_tag)).append('<br>').get(0))\r\n        }\r\n        else {\r\n          $hr.after('<br>')\r\n        }\r\n      }\r\n\r\n      if ($hr.prev().is('hr')) {\r\n        check = editor.selection.setAfter($hr.get(0), false)\r\n      }\r\n      else if ($hr.next().is('hr')) {\r\n        check = editor.selection.setBefore($hr.get(0), false)\r\n      }\r\n      else {\r\n        if (!editor.selection.setAfter($hr.get(0), false)) {\r\n          editor.selection.setBefore($hr.get(0), false)\r\n        }\r\n      }\r\n\r\n      // Added fix for this issue https://github.com/froala-labs/froala-editor-js-2/issues/384\r\n      if (!check && typeof check !== 'undefined') {\r\n        empty = `${FE.MARKERS}<br>`\r\n        empty = _createDefaultTag(empty)\r\n        $hr.after(empty)\r\n      }\r\n\r\n      editor.selection.restore()\r\n    },\r\n\r\n    clearFormatting() {\r\n      editor.format.remove()\r\n    },\r\n\r\n    selectAll() {\r\n      editor.doc.execCommand('selectAll', false, false)\r\n    },\r\n\r\n    moreText(cmd) {\r\n      _moreExec(cmd)\r\n    },\r\n\r\n    moreParagraph(cmd) {\r\n      _moreExec(cmd)\r\n    },\r\n\r\n    moreRich(cmd) {\r\n      _moreExec(cmd)\r\n    },\r\n\r\n    moreMisc(cmd) {\r\n      _moreExec(cmd)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executes more button commands\r\n   */\r\n  function _moreExec(cmd) {\r\n    let $btn = editor.$tb.find(`[data-cmd=${cmd}]`)\r\n\r\n    // Toggle more button in the toolbar\r\n    _toggleMoreButton($btn)\r\n\r\n    // Set the height of all more toolbars\r\n    editor.toolbar.setMoreToolbarsHeight()\r\n  }\r\n\r\n  /**\r\n   * Display/Hide the toolbar buttons on clicking the more button\r\n   */\r\n  function _toggleMoreButton($btn) {\r\n\r\n    // Get the corresponding button group for that more button\r\n    const $buttonGroup = editor.$tb.find(`.fr-more-toolbar[data-name=\"${$btn.attr('data-group-name')}\"]`)\r\n\r\n    // Hide all button groups before opening any one\r\n    editor.$tb.find('.fr-open').not($btn).removeClass('fr-open')\r\n    $btn.toggleClass('fr-open')\r\n\r\n    // Make sure we hide height properly.\r\n    editor.$tb.find('.fr-more-toolbar').removeClass('fr-overflow-visible')\r\n\r\n    // We already have a more toolbar expanded.\r\n    if (editor.$tb.find('.fr-expanded').not($buttonGroup).length) {\r\n      // Toggle existing toolbar.\r\n      editor.$tb.find('.fr-expanded').toggleClass('fr-expanded')\r\n\r\n      // Open the new toolbar.\r\n      $buttonGroup.toggleClass('fr-expanded')\r\n    }\r\n    else {\r\n      // Open toolbar.\r\n      $buttonGroup.toggleClass('fr-expanded')\r\n\r\n      editor.$box.toggleClass('fr-toolbar-open')\r\n      editor.$tb.toggleClass('fr-toolbar-open')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Exec command.\r\n   */\r\n  function exec(cmd, params) {\r\n    // Trigger before command to see if to execute the default callback.\r\n    if (editor.events.trigger('commands.before', $.merge([cmd], params || [])) !== false) {\r\n\r\n      // Get the callback.\r\n      const callback = FE.COMMANDS[cmd] && FE.COMMANDS[cmd].callback || mapping[cmd]\r\n\r\n      let focus = true\r\n      let accessibilityFocus = false\r\n\r\n      if (FE.COMMANDS[cmd]) {\r\n        if (typeof FE.COMMANDS[cmd].focus !== 'undefined') {\r\n          focus = FE.COMMANDS[cmd].focus\r\n        }\r\n\r\n        if (typeof FE.COMMANDS[cmd].accessibilityFocus !== 'undefined') {\r\n          accessibilityFocus = FE.COMMANDS[cmd].accessibilityFocus\r\n        }\r\n      }\r\n\r\n      // Make sure we have focus.\r\n      if (\r\n        !editor.core.hasFocus() && focus && !editor.popups.areVisible() ||\r\n        !editor.core.hasFocus() && accessibilityFocus && editor.accessibility.hasFocus()\r\n      ) {\r\n\r\n        // Focus in the editor at any position.\r\n        editor.events.focus(true)\r\n      }\r\n\r\n      // Callback.\r\n      // Save undo step.\r\n      if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].undo !== false) {\r\n        if (editor.$el.find('.fr-marker').length) {\r\n          editor.events.disableBlur()\r\n          editor.selection.restore()\r\n        }\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n\r\n      if (callback) {\r\n        callback.apply(editor, $.merge([cmd], params || []))\r\n      }\r\n\r\n      // Trigger after command.\r\n      editor.events.trigger('commands.after', $.merge([cmd], params || []))\r\n\r\n      // Save undo step again.\r\n      if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].undo !== false) {\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Exex default.\r\n   */\r\n  function _execCommand(cmd, tag) {\r\n    editor.format.toggle(tag)\r\n  }\r\n\r\n  function _processIndent(indent) {\r\n    editor.selection.save()\r\n    editor.html.wrap(true, true, true, true)\r\n    editor.selection.restore()\r\n\r\n    const blocks = editor.selection.blocks()\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      if (blocks[i].tagName !== 'LI' || blocks[i].parentNode.tagName !== 'LI') {\r\n        let $block = $(blocks[i]);\r\n        if (blocks[i].tagName != 'LI' && blocks[i].parentNode.tagName == 'LI') {\r\n          $block = $(blocks[i].parentNode);\r\n        }\r\n        const prop = editor.opts.direction === 'rtl' || $block.css('direction') === 'rtl' ? 'margin-right' : 'margin-left'\r\n\r\n        const margin_left = editor.helpers.getPX($block.css(prop))\r\n\r\n        // Do not allow text to go out of the editor view.\r\n        if ($block.width() < 2 * editor.opts.indentMargin && indent > 0) {\r\n          continue\r\n        }\r\n\r\n        $block.css(prop, Math.max(margin_left + indent * editor.opts.indentMargin, 0) || '')\r\n        $block.removeClass('fr-temp-div')\r\n      }\r\n    }\r\n\r\n    editor.selection.save()\r\n    editor.html.unwrap()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function callExec(k) {\r\n    return function () {\r\n      exec(k)\r\n    }\r\n  }\r\n\r\n  const resp = {}\r\n\r\n  for (const k in mapping) {\r\n    if (Object.prototype.hasOwnProperty.call(mapping, k)) {\r\n      resp[k] = callExec(k)\r\n    }\r\n  }\r\n\r\n  function _init() {\r\n\r\n    // Prevent typing in HR.\r\n    editor.events.on('keydown', (e) => {\r\n      const el = editor.selection.element()\r\n\r\n      if (el && el.tagName === 'HR' && !editor.keys.isArrow(e.which)) {\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    editor.events.on('keyup', (e) => {\r\n      const el = editor.selection.element()\r\n\r\n      if (el && el.tagName === 'HR') {\r\n        if (e.which === FE.KEYCODE.ARROW_LEFT || e.which === FE.KEYCODE.ARROW_UP) {\r\n          if (el.previousSibling) {\r\n            if (!editor.node.isBlock(el.previousSibling)) {\r\n              $(el).before(FE.MARKERS)\r\n            }\r\n            else {\r\n              editor.selection.setAtEnd(el.previousSibling)\r\n            }\r\n\r\n            editor.selection.restore()\r\n\r\n            return false\r\n          }\r\n        }\r\n        else if (e.which === FE.KEYCODE.ARROW_RIGHT || e.which === FE.KEYCODE.ARROW_DOWN) {\r\n          if (el.nextSibling) {\r\n            if (!editor.node.isBlock(el.nextSibling)) {\r\n              $(el).after(FE.MARKERS)\r\n            }\r\n            else {\r\n              editor.selection.setAtStart(el.nextSibling)\r\n            }\r\n\r\n            editor.selection.restore()\r\n\r\n            return false\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // Do not allow mousedown on HR.\r\n    editor.events.on('mousedown', (e) => {\r\n      if (e.target && e.target.tagName === 'HR') {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        return false\r\n      }\r\n    })\r\n\r\n    // If somehow focus gets in HR remove it.\r\n    editor.events.on('mouseup', () => {\r\n      const s_el = editor.selection.element()\r\n      const e_el = editor.selection.endElement()\r\n\r\n      if (s_el === e_el && s_el && s_el.tagName === 'HR') {\r\n        if (s_el.nextSibling) {\r\n          if (!editor.node.isBlock(s_el.nextSibling)) {\r\n            $(s_el).after(FE.MARKERS)\r\n          }\r\n          else {\r\n            editor.selection.setAtStart(s_el.nextSibling)\r\n          }\r\n        }\r\n\r\n        editor.selection.restore()\r\n      }\r\n    })\r\n  }\r\n\r\n  return Object.assign(resp, {\r\n    exec,\r\n    _init\r\n  })\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.cursorLists = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Find the first li parent.\r\n   */\r\n  function _firstParentLI(node) {\r\n    let p_node = node\r\n\r\n    while (p_node.tagName !== 'LI') {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    return p_node\r\n  }\r\n\r\n  /**\r\n   * Find the first list parent.\r\n   */\r\n  function _firstParentList(node) {\r\n    let p_node = node\r\n\r\n    while (!editor.node.isList(p_node)) {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    return p_node\r\n  }\r\n\r\n\r\n  /**\r\n   * Do enter at the beginning of a list item.\r\n   */\r\n  function _startEnter(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    // Get previous and next siblings.\r\n    const next_li = li.nextSibling\r\n    const prev_li = li.previousSibling\r\n    const default_tag = editor.html.defaultTag()\r\n\r\n    let ul\r\n\r\n    // We are in a list item at the middle of the list or an list item that is not empty.\r\n    if (editor.node.isEmpty(li, true) && next_li) {\r\n      let o_str = ''\r\n      let c_str = ''\r\n      let p_node = marker.parentNode\r\n\r\n      // Create open / close string.\r\n      while (!editor.node.isList(p_node) && p_node.parentNode && (p_node.parentNode.tagName !== 'LI' || p_node.parentNode === li)) {\r\n        o_str = editor.node.openTagString(p_node) + o_str\r\n        c_str += editor.node.closeTagString(p_node)\r\n        p_node = p_node.parentNode\r\n      }\r\n\r\n      o_str = editor.node.openTagString(p_node) + o_str\r\n      c_str += editor.node.closeTagString(p_node)\r\n\r\n      let str = ''\r\n\r\n      if (p_node.parentNode && p_node.parentNode.tagName === 'LI') {\r\n        str = `${c_str}<li>${FE.MARKERS}<br>${o_str}`\r\n      }\r\n      else if (default_tag) {\r\n        str = `${c_str}<${default_tag}>${FE.MARKERS}<br></${default_tag}>${o_str}`\r\n      }\r\n      else {\r\n        str = `${c_str + FE.MARKERS}<br>${o_str}`\r\n      }\r\n\r\n      while (['UL', 'OL'].indexOf(p_node.tagName) < 0 || p_node.parentNode && p_node.parentNode.tagName === 'LI') {\r\n        p_node = p_node.parentNode\r\n      }\r\n\r\n      $(li).replaceWith('<span id=\"fr-break\"></span>')\r\n      let html = editor.node.openTagString(p_node) + $(p_node).html() + editor.node.closeTagString(p_node)\r\n      html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n      $(p_node).replaceWith(html)\r\n\r\n      editor.$el.find('li:empty').remove()\r\n    }\r\n    else if (prev_li && next_li || !editor.node.isEmpty(li, true)) {\r\n\r\n      let br_str = '<br>'\r\n      let nd = marker.parentNode\r\n\r\n      while (nd && nd.tagName !== 'LI') {\r\n        br_str = editor.node.openTagString(nd) + br_str + editor.node.closeTagString(nd)\r\n        nd = nd.parentNode\r\n      }\r\n\r\n      $(li).before(`<li>${br_str}</li>`)\r\n      $(marker).remove()\r\n    }\r\n\r\n    // There is no previous list item so transform the current list item to an empty line.\r\n    else if (!prev_li) {\r\n      ul = _firstParentList(li)\r\n\r\n      // We are in a nested list so add a new li before it.\r\n      if (ul.parentNode && ul.parentNode.tagName === 'LI') {\r\n        if (next_li) {\r\n          $(ul.parentNode).before(`${editor.node.openTagString(li) + FE.MARKERS}<br></li>`)\r\n        }\r\n        else {\r\n          $(ul.parentNode).after(`${editor.node.openTagString(li) + FE.MARKERS}<br></li>`)\r\n        }\r\n      }\r\n\r\n      // We are in a normal list. Add a new line before.\r\n      else if (default_tag) {\r\n        $(ul).before(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n      else {\r\n        $(ul).before(`${FE.MARKERS}<br>`)\r\n      }\r\n\r\n      // Remove the current li.\r\n      $(li).remove()\r\n    }\r\n\r\n    // There is no next_li item so transform the current list item to an empty line.\r\n    else {\r\n      ul = _firstParentList(li)\r\n\r\n      let new_str = `${FE.MARKERS}<br>`\r\n      let ndx = marker.parentNode\r\n\r\n      while (ndx && ndx.tagName !== 'LI') {\r\n        new_str = editor.node.openTagString(ndx) + new_str + editor.node.closeTagString(ndx)\r\n        ndx = ndx.parentNode\r\n      }\r\n\r\n      // We are in a nested lists so add a new li after it.\r\n      if (ul.parentNode && ul.parentNode.tagName === 'LI') {\r\n        $(ul.parentNode).after(`<li>${new_str}</li>`)\r\n      }\r\n\r\n      // We are in a normal list. Add a new line after.\r\n      else if (default_tag) {\r\n        $(ul).after(`<${default_tag}>${new_str}</${default_tag}>`)\r\n      }\r\n      else {\r\n        $(ul).after(new_str)\r\n      }\r\n\r\n      // Remove the current li.\r\n      $(li).remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enter at the middle of a list.\r\n   */\r\n  function _middleEnter(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    // Build the closing / opening list item string.\r\n    let str = ''\r\n    let node = marker\r\n    let o_str = ''\r\n    let c_str = ''\r\n    let add_invisible = false\r\n\r\n    while (node !== li) {\r\n      node = node.parentNode\r\n\r\n      const cls = node.tagName === 'A' && editor.cursor.isAtEnd(marker, node) ? 'fr-to-remove' : ''\r\n\r\n      if (!add_invisible && node != li && !editor.node.isBlock(node)) {\r\n        add_invisible = true\r\n        o_str = o_str + FE.INVISIBLE_SPACE\r\n      }\r\n\r\n      o_str = editor.node.openTagString($(node).clone().addClass(cls).get(0)) + o_str\r\n      c_str = editor.node.closeTagString(node) + c_str\r\n    }\r\n\r\n    // Add markers.\r\n    str = c_str + str + o_str + FE.MARKERS + (editor.opts.keepFormatOnDelete ? FE.INVISIBLE_SPACE : '')\r\n\r\n    // Build HTML.\r\n    $(marker).replaceWith('<span id=\"fr-break\"></span>')\r\n    let html = editor.node.openTagString(li) + $(li).html() + editor.node.closeTagString(li)\r\n    html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n    // Replace the current list item.\r\n    $(li).replaceWith(html)\r\n  }\r\n\r\n  /**\r\n   * Enter at the end of a list item.\r\n   */\r\n  function _endEnter(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    let end_str = FE.MARKERS\r\n    let start_str = ''\r\n    let node = marker\r\n\r\n    let add_invisible = false\r\n\r\n    while (node !== li) {\r\n      node = node.parentNode\r\n      \r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      // For next sibling list item it was adding unnecessary div tag of elder sibling list.\r\n      if(node.classList.contains('fr-img-space-wrap') || node.classList.contains('fr-img-space-wrap2')){\r\n        continue\r\n      }\r\n\r\n      const cls = node.tagName === 'A' && editor.cursor.isAtEnd(marker, node) ? 'fr-to-remove' : ''\r\n\r\n      if (!add_invisible && node !== li && !editor.node.isBlock(node)) {\r\n        add_invisible = true\r\n        start_str += FE.INVISIBLE_SPACE\r\n      }\r\n\r\n      start_str = editor.node.openTagString($(node).clone().addClass(cls).get(0)) + start_str\r\n      end_str += editor.node.closeTagString(node)\r\n    }\r\n\r\n    const str = start_str + end_str\r\n\r\n    $(marker).remove()\r\n    $(li).after(str)\r\n  }\r\n\r\n  /**\r\n   * Do backspace on a list item. This method is called only when wer are at the beginning of a LI.\r\n   */\r\n  function _backspace(marker) {\r\n    const li = _firstParentLI(marker)\r\n\r\n    // Get previous sibling.\r\n    let prev_li = li.previousSibling\r\n\r\n    // There is a previous li.\r\n    if (prev_li) {\r\n\r\n      // Get the li inside a nested list or inner block tags.\r\n      prev_li = $(prev_li).find(editor.html.blockTagsQuery()).get(-1) || prev_li\r\n\r\n      // Add markers.\r\n      $(marker).replaceWith(FE.MARKERS)\r\n\r\n      // Remove possible BR at the end of the previous list.\r\n      let contents = editor.node.contents(prev_li)\r\n\r\n      if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n        $(contents[contents.length - 1]).remove()\r\n      }\r\n\r\n      // Remove any nodes that might be wrapped.\r\n      $(li).find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n        if (this.parentNode === li) {\r\n          $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n        }\r\n      })\r\n\r\n      // Append the current list item content to the previous one.\r\n      let node = editor.node.contents(li)[0]\r\n      let tmp\r\n\r\n      while (node && !editor.node.isList(node)) {\r\n        tmp = node.nextSibling\r\n        $(prev_li).append(node)\r\n        node = tmp\r\n      }\r\n\r\n      prev_li = li.previousSibling\r\n\r\n      while (node) {\r\n        tmp = node.nextSibling\r\n        $(prev_li).append(node)\r\n        node = tmp\r\n      }\r\n\r\n      // Remove ending BR.\r\n      contents = editor.node.contents(prev_li)\r\n      if (contents.length > 1 && contents[contents.length - 1].tagName === 'BR') {\r\n        $(contents[contents.length - 1]).remove()\r\n      }\r\n\r\n      // Remove the current LI.\r\n      $(li).remove()\r\n    }\r\n\r\n    // No previous li.\r\n    else {\r\n      const ul = _firstParentList(li)\r\n\r\n      // Add markers.\r\n      $(marker).replaceWith(FE.MARKERS)\r\n\r\n      // Nested lists.\r\n      if (ul.parentNode && ul.parentNode.tagName === 'LI') {\r\n        const prev_node = ul.previousSibling\r\n\r\n        // Previous node is block.\r\n        if (editor.node.isBlock(prev_node)) {\r\n\r\n          // Remove any nodes that might be wrapped.\r\n          $(li).find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n            if (this.parentNode === li) {\r\n              $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n            }\r\n          })\r\n\r\n          $(prev_node).append($(li).html())\r\n        }\r\n\r\n        // Text right in li.\r\n        else {\r\n          $(ul).before($(li).html())\r\n        }\r\n      }\r\n\r\n      // Normal lists. Add an empty li instead.\r\n      else {\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (default_tag && $(li).find(editor.html.blockTagsQuery()).length === 0) {\r\n          $(ul).before(`<${default_tag}>${$(li).html()}</${default_tag}>`)\r\n        }\r\n        else {\r\n          $(ul).before($(li).html())\r\n        }\r\n      }\r\n\r\n      // Remove the current li.\r\n      $(li).remove()\r\n      editor.html.wrap()\r\n\r\n      // Remove the ul if it is empty.\r\n      if ($(ul).find('li').length === 0) {\r\n        $(ul).remove()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete at the end of list item.\r\n   */\r\n  function _del(marker) {\r\n    const li = _firstParentLI(marker)\r\n    const next_li = li.nextSibling\r\n    let contents\r\n\r\n    // There is a next li.\r\n    if (next_li) {\r\n\r\n      // Remove possible BR at the beginning of the next LI.\r\n      contents = editor.node.contents(next_li)\r\n\r\n      if (contents.length && contents[0].tagName === 'BR') {\r\n        $(contents[0]).remove()\r\n      }\r\n\r\n      // Unwrap content from the next node.\r\n      $(next_li).find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n        if (this.parentNode === next_li) {\r\n          $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n        }\r\n      })\r\n\r\n      // Append the next LI to the current LI.\r\n      let last_node = marker\r\n      let node = editor.node.contents(next_li)[0]\r\n      let tmp\r\n\r\n      while (node && !editor.node.isList(node)) {\r\n        tmp = node.nextSibling\r\n        $(last_node).after(node)\r\n        last_node = node\r\n        node = tmp\r\n      }\r\n\r\n      // Append nested lists.\r\n      while (node) {\r\n        tmp = node.nextSibling\r\n        $(li).append(node)\r\n        node = tmp\r\n      }\r\n\r\n      // Replace marker with markers.\r\n      $(marker).replaceWith(FE.MARKERS)\r\n\r\n      // Remove next li.\r\n      $(next_li).remove()\r\n    }\r\n\r\n    // No next li.\r\n    else {\r\n\r\n      // Search the next sibling in parents.\r\n      let next_node = li\r\n\r\n      while (!next_node.nextSibling && next_node !== editor.el) {\r\n        next_node = next_node.parentNode\r\n      }\r\n\r\n      // We're right at the end.\r\n      if (next_node === editor.el) {\r\n        return false\r\n      }\r\n\r\n      // Get the next sibling.\r\n      next_node = next_node.nextSibling\r\n\r\n      // Next sibling is a block tag.\r\n      if (editor.node.isBlock(next_node)) {\r\n\r\n        // Check if we can do delete in it.\r\n        if (FE.NO_DELETE_TAGS.indexOf(next_node.tagName) < 0) {\r\n\r\n          // Add markers.\r\n          $(marker).replaceWith(FE.MARKERS)\r\n\r\n          // Remove any possible BR at the end of the LI.\r\n          contents = editor.node.contents(li)\r\n\r\n          if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n            $(contents[contents.length - 1]).remove()\r\n          }\r\n\r\n          // Append next node.\r\n          $(li).append($(next_node).html())\r\n\r\n          // Remove the next node.\r\n          $(next_node).remove()\r\n        }\r\n      }\r\n\r\n      // Append everything till the next block tag or BR.\r\n      else {\r\n\r\n        // Remove any possible BR at the end of the LI.\r\n        contents = editor.node.contents(li)\r\n\r\n        if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n          $(contents[contents.length - 1]).remove()\r\n        }\r\n\r\n        // var next_node = next_li;\r\n        $(marker).replaceWith(FE.MARKERS)\r\n\r\n        while (next_node && !editor.node.isBlock(next_node) && next_node.tagName !== 'BR') {\r\n          $(li).append($(next_node))\r\n          next_node = next_node.nextSibling\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    _startEnter,\r\n    _middleEnter,\r\n    _endEnter,\r\n    _backspace,\r\n    _del\r\n  }\r\n}\r\n\r\n","import FE from '../../editor.js'\r\n\r\n// Do not merge with the previous one.\r\nFE.NO_DELETE_TAGS = ['TH', 'TD', 'TR', 'TABLE', 'FORM']\r\n\r\n// Do simple enter.\r\nFE.SIMPLE_ENTER_TAGS = ['TH', 'TD', 'LI', 'DL', 'DT', 'FORM']\r\n\r\nFE.MODULES.cursor = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Check if node is at the end of a block tag.\r\n   */\r\n  function _atEnd(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (editor.node.isBlock(node)) {\r\n      return true\r\n    }\r\n\r\n    if (node.nextSibling && node.nextSibling.nodeType === Node.TEXT_NODE && node.nextSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n      return _atEnd(node.nextSibling)\r\n    }\r\n\r\n    if (node.nextSibling && !(node.previousSibling && node.nextSibling.tagName === 'BR' && !node.nextSibling.nextSibling)) {\r\n      return false\r\n    }\r\n\r\n    return _atEnd(node.parentNode)\r\n  }\r\n\r\n  /**\r\n   * Check if node is at the start of a block tag.\r\n   */\r\n  function _atStart(node) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (editor.node.isBlock(node)) {\r\n      return true\r\n    }\r\n\r\n    if (node.previousSibling && node.previousSibling.nodeType === Node.TEXT_NODE && node.previousSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n      return _atStart(node.previousSibling)\r\n    }\r\n\r\n    if (node.previousSibling) {\r\n      return false\r\n    }\r\n\r\n    if (!node.previousSibling && editor.node.hasClass(node.parentNode, 'fr-inner')) {\r\n      return true\r\n    }\r\n\r\n    return _atStart(node.parentNode)\r\n  }\r\n\r\n  /**\r\n   * Check if node is a the start of the container.\r\n   */\r\n  function _isAtStart(node, container) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (node === editor.$wp.get(0)) {\r\n      return false\r\n    }\r\n\r\n    if (node.previousSibling && node.previousSibling.nodeType === Node.TEXT_NODE && node.previousSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n      return _isAtStart(node.previousSibling, container)\r\n    }\r\n\r\n    if (node.previousSibling) {\r\n      return false\r\n    }\r\n\r\n    if (node.parentNode === container) {\r\n      return true\r\n    }\r\n\r\n    return _isAtStart(node.parentNode, container)\r\n  }\r\n\r\n  /**\r\n   * Check if node is a the start of the container.\r\n   */\r\n  function _isAtEnd(node, container) {\r\n    if (!node) {\r\n      return false\r\n    }\r\n\r\n    if (node === editor.$wp.get(0)) {\r\n      return false\r\n    }\r\n\r\n    if (node.nextSibling && node.nextSibling.nodeType === Node.TEXT_NODE && node.nextSibling.textContent.replace(/\\u200b/g, '').length === 0) {\r\n\r\n      return _isAtEnd(node.nextSibling, container)\r\n    }\r\n\r\n    if (node.nextSibling && !(node.previousSibling && node.nextSibling.tagName === 'BR' && !node.nextSibling.nextSibling)) {\r\n      return false\r\n    }\r\n\r\n    if (node.parentNode === container) {\r\n      return true\r\n    }\r\n\r\n    return _isAtEnd(node.parentNode, container)\r\n  }\r\n\r\n  /**\r\n   * Check if the node is inside a LI.\r\n   */\r\n  function _inLi(node) {\r\n    return $(node).parentsUntil(editor.$el, 'LI').length > 0 && $(node).parentsUntil('LI', 'TABLE').length === 0\r\n  }\r\n\r\n  /**\r\n   * Get the length of the first or last character from text. Note: A special character can contain 1, 2 or 4 javascript 16bits characters.\r\n   */\r\n  function _getExtremityCharacterLength(text, first) {\r\n\r\n    const special_chars_regex = new RegExp(`${first ? '^' : ''}(([\\\\uD83C-\\\\uDBFF\\\\uDC00-\\\\uDFFF]+\\\\u200D)*[\\\\uD83C-\\\\uDBFF\\\\uDC00-\\\\uDFFF]{2})${first ? '' : '$'}`, 'i')\r\n    const matches = text.match(special_chars_regex)\r\n\r\n    // No matches means there is a normal character.\r\n    if (!matches) {\r\n      return 1\r\n    }\r\n\r\n    // Special character match. Can be 1, 2 or 4 characters.\r\n\r\n\r\n    return matches[0].length\r\n\r\n  }\r\n\r\n  /**\r\n   * Do backspace at the start of a block tag.\r\n   */\r\n  function _startBackspace(marker) {\r\n    const quote = $(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').length > 0\r\n    let deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n    let current_block = deep_parent\r\n\r\n    // Check for nested block tags if no previous element.\r\n    while (deep_parent && !deep_parent.previousSibling && deep_parent.tagName !== 'BLOCKQUOTE' && deep_parent.parentElement !== editor.el && !editor.node.hasClass(deep_parent.parentElement, 'fr-inner') && FE.SIMPLE_ENTER_TAGS.indexOf(deep_parent.parentElement.tagName) < 0) {\r\n      deep_parent = deep_parent.parentElement\r\n    }\r\n\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      const m_parent = editor.node.deepestParent(marker, [$(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0)])\r\n\r\n      if (m_parent && m_parent.previousSibling) {\r\n        deep_parent = m_parent\r\n        current_block = m_parent\r\n      }\r\n    }\r\n\r\n    // Deepest parent is not the main element.\r\n    if (deep_parent !== null) {\r\n      let prev_node = deep_parent.previousSibling\r\n      let contents\r\n\r\n      // We are inside a block tag.\r\n      if (editor.node.isBlock(deep_parent) && editor.node.isEditable(deep_parent)) {\r\n\r\n        // There is a previous node.\r\n        if (prev_node && FE.NO_DELETE_TAGS.indexOf(prev_node.tagName) < 0) {\r\n          if (editor.node.isDeletable(prev_node)) {\r\n            $(prev_node).remove()\r\n            $(marker).replaceWith(FE.MARKERS)\r\n          }\r\n          else {\r\n            // Previous node is a block tag.\r\n            if (editor.node.isEditable(prev_node)) {\r\n              if (editor.node.isBlock(prev_node)) {\r\n                if (editor.node.isEmpty(prev_node) && !editor.node.isList(prev_node)) {\r\n                  $(prev_node).remove()\r\n\r\n                  // https://github.com/froala/wysiwyg-editor/issues/1877.\r\n                  $(marker).after(editor.opts.keepFormatOnDelete ? FE.INVISIBLE_SPACE : '')\r\n                }\r\n                else {\r\n                  if (editor.node.isList(prev_node)) {\r\n                    prev_node = $(prev_node).find('li').last().get(0)\r\n                  }\r\n\r\n                  // Remove last BR.\r\n                  contents = editor.node.contents(prev_node)\r\n\r\n                  if (contents.length && contents[contents.length - 1].tagName === 'BR') {\r\n                    $(contents[contents.length - 1]).remove()\r\n                  }\r\n\r\n                  // Prev node is blockquote but the current one isn't.\r\n                  if (prev_node.tagName === 'BLOCKQUOTE' && deep_parent.tagName !== 'BLOCKQUOTE') {\r\n                    contents = editor.node.contents(prev_node)\r\n\r\n                    while (contents.length && editor.node.isBlock(contents[contents.length - 1])) {\r\n                      prev_node = contents[contents.length - 1]\r\n                      contents = editor.node.contents(prev_node)\r\n                    }\r\n                  }\r\n\r\n                  // Prev node is not blockquote, but the current one is.\r\n                  else if (prev_node.tagName !== 'BLOCKQUOTE' && current_block.tagName === 'BLOCKQUOTE') {\r\n                    contents = editor.node.contents(current_block)\r\n\r\n                    while (contents.length && editor.node.isBlock(contents[0])) {\r\n                      current_block = contents[0]\r\n                      contents = editor.node.contents(current_block)\r\n                    }\r\n                  }\r\n\r\n                  // When current node is empty place the cursor at the end of the prev node.\r\n                  if (editor.node.isEmpty(deep_parent)) {\r\n                    $(marker).remove()\r\n                    editor.selection.setAtEnd(prev_node, true)\r\n                  }\r\n\r\n                  // Replace marker with markers.\r\n                  else {\r\n                    $(marker).replaceWith(FE.MARKERS)\r\n\r\n                    // Previous node may have only block children.\r\n                    const prev_children = prev_node.childNodes\r\n\r\n                    // Append to prev node current HTML\r\n                    if (!editor.node.isBlock(prev_children[prev_children.length - 1])) {\r\n                      $(prev_node).append(current_block.innerHTML)\r\n                    }\r\n                    else {\r\n                      // Append the HTML to the last child of the previous node.\r\n                      $(prev_children[prev_children.length - 1]).append(current_block.innerHTML)\r\n                    }\r\n                  }\r\n\r\n                  // Remove current block.\r\n                  $(current_block).remove()\r\n\r\n                  // Remove current deep parent if empty.\r\n                  if (editor.node.isEmpty(deep_parent)) {\r\n                    $(deep_parent).remove()\r\n                  }\r\n                }\r\n              }\r\n              else {\r\n                $(marker).replaceWith(FE.MARKERS)\r\n\r\n                if (deep_parent.tagName === 'BLOCKQUOTE' && prev_node.nodeType === Node.ELEMENT_NODE) {\r\n                  $(prev_node).remove()\r\n                }\r\n                else {\r\n                  $(prev_node).after(editor.node.isEmpty(deep_parent) ? '' : $(deep_parent).html())\r\n                  $(deep_parent).remove()\r\n\r\n                  if (prev_node.tagName === 'BR') {\r\n                    $(prev_node).remove()\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        else if (!prev_node) {\r\n          if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE' && $(deep_parent).text().replace(/\\u200B/g, '').length === 0) {\r\n            $(deep_parent).remove();\r\n          }\r\n          else {\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/1304\r\n            if (editor.node.isEmpty(deep_parent) && deep_parent.parentNode && editor.node.isEditable(deep_parent.parentNode)) {\r\n              // check for the editor el\r\n              if (deep_parent.parentNode != editor.el) {\r\n                $(deep_parent.parentNode).remove();\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // No block tag.\r\n      /* jshint ignore:start */\r\n      /* jscs:disable */\r\n      else {\r\n        // This should never happen.\r\n      }\r\n      /* jshint ignore:end */\r\n      /* jscs:enable */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do backspace at the middle of a block tag.\r\n   */\r\n  function _middleBackspace(marker) {\r\n    let prev_node = marker\r\n\r\n    // Get the parent node that has a prev sibling.\r\n    while (!prev_node.previousSibling) {\r\n      prev_node = prev_node.parentNode\r\n\r\n      if (editor.node.isElement(prev_node)) {\r\n        return false\r\n      }\r\n    }\r\n    prev_node = prev_node.previousSibling\r\n\r\n    // Not block tag.\r\n    let contents\r\n\r\n    if (!editor.node.isBlock(prev_node) && editor.node.isEditable(prev_node)) {\r\n      contents = editor.node.contents(prev_node)\r\n\r\n      // Previous node is text.\r\n      while (prev_node.nodeType !== Node.TEXT_NODE && !editor.node.isDeletable(prev_node) && contents.length && editor.node.isEditable(prev_node)) {\r\n        prev_node = contents[contents.length - 1]\r\n        contents = editor.node.contents(prev_node)\r\n      }\r\n\r\n      if (prev_node.nodeType === Node.TEXT_NODE) {\r\n        const txt = prev_node.textContent\r\n        let len = txt.length\r\n\r\n        // We have a \\n character.\r\n        if (txt.length && txt[txt.length - 1] === '\\n') {\r\n          prev_node.textContent = txt.substring(0, len - 2)\r\n\r\n          if (prev_node.textContent.length === 0) {\r\n            prev_node.parentNode.removeChild(prev_node)\r\n          }\r\n\r\n          return _middleBackspace(marker)\r\n        }\r\n\r\n        // Tab UNDO.\r\n        if (editor.opts.tabSpaces && txt.length >= editor.opts.tabSpaces) {\r\n          const tab_str = txt.substr(txt.length - editor.opts.tabSpaces, txt.length - 1)\r\n\r\n          if (tab_str.replace(/ /g, '').replace(new RegExp(FE.UNICODE_NBSP, 'g'), '').length === 0) {\r\n            len = txt.length - editor.opts.tabSpaces + 1\r\n          }\r\n        }\r\n\r\n        prev_node.textContent = txt.substring(0, len - _getExtremityCharacterLength(txt))\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/3034\r\n        if (editor.opts.htmlUntouched && !marker.nextSibling && prev_node.textContent.length && prev_node.textContent[prev_node.textContent.length - 1] === ' ') {\r\n          prev_node.textContent = prev_node.textContent.substring(0, prev_node.textContent.length - 1) + FE.UNICODE_NBSP;\r\n        }\r\n\r\n        const deleted = txt.length !== prev_node.textContent.length\r\n\r\n        // Remove nodwhile (!editor.node.isElement(preve if empty.\r\n        if (prev_node.textContent.length === 0) {\r\n\r\n          // Here we check to see if we should keep the current formatting.\r\n          if (deleted && editor.opts.keepFormatOnDelete) {\r\n            $(prev_node).after(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n          }\r\n          else {\r\n            if (txt.length === 0 || !editor.node.isBlock(prev_node.parentNode)) {\r\n              // Condition prev_node.parentNode.childNodes.length == 1 is from https://github.com/froala/wysiwyg-editor/issues/1855 .\r\n              if (((prev_node.parentNode.childNodes.length == 2 && prev_node.parentNode == marker.parentNode) || prev_node.parentNode.childNodes.length == 1) && !editor.node.isBlock(prev_node.parentNode) && !editor.node.isElement(prev_node.parentNode) && editor.node.isDeletable(prev_node.parentNode)) {\r\n                $(prev_node.parentNode).after(FE.MARKERS)\r\n                $(prev_node.parentNode).remove()\r\n              }\r\n              else {\r\n                // https://github.com/froala/wysiwyg-editor/issues/2626.\r\n                while (!editor.node.isElement(prev_node.parentNode) && editor.node.isEmpty(prev_node.parentNode) && FE.NO_DELETE_TAGS.indexOf(prev_node.parentNode.tagName) < 0) {\r\n                  const t_node = prev_node\r\n                  prev_node = prev_node.parentNode\r\n                  t_node.parentNode.removeChild(t_node)\r\n                }\r\n\r\n                $(prev_node).after(FE.MARKERS)\r\n\r\n                // https://github.com/froala/wysiwyg-editor/issues/1379.\r\n                if (editor.node.isElement(prev_node.parentNode) && !marker.nextSibling && prev_node.previousSibling && prev_node.previousSibling.tagName === 'BR') {\r\n                  $(marker).after('<br>')\r\n                }\r\n\r\n                prev_node.parentNode.removeChild(prev_node)\r\n              }\r\n            }\r\n            else {\r\n              $(prev_node).after(FE.MARKERS);\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          $(prev_node).after(FE.MARKERS)\r\n        }\r\n      }\r\n      else if (editor.node.isDeletable(prev_node)) {\r\n        $(prev_node).after(FE.MARKERS)\r\n        $(prev_node).remove()\r\n      }\r\n      else if (marker.nextSibling && marker.nextSibling.tagName === 'BR' && editor.node.isVoid(prev_node) && prev_node.tagName !== 'BR') {\r\n        $(marker.nextSibling).remove()\r\n        $(marker).replaceWith(FE.MARKERS)\r\n      }\r\n      else if (editor.events.trigger('node.remove', [$(prev_node)]) !== false) {\r\n        $(prev_node).after(FE.MARKERS)\r\n        $(prev_node).remove()\r\n      }\r\n    }\r\n\r\n    // Block tag but we are allowed to delete it.\r\n    else if (FE.NO_DELETE_TAGS.indexOf(prev_node.tagName) < 0 && (editor.node.isEditable(prev_node) || editor.node.isDeletable(prev_node))) {\r\n      if (editor.node.isDeletable(prev_node)) {\r\n        $(marker).replaceWith(FE.MARKERS)\r\n        $(prev_node).remove()\r\n      }\r\n      else if (editor.node.isEmpty(prev_node) && !editor.node.isList(prev_node)) {\r\n        $(prev_node).remove()\r\n        $(marker).replaceWith(FE.MARKERS)\r\n      }\r\n      else {\r\n\r\n        // List correction.\r\n        if (editor.node.isList(prev_node)) {\r\n          prev_node = $(prev_node).find('li').last().get(0)\r\n        }\r\n\r\n        contents = editor.node.contents(prev_node)\r\n\r\n        if (contents && contents[contents.length - 1].tagName === 'BR') {\r\n          $(contents[contents.length - 1]).remove()\r\n        }\r\n\r\n        contents = editor.node.contents(prev_node)\r\n\r\n        while (contents && editor.node.isBlock(contents[contents.length - 1])) {\r\n          prev_node = contents[contents.length - 1]\r\n          contents = editor.node.contents(prev_node)\r\n        }\r\n\r\n        $(prev_node).append(FE.MARKERS)\r\n\r\n        let next_node = marker\r\n\r\n        while (!next_node.previousSibling) {\r\n          next_node = next_node.parentNode\r\n        }\r\n\r\n        while (next_node && next_node.tagName !== 'BR' && !editor.node.isBlock(next_node)) {\r\n          const copy_node = next_node\r\n          next_node = next_node.nextSibling\r\n          $(prev_node).append(copy_node)\r\n        }\r\n\r\n        // Remove BR.\r\n        if (next_node && next_node.tagName === 'BR') {\r\n          $(next_node).remove()\r\n        }\r\n\r\n        $(marker).remove()\r\n      }\r\n    }\r\n    else if (marker.nextSibling && marker.nextSibling.tagName === 'BR') {\r\n      $(marker.nextSibling).remove()\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Do backspace.\r\n   */\r\n  function backspace() {\r\n    let do_default = false\r\n\r\n    // Add a marker in HTML.\r\n    const marker = editor.markers.insert()\r\n\r\n    if (!marker) {\r\n      return true\r\n    }\r\n\r\n    // Do not allow edit inside contenteditable=\"false\".\r\n    let p_node = marker.parentNode\r\n\r\n    while (p_node && !editor.node.isElement(p_node)) {\r\n      if (p_node.getAttribute('contenteditable') === 'false') {\r\n        $(marker).replaceWith(FE.MARKERS)\r\n        editor.selection.restore()\r\n\r\n        return false\r\n      }\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2070\r\n      // Break the loop if node has no content and it is editable\r\n      else if (p_node.innerText.length && p_node.getAttribute('contenteditable') === 'true') {\r\n        break\r\n      }\r\n\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    // We should remove invisible space first of all.\r\n    const prev_node = marker.previousSibling\r\n\r\n    if (prev_node) {\r\n      const txt = prev_node.textContent\r\n\r\n      // Check if we have an invisible space before the marker.\r\n      if (txt && txt.length && txt.charCodeAt(txt.length - 1) === 8203) {\r\n        if (txt.length === 1) {\r\n          $(prev_node).remove()\r\n        }\r\n        else {\r\n          prev_node.textContent = prev_node.textContent.substr(0, txt.length - _getExtremityCharacterLength(txt))\r\n        }\r\n      }\r\n    }\r\n\r\n    // Delete at end.\r\n    if (_atEnd(marker)) {\r\n      if (_inLi(marker) && _isAtStart(marker, $(marker).parents('li').first().get(0))) {\r\n        editor.cursorLists._backspace(marker);\r\n      }\r\n      else {\r\n        do_default = _middleBackspace(marker);\r\n      }\r\n    }\r\n\r\n    // Delete at start.\r\n    else if (_atStart(marker)) {\r\n      if (_inLi(marker) && _isAtStart(marker, $(marker).parents('li').first().get(0))) {\r\n        editor.cursorLists._backspace(marker)\r\n      }\r\n      else {\r\n        _startBackspace(marker)\r\n      }\r\n    }\r\n\r\n    // Delete at middle.\r\n    else {\r\n      do_default = _middleBackspace(marker)\r\n    }\r\n\r\n    $(marker).remove()\r\n\r\n    _cleanEmptyBlockquotes()\r\n    editor.html.fillEmptyBlocks(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.html.cleanEmptyTags()\r\n      editor.clean.lists()\r\n      editor.spaces.normalizeAroundCursor()\r\n    }\r\n\r\n    editor.selection.restore()\r\n\r\n    return do_default\r\n  }\r\n\r\n  /**\r\n   * Delete at the end of a block tag.\r\n   */\r\n  function _endDel(marker) {\r\n    const quote = $(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').length > 0\r\n    let deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      const m_parent = editor.node.deepestParent(marker, [$(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0)])\r\n\r\n      if (m_parent && m_parent.nextSibling) {\r\n        deep_parent = m_parent\r\n      }\r\n    }\r\n\r\n    // Deepest parent is not the main element.\r\n    if (deep_parent !== null) {\r\n      let next_node = deep_parent.nextSibling\r\n      let contents\r\n\r\n      // We are inside a block tag.\r\n      if (editor.node.isBlock(deep_parent) && (editor.node.isEditable(deep_parent) || editor.node.isDeletable(deep_parent))) {\r\n\r\n        // There is a next node.\r\n        if (next_node && FE.NO_DELETE_TAGS.indexOf(next_node.tagName) < 0) {\r\n          if (editor.node.isDeletable(next_node)) {\r\n            $(next_node).remove()\r\n            $(marker).replaceWith(FE.MARKERS)\r\n          }\r\n          else {\r\n\r\n            // Next node is a block tag.\r\n            if (editor.node.isBlock(next_node) && editor.node.isEditable(next_node)) {\r\n\r\n              // Next node is a list.\r\n              if (editor.node.isList(next_node)) {\r\n\r\n                // Current block tag is empty.\r\n                if (editor.node.isEmpty(deep_parent, true)) {\r\n                  $(deep_parent).remove()\r\n\r\n                  $(next_node).find('li').first().prepend(FE.MARKERS)\r\n                }\r\n                else {\r\n                  const $li = $(next_node).find('li').first()\r\n\r\n                  if (deep_parent.tagName === 'BLOCKQUOTE') {\r\n                    contents = editor.node.contents(deep_parent)\r\n\r\n                    if (contents.length && editor.node.isBlock(contents[contents.length - 1])) {\r\n                      deep_parent = contents[contents.length - 1]\r\n                    }\r\n                  }\r\n\r\n                  // There are no nested lists.\r\n                  if ($li.find('ul, ol').length === 0) {\r\n                    $(marker).replaceWith(FE.MARKERS)\r\n\r\n                    // Remove any nodes that might be wrapped.\r\n                    $li.find(editor.html.blockTagsQuery()).not('ol, ul, table').each(function () {\r\n                      if (this.parentNode === $li.get(0)) {\r\n                        $(this).replaceWith($(this).html() + (editor.node.isEmpty(this) ? '' : '<br>'))\r\n                      }\r\n                    })\r\n\r\n                    $(deep_parent).append(editor.node.contents($li.get(0)))\r\n                    $li.remove()\r\n\r\n                    if ($(next_node).find('li').length === 0) {\r\n                      $(next_node).remove()\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              else {\r\n\r\n                // Remove last BR.\r\n                contents = editor.node.contents(next_node)\r\n\r\n                if (contents.length && contents[0].tagName === 'BR') {\r\n                  $(contents[0]).remove()\r\n                }\r\n\r\n                if (next_node.tagName !== 'BLOCKQUOTE' && deep_parent.tagName === 'BLOCKQUOTE') {\r\n                  contents = editor.node.contents(deep_parent)\r\n\r\n                  while (contents.length && editor.node.isBlock(contents[contents.length - 1])) {\r\n                    deep_parent = contents[contents.length - 1]\r\n                    contents = editor.node.contents(deep_parent)\r\n                  }\r\n                }\r\n                else if (next_node.tagName === 'BLOCKQUOTE' && deep_parent.tagName !== 'BLOCKQUOTE') {\r\n                  contents = editor.node.contents(next_node)\r\n\r\n                  while (contents.length && editor.node.isBlock(contents[0])) {\r\n                    next_node = contents[0]\r\n                    contents = editor.node.contents(next_node)\r\n                  }\r\n                }\r\n\r\n                $(marker).replaceWith(FE.MARKERS)\r\n                $(deep_parent).append(next_node.innerHTML)\r\n                $(next_node).remove()\r\n              }\r\n            }\r\n            else {\r\n              $(marker).replaceWith(FE.MARKERS)\r\n\r\n              // var next_node = next_node.nextSibling;\r\n              while (next_node && next_node.tagName !== 'BR' && !editor.node.isBlock(next_node) && editor.node.isEditable(next_node)) {\r\n                const copy_node = next_node\r\n                next_node = next_node.nextSibling\r\n                $(deep_parent).append(copy_node)\r\n              }\r\n\r\n              if (next_node && next_node.tagName === 'BR' && editor.node.isEditable(next_node)) {\r\n                $(next_node).remove()\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // No block tag.\r\n      /* jshint ignore:start */\r\n      /* jscs:disable */\r\n      else {\r\n        // This should never happen.\r\n      }\r\n      /* jshint ignore:end */\r\n      /* jscs:enable */\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete at the middle of a block tag.\r\n   */\r\n  function _middleDel(marker) {\r\n    let next_node = marker\r\n\r\n    // Get the parent node that has a next sibling.\r\n    while (!next_node.nextSibling) {\r\n      next_node = next_node.parentNode\r\n\r\n      if (editor.node.isElement(next_node)) {\r\n        return false\r\n      }\r\n    }\r\n    next_node = next_node.nextSibling\r\n\r\n    // Handle the case when the next node is a BR.\r\n    if (next_node.tagName === 'BR' && editor.node.isEditable(next_node)) {\r\n\r\n      // There is a next sibling.\r\n      if (next_node.nextSibling) {\r\n        if (editor.node.isBlock(next_node.nextSibling) && editor.node.isEditable(next_node.nextSibling)) {\r\n          if (FE.NO_DELETE_TAGS.indexOf(next_node.nextSibling.tagName) < 0) {\r\n            next_node = next_node.nextSibling\r\n            $(next_node.previousSibling).remove()\r\n          }\r\n          else {\r\n            $(next_node).remove()\r\n\r\n            return\r\n          }\r\n        }\r\n      }\r\n\r\n      // No next sibling. We should check if BR is at the end.\r\n      else if (_atEnd(next_node)) {\r\n        if (_inLi(marker)) {\r\n          editor.cursorLists._del(marker)\r\n        }\r\n        else {\r\n          const deep_parent = editor.node.deepestParent(next_node)\r\n\r\n          if (deep_parent) {\r\n            if (!editor.node.isEmpty(editor.node.blockParent(next_node)) || (editor.node.blockParent(next_node).nextSibling && FE.NO_DELETE_TAGS.indexOf(editor.node.blockParent(next_node).nextSibling.tagName)) < 0) {\r\n              $(next_node).remove()\r\n            }\r\n\r\n            _endDel(marker)\r\n          }\r\n        }\r\n\r\n        return\r\n      }\r\n    }\r\n\r\n    // Not block tag.\r\n    let contents\r\n\r\n    if (!editor.node.isBlock(next_node) && editor.node.isEditable(next_node)) {\r\n      contents = editor.node.contents(next_node)\r\n\r\n      // Next node is text.\r\n      while (next_node.nodeType !== Node.TEXT_NODE && contents.length && !editor.node.isDeletable(next_node) && editor.node.isEditable(next_node)) {\r\n        next_node = contents[0]\r\n        contents = editor.node.contents(next_node)\r\n      }\r\n\r\n      if (next_node.nodeType === Node.TEXT_NODE) {\r\n        $(next_node).before(FE.MARKERS)\r\n\r\n        if (next_node.textContent.length) {\r\n          next_node.textContent = next_node.textContent.substring(_getExtremityCharacterLength(next_node.textContent, true), next_node.textContent.length)\r\n        }\r\n      }\r\n      else if (editor.node.isDeletable(next_node)) {\r\n        $(next_node).before(FE.MARKERS)\r\n        $(next_node).remove()\r\n      }\r\n      else if (editor.events.trigger('node.remove', [$(next_node)]) !== false) {\r\n        $(next_node).before(FE.MARKERS)\r\n        $(next_node).remove()\r\n      }\r\n\r\n      $(marker).remove()\r\n    }\r\n\r\n    // Block tag.\r\n    else if (FE.NO_DELETE_TAGS.indexOf(next_node.tagName) < 0 && (editor.node.isEditable(next_node) || editor.node.isDeletable(next_node))) {\r\n      if (editor.node.isDeletable(next_node)) {\r\n        $(marker).replaceWith(FE.MARKERS)\r\n        $(next_node).remove()\r\n      }\r\n      else if (editor.node.isList(next_node)) {\r\n\r\n        // There is a previous sibling.\r\n        if (marker.previousSibling) {\r\n          $(next_node).find('li').first().prepend(marker)\r\n          editor.cursorLists._backspace(marker)\r\n        }\r\n\r\n        // No previous sibling.\r\n        else {\r\n          $(next_node).find('li').first().prepend(FE.MARKERS)\r\n          $(marker).remove()\r\n        }\r\n      }\r\n      else {\r\n        contents = editor.node.contents(next_node)\r\n\r\n        if (contents && contents[0].tagName === 'BR') {\r\n          $(contents[0]).remove()\r\n        }\r\n\r\n        // Deal with blockquote.\r\n        if (contents && next_node.tagName === 'BLOCKQUOTE') {\r\n          let node = contents[0]\r\n          $(marker).before(FE.MARKERS)\r\n\r\n          while (node && node.tagName !== 'BR') {\r\n            const tmp = node\r\n            node = node.nextSibling\r\n            $(marker).before(tmp)\r\n          }\r\n\r\n          if (node && node.tagName === 'BR') {\r\n            $(node).remove()\r\n          }\r\n        }\r\n        else {\r\n          $(marker)\r\n            .after($(next_node).html())\r\n            .after(FE.MARKERS)\r\n\r\n          $(next_node).remove()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete.\r\n   */\r\n  function del() {\r\n    const marker = editor.markers.insert()\r\n\r\n    if (!marker) {\r\n      return false\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    // Delete at end.\r\n    if (_atEnd(marker)) {\r\n      if (_inLi(marker)) {\r\n        if ($(marker).parents('li').first().find('ul, ol').length === 0) {\r\n          editor.cursorLists._del(marker)\r\n        }\r\n        else {\r\n          let $li = $(marker).parents('li').first()\r\n            .find('ul, ol')\r\n            .first()\r\n            .find('li')\r\n            .first()\r\n          $li = $li.find(editor.html.blockTagsQuery()).get(-1) || $li\r\n\r\n          $li.prepend(marker)\r\n          editor.cursorLists._backspace(marker)\r\n        }\r\n      }\r\n      else {\r\n        _endDel(marker)\r\n      }\r\n    }\r\n\r\n    // Delete at start.\r\n    else if (_atStart(marker)) {\r\n      _middleDel(marker)\r\n    }\r\n\r\n    // Delete at middle.\r\n    else {\r\n      _middleDel(marker)\r\n    }\r\n\r\n    $(marker).remove()\r\n    _cleanEmptyBlockquotes()\r\n    editor.html.fillEmptyBlocks(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.html.cleanEmptyTags()\r\n      editor.clean.lists()\r\n    }\r\n\r\n    editor.spaces.normalizeAroundCursor()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  function _cleanEmptyBlockquotes() {\r\n    const blks = editor.el.querySelectorAll('blockquote:empty')\r\n\r\n    for (let i = 0; i < blks.length; i++) {\r\n      blks[i].parentNode.removeChild(blks[i])\r\n    }\r\n  }\r\n\r\n  function _cleanNodesToRemove() {\r\n    editor.$el.find('.fr-to-remove').each(function () {\r\n      const contents = editor.node.contents(this)\r\n\r\n      for (let i = 0; i < contents.length; i++) {\r\n        if (contents[i].nodeType === Node.TEXT_NODE) {\r\n          contents[i].textContent = contents[i].textContent.replace(/\\u200B/g, '')\r\n        }\r\n      }\r\n\r\n      $(this).replaceWith(this.innerHTML)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Enter at the end of a block tag.\r\n   */\r\n  function _endEnter(marker, shift, quote) {\r\n    const deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n    let default_tag\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      if (_isAtEnd(marker, deep_parent)) {\r\n        default_tag = editor.html.defaultTag()\r\n\r\n        if(!shift) {\r\n          if (default_tag) {\r\n            $(deep_parent).after(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n          }\r\n          else {\r\n            $(deep_parent).after(`${FE.MARKERS}<br>`)\r\n          }\r\n        }\r\n        else {\r\n          $(marker).replaceWith('<br>' + FE.MARKERS);\r\n        }\r\n\r\n        $(marker).remove()\r\n\r\n        return false\r\n      }\r\n\r\n      _middleEnter(marker, shift, quote)\r\n\r\n      return false\r\n\r\n    }\r\n\r\n    // We are right in the main element.\r\n    if (deep_parent === null) {\r\n      default_tag = editor.html.defaultTag()\r\n\r\n      if (!default_tag || !editor.node.isElement(marker.parentNode)) {\r\n        if (marker.previousSibling && !$(marker.previousSibling).is('br') && !marker.nextSibling) {\r\n          $(marker).replaceWith(`<br>${FE.MARKERS}<br>`)\r\n        }\r\n        else {\r\n          $(marker).replaceWith(`<br>${FE.MARKERS}`)\r\n        }\r\n      }\r\n      else {\r\n        $(marker).replaceWith(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n    }\r\n\r\n    // There is a parent.\r\n    else {\r\n\r\n      // Block tag parent.\r\n      let c_node = marker\r\n      let str = ''\r\n\r\n      if (deep_parent.tagName == 'PRE' && !marker.nextSibling) {\r\n        shift = true;\r\n      }\r\n\r\n      if (!editor.node.isBlock(deep_parent) || shift) {\r\n        str = '<br/>'\r\n      }\r\n\r\n      let c_str = ''\r\n      let o_str = ''\r\n\r\n      default_tag = editor.html.defaultTag()\r\n      let open_default_tag = ''\r\n      let close_default_tag = ''\r\n\r\n      if (default_tag && editor.node.isBlock(deep_parent)) {\r\n        open_default_tag = `<${default_tag}>`\r\n        close_default_tag = `</${default_tag}>`\r\n\r\n        if (deep_parent.tagName === default_tag.toUpperCase()) {\r\n          open_default_tag = editor.node.openTagString($(deep_parent).clone().removeAttr('id').get(0))\r\n        }\r\n      }\r\n\r\n      do {\r\n        c_node = c_node.parentNode\r\n\r\n        // Shift condition.\r\n        if (!shift || c_node !== deep_parent || shift && !editor.node.isBlock(deep_parent)) {\r\n          c_str += editor.node.closeTagString(c_node)\r\n\r\n          // Open str when there is a block parent.\r\n          if (c_node === deep_parent && editor.node.isBlock(deep_parent)) {\r\n            o_str = open_default_tag + o_str\r\n          }\r\n          else {\r\n            const cls = (c_node.tagName === 'A' || editor.node.hasClass(c_node, 'fa')) && _isAtEnd(marker, c_node) ? 'fr-to-remove' : ''\r\n            o_str = editor.node.openTagString($(c_node).clone().addClass(cls).get(0)) + o_str\r\n          }\r\n        }\r\n      } while (c_node !== deep_parent)\r\n\r\n      // Add BR if deep parent is block tag.\r\n      str = c_str + str + o_str + (marker.parentNode === deep_parent && editor.node.isBlock(deep_parent) ? '' : FE.INVISIBLE_SPACE) + FE.MARKERS\r\n\r\n      if (editor.node.isBlock(deep_parent) && !$(deep_parent).find('*').last().is('br')) {\r\n        $(deep_parent).append('<br/>')\r\n      }\r\n\r\n      $(marker).after('<span id=\"fr-break\"></span>')\r\n      $(marker).remove()\r\n\r\n      // Add a BR after to make sure we display the last line.\r\n      if ((!deep_parent.nextSibling || editor.node.isBlock(deep_parent.nextSibling)) && !editor.node.isBlock(deep_parent)) {\r\n        $(deep_parent).after('<br>')\r\n      }\r\n\r\n      let html\r\n\r\n      // No shift.\r\n      if (!shift && editor.node.isBlock(deep_parent)) {\r\n        html = editor.node.openTagString(deep_parent) + $(deep_parent).html() + close_default_tag\r\n      }\r\n      else {\r\n        html = editor.node.openTagString(deep_parent) + $(deep_parent).html() + editor.node.closeTagString(deep_parent)\r\n      }\r\n\r\n      html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n      $(deep_parent).replaceWith(html)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start at the beginning of a block tag.\r\n   */\r\n  function _startEnter(marker, shift, quote) {\r\n    const deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n    let default_tag\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/320\r\n    if (deep_parent && deep_parent.tagName === 'TABLE') {\r\n      $(deep_parent).find('td, th').first().prepend(marker)\r\n\r\n      return _startEnter(marker, shift, quote)\r\n    }\r\n\r\n    if (deep_parent && deep_parent.tagName === 'BLOCKQUOTE') {\r\n      if (_isAtStart(marker, deep_parent)) {\r\n        if(!shift) {\r\n          default_tag = editor.html.defaultTag()\r\n\r\n          if (default_tag) {\r\n            $(deep_parent).before(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n          }\r\n          else {\r\n            $(deep_parent).before(`${FE.MARKERS}<br>`)\r\n          }\r\n\r\n          $(marker).remove()\r\n\r\n          return false\r\n        }\r\n      }\r\n      else if (_isAtEnd(marker, deep_parent)) {\r\n        _endEnter(marker, shift, true)\r\n      }\r\n      else {\r\n        _middleEnter(marker, shift, true)\r\n      }\r\n    }\r\n\r\n    // We are right in the main element.\r\n    if (deep_parent === null) {\r\n      default_tag = editor.html.defaultTag()\r\n\r\n      if (!default_tag || !editor.node.isElement(marker.parentNode)) {\r\n        $(marker).replaceWith(`<br>${FE.MARKERS}`)\r\n      }\r\n      else {\r\n        $(marker).replaceWith(`<${default_tag}>${FE.MARKERS}<br></${default_tag}>`)\r\n      }\r\n    }\r\n    else {\r\n      if (editor.node.isBlock(deep_parent)) {\r\n        if (deep_parent.tagName === 'PRE') {\r\n          shift = true\r\n        }\r\n\r\n        if (shift) {\r\n          $(marker).remove()\r\n          $(deep_parent).prepend(`<br>${FE.MARKERS}`)\r\n        }\r\n        else if ((marker.nextSibling && marker.nextSibling.tagName == 'IMG') || (marker.nextSibling && marker.nextSibling.nextElementSibling && marker.nextSibling.nextElementSibling == 'IMG')) {\r\n          $(marker).replaceWith('<' + editor.html.defaultTag() + '>' + FE.MARKERS + '<br></' + editor.html.defaultTag() + '>');\r\n        }\r\n        else if (editor.node.isEmpty(deep_parent, true)) {\r\n\r\n          return _endEnter(marker, shift, quote)\r\n        }\r\n        else if (!editor.opts.keepFormatOnDelete) {\r\n          $(deep_parent).before(`${editor.node.openTagString($(deep_parent).clone().removeAttr('id').get(0))}<br>${editor.node.closeTagString(deep_parent)}`)\r\n        }\r\n        else {\r\n          let tmp = marker\r\n          let str = FE.INVISIBLE_SPACE\r\n\r\n          // Look up to all parents.\r\n          while (tmp !== deep_parent && !editor.node.isElement(tmp)) {\r\n            tmp = tmp.parentNode\r\n            str = editor.node.openTagString(tmp) + str + editor.node.closeTagString(tmp)\r\n          }\r\n\r\n          $(deep_parent).before(str)\r\n        }\r\n      }\r\n      else {\r\n        $(deep_parent).before('<br>')\r\n      }\r\n\r\n      $(marker).remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enter at the middle of a block tag.\r\n   */\r\n  function _middleEnter(marker, shift, quote) {\r\n    const deep_parent = editor.node.deepestParent(marker, [], !quote)\r\n\r\n    // We are right in the main element.\r\n    if (deep_parent === null) {\r\n\r\n      // Default tag is not enter.\r\n      if (editor.html.defaultTag() && marker.parentNode === editor.el) {\r\n        $(marker).replaceWith(`<${editor.html.defaultTag()}>${FE.MARKERS}<br></${editor.html.defaultTag()}>`)\r\n      }\r\n      else {\r\n\r\n        // Add a BR after to make sure we display the last line.\r\n        if (!marker.nextSibling || editor.node.isBlock(marker.nextSibling)) {\r\n          $(marker).after('<br>')\r\n        }\r\n\r\n        $(marker).replaceWith(`<br>${FE.MARKERS}`)\r\n      }\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3392\r\n    else if ((marker.previousSibling && marker.previousSibling.tagName == 'IMG') || (marker.nextSibling && marker.nextSibling.tagName == 'IMG')) {\r\n      $(marker).replaceWith('<' + editor.html.defaultTag() + '>' + FE.MARKERS + '<br></' + editor.html.defaultTag() + '>');\r\n    }\r\n    // There is a parent.\r\n    else {\r\n\r\n      // Block tag parent.\r\n      let c_node = marker\r\n      let str = ''\r\n\r\n      if (deep_parent.tagName === 'PRE') {\r\n        shift = true\r\n      }\r\n\r\n      if (!editor.node.isBlock(deep_parent) || shift) {\r\n        str = '<br>'\r\n      }\r\n\r\n      let c_str = ''\r\n      let o_str = ''\r\n\r\n      do {\r\n        const tmp = c_node\r\n        c_node = c_node.parentNode\r\n\r\n        // Move marker after node it if is empty and we are in quote.\r\n        if (deep_parent.tagName === 'BLOCKQUOTE' && editor.node.isEmpty(tmp) && !editor.node.hasClass(tmp, 'fr-marker')) {\r\n          if ($(tmp).contains(marker)) {\r\n            $(tmp).after(marker)\r\n          }\r\n        }\r\n\r\n        // If not at end or start of element in quote.\r\n        if (!(deep_parent.tagName === 'BLOCKQUOTE' && (_isAtEnd(marker, c_node) || _isAtStart(marker, c_node)))) {\r\n\r\n          // 1. No shift.\r\n          // 2. c_node is not deep parent.\r\n          // 3. Shift and deep parent is not block tag.\r\n          if (!shift || c_node !== deep_parent || shift && !editor.node.isBlock(deep_parent)) {\r\n            c_str += editor.node.closeTagString(c_node)\r\n\r\n            const cls = ((c_node.tagName == 'A' && _isAtEnd(marker, c_node)) || editor.node.hasClass(c_node, 'fa')) ? 'fr-to-remove' : ''\r\n            o_str = editor.node.openTagString($(c_node).clone().addClass(cls).removeAttr('id').get(0)) + o_str\r\n          }\r\n          else if (deep_parent.tagName == 'BLOCKQUOTE' && shift) {\r\n            c_str = '';\r\n            o_str = '';\r\n          }\r\n        }\r\n      } while (c_node !== deep_parent)\r\n\r\n      // We should add an invisible space if:\r\n      // 1. parent node is not deep parent and block tag.\r\n      // 2. marker has no next sibling.\r\n      const add =\r\n        deep_parent === marker.parentNode && editor.node.isBlock(deep_parent) ||\r\n        marker.nextSibling\r\n\r\n\r\n      if (deep_parent.tagName === 'BLOCKQUOTE') {\r\n        if (marker.previousSibling && editor.node.isBlock(marker.previousSibling) && marker.nextSibling && marker.nextSibling.tagName === 'BR') {\r\n          $(marker.nextSibling).after(marker)\r\n\r\n          if (marker.nextSibling && marker.nextSibling.tagName === 'BR') {\r\n            $(marker.nextSibling).remove()\r\n          }\r\n        }\r\n        if (shift) {\r\n          str = c_str + str + FE.MARKERS + o_str;\r\n        }\r\n        else {\r\n          const default_tag = editor.html.defaultTag()\r\n          str = `${c_str + str + (default_tag ? `<${default_tag}>` : '') + FE.MARKERS}<br>${default_tag ? `</${default_tag}>` : ''}${o_str}`\r\n        }\r\n      }\r\n      else {\r\n        str = c_str + str + o_str + (add ? '' : FE.INVISIBLE_SPACE) + FE.MARKERS\r\n      }\r\n\r\n      $(marker).replaceWith('<span id=\"fr-break\"></span>')\r\n      let html = editor.node.openTagString(deep_parent) + $(deep_parent).html() + editor.node.closeTagString(deep_parent)\r\n      html = html.replace(/<span id=\"fr-break\"><\\/span>/g, str)\r\n\r\n      $(deep_parent).replaceWith(html)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Do enter.\r\n   */\r\n  function enter(shift) {\r\n    // Add a marker in HTML.\r\n    const marker = editor.markers.insert()\r\n\r\n    if (!marker) {\r\n      return true\r\n    }\r\n\r\n    // Do not allow edit inside contenteditable=\"false\".\r\n    var p_node = marker.parentNode;\r\n\r\n    while (p_node && !editor.node.isElement(p_node)) {\r\n      if (p_node.getAttribute('contenteditable') === 'false') {\r\n        $(marker).replaceWith(FE.MARKERS);\r\n        editor.selection.restore();\r\n        return false;\r\n      }\r\n      else if (p_node.getAttribute('contenteditable') === 'true') {\r\n        break;\r\n      }\r\n      p_node = p_node.parentNode;\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    let quote = false\r\n\r\n    if ($(marker).parentsUntil(editor.$el, 'BLOCKQUOTE').length > 0) {\r\n      //shift = false\r\n      quote = true\r\n    }\r\n\r\n    if ($(marker).parentsUntil(editor.$el, 'TD, TH').length) {\r\n      quote = false\r\n    }\r\n\r\n    // At the end.\r\n    if (_atEnd(marker)) {\r\n\r\n      // Enter in list.\r\n      if (_inLi(marker) && !shift && !quote) {\r\n        editor.cursorLists._endEnter(marker)\r\n      }\r\n      else {\r\n        _endEnter(marker, shift, quote)\r\n      }\r\n    }\r\n\r\n    // At start.\r\n    else if (_atStart(marker)) {\r\n\r\n      // Enter in list.\r\n      if (_inLi(marker) && !shift && !quote) {\r\n        editor.cursorLists._startEnter(marker)\r\n      }\r\n      else {\r\n        _startEnter(marker, shift, quote)\r\n      }\r\n    }\r\n\r\n    // At middle.\r\n    else {\r\n\r\n      // Enter in list.\r\n      if (_inLi(marker) && !shift && !quote) {\r\n        editor.cursorLists._middleEnter(marker)\r\n      }\r\n      else {\r\n        _middleEnter(marker, shift, quote)\r\n      }\r\n    }\r\n\r\n    _cleanNodesToRemove()\r\n    editor.html.fillEmptyBlocks(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.html.cleanEmptyTags()\r\n      editor.clean.lists()\r\n      editor.spaces.normalizeAroundCursor()\r\n    }\r\n\r\n    editor.selection.restore()\r\n  }\r\n\r\n  return {\r\n    enter,\r\n    backspace,\r\n    del,\r\n    isAtEnd: _isAtEnd,\r\n    isAtStart: _isAtStart\r\n  }\r\n}\r\n","import FE from\"../../editor.js\";FE.MODULES.data=function(A){function t(A){return A}function n(A){if(!A)return A;let n=\"\";const e=t(\"charCodeAt\"),D=t(\"fromCharCode\");let o=h.indexOf(A[0]);for(let t=1;t<A.length-2;t++){const r=C(++o);let i=A[e](t),c=\"\";for(;/[0-9-]/.test(A[t+1]);)c+=A[++t];c=parseInt(c,10)||0,i=B(i,r,c),i^=o-1&31,n+=String[D](i)}return n}function C(A){const t=A.toString();let n=0;for(let A=0;A<t.length;A++)n+=parseInt(t.charAt(A),10);return n>10?n%9+1:n}function B(A,t,n){let C=Math.abs(n);for(;C-- >0;)A-=t;return n<0&&(A+=123),A}function e(t){return t&&\"block\"!==t.css(\"display\")?(t.remove(),!0):t&&0===A.helpers.getPX(t.css(\"height\"))?(t.remove(),!0):!(!t||\"absolute\"!==t.css(\"position\")&&\"fixed\"!==t.css(\"position\"))&&(t.remove(),!0)}function D(t){return t&&0===A.$box.find(t).length}function o(){return e(g)||e(b)||D(g)||D(b)}function r(){if(w>10&&(A[t(m(\"0ppecjvc==\"))](),setTimeout(()=>{d.FE=null},10)),!A.$box)return!1;A.$wp.prepend(m(t(m(G)))),g=A.$wp.find(\"> div\").first(),b=g.find(\"> a\"),\"rtl\"===A.opts.direction&&g.css(\"left\",\"auto\").css(\"right\",0).attr(\"direction\",\"rtl\"),w++}function i(A){let t=m(\"9qqG-7amjlwq==\"),n=m(\"KA3B3C2A6D1D5H5H1A3==\"),C=m(\"3B9B3B5F3C4G3E3==\"),B=m(\"QzbzvxyB2yA-9m==\"),e=m(\"ji1kacwmgG5bc==\"),D=m(\"nmA-13aogi1A3c1jd==\"),o=m(\"BA9ggq==\"),r=m(\"emznbjbH3fij==\"),i=m(\"tkC-22d1qC-13sD1wzF-7==\"),c=m(\"tA3jjf==\"),E=m(\"1D1brkm==\"),f=[t,n,C,B,e,D,o,r,i,c,E];for(let t=0;t<f.length;t++)if(String.prototype.endsWith||(String.prototype.endsWith=function(A,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-A.length,t)===A}),A.endsWith(f[t]))return!0;return!1}function c(A){const t=(m(A)||\"\").split(\"|\");return 4===t.length&&\"V3\"===t[0]?[t[1],t[3],t[2]]:[null,null,\"\"]}function E(A){return null===A||(0==A.indexOf(\"TRIAL\")?(A=new Date(A.replace(/TRIAL/,\"\")),new Date(A)<new Date&&(u=F,!0)):new Date(A)<new Date(m(H)))}function f(){const A=m(t(a)),n=m(t(\"tzgatD-13eD1dtdrvmF3c1nrC-7saQcdav==\")).split(\".\");return window.parent.document.querySelector(A)&&window[n[1]][n[2]]}function s(){let n=A.opts.key||[\"\"];const C=m(t(\"ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9==\"));\"string\"==typeof n&&(n=[n]),A.ul=!0;let B=!1,e=0;for(let C=0;C<n.length;C++){const D=c(n[C]),o=D[2],r=m(t(m(\"LGnD1KNZf1CPBYCAZB-8F3UDSLLSG1VFf1A3C2==\")));if(o===r||o.indexOf(p,o.length-p.length)>=0||i(p)||f()){if(!(E(D[1])&&(p||\"\").length>0)||i(p)||f()){A.ul=!1;break}B=!0,G=u,e=D[0]||-1}}const D=new Image;A.ul===!0&&(r(),D.src=B?`${t(m(C))}e=${e}`:`${t(m(C))}u`),A.ul===!0&&(A.events.on(\"contentChanged\",()=>{o()&&r()}),A.events.on(\"html.get\",function(A){return A+m(l)})),A.events.on(\"html.set\",function(){var t=A.el.querySelector('[data-f-id=\"pbf\"]');t&&d(t).remove()}),A.events.on(\"destroy\",()=>{g&&g.length&&g.remove()},!0)}const d=A.$,h=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";let u=\"sC-7OB2fwhVC4vsG-7ohPA4ZD4D-8f1J3stzB-11bFE2FC1A3NB2IF1HE1TH4WB8eB-11zVG2F3I3yYB5ZG4CB2DA15CC5AD3F1A1KG1oLA10B1A6wQF1H3vgale2C4F4XA2qc2A5D5B3pepmriKB3OE1HD1fUC10pjD-11E-11TB4YJ3bC-16zE-11yc1B2CE2BC3jhjKC1pdA-21OA6C1D5B-8vF4QA11pD6sqf1C3lldA-16BD4A2H3qoEA7bB-16rmNH5H1F1vSB7RE2A3TH4YC5A5b1A4d1B3whepyAC3AA2zknC3mbgf1SC4WH4PD8TC5ZB2C3H3jb2A5ZA2EF2aoFC5qqHC4B1H1zeGA7UA5RF4TA29TA6ZC4d1C3hyWA10A3rBB2E3decorationRD3QC10UD3E6E6ZD2F3F3fme2E5uxxrEC9C3E4fB-11azhHB1LD7D6VF4VVTPC6b1C4TYG3qzDD6B3B3AH4I2H2kxbHE1JD1yihfd1QD6WB1D4mhrc1B5rvFG3A14A7cDA2OC1AA1JB5zC-16KA6WB4C-8wvlTB5A5lkZB2C2C7zynBD2D2bI-7C-21d1HE2cubyvPC8A6VB3aroxxZE4C4F4e1I2BE1WjdifH1H4A14NA1GB1YG-10tWA3A14A9sVA2C5XH2A29b2A6gsleGG2jaED2D-13fhE1OA8NjwytyTD4e1sc1D-16ZC3B5C-9e1C2FB6EFF5B2C2JH4E1C2tdLE5A3UG4G-7b2D3B4fA-9oh1G3kqvB4AG3ibnjcAC6D2B1cDA9KC2QA6bRC4VA30RB8hYB2A4A-8h1A21A2B2==\";const F=\"7D4YH4fkhHB3pqDC3H2E1fkMD1IB1NF1D3QD9wB5rxqlh1A8c2B4ZA3FD2AA6FB5EB3jJG4D2J-7aC-21GB6PC5RE4TC11QD6XC4XE3XH3mlvnqjbaOA2OC2BE6A1fmI-7ujwbc1G5f1F3e1C11mXF4owBG3E1yD1E4F1D2D-8B-8C-7yC-22HD1MF5UE4cWA3D8D6a1B2C3H3a3I3sZA4B3A2akfwEB3xHD5D1F1wIC11pA-16xdxtVI2C9A6YC4a1A2F3B2GA6B4C3lsjyJB1eMA1D-11MF5PE4ja1D3D7byrf1C3e1C7D-16lwqAF3H2A1B-21wNE1MA1OG1HB2A-16tSE5UD4RB3icRA4F-10wtwzBB3E1C3CC2DA8LA2LA1EB1kdH-8uVB7decorg1J2B7B6qjrqGI2J1C6ijehIB1hkemC-13hqkrH4H-7QD6XF5XF3HLNAC3CB2aD2CD2KB10B4ycg1A-8KA4H4B11jVB5TC4yqpB-21pd1E4pedzGB6MD5B3ncB-7MA4LD2JB6PD5uH-8TB9C7YD5XD2E3I3jmiDB3zeimhLD8E2F2JC1H-9ivkPC5lG-10SB1D3H3A-21rc1A3d1E3fsdqwfGA2KA1OrC-22LA6D1B4afUB16SC7AitC-8qYA11fsxcajGA15avjNE2A-9h1hDB16B9tPC1C5F5UC1G3B8d2A5d1D4RnHJ3C3JB5D3ucMG1yzD-17hafjC-8VD3yWC6e1YD2H3ZE2C8C5oBA3H3D2vFA4WzJC4C2i1A-65fNB8afWA1H4A26mvkC-13ZB3E3h1A21BC4eFB2GD2AA5ghqND2A2B2==\",l=\"qD2H-9G3ioD-17qA1tE1B-8qI3A4hA-13C-11E2C1njfldD1E6pg1C-8sC3hfbkcD2G3stC-22gqgB3G2B-7vtoA4nweeD1A31A15B9uC-16A1F5dkykdc1B8dE-11bA3F2D3A9gd1E7F2tlI-8H-7vtxB2A5B2C3B2F2B5A6ldbyC4iqC-22D-17E-13mA3D2dywiB3oxlvfC1H4C2TjqbzlnI3ntB4E3qA2zaqsC6D3pmnkoE3C6D5wvuE3bwifdhB6hch1E4xibD-17dmrC1rG-7pntnF6nB-8F1D2A11C8plrkmF2F3MC-16bocqA2WwA-21ayeA1C4d1isC-22rD-13D6DfjpjtC2E6hB2G2G4A-7D2==\",a=\"MekC-11nB-8tIzpD7pewxvzC6mD-16xerg1==\",H=\"lC4B3A3B2B5A1C2E4G1A2==\";let G=\"sC-7OB2fwhVC4vsG-7ohPA4ZD4D-8f1J3stzB-11bFE2EE1MA2ND1KD1IE4cA-21pSD2D5ve1G3h1A8b1E5ZC3CD2FA16mC5OC5E1hpnG1NA10B1D7hkUD4I-7b2C3C5nXD2E3F3whidEC2EH3GI2mJE2E2bxci1WA10VC7pllSG2F3A7xd1A4ZC3DB2aaeGA2DE4H2E1j1ywD-13FD1A3VE4WA3D8C6wuc1A2hf1B5B7vnrrjA1B9ic1mpbD1oMB1iSB7rWC4RI4G-7upB6jd1A2F3H2EA4FD3kDF4A2moc1anJD1TD4VI4b2C7oeQF4c1E3XC7ZA3C3G3uDB2wGB6D1JC4D1JD4C1hTE6QC5pH4pD3C-22D7c1A3textAA4gdlB2mpozkmhNC1mrxA3yWA5edhg1I2H3B7ozgmvAI3I2B5GD1LD2RSNH1KA1XA5SB4PA3sA9tlmC-9tnf1G3nd1coBH4I2I2JC3C-16LE6A1tnUA3vbwQB1G3f1A20a3A8a1C6pxAB2eniuE1F3kH2lnjB2hB-16XA5PF1G4zwtYA5B-11mzTG2B9pHB3BE2hGH3B3B2cMD5C1F1wzPA8E7VG5H5vD3H-7C8tyvsVF2I1G2A5fE3bg1mgajoyxMA4fhuzSD8aQB2B4g1A20ukb1A4B3F3GG2CujjanIC1ObiB11SD1C5pWC1D4YB8YE5FE-11jXE2F-7jB4CC2G-10uLH4E1C2tA-13yjUH5d1H1A7sWD5E4hmjF-7pykafoGA16hDD4joyD-8OA33B3C2tC7cRE4SA31a1B8d1e2A4F4g1A2A22CC5zwlAC2C1A12==\";const p=function(){let A=0,t=document.domain;const n=t.split(\".\"),C=`_gd${(new Date).getTime()}`;for(;A<n.length-1&&document.cookie.indexOf(`${C}=${C}`)===-1;)t=n.slice(-1-++A).join(\".\"),document.cookie=`${C}=${C};domain=${t};`;return document.cookie=`${C}=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${t};`,(t||\"\").replace(/(^\\.*)|(\\.*$)/g,\"\")}(),m=t(n);let g,b,w=0;return{_init:s}};","import FE from '../../editor.js'\r\n\r\nFE.MODULES.edit = function (editor) {\r\n\r\n  /**\r\n   * Disable editing design.\r\n   */\r\n  function disableDesign() {\r\n    if (editor.browser.mozilla) {\r\n      try {\r\n        editor.doc.execCommand('enableObjectResizing', false, 'false')\r\n        editor.doc.execCommand('enableInlineTableEditing', false, 'false')\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n\r\n    if (editor.browser.msie) {\r\n      try {\r\n        editor.doc.body.addEventListener('mscontrolselect', (e) => {\r\n\r\n          // Add focus to the element when clicked\r\n          e.srcElement.focus()\r\n          return false\r\n        })\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n  }\r\n\r\n  let disabled = false\r\n\r\n  /**\r\n   * Add contneteditable attribute.\r\n   */\r\n  function on() {\r\n    if (editor.$wp) {\r\n      editor.$el.attr('contenteditable', true)\r\n      editor.$el.removeClass('fr-disabled').attr('aria-disabled', false)\r\n\r\n      disableDesign()\r\n    }\r\n    else if (editor.$el.is('a')) {\r\n      editor.$el.attr('contenteditable', true)\r\n    }\r\n\r\n    editor.events.trigger('edit.on', [], true)\r\n    disabled = false\r\n  }\r\n\r\n  /**\r\n   * Remove contenteditable attribute.\r\n   */\r\n  function off() {\r\n    editor.events.disableBlur()\r\n\r\n    if (editor.$wp) {\r\n      editor.$el.attr('contenteditable', false)\r\n      editor.$el.addClass('fr-disabled').attr('aria-disabled', true)\r\n    }\r\n    else if (editor.$el.is('a')) {\r\n      editor.$el.attr('contenteditable', false)\r\n    }\r\n\r\n    editor.events.trigger('edit.off')\r\n\r\n    editor.events.enableBlur()\r\n    disabled = true\r\n  }\r\n\r\n  function isDisabled() {\r\n    return disabled\r\n  }\r\n\r\n  function _init() {\r\n    // When there are multiple editor instances and shared toolbar make sure we can edit.\r\n    editor.events.on('focus', () => {\r\n      if (isDisabled()) {\r\n        editor.edit.off()\r\n      }\r\n      else {\r\n        editor.edit.on()\r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    on,\r\n    off,\r\n    disableDesign,\r\n    isDisabled\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.MODULES.format = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Create open tag string.\r\n   */\r\n  function _openTag(tag, attrs) {\r\n    let str = `<${tag}`\r\n\r\n    for (const key in attrs) {\r\n      if (Object.prototype.hasOwnProperty.call(attrs, key)) {\r\n        str += ` ${key}=\"${attrs[key]}\"`\r\n      }\r\n    }\r\n\r\n    str += '>'\r\n\r\n    return str\r\n  }\r\n\r\n  /**\r\n   * Create close tag string.\r\n   */\r\n  function _closeTag(tag) {\r\n    return `</${tag}>`\r\n  }\r\n\r\n  /**\r\n   * Create query for the current format.\r\n   */\r\n  function _query(tag, attrs) {\r\n    let selector = tag\r\n\r\n    for (const key in attrs) {\r\n      if (Object.prototype.hasOwnProperty.call(attrs, key)) {\r\n        if (key === 'id') {\r\n          selector += `#${attrs[key]}`\r\n        }\r\n        else if (key === 'class') {\r\n          selector += `.${attrs[key]}`\r\n        }\r\n        else {\r\n          selector += `[${key}=\"${attrs[key]}\"]`\r\n        }\r\n      }\r\n    }\r\n\r\n    return selector\r\n  }\r\n\r\n  /**\r\n   * Test matching element.\r\n   */\r\n  function _matches(el, selector) {\r\n    if (!el || el.nodeType !== Node.ELEMENT_NODE) {\r\n      return false\r\n    }\r\n\r\n    return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector)\r\n  }\r\n\r\n  /**\r\n   * Apply format to the current node till we find a marker.\r\n   */\r\n  function _processNodeFormat(start_node, tag, attrs) {\r\n\r\n    // No start node.\r\n    if (!start_node) {\r\n      return\r\n    }\r\n\r\n    // Skip comments.\r\n    while (start_node.nodeType === Node.COMMENT_NODE) {\r\n      start_node = start_node.nextSibling\r\n    }\r\n\r\n    // No start node.\r\n    if (!start_node) {\r\n      return\r\n    }\r\n\r\n    // If we are in a block process starting with the first child.\r\n    if (editor.node.isBlock(start_node) && start_node.tagName !== 'HR') {\r\n      if (editor.node.hasClass(start_node.firstChild, 'fr-marker')) {\r\n        _processNodeFormat(start_node.firstChild.nextSibling, tag, attrs)\r\n      }\r\n      else {\r\n        _processNodeFormat(start_node.firstChild, tag, attrs)\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    // Create new element.\r\n    let $span = $(editor.doc.createElement(tag))\r\n    $span.attr(attrs)\r\n\r\n    $span.insertBefore(start_node)\r\n\r\n    // Start with the next sibling of the current node.\r\n    let node = start_node\r\n\r\n    // Search while there is a next node.\r\n    // Next node is not marker.\r\n    // Next node does not contain marker.\r\n    // Next node is not an inner list.\r\n    while (node && !$(node).is('.fr-marker') && $(node).find('.fr-marker').length === 0 && node.tagName !== 'UL' && node.tagName !== 'OL') {\r\n      const tmp = node\r\n\r\n      if (editor.node.isBlock(node) && start_node.tagName !== 'HR') {\r\n        _processNodeFormat(node.firstChild, tag, attrs)\r\n        return false\r\n      }\r\n\r\n      node = node.nextSibling\r\n      $span.append(tmp)\r\n    }\r\n\r\n    // If there is no node left at the right look at parent siblings.\r\n    if (!node) {\r\n      let p_node = $span.get(0).parentNode\r\n\r\n      while (p_node && !p_node.nextSibling && !editor.node.isElement(p_node)) {\r\n        p_node = p_node.parentNode\r\n      }\r\n\r\n      if (p_node) {\r\n        let sibling = p_node.nextSibling\r\n\r\n        if (sibling) {\r\n\r\n          // Parent sibling is block then look next.\r\n          if (!editor.node.isBlock(sibling)) {\r\n            _processNodeFormat(sibling, tag, attrs)\r\n          }\r\n          else if (sibling.tagName === 'HR') {\r\n            _processNodeFormat(sibling.nextSibling, tag, attrs)\r\n          }\r\n          else {\r\n            _processNodeFormat(sibling.firstChild, tag, attrs)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Start processing child nodes if there is a marker or an inner list.\r\n    else if ($(node).find('.fr-marker').length || node.tagName === 'UL' || node.tagName === 'OL') {\r\n      _processNodeFormat(node.firstChild, tag, attrs)\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3390\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1770\r\n    else if (editor.browser.mozilla && editor.node.hasClass(node, 'fr-marker')) {\r\n      const selections = editor.selection.blocks()\r\n      const length = selections.length\r\n      let i\r\n\r\n      for (i = 0; i < length; i++) {\r\n        if (selections[i] != node.parentNode && selections[i].childNodes.length && selections[i].childNodes[0] != node.parentNode) {\r\n          node = selections[i].childNodes[1] || selections[i].childNodes[0]\r\n          $span = $(_openTag(tag, attrs)).insertBefore(node)\r\n          $span.append(node)\r\n        }\r\n      }\r\n    }\r\n\r\n    if ($span.is(':empty')) {\r\n      $span.remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply tag format.\r\n   */\r\n  function apply(tag, attrs) {\r\n    let i\r\n\r\n    if (typeof attrs === 'undefined') {\r\n      attrs = {}\r\n    }\r\n\r\n    if (attrs.style) {\r\n      delete attrs.style\r\n    }\r\n\r\n    // Selection is collapsed.\r\n    if (editor.selection.isCollapsed()) {\r\n      editor.markers.insert()\r\n      const $marker = editor.$el.find('.fr-marker')\r\n      $marker.replaceWith(_openTag(tag, attrs) + FE.INVISIBLE_SPACE + FE.MARKERS + _closeTag(tag))\r\n      editor.selection.restore()\r\n    }\r\n\r\n    // Selection is not collapsed.\r\n    else {\r\n      editor.selection.save()\r\n\r\n      // Check if selection can be deleted.\r\n      const start_marker = editor.$el.find('.fr-marker[data-type=\"true\"]').length && editor.$el.find('.fr-marker[data-type=\"true\"]').get(0).nextSibling\r\n\r\n      _processNodeFormat(start_marker, tag, attrs)\r\n\r\n      // Clean inner spans.\r\n      let inner_spans\r\n\r\n      do {\r\n        inner_spans = editor.$el.find(`${_query(tag, attrs)} > ${_query(tag, attrs)}`)\r\n\r\n        for (i = 0; i < inner_spans.length; i++) {\r\n          inner_spans[i].outerHTML = inner_spans[i].innerHTML\r\n        }\r\n      } while (inner_spans.length)\r\n\r\n      editor.el.normalize()\r\n\r\n      // Have markers inside the new tag.\r\n      const markers = editor.el.querySelectorAll('.fr-marker')\r\n\r\n      for (i = 0; i < markers.length; i++) {\r\n        const $mk = $(markers[i])\r\n\r\n        if ($mk.data('type') === true) {\r\n          if (_matches($mk.get(0).nextSibling, _query(tag, attrs))) {\r\n            $mk.next().prepend($mk)\r\n          }\r\n        }\r\n        else if (_matches($mk.get(0).previousSibling, _query(tag, attrs))) {\r\n          $mk.prev().append($mk)\r\n        }\r\n      }\r\n\r\n      editor.selection.restore()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Split at current node the parents with tag.\r\n   */\r\n  function _split($node, tag, attrs, collapsed) {\r\n    if (!collapsed) {\r\n      let changed = false\r\n\r\n      if ($node.data('type') === true) {\r\n        while (editor.node.isFirstSibling($node.get(0)) && !$node.parent().is(editor.$el) && !$node.parent().is('ol') && !$node.parent().is('ul')) {\r\n          $node.parent().before($node)\r\n          changed = true\r\n        }\r\n      }\r\n      else if ($node.data('type') === false) {\r\n        while (editor.node.isLastSibling($node.get(0)) && !$node.parent().is(editor.$el) && !$node.parent().is('ol') && !$node.parent().is('ul')) {\r\n          $node.parent().after($node)\r\n          changed = true\r\n        }\r\n      }\r\n\r\n      if (changed) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    // Check if current node has parents which match our tag.\r\n    if ($node.parents(tag).length || typeof tag === 'undefined') {\r\n\r\n      let close_str = ''\r\n      let open_str = ''\r\n      let $p_node = $node.parent()\r\n      let p_html\r\n\r\n      // Do not split when parent is block.\r\n      if ($p_node.is(editor.$el) || editor.node.isBlock($p_node.get(0))) {\r\n        return false\r\n      }\r\n\r\n      // Check undefined so that we.\r\n      while (!editor.node.isBlock($p_node.parent().get(0)) && (typeof tag === 'undefined' || !_matches($p_node.get(0), _query(tag, attrs)))) {\r\n        close_str += editor.node.closeTagString($p_node.get(0))\r\n        open_str = editor.node.openTagString($p_node.get(0)) + open_str\r\n        $p_node = $p_node.parent()\r\n      }\r\n\r\n      // Node STR.\r\n      const node_str = $node.get(0).outerHTML\r\n\r\n      // Replace node with marker.\r\n      $node.replaceWith('<span id=\"mark\"></span>')\r\n\r\n      // Rebuild the HTML for the node.\r\n      p_html = $p_node.html().replace(/<span id=\"mark\"><\\/span>/, close_str + editor.node.closeTagString($p_node.get(0)) + open_str + node_str + close_str + editor.node.openTagString($p_node.get(0)) + open_str);\r\n      $p_node.replaceWith(editor.node.openTagString($p_node.get(0)) + p_html + editor.node.closeTagString($p_node.get(0)));\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Process node remove.\r\n   */\r\n  function _processNodeRemove($node, should_remove, tag, attrs) {\r\n\r\n    // Get contents.\r\n    const contents = editor.node.contents($node.get(0))\r\n\r\n    // Loop contents.\r\n    for (let i = 0; i < contents.length; i++) {\r\n      const node = contents[i]\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1954\r\n      if(node.innerHTML && node.innerHTML.charCodeAt() == 8203 && node.tagName.toLocaleLowerCase()==tag) {\r\n        node.outerHTML = node.innerHTML;\r\n      }\r\n\r\n      // We found a marker => change should_remove flag.\r\n      if (editor.node.hasClass(node, 'fr-marker')) {\r\n        should_remove = (should_remove + 1) % 2\r\n      }\r\n\r\n      // We should remove.\r\n      else if (should_remove) {\r\n\r\n        // Check if we have a marker inside it.\r\n        if ($(node).find('.fr-marker').length > 0) {\r\n          should_remove = _processNodeRemove($(node), should_remove, tag, attrs)\r\n        }\r\n\r\n        // Remove everything starting with the most inner nodes which match the current selector.\r\n        else {\r\n\r\n          const nodes = $(node).find(tag || '*:not(br)');\r\n\r\n          for (let j = nodes.length - 1; j >= 0; j--) {\r\n            const nd = nodes[j]\r\n\r\n            if (!editor.node.isBlock(nd) && !editor.node.isVoid(nd) && (typeof tag === 'undefined' || _matches(nd, _query(tag, attrs)))) {\r\n              if (!editor.node.hasClass(nd, 'fr-clone')) {\r\n                nd.outerHTML = nd.innerHTML\r\n              }\r\n            }\r\n            else if (editor.node.isBlock(nd) && typeof tag === 'undefined' && node.tagName !== 'TABLE') {\r\n              editor.node.clearAttributes(nd)\r\n            }\r\n          }\r\n\r\n          // Check inner nodes.\r\n          if (typeof tag === 'undefined' && node.nodeType === Node.ELEMENT_NODE && !editor.node.isVoid(node) || _matches(node, _query(tag, attrs))) {\r\n            if (!editor.node.isBlock(node)) {\r\n              if (!editor.node.hasClass(node, 'fr-clone')) {\r\n                node.outerHTML = node.innerHTML;\r\n              }\r\n            }\r\n          }\r\n\r\n          // Remove formatting from block nodes.\r\n          else if (typeof tag === 'undefined' && node.nodeType === Node.ELEMENT_NODE && editor.node.isBlock(node) && node.tagName !== 'TABLE') {\r\n            editor.node.clearAttributes(node)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n\r\n        // There is a marker.\r\n        if ($(node).find('.fr-marker').length > 0) {\r\n          should_remove = _processNodeRemove($(node), should_remove, tag, attrs)\r\n        }\r\n      }\r\n    }\r\n\r\n    return should_remove\r\n  }\r\n\r\n  /**\r\n   * Remove tag.\r\n   */\r\n  function remove(tag, attrs) {\r\n    if (typeof attrs === 'undefined') {\r\n      attrs = {}\r\n    }\r\n\r\n    if (attrs.style) {\r\n      delete attrs.style\r\n    }\r\n\r\n    const collapsed = editor.selection.isCollapsed()\r\n    editor.selection.save()\r\n\r\n    // Split at start and end marker.\r\n    let reassess = true\r\n\r\n    while (reassess) {\r\n      reassess = false\r\n      const markers = editor.$el.find('.fr-marker')\r\n\r\n      for (let i = 0; i < markers.length; i++) {\r\n        const $marker = $(markers[i])\r\n        let $clone = null\r\n\r\n        if (!$marker.attr('data-cloned') && !collapsed) {\r\n          $clone = $marker.clone().removeClass('fr-marker').addClass('fr-clone')\r\n\r\n          if ($marker.data('type') && $marker.data('type').toString() === 'true') {\r\n            $marker.attr('data-cloned', true).after($clone)\r\n          }\r\n          else {\r\n            $marker.attr('data-cloned', true).before($clone)\r\n          }\r\n        }\r\n\r\n        if (_split($marker, tag, attrs, collapsed)) {\r\n          reassess = true\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove format between markers.\r\n    _processNodeRemove(editor.$el, 0, tag, attrs)\r\n\r\n    // Replace markers with their clones.\r\n    if (!collapsed) {\r\n      editor.$el.find('.fr-marker').remove()\r\n      editor.$el.find('.fr-clone').removeClass('fr-clone').addClass('fr-marker')\r\n    }\r\n\r\n    // Selection is collapsed => add invisible spaces.\r\n    if (collapsed) {\r\n      editor.$el.find('.fr-marker').before(FE.INVISIBLE_SPACE).after(FE.INVISIBLE_SPACE)\r\n    }\r\n\r\n    editor.html.cleanEmptyTags()\r\n    editor.el.normalize()\r\n    editor.selection.restore()\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2168\r\n    const anchorNode = editor.win.getSelection() && editor.win.getSelection().anchorNode\r\n\r\n    if (anchorNode) {\r\n      const blockParent = editor.node.blockParent(anchorNode)\r\n      const multiSelection = anchorNode.textContent.replace(/\\u200B/g, '').length ? true : false\r\n      const { startOffset, endOffset} = editor.win.getSelection().getRangeAt(0)\r\n\r\n      // Keep only one zero width space and remove all the other zero width spaces if selection consists of only zerowidth spaces.\r\n      if (!editor.selection.text().replace(/\\u200B/g, '').length) {\r\n        removeZeroWidth(blockParent, anchorNode)\r\n      }\r\n\r\n      const range = editor.win.getSelection().getRangeAt(0)\r\n\r\n      // Setting the range to the zerowidthspace index\r\n      if (anchorNode.nodeType === Node.TEXT_NODE) {\r\n        if (!multiSelection || (!editor.selection.text().length && startOffset === endOffset)) {\r\n          const newOffset = anchorNode.textContent.search(/\\u200B/g) + 1\r\n\r\n          // Fix for IE browser\r\n          if (editor.browser.msie) {\r\n            const tmprange = editor.doc.createRange()\r\n            editor.selection.get().removeAllRanges()\r\n            tmprange.setStart(anchorNode, newOffset)\r\n            tmprange.setEnd(anchorNode, newOffset)\r\n            editor.selection.get().addRange(tmprange)\r\n          } else {\r\n            range.setStart(anchorNode, newOffset)\r\n            range.setEnd(anchorNode, newOffset)\r\n          }\r\n        }\r\n      } else {\r\n        const txtNodeToFocus = $(anchorNode).contents().filter(function (tmpNode) {\r\n          return (tmpNode.nodeType === Node.TEXT_NODE && tmpNode.textContent.search(/\\u200B/g) >= 0)\r\n        })\r\n        if (txtNodeToFocus) {\r\n          const newOffset = txtNodeToFocus.text().search(/\\u200B/g) + 1\r\n          range.setStart(txtNodeToFocus.get(0), newOffset)\r\n          range.setEnd(txtNodeToFocus.get(0), newOffset)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Removes zerowidth spaces and keeps only one zero width space for the marker.\r\n  function removeZeroWidth(blockParent, compareNode) {\r\n    if (blockParent && compareNode) {\r\n      if (blockParent.isSameNode(compareNode)) {\r\n        \r\n        // keeping only one zerowidth space if there are multiple\r\n        blockParent.textContent = blockParent.textContent.replace(/\\u200B(?=.*\\u200B)/g, '')\r\n      } else {\r\n        if (blockParent.nodeType === Node.TEXT_NODE)\r\n          blockParent.textContent = blockParent.textContent.replace(/\\u200B/g, '')\r\n      }\r\n      if (!blockParent.childNodes.length) {\r\n        return false\r\n      } else if (Array.isArray(blockParent.childNodes)) {\r\n        blockParent.childNodes.forEach(function (node) {\r\n          removeZeroWidth(node, compareNode)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle format.\r\n   */\r\n  function toggle(tag, attrs) {\r\n    if (is(tag, attrs)) {\r\n      remove(tag, attrs)\r\n    }\r\n    else {\r\n      apply(tag, attrs)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean format.\r\n   */\r\n  function _cleanFormat(elem, prop) {\r\n    const $elem = $(elem)\r\n    $elem.css(prop, '')\r\n\r\n    if ($elem.attr('style') === '') {\r\n      $elem.replaceWith($elem.html())\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Filter spans with specific property.\r\n   */\r\n  function _filterSpans(elem, prop) {\r\n    return $(elem).attr('style').indexOf(`${prop}:`) === 0 || $(elem).attr('style').indexOf(`;${prop}:`) >= 0 || $(elem).attr('style').indexOf(`; ${prop}:`) >= 0\r\n  }\r\n\r\n  /**\r\n   * Apply inline style.\r\n   */\r\n  function applyStyle(prop, val) {\r\n\r\n    let i\r\n    let $marker\r\n    let $span = null\r\n\r\n    // Selection is collapsed.\r\n    if (editor.selection.isCollapsed()) {\r\n      editor.markers.insert()\r\n      $marker = editor.$el.find('.fr-marker')\r\n      const $parent = $marker.parent()\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1084\r\n      if (editor.node.openTagString($parent.get(0)) === `<span style=\"${prop}: ${$parent.css(prop)};\">`) {\r\n        if (editor.node.isEmpty($parent.get(0))) {\r\n          $span = $(editor.doc.createElement('span')).attr('style', `${prop}: ${val};`).html(`${FE.INVISIBLE_SPACE}${FE.MARKERS}`)\r\n          $parent.replaceWith($span)\r\n        }\r\n\r\n        // We should get out of the current span with the same props.\r\n        else {\r\n          const x = {}\r\n          x['style*'] = `${prop}:`\r\n          _split($marker, 'span', x, true)\r\n          $marker = editor.$el.find('.fr-marker')\r\n\r\n          if (val) {\r\n            $span = $(editor.doc.createElement('span')).attr('style', `${prop}: ${val};`).html(`${FE.INVISIBLE_SPACE}${FE.MARKERS}`)\r\n            $marker.replaceWith($span)\r\n          }\r\n          else {\r\n            $marker.replaceWith(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n          }\r\n        }\r\n\r\n        editor.html.cleanEmptyTags()\r\n      }\r\n      else if (editor.node.isEmpty($parent.get(0)) && $parent.is('span')) {\r\n        $marker.replaceWith(FE.MARKERS)\r\n        $parent.css(prop, val)\r\n      }\r\n      else {\r\n        $span = $(`<span style=\"${prop}: ${val};\">${FE.INVISIBLE_SPACE}${FE.MARKERS}</span>`)\r\n        $marker.replaceWith($span)\r\n      }\r\n\r\n      // If we have a span, then split the parent nodes.\r\n      if ($span) {\r\n        _splitParents($span, prop, val)\r\n      }\r\n    }\r\n    else {\r\n      editor.selection.save()\r\n\r\n      // When removing selection we should make sure we have selection outside of the first/last parent node.\r\n      // We also need to do this for U tags.\r\n      if (val === null || prop === 'color' && editor.$el.find('.fr-marker').parents('u, a').length > 0) {\r\n        const markers = editor.$el.find('.fr-marker')\r\n\r\n        for (i = 0; i < markers.length; i++) {\r\n          $marker = $(markers[i])\r\n\r\n          if ($marker.data('type') === true || $marker.data('type') === 'true') {\r\n            while (editor.node.isFirstSibling($marker.get(0)) && !$marker.parent().is(editor.$el) && !editor.node.isElement($marker.parent().get(0)) && !editor.node.isBlock($marker.parent().get(0))) {\r\n              $marker.parent().before($marker)\r\n            }\r\n          }\r\n          else {\r\n            while (editor.node.isLastSibling($marker.get(0)) && !$marker.parent().is(editor.$el) && !editor.node.isElement($marker.parent().get(0)) && !editor.node.isBlock($marker.parent().get(0))) {\r\n              $marker.parent().after($marker)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Check if selection can be deleted.\r\n      let start_marker = editor.$el.find('.fr-marker[data-type=\"true\"]').get(0).nextSibling\r\n\r\n      while (start_marker.firstChild) {\t\r\n        start_marker = start_marker.firstChild\t\r\n      }\r\n\r\n      const attrs = {\r\n        class: 'fr-unprocessed'\r\n      }\r\n\r\n      if (val) {\r\n        attrs.style = `${prop}: ${val};`\r\n      }\r\n      _processNodeFormat(start_marker, 'span', attrs)\r\n\r\n      editor.$el.find('.fr-marker + .fr-unprocessed').each(function () {\r\n        $(this).prepend($(this).prev())\r\n      })\r\n\r\n      editor.$el.find('.fr-unprocessed + .fr-marker').each(function () {\r\n        $(this).prev().append($(this))\r\n      })\r\n\r\n      // When em are being used keep them as the most inner props.\r\n      if ((val || '').match(/\\dem$/)) {\r\n        editor.$el.find('span.fr-unprocessed').removeClass('fr-unprocessed')\r\n      }\r\n\r\n      while (editor.$el.find('span.fr-unprocessed').length > 0) {\r\n        $span = editor.$el.find('span.fr-unprocessed').first().removeClass('fr-unprocessed')\r\n\r\n        // Look at parent node to see if we can merge with it.\r\n        $span.parent().get(0).normalize()\r\n\r\n        if ($span.parent().is('span') && $span.parent().get(0).childNodes.length === 1) {\r\n          $span.parent().css(prop, val)\r\n          const $child = $span\r\n          $span = $span.parent()\r\n          $child.replaceWith($child.html())\r\n        }\r\n\r\n        // Replace in reverse order to take care of the inner spans first.\r\n        const inner_spans = $span.find('span')\r\n\r\n        for (i = inner_spans.length - 1; i >= 0; i--) {\r\n          _cleanFormat(inner_spans[i], prop)\r\n        }\r\n\r\n        // Split parent nodes.\r\n        _splitParents($span, prop, val)\r\n      }\r\n    }\r\n\r\n    _normalize()\r\n  }\r\n\r\n  function _splitParents($span, prop, val) {\r\n    let i\r\n\r\n    // Look at parents with the same property.\r\n    let $outer_span = $span.parentsUntil(editor.$el, 'span[style]')\r\n    const to_remove = []\r\n\r\n    for (i = $outer_span.length - 1; i >= 0; i--) {\r\n      if (!_filterSpans($outer_span[i], prop)) {\r\n        to_remove.push($outer_span[i])\r\n      }\r\n    }\r\n\r\n    $outer_span = $outer_span.not(to_remove)\r\n\r\n    if ($outer_span.length) {\r\n      let c_str = ''\r\n      let o_str = ''\r\n      let ic_str = ''\r\n      let io_str = ''\r\n      let c_node = $span.get(0)\r\n\r\n      do {\r\n        c_node = c_node.parentNode\r\n\r\n        $(c_node).addClass('fr-split')\r\n\r\n        c_str += editor.node.closeTagString(c_node)\r\n        o_str = editor.node.openTagString($(c_node).clone().addClass('fr-split').get(0)) + o_str\r\n\r\n        // Inner close and open.\r\n        if ($outer_span.get(0) !== c_node) {\r\n          ic_str += editor.node.closeTagString(c_node)\r\n          io_str = editor.node.openTagString($(c_node).clone().addClass('fr-split').get(0)) + io_str\r\n        }\r\n      } while ($outer_span.get(0) !== c_node)\r\n\r\n      // Build breaking string.\r\n      const str = `${c_str + editor.node.openTagString($($outer_span.get(0)).clone().css(prop, val || '').get(0)) + io_str + $span.css(prop, '').get(0).outerHTML + ic_str}</span>${o_str}`\r\n      $span.replaceWith('<span id=\"fr-break\"></span>')\r\n      const html = $outer_span.get(0).outerHTML\r\n\r\n      // Replace the outer node.\r\n      $($outer_span.get(0)).replaceWith(html.replace(/<span id=\"fr-break\"><\\/span>/g, function () {\r\n\r\n        return str;\r\n      }));\r\n    }\r\n  }\r\n\r\n  function _normalize() {\r\n    let i\r\n\r\n    while (editor.$el.find('.fr-split:empty').length > 0) {\r\n      editor.$el.find('.fr-split:empty').remove()\r\n    }\r\n\r\n    editor.$el.find('.fr-split').removeClass('fr-split')\r\n\r\n    editor.$el.find('[style=\"\"]').removeAttr('style')\r\n    editor.$el.find('[class=\"\"]').removeAttr('class')\r\n\r\n    editor.html.cleanEmptyTags()\r\n\r\n    const $spans = editor.$el.find('span')\r\n    for (let k = $spans.length - 1; k >= 0; k--) {\r\n      const msp = $spans[k]\r\n\r\n      if (!msp.attributes || msp.attributes.length === 0) {\r\n        $(msp).replaceWith(msp.innerHTML)\r\n      }\r\n    }\r\n\r\n    editor.el.normalize()\r\n\r\n    // Join current spans together if they are one next to each other.\r\n    const just_spans = editor.$el.find('span[style] + span[style]')\r\n\r\n    for (i = 0; i < just_spans.length; i++) {\r\n      const $x = $(just_spans[i])\r\n      const $p = $(just_spans[i]).prev()\r\n\r\n      if ($x.get(0).previousSibling === $p.get(0) && editor.node.openTagString($x.get(0)) === editor.node.openTagString($p.get(0))) {\r\n        $x.prepend($p.html())\r\n        $p.remove()\r\n      }\r\n    }\r\n\r\n    // Check if we have span(font-size) inside span(background-color).\r\n    // Then, make a split.\r\n    editor.$el.find('span[style] span[style]').each(function () {\r\n      if ($(this).attr('style').indexOf('font-size') >= 0) {\r\n        const $parent = $(this).parents('span[style]')\r\n\r\n        if ($parent.attr('style').indexOf('background-color') >= 0) {\r\n          $(this).attr('style', `${$(this).attr('style')};${$parent.attr('style')}`)\r\n          _split($(this), 'span[style]', {}, false)\r\n        }\r\n      }\r\n    })\r\n\r\n    editor.el.normalize()\r\n    editor.selection.restore()\r\n  }\r\n\r\n  /**\r\n   * Remove inline style.\r\n   */\r\n  function removeStyle(prop) {\r\n    applyStyle(prop, null)\r\n  }\r\n\r\n  /**\r\n   * Get the current state.\r\n   */\r\n  function is(tag, attrs) {\r\n    if (typeof attrs === 'undefined') {\r\n      attrs = {}\r\n    }\r\n\r\n    if (attrs.style) {\r\n      delete attrs.style\r\n    }\r\n\r\n    const range = editor.selection.ranges(0)\r\n    let el = range.startContainer\r\n\r\n    if (el.nodeType === Node.ELEMENT_NODE) {\r\n\r\n      // Search for node deeper.\r\n      if (el.childNodes.length > 0 && el.childNodes[range.startOffset]) {\r\n        el = el.childNodes[range.startOffset]\r\n      }\r\n    }\r\n\r\n    // If we are at the end of text node, then check next elements.\r\n    if (!range.collapsed && el.nodeType === Node.TEXT_NODE && range.startOffset === (el.textContent || '').length) {\r\n      while (!editor.node.isBlock(el.parentNode) && !el.nextSibling) {\r\n        el = el.parentNode\r\n      }\r\n\r\n      if (el.nextSibling) {\r\n        el = el.nextSibling\r\n      }\r\n    }\r\n\r\n\r\n    // Check first childs.\r\n    let f_child = el\r\n\r\n    while (f_child && f_child.nodeType === Node.ELEMENT_NODE && !_matches(f_child, _query(tag, attrs))) {\r\n      f_child = f_child.firstChild\r\n    }\r\n\r\n    if (f_child && f_child.nodeType === Node.ELEMENT_NODE && _matches(f_child, _query(tag, attrs))) {\r\n      return true\r\n    }\r\n\r\n\r\n    // Check parents.\r\n    let p_node = el\r\n\r\n    if (p_node && p_node.nodeType !== Node.ELEMENT_NODE) {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    while (p_node && p_node.nodeType === Node.ELEMENT_NODE && p_node !== editor.el && !_matches(p_node, _query(tag, attrs))) {\r\n      p_node = p_node.parentNode\r\n    }\r\n\r\n    if (p_node && p_node.nodeType === Node.ELEMENT_NODE && p_node !== editor.el && _matches(p_node, _query(tag, attrs))) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  return {\r\n    is,\r\n    toggle,\r\n    apply,\r\n    remove,\r\n    applyStyle,\r\n    removeStyle\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\r\n\r\nFE.MODULES.spaces = function (editor) {\r\n\r\n  function _normalizeNode(node, browser_way) {\r\n    const p_node = node.previousSibling\r\n    const n_node = node.nextSibling\r\n    let txt = node.textContent\r\n    const parent_node = node.parentNode\r\n    const enterTags = ['P', 'DIV', 'BR']\r\n    const tagOptsValues = [FE.ENTER_P, FE.ENTER_DIV, FE.ENTER_BR]\r\n\r\n    if (editor.html.isPreformatted(parent_node)) {\r\n      return\r\n    }\r\n\r\n    if (browser_way) {\r\n      txt = txt.replace(/[\\f\\n\\r\\t\\v ]{2,}/g, ' ')\r\n\r\n      // No node after.\r\n      if ((!n_node || n_node.tagName === 'BR' || editor.node.isBlock(n_node)) && (editor.node.isBlock(parent_node) || editor.node.isLink(parent_node) && !parent_node.nextSibling || editor.node.isElement(parent_node))) {\r\n        txt = txt.replace(/[\\f\\n\\r\\t\\v ]{1,}$/g, '')\r\n      }\r\n\r\n      if ((!p_node || p_node.tagName === 'BR' || editor.node.isBlock(p_node)) && (editor.node.isBlock(parent_node) || editor.node.isLink(parent_node) && !parent_node.previousSibling || editor.node.isElement(parent_node))) {\r\n        txt = txt.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g, '')\r\n      }\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/3099\r\n      if (editor.node.isBlock(n_node) || editor.node.isBlock(p_node)) {\r\n        txt = txt.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g, '');\r\n      }\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1767 .\r\n      if (txt === ' ' && ((p_node && editor.node.isVoid(p_node)) || (n_node && editor.node.isVoid(n_node))) && !((p_node && n_node && editor.node.isVoid(p_node)) || (n_node && p_node && editor.node.isVoid(n_node)))) {\r\n        txt = ''\r\n      }\r\n    }\r\n\r\n    // Collapse spaces when we have nested blocks.\r\n    if ((!p_node && editor.node.isBlock(n_node) || !n_node && editor.node.isBlock(p_node)) && editor.node.isBlock(parent_node) && parent_node !== editor.el) {\r\n      txt = txt.replace(/^[\\f\\n\\r\\t\\v ]{1,}/g, '')\r\n    }\r\n\r\n    // Convert all non breaking to breaking spaces.\r\n    if (!browser_way) {\r\n      txt = txt.replace(new RegExp(FE.UNICODE_NBSP, 'g'), ' ')\r\n    }\r\n\r\n    let new_text = ''\r\n\r\n    for (let t = 0; t < txt.length; t++) {\r\n\r\n      // Do not use unicodes next to void tags.\r\n      if (txt.charCodeAt(t) == 32 && (t === 0 || new_text.charCodeAt(t - 1) == 32) && ((editor.opts.enter === FE.ENTER_BR || editor.opts.enter === FE.ENTER_DIV) && (p_node && p_node.tagName === 'BR' || n_node && n_node.tagName === 'BR') || !((p_node && n_node && editor.node.isVoid(p_node)) || (p_node && n_node && editor.node.isVoid(n_node))))) {\r\n        new_text += FE.UNICODE_NBSP\r\n      }\r\n      else {\r\n        new_text += txt[t]\r\n      }\r\n    }\r\n\r\n    // Ending spaces should be NBSP or spaces before block tags.\r\n    // 1. No node after. (and the parent node is block tag.)\r\n    // 2. Next block is block tag.\r\n    // 3. Next element has display block.\r\n    if (!n_node || n_node && editor.node.isBlock(n_node) || n_node && n_node.nodeType === Node.ELEMENT_NODE && editor.win.getComputedStyle(n_node) && editor.win.getComputedStyle(n_node).display === 'block') {\r\n\r\n      // OR(||) condition is for https://github.com/froala-labs/froala-editor-js-2/issues/1949\r\n      if (!editor.node.isVoid(p_node) || (p_node && enterTags.indexOf(p_node.tagName) !== -1 && tagOptsValues.indexOf(editor.opts.enter) !== -1)) {\r\n        new_text = new_text.replace(/ $/, FE.UNICODE_NBSP)\r\n      }\r\n    }\r\n\r\n    // Previous sibling is not void or block.\r\n    if (p_node && !editor.node.isVoid(p_node) && !editor.node.isBlock(p_node)) {\r\n      new_text = new_text.replace(/^\\u00A0([^ $])/, ' $1')\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1355.\r\n      if (new_text.length === 1 && new_text.charCodeAt(0) === 160 && n_node && !editor.node.isVoid(n_node) && !editor.node.isBlock(n_node)) {\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/683\r\n        // if new text is not surrounded by markers\r\n        if (!(editor.node.hasClass(p_node, 'fr-marker') && editor.node.hasClass(n_node, 'fr-marker'))) {\r\n          new_text = ' ';\r\n        }\r\n      }\r\n    }\r\n\r\n    // Convert middle nbsp to spaces.\r\n    if (!browser_way) {\r\n      new_text = new_text.replace(/([^ \\u00A0])\\u00A0([^ \\u00A0])/g, '$1 $2')\r\n    }\r\n\r\n    if (node.textContent !== new_text) {\r\n      node.textContent = new_text\r\n    }\r\n  }\r\n\r\n  function normalize(el, browser_way) {\r\n    if (typeof el === 'undefined' || !el) {\r\n      el = editor.el\r\n    }\r\n\r\n    if (typeof browser_way === 'undefined') {\r\n      browser_way = false\r\n    }\r\n\r\n    // Ignore contenteditable.\r\n    if (el.getAttribute && el.getAttribute('contenteditable') === 'false') {\r\n      return\r\n    }\r\n\r\n    if (el.nodeType === Node.TEXT_NODE) {\r\n      _normalizeNode(el, browser_way)\r\n    }\r\n    else if (el.nodeType === Node.ELEMENT_NODE) {\r\n      const walker = editor.doc.createTreeWalker(el, NodeFilter.SHOW_TEXT, editor.node.filter((node) => {\r\n\r\n        // Store the current parent node.\r\n        let temp_node = node.parentNode\r\n\r\n        // Loop through the nodes to see if it is PRE tag, go to the highest parent until editable element.\r\n        while (temp_node && temp_node !== editor.el) {\r\n\r\n          if (temp_node.tagName === 'STYLE' || temp_node.tagName === 'IFRAME') {\r\n            return false\r\n          }\r\n\r\n          if (temp_node.tagName !== 'PRE') {\r\n\r\n            // Check next parent.\r\n            temp_node = temp_node.parentNode\r\n          }\r\n          else {\r\n\r\n            // If inside a PRE tag return false and move to next element.\r\n            return false\r\n          }\r\n        }\r\n\r\n        // If not PRE tag start matching for chars that need to be removed from all other html tags.\r\n        return node.textContent.match(/([ \\u00A0\\f\\n\\r\\t\\v]{2,})|(^[ \\u00A0\\f\\n\\r\\t\\v]{1,})|([ \\u00A0\\f\\n\\r\\t\\v]{1,}$)/g) !== null && !editor.node.hasClass(node.parentNode, 'fr-marker')\r\n      }), false)\r\n\r\n      while (walker.nextNode()) {\r\n        _normalizeNode(walker.currentNode, browser_way)\r\n      }\r\n    }\r\n  }\r\n\r\n  function normalizeAroundCursor() {\r\n    const nodes = []\r\n    const markers = editor.el.querySelectorAll('.fr-marker')\r\n\r\n    // Get the deep parent node of each marker.\r\n    for (let i = 0; i < markers.length; i++) {\r\n      let node = null\r\n      const p_node = editor.node.blockParent(markers[i])\r\n\r\n      if (p_node) {\r\n        node = p_node\r\n      }\r\n      else {\r\n        node = markers[i]\r\n      }\r\n\r\n      let next_node = node.nextSibling\r\n      let prev_node = node.previousSibling\r\n\r\n      while (next_node && next_node.tagName === 'BR') {\r\n        next_node = next_node.nextSibling\r\n      }\r\n\r\n      while (prev_node && prev_node.tagName === 'BR') {\r\n        prev_node = prev_node.previousSibling\r\n      }\r\n\r\n      // Push current node, prev and next one.\r\n      if (node && nodes.indexOf(node) < 0) {\r\n        nodes.push(node)\r\n      }\r\n\r\n      if (prev_node && nodes.indexOf(prev_node) < 0) {\r\n        nodes.push(prev_node)\r\n      }\r\n\r\n      if (next_node && nodes.indexOf(next_node) < 0) {\r\n        nodes.push(next_node)\r\n      }\r\n    }\r\n\r\n    for (let j = 0; j < nodes.length; j++) {\r\n      normalize(nodes[j])\r\n    }\r\n  }\r\n\r\n  return {\r\n    normalize,\r\n    normalizeAroundCursor\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\n\nFE.INVISIBLE_SPACE = '&#8203;'\nFE.START_MARKER = `<span class=\"fr-marker\" data-id=\"0\" data-type=\"true\" style=\"display: none; line-height: 0;\">${FE.INVISIBLE_SPACE}</span>`\nFE.END_MARKER = `<span class=\"fr-marker\" data-id=\"0\" data-type=\"false\" style=\"display: none; line-height: 0;\">${FE.INVISIBLE_SPACE}</span>`\nFE.MARKERS = FE.START_MARKER + FE.END_MARKER\n\nFE.MODULES.markers = function (editor) {\n  const $ = editor.$\n\n  /**\n   * Build marker element.\n   */\n  function _build(marker, id) {\n    const $span = $(editor.doc.createElement('SPAN'))\n    $span\n      .addClass('fr-marker')\n      .attr('data-id', id)\n      .attr('data-type', marker)\n      .attr('style', `display: ${editor.browser.safari ? 'none' : 'inline-block'}; line-height: 0;`)\n      .html(FE.INVISIBLE_SPACE)\n\n    return $span.get(0)\n  }\n\n  /**\n   * Place marker.\n   */\n  function place(range, marker, id) {\n    let mk\n    let contents\n    let sibling\n\n    try {\n      const boundary = range.cloneRange()\n      boundary.collapse(marker)\n\n      boundary.insertNode(_build(marker, id))\n\n      if (marker === true) {\n        mk = editor.$el.find(`span.fr-marker[data-type=\"true\"][data-id=\"${id}\"]`).get(0)\n        sibling = mk.nextSibling\n\n        // Clean empty spaces.\n        while (sibling && sibling.nodeType === Node.TEXT_NODE && sibling.textContent.length === 0) {\n          $(sibling).remove()\n          sibling = mk.nextSibling\n        }\n      }\n\n      if (marker === true && !range.collapsed) {\n\n        // Move markers outside of something like this:\n        // <p><strong>fooM</strong>bar</p>\n        while (!editor.node.isElement(mk.parentNode) && !sibling) {\n          $(mk.parentNode).after(mk)\n          sibling = mk.nextSibling\n        }\n\n        if (sibling && sibling.nodeType === Node.ELEMENT_NODE && editor.node.isBlock(sibling) && sibling.tagName !== 'HR') {\n\n          // Place the marker deep inside the block tags.\n          contents = [sibling]\n\n          do {\n            sibling = contents[0]\n            contents = editor.node.contents(sibling)\n          } while (contents[0] && editor.node.isBlock(contents[0]))\n\n          $(sibling).prepend($(mk))\n        }\n      }\n\n      if (marker === false && !range.collapsed) {\n        mk = editor.$el.find(`span.fr-marker[data-type=\"false\"][data-id=\"${id}\"]`).get(0)\n        sibling = mk.previousSibling\n\n        if (sibling && sibling.nodeType === Node.ELEMENT_NODE && editor.node.isBlock(sibling) && sibling.tagName !== 'HR') {\n\n          // Place the marker deep inside the block tags.\n          contents = [sibling]\n\n          do {\n            sibling = contents[contents.length - 1]\n            contents = editor.node.contents(sibling)\n          } while (contents[contents.length - 1] && editor.node.isBlock(contents[contents.length - 1]))\n\n          $(sibling).append($(mk))\n        }\n\n        // https://github.com/froala/wysiwyg-editor/issues/705\n        // https://github.com/froala-labs/froala-editor-js-2/issues/854\n        if (mk.parentNode && ['TD', 'TH'].indexOf(mk.parentNode.tagName) >= 0 || (!mk.previousSibling && editor.node.isBlock(mk.parentElement))) {\n          if (mk.parentNode.previousSibling && !mk.previousSibling) {\n            $(mk.parentNode.previousSibling).append(mk)\n          }\n        }\n      }\n\n      const dom_marker = editor.$el.find(`span.fr-marker[data-type=\"${marker}\"][data-id=\"${id}\"]`).get(0)\n\n      // If image is at the top of the editor in an empty P\n      // and floated to right, the text will be pushed down\n      // when trying to insert an image.\n      if (dom_marker) {\n        dom_marker.style.display = 'none'\n      }\n\n      return dom_marker\n    }\n    catch (ex) {\n      return null\n    }\n  }\n\n  /**\n   * Insert a single marker.\n   */\n  function insert() {\n    if (!editor.$wp) {\n      return null\n    }\n\n    try {\n      const range = editor.selection.ranges(0)\n      const container = range.commonAncestorContainer\n\n      // Check if selection is inside editor.\n      if (container !== editor.el && !editor.$el.contains(container)) {\n        return null\n      }\n\n      const boundary = range.cloneRange()\n      const original_range = range.cloneRange()\n      boundary.collapse(true)\n\n      let mk = $(editor.doc.createElement('SPAN'))\n        .addClass('fr-marker')\n        .attr('style', 'display: none; line-height: 0;')\n        .html(FE.INVISIBLE_SPACE)\n        .get(0)\n\n      boundary.insertNode(mk)\n\n      mk = editor.$el.find('span.fr-marker').get(0)\n\n      if (mk) {\n        let sibling = mk.nextSibling\n\n        while (sibling && sibling.nodeType === Node.TEXT_NODE && sibling.textContent.length === 0) {\n          $(sibling).remove()\n          sibling = editor.$el.find('span.fr-marker').get(0).nextSibling\n        }\n\n        // Keep original selection.\n        editor.selection.clear()\n        editor.selection.get().addRange(original_range)\n\n        return mk\n      }\n\n      return null\n\n    }\n    catch (ex) {\n      console.warn('MARKER', ex)\n    }\n  }\n\n  /**\n   * Split HTML at the marker position.\n   */\n  function split() {\n    if (!editor.selection.isCollapsed()) {\n      editor.selection.remove()\n    }\n\n    let marker = editor.$el.find('.fr-marker').get(0)\n\n    if (!marker) {\n      marker = insert()\n    }\n\n    if (!marker) {\n      return null\n    }\n\n    let deep_parent = editor.node.deepestParent(marker)\n\n    if (!deep_parent) {\n      deep_parent = editor.node.blockParent(marker)\n\n      if (deep_parent && deep_parent.tagName !== 'LI') {\n        deep_parent = null\n      }\n    }\n\n    if (deep_parent) {\n      if (editor.node.isBlock(deep_parent) && editor.node.isEmpty(deep_parent)) {\n\n        // https://github.com/froala/wysiwyg-editor/issues/1730.\n        // https://github.com/froala/wysiwyg-editor/issues/1970.\n        if (deep_parent.tagName === 'LI' && (deep_parent.parentNode.firstElementChild === deep_parent && !editor.node.isEmpty(deep_parent.parentNode))) {\n          $(deep_parent).append('<span class=\"fr-marker\"></span>')\n        }\n        else {\n          $(deep_parent).replaceWith('<span class=\"fr-marker\"></span>')\n        }\n      }\n      else if (editor.cursor.isAtStart(marker, deep_parent)) {\n        $(deep_parent).before('<span class=\"fr-marker\"></span>')\n        $(marker).remove()\n      }\n      else if (editor.cursor.isAtEnd(marker, deep_parent)) {\n        $(deep_parent).after('<span class=\"fr-marker\"></span>')\n        $(marker).remove()\n      }\n      else {\n        let node = marker\n        let close_str = ''\n        let open_str = ''\n\n        do {\n          node = node.parentNode\n          close_str += editor.node.closeTagString(node)\n          open_str = editor.node.openTagString(node) + open_str\n        } while (node !== deep_parent)\n\n        $(marker).replaceWith('<span id=\"fr-break\"></span>')\n        let h = editor.node.openTagString(deep_parent) + $(deep_parent).html() + editor.node.closeTagString(deep_parent)\n        h = h.replace(/<span id=\"fr-break\"><\\/span>/g, `${close_str}<span class=\"fr-marker\"></span>${open_str}`)\n\n        $(deep_parent).replaceWith(h)\n      }\n    }\n\n    return editor.$el.find('.fr-marker').get(0)\n  }\n\n  /**\n   * Insert marker at point from event.\n   *\n   * http://stackoverflow.com/questions/11191136/set-a-selection-range-from-a-to-b-in-absolute-position\n   * https://developer.mozilla.org/en-US/docs/Web/API/this.document.caretPositionFromPoint\n   */\n  function insertAtPoint(e) {\n    const x = e.clientX\n    const y = e.clientY\n\n    // Clear markers.\n    remove()\n\n    let start\n    let range = null\n\n    // Default.\n    if (typeof editor.doc.caretPositionFromPoint !== 'undefined') {\n      start = editor.doc.caretPositionFromPoint(x, y)\n      range = editor.doc.createRange()\n\n      range.setStart(start.offsetNode, start.offset)\n      range.setEnd(start.offsetNode, start.offset)\n    }\n\n    // Webkit.\n    else if (typeof editor.doc.caretRangeFromPoint !== 'undefined') {\n      start = editor.doc.caretRangeFromPoint(x, y)\n      range = editor.doc.createRange()\n\n      range.setStart(start.startContainer, start.startOffset)\n      range.setEnd(start.startContainer, start.startOffset)\n    }\n\n    // Set ranges.\n    if (range !== null && typeof editor.win.getSelection !== 'undefined') {\n      const sel = editor.win.getSelection()\n      sel.removeAllRanges()\n      sel.addRange(range)\n    }\n\n    // MSIE.\n    else if (typeof editor.doc.body.createTextRange !== 'undefined') {\n      try {\n        range = editor.doc.body.createTextRange()\n        range.moveToPoint(x, y)\n        const end_range = range.duplicate()\n        end_range.moveToPoint(x, y)\n        range.setEndPoint('EndToEnd', end_range)\n        range.select()\n      }\n      catch (ex) {\n        return false\n      }\n    }\n\n    insert()\n  }\n\n  /**\n   * Remove markers.\n   */\n  function remove() {\n    editor.$el.find('.fr-marker').remove()\n  }\n\n  return {\n    place,\n    insert,\n    split,\n    insertAtPoint,\n    remove\n  }\n}\n","import './markers.js'\r\n\r\nimport FE from '../../../editor.js'\r\n\r\nFE.MODULES.selection = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Get selection text.\r\n   */\r\n  function text() {\r\n    let text = ''\r\n\r\n    if (editor.win.getSelection) {\r\n      text = editor.win.getSelection()\r\n    }\r\n    else if (editor.doc.getSelection) {\r\n      text = editor.doc.getSelection()\r\n    }\r\n    else if (editor.doc.selection) {\r\n      text = editor.doc.selection.createRange().text\r\n    }\r\n\r\n    return text.toString()\r\n  }\r\n\r\n  /**\r\n   * Get the selection object.\r\n   */\r\n  function get() {\r\n    let selection = ''\r\n\r\n    if (editor.win.getSelection) {\r\n      selection = editor.win.getSelection()\r\n    }\r\n    else if (editor.doc.getSelection) {\r\n      selection = editor.doc.getSelection()\r\n    }\r\n    else {\r\n      selection = editor.doc.selection.createRange()\r\n    }\r\n\r\n    return selection\r\n  }\r\n\r\n  /**\r\n   * Get the selection ranges or a single range at a specified index.\r\n   */\r\n  function ranges(index) {\r\n    const sel = get()\r\n    let ranges = []\r\n\r\n    // Get ranges.\r\n    if (sel && sel.getRangeAt && sel.rangeCount) {\r\n      ranges = []\r\n\r\n      for (let i = 0; i < sel.rangeCount; i++) {\r\n        ranges.push(sel.getRangeAt(i))\r\n      }\r\n    }\r\n    else if (editor.doc.createRange) {\r\n      ranges = [editor.doc.createRange()]\r\n    }\r\n    else {\r\n      ranges = []\r\n    }\r\n\r\n    return typeof index !== 'undefined' ? ranges[index] : ranges\r\n  }\r\n\r\n  /**\r\n   * Clear selection.\r\n   */\r\n  function clear() {\r\n    const sel = get()\r\n\r\n    try {\r\n      if (sel.removeAllRanges) {\r\n        sel.removeAllRanges()\r\n      }\r\n      else if (sel.empty) { // IE?\r\n        sel.empty()\r\n      }\r\n      else if (sel.clear) {\r\n        sel.clear()\r\n      }\r\n    }\r\n    catch (ex) {\r\n      // ok.\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Selection element.\r\n   */\r\n  function element() {\r\n    const sel = get()\r\n\r\n    try {\r\n      if (sel.rangeCount) {\r\n        const range = ranges(0)\r\n        let node = range.startContainer\r\n        let child\r\n\r\n        // When selection starts in element, look deeper.\r\n        if (editor.node.isElement(node) && range.startOffset === 0 && node.childNodes.length) {\r\n          while (node.childNodes.length && node.childNodes[0].nodeType === Node.ELEMENT_NODE) {\r\n            node = node.childNodes[0];\r\n          }\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1399.\r\n        if (node.nodeType === Node.TEXT_NODE && range.startOffset === (node.textContent || '').length && node.nextSibling) {\r\n          node = node.nextSibling\r\n        }\r\n\r\n        // Get parrent if node type is not DOM.\r\n        if (node.nodeType === Node.ELEMENT_NODE) {\r\n          let node_found = false\r\n\r\n          // Search for node deeper.\r\n          if (node.childNodes.length > 0 && node.childNodes[range.startOffset]) {\r\n            child = node.childNodes[range.startOffset]\r\n\r\n            // Ignore empty elements.\r\n            while (child && child.nodeType === Node.TEXT_NODE && child.textContent.length === 0) {\r\n              child = child.nextSibling\r\n            }\r\n\r\n            if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n              node = child\r\n              node_found = true\r\n            }\r\n\r\n            // Look back maybe me missed something.\r\n            if (!node_found && node.childNodes.length > 1 && range.startOffset > 0 && node.childNodes[range.startOffset - 1]) {\r\n              child = node.childNodes[range.startOffset - 1]\r\n\r\n              while (child && child.nodeType === Node.TEXT_NODE && child.textContent.length === 0) {\r\n                child = child.nextSibling\r\n              }\r\n\r\n              if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n                node = child\r\n                node_found = true\r\n              }\r\n            }\r\n          }\r\n\r\n          // Selection starts just at the end of the node.\r\n          else if (!range.collapsed && node.nextSibling && node.nextSibling.nodeType === Node.ELEMENT_NODE) {\r\n            child = node.nextSibling\r\n\r\n            if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n              node = child\r\n              node_found = true\r\n            }\r\n          }\r\n\r\n          if (!node_found && node.childNodes.length > 0 && $(node.childNodes[0]).text().replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '') && ['BR', 'IMG', 'HR'].indexOf(node.childNodes[0].tagName) < 0) {\r\n            node = node.childNodes[0]\r\n          }\r\n        }\r\n\r\n        while (node.nodeType !== Node.ELEMENT_NODE && node.parentNode) {\r\n          node = node.parentNode\r\n        }\r\n\r\n        // Make sure the node is in editor.\r\n        let p = node\r\n\r\n        while (p && p.tagName !== 'HTML') {\r\n          if (p === editor.el) {\r\n            return node\r\n          }\r\n\r\n          p = $(p).parent()[0]\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n      // ok.\r\n    }\r\n\r\n    return editor.el\r\n  }\r\n\r\n  /**\r\n   * Selection element.\r\n   */\r\n  function endElement() {\r\n    const sel = get()\r\n\r\n    try {\r\n      if (sel.rangeCount) {\r\n        const range = ranges(0)\r\n        let node = range.endContainer\r\n        let child\r\n\r\n        // Get parrent if node type is not DOM.\r\n        if (node.nodeType === Node.ELEMENT_NODE) {\r\n          let node_found = false\r\n\r\n          // Search for node deeper.\r\n          if (node.childNodes.length > 0 && node.childNodes[range.endOffset] && $(node.childNodes[range.endOffset]).text() === text()) {\r\n            node = node.childNodes[range.endOffset]\r\n            node_found = true\r\n          }\r\n\r\n          // Selection starts just at the end of the node.\r\n          else if (!range.collapsed && node.previousSibling && node.previousSibling.nodeType === Node.ELEMENT_NODE) {\r\n            child = node.previousSibling\r\n\r\n            if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n              node = child\r\n              node_found = true\r\n            }\r\n          }\r\n\r\n          // Browser sees selection at the beginning of the next node.\r\n          else if (!range.collapsed && node.childNodes.length > 0 && node.childNodes[range.endOffset]) {\r\n            child = node.childNodes[range.endOffset].previousSibling\r\n\r\n            if (child.nodeType === Node.ELEMENT_NODE) {\r\n\r\n              if (child && child.textContent.replace(/\\u200B/g, '') === text().replace(/\\u200B/g, '')) {\r\n                node = child\r\n                node_found = true\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!node_found && node.childNodes.length > 0 && $(node.childNodes[node.childNodes.length - 1]).text() === text() && ['BR', 'IMG', 'HR'].indexOf(node.childNodes[node.childNodes.length - 1].tagName) < 0) {\r\n            node = node.childNodes[node.childNodes.length - 1]\r\n          }\r\n        }\r\n\r\n        if (node.nodeType === Node.TEXT_NODE && range.endOffset === 0 && node.previousSibling && node.previousSibling.nodeType === Node.ELEMENT_NODE) {\r\n          node = node.previousSibling\r\n        }\r\n\r\n        while (node.nodeType !== Node.ELEMENT_NODE && node.parentNode) {\r\n          node = node.parentNode\r\n        }\r\n\r\n        // Make sure the node is in editor.\r\n        let p = node\r\n\r\n        while (p && p.tagName !== 'HTML') {\r\n\r\n          if (p === editor.el) {\r\n            return node\r\n          }\r\n\r\n          p = $(p).parent()[0]\r\n        }\r\n      }\r\n    }\r\n    catch (ex) {\r\n      // ok.\r\n    }\r\n\r\n    return editor.el\r\n  }\r\n\r\n  /**\r\n   * Get the ELEMENTS node where the selection starts.\r\n   * By default TEXT node might be selected.\r\n   */\r\n  function rangeElement(rangeContainer, offset) {\r\n    let node = rangeContainer\r\n\r\n    if (node.nodeType === Node.ELEMENT_NODE) {\r\n\r\n      // Search for node deeper.\r\n      if (node.childNodes.length > 0 && node.childNodes[offset]) {\r\n        node = node.childNodes[offset]\r\n      }\r\n    }\r\n\r\n    if (node.nodeType === Node.TEXT_NODE) {\r\n      node = node.parentNode\r\n    }\r\n\r\n    return node\r\n  }\r\n\r\n  /**\r\n   * Search for the current selected blocks.\r\n   */\r\n  function blocks() {\r\n    const blks = []\r\n    let i\r\n    let block_parent\r\n\r\n    const sel = get()\r\n\r\n    // Selection must be inside editor.\r\n    if (inEditor() && sel.rangeCount) {\r\n\r\n      // Loop through ranges.\r\n      const rngs = ranges()\r\n\r\n      for (i = 0; i < rngs.length; i++) {\r\n        const range = rngs[i]\r\n\r\n        // Get start node and end node for range.\r\n        const start_node = rangeElement(range.startContainer, range.startOffset)\r\n        const end_node = rangeElement(range.endContainer, range.endOffset)\r\n\r\n        // Add the start node.\r\n        if ((editor.node.isBlock(start_node) || editor.node.hasClass(start_node, 'fr-inner')) && blks.indexOf(start_node) < 0) {\r\n          blks.push(start_node)\r\n        }\r\n\r\n        // Check for the parent node of the start node.\r\n        block_parent = editor.node.blockParent(start_node)\r\n\r\n        if (block_parent && blks.indexOf(block_parent) < 0) {\r\n          blks.push(block_parent)\r\n        }\r\n\r\n        // Do not add nodes where we've been once.\r\n        const was_into = []\r\n\r\n        // Loop until we reach end.\r\n        let next_node = start_node\r\n\r\n        while (next_node !== end_node && next_node !== editor.el) {\r\n\r\n          // Get deeper into the current node.\r\n          if (was_into.indexOf(next_node) < 0 && next_node.children && next_node.children.length) {\r\n            was_into.push(next_node)\r\n            next_node = next_node.children[0]\r\n          }\r\n\r\n          // Get next sibling.\r\n          else if (next_node.nextSibling) {\r\n            next_node = next_node.nextSibling\r\n          }\r\n\r\n          // Get parent node.\r\n          else if (next_node.parentNode) {\r\n            next_node = next_node.parentNode\r\n            was_into.push(next_node)\r\n          }\r\n\r\n          // Add node to the list.\r\n          if (editor.node.isBlock(next_node) && was_into.indexOf(next_node) < 0 && blks.indexOf(next_node) < 0) {\r\n            if (next_node !== end_node || range.endOffset > 0) {\r\n              blks.push(next_node)\r\n            }\r\n          }\r\n        }\r\n\r\n        // Add the end node.\r\n        if (editor.node.isBlock(end_node) && blks.indexOf(end_node) < 0 && range.endOffset > 0) {\r\n          blks.push(end_node)\r\n        }\r\n\r\n        // Check for the parent node of the end node.\r\n        block_parent = editor.node.blockParent(end_node)\r\n\r\n        if (block_parent && blks.indexOf(block_parent) < 0) {\r\n          blks.push(block_parent)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove blocks that we don't need.\r\n    for (i = blks.length - 1; i > 0; i--) {\r\n      // Nodes that contain another node. Don't do it for LI, but remove them if there is a single child and has format.\r\n      if ($(blks[i]).find(blks).length) {\r\n        blks.splice(i, 1)\r\n      }\r\n    }\r\n\r\n    return blks\r\n  }\r\n\r\n  /**\r\n   * Save selection.\r\n   */\r\n  function save() {\r\n    if (editor.$wp) {\r\n      editor.markers.remove()\r\n\r\n      const rgs = ranges()\r\n      const new_ranges = []\r\n      let range\r\n      let i\r\n\r\n      for (i = 0; i < rgs.length; i++) {\r\n\r\n        // 2nd condition is for https://github.com/froala/wysiwyg-editor/issues/1750.\r\n        if (rgs[i].startContainer !== editor.doc || editor.browser.msie) {\r\n          range = rgs[i]\r\n\r\n          const collapsed = range.collapsed\r\n\r\n          const start_m = editor.markers.place(range, true, i) // Start.\r\n          const end_m = editor.markers.place(range, false, i) // End.\r\n\r\n          // Put selection at the end when there is no marker.\r\n          if ((typeof start_m === 'undefined' || !start_m) && collapsed) {\r\n            $('.fr-marker').remove()\r\n            editor.selection.setAtEnd(editor.el)\r\n          }\r\n\r\n          // https://github.com/froala/wysiwyg-editor/issues/1398.\r\n          editor.el.normalize()\r\n\r\n          if (editor.browser.safari && !collapsed) {\r\n            try {\r\n              range = editor.doc.createRange()\r\n              range.setStartAfter(start_m)\r\n              range.setEndBefore(end_m)\r\n              new_ranges.push(range)\r\n            }\r\n            catch (ex) {\r\n              // Leave this empty.\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (editor.browser.safari && new_ranges.length) {\r\n        editor.selection.clear()\r\n\r\n        for (i = 0; i < new_ranges.length; i++) {\r\n          editor.selection.get().addRange(new_ranges[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore selection.\r\n   */\r\n  function restore() {\r\n    let i\r\n\r\n    // Get markers.\r\n    const markers = editor.el.querySelectorAll('.fr-marker[data-type=\"true\"]')\r\n\r\n    if (!editor.$wp) {\r\n      editor.markers.remove()\r\n\r\n      return false\r\n    }\r\n\r\n    // No markers.\r\n    if (markers.length === 0) {\r\n\r\n      return false\r\n    }\r\n\r\n    if (editor.browser.msie || editor.browser.edge) {\r\n      for (i = 0; i < markers.length; i++) {\r\n        markers[i].style.display = 'inline-block'\r\n      }\r\n    }\r\n\r\n    // Focus.\r\n    if (!editor.core.hasFocus() && !editor.browser.msie && !editor.browser.webkit) {\r\n      editor.$el.focus()\r\n    }\r\n\r\n    clear()\r\n    const sel = get()\r\n\r\n    // Add ranges.\r\n    for (i = 0; i < markers.length; i++) {\r\n      const id = $(markers[i]).data('id')\r\n      let start_marker = markers[i]\r\n      const range = editor.doc.createRange()\r\n      let end_marker = editor.$el.find(`.fr-marker[data-type=\"false\"][data-id=\"${id}\"]`)\r\n\r\n      if (editor.browser.msie || editor.browser.edge) {\r\n        end_marker.css('display', 'inline-block')\r\n      }\r\n\r\n      let ghost = null\r\n\r\n      // Make sure there is an start marker.\r\n      if (end_marker.length > 0) {\r\n        end_marker = end_marker[0]\r\n\r\n        try {\r\n          // If we have markers one next to each other inside text, then we should normalize text by joining it.\r\n          let special_case = false\r\n\r\n          // Clear empty text nodes.\r\n          let s_node = start_marker.nextSibling\r\n\r\n          let tmp = null\r\n          while (s_node && s_node.nodeType === Node.TEXT_NODE && s_node.textContent.length === 0) {\r\n            tmp = s_node\r\n            s_node = s_node.nextSibling\r\n            $(tmp).remove()\r\n          }\r\n\r\n          let e_node = end_marker.nextSibling\r\n\r\n          while (e_node && e_node.nodeType === Node.TEXT_NODE && e_node.textContent.length === 0) {\r\n            tmp = e_node\r\n            e_node = e_node.nextSibling\r\n            $(tmp).remove()\r\n          }\r\n\r\n          if (start_marker.nextSibling === end_marker || end_marker.nextSibling === start_marker) {\r\n\r\n            // Decide which is first and which is last between markers.\r\n            const first_node = start_marker.nextSibling === end_marker ? start_marker : end_marker\r\n            const last_node = first_node === start_marker ? end_marker : start_marker\r\n\r\n            // Previous node.\r\n            let prev_node = first_node.previousSibling\r\n\r\n            while (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.length === 0) {\r\n              tmp = prev_node\r\n              prev_node = prev_node.previousSibling\r\n              $(tmp).remove()\r\n            }\r\n\r\n            // Normalize text before.\r\n            if (prev_node && prev_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              while (prev_node && prev_node.previousSibling && prev_node.previousSibling.nodeType === Node.TEXT_NODE) {\r\n                prev_node.previousSibling.textContent += prev_node.textContent\r\n                prev_node = prev_node.previousSibling\r\n                $(prev_node.nextSibling).remove()\r\n              }\r\n            }\r\n\r\n            // Next node.\r\n            let next_node = last_node.nextSibling\r\n\r\n            while (next_node && next_node.nodeType === Node.TEXT_NODE && next_node.length === 0) {\r\n              tmp = next_node\r\n              next_node = next_node.nextSibling\r\n              $(tmp).remove()\r\n            }\r\n\r\n            // Normalize text after.\r\n            if (next_node && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              while (next_node && next_node.nextSibling && next_node.nextSibling.nodeType === Node.TEXT_NODE) {\r\n                next_node.nextSibling.textContent = next_node.textContent + next_node.nextSibling.textContent\r\n                next_node = next_node.nextSibling\r\n                $(next_node.previousSibling).remove()\r\n              }\r\n            }\r\n\r\n            if (prev_node && (editor.node.isVoid(prev_node) || editor.node.isBlock(prev_node))) {\r\n              prev_node = null\r\n            }\r\n\r\n            if (next_node && (editor.node.isVoid(next_node) || editor.node.isBlock(next_node))) {\r\n              next_node = null\r\n            }\r\n\r\n            // Previous node and next node are both text.\r\n            if (prev_node && next_node && prev_node.nodeType === Node.TEXT_NODE && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              // Remove markers.\r\n              $(start_marker).remove()\r\n              $(end_marker).remove()\r\n\r\n              // Save cursor position.\r\n              const len = prev_node.textContent.length\r\n              prev_node.textContent += next_node.textContent\r\n              $(next_node).remove()\r\n\r\n              // Normalize spaces.\r\n              if (!editor.opts.htmlUntouched) {\r\n                editor.spaces.normalize(prev_node)\r\n              }\r\n\r\n              // Restore position.\r\n              range.setStart(prev_node, len)\r\n              range.setEnd(prev_node, len)\r\n\r\n              special_case = true\r\n            }\r\n            else if (!prev_node && next_node && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              // Remove markers.\r\n              $(start_marker).remove()\r\n              $(end_marker).remove()\r\n\r\n              // Normalize spaces.\r\n              if (!editor.opts.htmlUntouched) {\r\n                editor.spaces.normalize(next_node)\r\n              }\r\n\r\n              ghost = $(editor.doc.createTextNode('\\u200B')).get(0)\r\n              $(next_node).before(ghost)\r\n\r\n              // Restore position.\r\n              range.setStart(next_node, 0)\r\n              range.setEnd(next_node, 0)\r\n              special_case = true\r\n            }\r\n            else if (!next_node && prev_node && prev_node.nodeType === Node.TEXT_NODE) {\r\n\r\n              // Remove markers.\r\n              $(start_marker).remove()\r\n              $(end_marker).remove()\r\n\r\n              // Normalize spaces.\r\n              if (!editor.opts.htmlUntouched) {\r\n                editor.spaces.normalize(prev_node)\r\n              }\r\n\r\n              ghost = $(editor.doc.createTextNode('\\u200B')).get(0)\r\n              $(prev_node).after(ghost)\r\n\r\n              // Restore position.\r\n              range.setStart(prev_node, prev_node.textContent.length)\r\n              range.setEnd(prev_node, prev_node.textContent.length)\r\n\r\n              special_case = true\r\n            }\r\n          }\r\n\r\n          if (!special_case) {\r\n            let x\r\n            let y\r\n\r\n            // DO NOT TOUCH THIS OR IT WILL BREAK!!!\r\n            if ((editor.browser.chrome || editor.browser.edge) && start_marker.nextSibling === end_marker) {\r\n              x = _normalizedMarker(end_marker, range, true) || range.setStartAfter(end_marker)\r\n              y = _normalizedMarker(start_marker, range, false) || range.setEndBefore(start_marker)\r\n            }\r\n            else {\r\n              if (start_marker.previousSibling === end_marker) {\r\n                start_marker = end_marker\r\n                end_marker = start_marker.nextSibling\r\n              }\r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/759\r\n              if (!(end_marker.nextSibling && end_marker.nextSibling.tagName === 'BR') &&\r\n                !(!end_marker.nextSibling && editor.node.isBlock(start_marker.previousSibling)) &&\r\n                !(start_marker.previousSibling && start_marker.previousSibling.tagName === 'BR')) {\r\n                start_marker.style.display = 'inline'\r\n                end_marker.style.display = 'inline'\r\n                ghost = $(editor.doc.createTextNode('\\u200B')).get(0)\r\n              }\r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/1120 . TODO Check again the below statement on which !editor.opts.enter === FE.ENTER_BR is returing false always.\r\n              // var p_node = start_marker.previousSibling;\r\n              // if (p_node && p_node.style && editor.win.getComputedStyle(p_node).display === 'block' && !editor.opts.enter === FE.ENTER_BR) {\r\n              //   range.setEndAfter(p_node);\r\n              //   range.setStartAfter(p_node);\r\n              // }\r\n              // else {\r\n              //   x = _normalizedMarker(start_marker, range, true) || ($(start_marker).before(ghost) && range.setStartBefore(start_marker));\r\n              //   y = _normalizedMarker(end_marker, range, false) || ($(end_marker).after(ghost) && range.setEndAfter(end_marker));\r\n              // }\r\n              x = _normalizedMarker(start_marker, range, true) || $(start_marker).before(ghost) && range.setStartBefore(start_marker)\r\n              y = _normalizedMarker(end_marker, range, false) || $(end_marker).after(ghost) && range.setEndAfter(end_marker)\r\n            }\r\n\r\n            if (typeof x === 'function') {\r\n              x()\r\n            }\r\n\r\n            if (typeof y === 'function') {\r\n              y()\r\n            }\r\n          }\r\n        }\r\n        catch (ex) {\r\n          console.warn('RESTORE RANGE', ex)\r\n        }\r\n      }\r\n\r\n      if (ghost) {\r\n        $(ghost).remove()\r\n      }\r\n\r\n      try {\r\n        sel.addRange(range)\r\n      }\r\n      catch (ex) {\r\n        console.warn('ADD RANGE', ex)\r\n      }\r\n    }\r\n\r\n    // Remove used markers.\r\n    editor.markers.remove()\r\n  }\r\n\r\n  /**\r\n   * Normalize marker when restoring selection.\r\n   */\r\n  function _normalizedMarker(marker, range, start) {\r\n    let len\r\n    const prev_node = marker.previousSibling\r\n    const next_node = marker.nextSibling\r\n\r\n    // Prev and next node are both text nodes.\r\n    if (prev_node && next_node && prev_node.nodeType === Node.TEXT_NODE && next_node.nodeType === Node.TEXT_NODE) {\r\n      len = prev_node.textContent.length\r\n\r\n      if (start) {\r\n        next_node.textContent = prev_node.textContent + next_node.textContent\r\n        $(prev_node).remove()\r\n        $(marker).remove()\r\n\r\n        if (!editor.opts.htmlUntouched) {\r\n          editor.spaces.normalize(next_node)\r\n        }\r\n\r\n        return function () {\r\n          range.setStart(next_node, len)\r\n        }\r\n      }\r\n\r\n      prev_node.textContent += next_node.textContent\r\n      $(next_node).remove()\r\n      $(marker).remove()\r\n\r\n      if (!editor.opts.htmlUntouched) {\r\n        editor.spaces.normalize(prev_node)\r\n      }\r\n\r\n      return function () {\r\n        range.setEnd(prev_node, len)\r\n      }\r\n\r\n    }\r\n\r\n    // Prev node is text node.\r\n    else if (prev_node && !next_node && prev_node.nodeType === Node.TEXT_NODE) {\r\n      len = prev_node.textContent.length\r\n\r\n      if (start) {\r\n        if (!editor.opts.htmlUntouched) {\r\n          editor.spaces.normalize(prev_node)\r\n        }\r\n\r\n        return function () {\r\n          range.setStart(prev_node, len)\r\n        }\r\n      }\r\n\r\n      if (!editor.opts.htmlUntouched) {\r\n        editor.spaces.normalize(prev_node)\r\n      }\r\n\r\n      return function () {\r\n        range.setEnd(prev_node, len)\r\n      }\r\n\r\n    }\r\n\r\n    // Next node is text node.\r\n    else if (next_node && !prev_node && next_node.nodeType === Node.TEXT_NODE) {\r\n\r\n      if (start) {\r\n        if (!editor.opts.htmlUntouched) {\r\n          editor.spaces.normalize(next_node)\r\n        }\r\n\r\n        return function () {\r\n          range.setStart(next_node, 0)\r\n        }\r\n      }\r\n\r\n      if (!editor.opts.htmlUntouched) {\r\n        editor.spaces.normalize(next_node)\r\n      }\r\n\r\n      return function () {\r\n        range.setEnd(next_node, 0)\r\n      }\r\n\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Determine if we can do delete.\r\n   */\r\n  function _canDelete() {\r\n\r\n    // Check if there are markers inside conteneditable=\"false\".\r\n    const markers = editor.$el.find('.fr-marker')\r\n\r\n    for (let i = 0; i < markers.length; i++) {\r\n      if ($(markers[i]).parentsUntil('.fr-element, [contenteditable=\"true\"]', '[contenteditable=\"false\"]').length) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Check if selection is collapsed.\r\n   */\r\n  function isCollapsed() {\r\n    const rgs = ranges()\r\n\r\n    for (let i = 0; i < rgs.length; i++) {\r\n      if (!rgs[i].collapsed) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  // From: http://www.coderexception.com/0B1B33z1NyQxUQSJ/contenteditable-div-how-can-i-determine-if-the-cursor-is-at-the-start-or-end-of-the-content\r\n  function info(el) {\r\n    let atStart = false\r\n    let atEnd = false\r\n    let selRange\r\n    let testRange\r\n\r\n    if (editor.win.getSelection) {\r\n      const sel = editor.win.getSelection()\r\n\r\n      if (sel.rangeCount) {\r\n        selRange = sel.getRangeAt(0)\r\n        testRange = selRange.cloneRange()\r\n\r\n        testRange.selectNodeContents(el)\r\n        testRange.setEnd(selRange.startContainer, selRange.startOffset)\r\n        atStart = selection(testRange)\r\n\r\n        testRange.selectNodeContents(el)\r\n        testRange.setStart(selRange.endContainer, selRange.endOffset)\r\n\r\n        atEnd = selection(testRange)\r\n      }\r\n    }\r\n    else if (editor.doc.selection && editor.doc.selection.type !== 'Control') {\r\n      selRange = editor.doc.selection.createRange()\r\n      testRange = selRange.duplicate()\r\n\r\n      testRange.moveToElementText(el)\r\n      testRange.setEndPoint('EndToStart', selRange)\r\n      atStart = selection(testRange)\r\n\r\n      testRange.moveToElementText(el)\r\n      testRange.setEndPoint('StartToEnd', selRange)\r\n      atEnd = selection(testRange)\r\n    }\r\n\r\n    return {\r\n      atStart,\r\n      atEnd\r\n    }\r\n  }\r\n\r\n  // https://github.com/froala-labs/froala-editor-js-2/issues/1935\r\n  function selection(sel) {\r\n    const result = sel.toString().replace(/[\\u200B-\\u200D\\uFEFF]/g, '')\r\n\r\n    return  result === ''\r\n  }\r\n\r\n  /**\r\n   * Check if everything is selected inside the editor.\r\n   */\r\n  function isFull() {\r\n    if (isCollapsed()) {\r\n      return false\r\n    }\r\n\r\n    editor.selection.save()\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/710\r\n    let els = editor.el.querySelectorAll('td, th, img, br')\r\n    let i\r\n\r\n    for (i = 0; i < els.length; i++) {\r\n      if (els[i].nextSibling || els[i].tagName === 'IMG') {\r\n        // Invisible space character was getting replaced within the \"selection\" method.\r\n        // So replaced it with \"&nbsp;\" as a solution.\r\n        els[i].innerHTML = `<span class=\"fr-mk\" style=\"display: none;\">&nbsp;</span>${els[i].innerHTML}`\r\n      }\r\n    }\r\n\r\n    let full = false\r\n    const inf = info(editor.el)\r\n\r\n    if (inf.atStart && inf.atEnd) {\r\n      full = true\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/710\r\n    els = editor.el.querySelectorAll('.fr-mk')\r\n\r\n    for (i = 0; i < els.length; i++) {\r\n      els[i].parentNode.removeChild(els[i])\r\n    }\r\n\r\n    editor.selection.restore()\r\n\r\n    return full\r\n  }\r\n\r\n  /**\r\n   * Remove HTML from inner nodes when we deal with keepFormatOnDelete option.\r\n   */\r\n  function _emptyInnerNodes(node, first) {\r\n    if (typeof first === 'undefined') {\r\n      first = true\r\n    }\r\n\r\n    // Remove invisible spaces.\r\n    const h = $(node).html()\r\n\r\n    if (h && h.replace(/\\u200b/g, '').length !== h.length) {\r\n      $(node).html(h.replace(/\\u200b/g, ''))\r\n    }\r\n\r\n    // Loop contents.\r\n    const contents = editor.node.contents(node)\r\n\r\n    for (let j = 0; j < contents.length; j++) {\r\n\r\n      // Remove text nodes.\r\n      if (contents[j].nodeType !== Node.ELEMENT_NODE) {\r\n        $(contents[j]).remove()\r\n      }\r\n\r\n      // Empty inner nodes further.\r\n      else {\r\n\r\n        // j === 0 determines if the node is the first one and we should keep format.\r\n        _emptyInnerNodes(contents[j], j === 0)\r\n\r\n        // There are inner nodes, ignore the current one.\r\n        if (j === 0) {\r\n          first = false\r\n        }\r\n      }\r\n    }\r\n\r\n    // First node is a text node, so replace it with a span.\r\n    if (node.nodeType === Node.TEXT_NODE) {\r\n      const span = $(document.createElement('span')).attr('data-first', 'true').attr('data-text', 'true')\r\n      $(node)[0].replaceWith(span[0])\r\n    }\r\n\r\n    // Add the first node marker so that we add selection in it later on.\r\n    else if (first) {\r\n      $(node).attr('data-first', true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * TODO: check again this function because it will always return true because fr-inner tag does not exist.\r\n   */\r\n  function _filterFrInner() {\r\n    return $(this).find('fr-inner').length === 0\r\n  }\r\n\r\n  /**\r\n   * Process deleting nodes.\r\n   */\r\n  function _processNodeDelete($node, should_delete) {\r\n    const contents = editor.node.contents($node.get(0))\r\n\r\n    // Node is TD or TH.\r\n    if (['TD', 'TH'].indexOf($node.get(0).tagName) >= 0 && $node.find('.fr-marker').length === 1 && (editor.node.hasClass(contents[0], 'fr-marker') || (contents[0].tagName == 'BR' && editor.node.hasClass(contents[0].nextElementSibling, 'fr-marker')))) {\r\n      $node.attr('data-del-cell', true)\r\n    }\r\n\r\n    for (let i = 0; i < contents.length; i++) {\r\n      const node = contents[i]\r\n\r\n      // We found a marker.\r\n      if (editor.node.hasClass(node, 'fr-marker')) {\r\n        should_delete = (should_delete + 1) % 2\r\n      }\r\n      else if (should_delete) {\r\n\r\n        // Check if we have a marker inside it.\r\n        if ($(node).find('.fr-marker').length > 0) {\r\n          should_delete = _processNodeDelete($(node), should_delete)\r\n        }\r\n        else {\r\n\r\n          // TD, TH or inner, then go further.\r\n          if (['TD', 'TH'].indexOf(node.tagName) < 0 && !editor.node.hasClass(node, 'fr-inner')) {\r\n\r\n            if (!editor.opts.keepFormatOnDelete || editor.$el.find('[data-first]').length > 0 || editor.node.isVoid(node)) {\r\n              $(node).remove()\r\n            }\r\n            else {\r\n              _emptyInnerNodes(node)\r\n            }\r\n          }\r\n          else if (editor.node.hasClass(node, 'fr-inner')) {\r\n            if ($(node).find('.fr-inner').length === 0) {\r\n              $(node).html('<br>')\r\n            }\r\n            else {\r\n              $(node).find('.fr-inner').filter(_filterFrInner).html('<br>')\r\n            }\r\n          }\r\n          else {\r\n            $(node).empty()\r\n            $(node).attr('data-del-cell', true)\r\n          }\r\n        }\r\n      }\r\n      else if ($(node).find('.fr-marker').length > 0) {\r\n        should_delete = _processNodeDelete($(node), should_delete)\r\n      }\r\n    }\r\n\r\n    return should_delete\r\n  }\r\n\r\n  /**\r\n   * Determine if selection is inside the editor.\r\n   */\r\n  function inEditor() {\r\n    try {\r\n      if (!editor.$wp) {\r\n        return false\r\n      }\r\n\r\n      const range = ranges(0)\r\n      let container = range.commonAncestorContainer\r\n\r\n      while (container && !editor.node.isElement(container)) {\r\n        container = container.parentNode\r\n      }\r\n\r\n      if (editor.node.isElement(container)) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    }\r\n    catch (ex) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove the current selection html.\r\n   */\r\n  function remove() {\r\n    if (isCollapsed()) {\r\n      return true\r\n    }\r\n\r\n    let i\r\n\r\n    save()\r\n\r\n    // Get the previous sibling normalized.\r\n    function _prevSibling(node) {\r\n      let prev_node = node.previousSibling\r\n\r\n      while (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.length === 0) {\r\n        const tmp = prev_node\r\n        prev_node = prev_node.previousSibling\r\n        $(tmp).remove()\r\n      }\r\n\r\n      return prev_node\r\n    }\r\n\r\n    // Get the next sibling normalized.\r\n    function _nextSibling(node) {\r\n      let next_node = node.nextSibling\r\n\r\n      while (next_node && next_node.nodeType === Node.TEXT_NODE && next_node.textContent.length === 0) {\r\n        const tmp = next_node\r\n        next_node = next_node.nextSibling\r\n        $(tmp).remove()\r\n      }\r\n\r\n      return next_node\r\n    }\r\n\r\n    // Normalize start markers.\r\n    let start_markers = editor.$el.find('.fr-marker[data-type=\"true\"]')\r\n\r\n    for (i = 0; i < start_markers.length; i++) {\r\n      const sm = start_markers[i]\r\n\r\n      while (!_prevSibling(sm) && !editor.node.isBlock(sm.parentNode) && !editor.$el.is(sm.parentNode) && !editor.node.hasClass(sm.parentNode, 'fr-inner')) {\r\n        $(sm.parentNode).before(sm)\r\n      }\r\n    }\r\n\r\n    // Normalize end markers.\r\n    const end_markers = editor.$el.find('.fr-marker[data-type=\"false\"]')\r\n\r\n    for (i = 0; i < end_markers.length; i++) {\r\n      const em = end_markers[i]\r\n\r\n      while (!_nextSibling(em) && !editor.node.isBlock(em.parentNode) && !editor.$el.is(em.parentNode) && !editor.node.hasClass(em.parentNode, 'fr-inner')) {\r\n        $(em.parentNode).after(em)\r\n      }\r\n\r\n      // Last node is empty and has a BR in it.\r\n      if (em.parentNode && editor.node.isBlock(em.parentNode) && editor.node.isEmpty(em.parentNode) && !editor.$el.is(em.parentNode) && !editor.node.hasClass(em.parentNode, 'fr-inner') && editor.opts.keepFormatOnDelete) {\r\n        $(em.parentNode).after(em)\r\n      }\r\n    }\r\n\r\n    // Check if selection can be deleted.\r\n    if (_canDelete()) {\r\n      _processNodeDelete(editor.$el, 0)\r\n\r\n      // Look for selection marker.\r\n      const $first_node = editor.$el.find('[data-first=\"true\"]')\r\n\r\n      if ($first_node.length) {\r\n\r\n        // Remove markers.\r\n        editor.$el.find('.fr-marker').remove()\r\n\r\n        // Add markers in the node that we marked as the first one.\r\n        $first_node\r\n          .append(FE.INVISIBLE_SPACE + FE.MARKERS)\r\n          .removeAttr('data-first')\r\n\r\n        // Remove span with data-text if there is one.\r\n        if ($first_node.attr('data-text')) {\r\n          $first_node.replaceWith($first_node.html())\r\n        }\r\n      }\r\n      else {\r\n        // Remove tables.\r\n        editor.$el.find('table').filter(function () {\r\n          const ok = $(this).find('[data-del-cell]').length > 0 && $(this).find('[data-del-cell]').length === $(this).find('td, th').length\r\n\r\n          return ok\r\n        }).remove()\r\n        editor.$el.find('[data-del-cell]').removeAttr('data-del-cell')\r\n\r\n        // Merge contents between markers.\r\n        start_markers = editor.$el.find('.fr-marker[data-type=\"true\"]')\r\n\r\n        for (i = 0; i < start_markers.length; i++) {\r\n\r\n          // Get start marker.\r\n          const start_marker = start_markers[i]\r\n\r\n          // Get the next node after start marker.\r\n          let next_node = start_marker.nextSibling\r\n\r\n          // Get the end node.\r\n          let end_marker = editor.$el.find(`.fr-marker[data-type=\"false\"][data-id=\"${$(start_marker).data('id')}\"]`).get(0)\r\n\r\n          if (end_marker) {\r\n\r\n            // Markers are not next to other.\r\n            if (start_marker && !(next_node && next_node === end_marker)) {\r\n\r\n              // Get the parents of the nodes.\r\n              let start_parent = editor.node.blockParent(start_marker)\r\n              let end_parent = editor.node.blockParent(end_marker)\r\n\r\n              // https://github.com/froala/wysiwyg-editor/issues/1233\r\n              let list_start = false\r\n              let list_end = false\r\n\r\n              if (start_parent && ['UL', 'OL'].indexOf(start_parent.tagName) >= 0) {\r\n                start_parent = null\r\n                list_start = true\r\n              }\r\n\r\n              if (end_parent && ['UL', 'OL'].indexOf(end_parent.tagName) >= 0) {\r\n                end_parent = null\r\n                list_end = true\r\n              }\r\n\r\n              // Move end marker next to start marker.\r\n              $(start_marker).after(end_marker)\r\n\r\n              // The block parent of the start marker is the element itself. We're not in the same parent or moving marker is not enough.\r\n              if (start_parent !== end_parent) {\r\n                if (start_parent === null && !list_start) {\r\n                  const deep_parent = editor.node.deepestParent(start_marker)\r\n\r\n                  // There is a parent for the marker. Move the end html to it.\r\n                  if (deep_parent) {\r\n                    $(deep_parent).after($(end_parent).html())\r\n                    $(end_parent).remove()\r\n                  }\r\n\r\n                  // There is no parent for the marker.\r\n                  else if ($(end_parent).parentsUntil(editor.$el, 'table').length === 0) {\r\n                    $(start_marker).next().after($(end_parent).html())\r\n                    $(end_parent).remove()\r\n                  }\r\n                }\r\n\r\n                // End marker is inside element. We don't merge in table.\r\n                else if (end_parent === null && !list_end && $(start_parent).parentsUntil(editor.$el, 'table').length === 0) {\r\n\r\n                  // Get the node that has a next sibling.\r\n                  next_node = start_parent\r\n\r\n                  while (!next_node.nextSibling && next_node.parentNode !== editor.el) {\r\n                    next_node = next_node.parentNode\r\n                  }\r\n                  next_node = next_node.nextSibling\r\n\r\n                  // Join HTML inside the start node.\r\n                  while (next_node && next_node.tagName !== 'BR') {\r\n                    const tmp_node = next_node.nextSibling\r\n                    $(start_parent).append(next_node)\r\n                    next_node = tmp_node\r\n                  }\r\n\r\n                  if (next_node && next_node.tagName === 'BR') {\r\n                    $(next_node).remove()\r\n                  }\r\n                }\r\n\r\n                // Join end block with start block.\r\n                else if (start_parent && end_parent && $(start_parent).parentsUntil(editor.$el, 'table').length === 0 && $(end_parent).parentsUntil(editor.$el, 'table').length === 0 && !$(start_parent).contains(end_parent) && !$(end_parent).contains(start_parent)) {\r\n                  $(start_parent).append($(end_parent).html())\r\n                  $(end_parent).remove()\r\n                }\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            end_marker = $(start_marker).clone().attr('data-type', false)\r\n            $(start_marker).after(end_marker)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove remaining empty lists.\r\n    editor.$el.find('li:empty').remove()\r\n\r\n    if (!editor.opts.keepFormatOnDelete) {\r\n      editor.html.fillEmptyBlocks()\r\n    }\r\n\r\n    editor.html.cleanEmptyTags(true)\r\n\r\n    if (!editor.opts.htmlUntouched) {\r\n      editor.clean.lists()\r\n      editor.$el.find('li:empty').append('<br>')\r\n      editor.spaces.normalize()\r\n    }\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1379 &&\r\n\r\n    const last_marker = editor.$el.find('.fr-marker').last().get(0)\r\n    const first_marker = editor.$el.find('.fr-marker').first().get(0)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/491\r\n    if (typeof last_marker !== 'undefined' && typeof first_marker !== 'undefined' && !last_marker.nextSibling && first_marker.previousSibling && first_marker.previousSibling.tagName === 'BR' && editor.node.isElement(last_marker.parentNode) && editor.node.isElement(first_marker.parentNode)) {\r\n\r\n      editor.$el.append('<br>')\r\n    }\r\n\r\n    restore()\r\n  }\r\n\r\n  function setAtStart(node, deep) {\r\n    if (!node || node.getElementsByClassName('fr-marker').length > 0) {\r\n      return false\r\n    }\r\n\r\n    let child = node.firstChild\r\n\r\n    while (child && (editor.node.isBlock(child) || deep && !editor.node.isVoid(child) && child.nodeType === Node.ELEMENT_NODE)) {\r\n      node = child\r\n      child = child.firstChild\r\n    }\r\n\r\n    node.innerHTML = FE.MARKERS + node.innerHTML\r\n  }\r\n\r\n  function setAtEnd(node, deep) {\r\n    if (!node || node.getElementsByClassName('fr-marker').length > 0) {\r\n      return false\r\n    }\r\n\r\n    let child = node.lastChild\r\n\r\n    while (child && (editor.node.isBlock(child) || deep && !editor.node.isVoid(child) && child.nodeType === Node.ELEMENT_NODE)) {\r\n      node = child\r\n      child = child.lastChild\r\n    }\r\n\r\n    const span = editor.doc.createElement('SPAN')\r\n    span.setAttribute('id', 'fr-sel-markers')\r\n    span.innerHTML = FE.MARKERS\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/3078\r\n    while (node.parentNode && editor.opts.htmlAllowedEmptyTags && editor.opts.htmlAllowedEmptyTags.indexOf(node.tagName.toLowerCase()) >= 0) {\r\n      node = node.parentNode;\r\n    }\r\n\r\n    node.appendChild(span)\r\n    const nd = node.querySelector('#fr-sel-markers')\r\n    nd.outerHTML = nd.innerHTML\r\n  }\r\n\r\n  function setBefore(node, use_current_node) {\r\n    if (typeof use_current_node === 'undefined') {\r\n      use_current_node = true\r\n    }\r\n\r\n    // Check if there is any previous sibling by skipping the empty text ones.\r\n    let prev_node = node.previousSibling\r\n\r\n    while (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.length === 0) {\r\n      prev_node = prev_node.previousSibling\r\n    }\r\n\r\n    // There is a previous node.\r\n    if (prev_node) {\r\n\r\n      // Previous node is block so set the focus at the end of it.\r\n      if (editor.node.isBlock(prev_node)) {\r\n        setAtEnd(prev_node)\r\n      }\r\n\r\n      // Previous node is BR, so place markers before it.\r\n      else if (prev_node.tagName === 'BR') {\r\n        $(prev_node).before(FE.MARKERS)\r\n      }\r\n\r\n      // Just place marker.\r\n      else {\r\n        $(prev_node).after(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Use current node.\r\n    else if (use_current_node) {\r\n\r\n      // Current node is block, set selection at start.\r\n      if (editor.node.isBlock(node)) {\r\n        setAtStart(node)\r\n      }\r\n\r\n      // Just place markers.\r\n      else {\r\n        $(node).before(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  function setAfter(node, use_current_node) {\r\n    if (typeof use_current_node === 'undefined') {\r\n      use_current_node = true\r\n    }\r\n\r\n    // Check if there is any previous sibling by skipping the empty text ones.\r\n    let next_node = node.nextSibling\r\n\r\n    while (next_node && next_node.nodeType === Node.TEXT_NODE && next_node.textContent.length === 0) {\r\n      next_node = next_node.nextSibling\r\n    }\r\n\r\n    // There is a next node.\r\n    if (next_node) {\r\n\r\n      // Next node is block so set the focus at the end of it.\r\n      if (editor.node.isBlock(next_node)) {\r\n        setAtStart(next_node)\r\n      }\r\n\r\n      // Just place marker.\r\n      else {\r\n        $(next_node).before(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    // Use current node.\r\n    else if (use_current_node) {\r\n\r\n      // Current node is block, set selection at end.\r\n      if (editor.node.isBlock(node)) {\r\n        setAtEnd(node)\r\n      }\r\n\r\n      // Just place markers.\r\n      else {\r\n        $(node).after(FE.MARKERS)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  return {\r\n    text,\r\n    get,\r\n    ranges,\r\n    clear,\r\n    element,\r\n    endElement,\r\n    save,\r\n    restore,\r\n    isCollapsed,\r\n    isFull,\r\n    inEditor,\r\n    remove,\r\n    blocks,\r\n    info,\r\n    setAtEnd,\r\n    setAtStart,\r\n    setBefore,\r\n    setAfter,\r\n    rangeElement\r\n  }\r\n}\r\n","import FE from '../../../editor.js'\n\n// Extend defaults.\nObject.assign(FE.DEFAULTS, {\n  language: null\n})\n\nFE.LANGUAGE = {}\n\nFE.MODULES.language = function (editor) {\n  let lang\n\n  /**\n   * Translate.\n   */\n  function translate(str) {\n    if (lang && lang.translation[str] && lang.translation[str].length) {\n      return lang.translation[str]\n    }\n\n    return str\n\n  }\n\n  /* Initialize */\n  function _init() {\n\n    // Load lang.\n    if (FE.LANGUAGE) {\n      lang = FE.LANGUAGE[editor.opts.language]\n    }\n\n    // Set direction.\n    if (lang && lang.direction) {\n      editor.opts.direction = lang.direction\n    }\n  }\n\n  return {\n    _init,\n    translate\n  }\n}\n\n","import './language.js'\n\nimport FE from '../../../editor.js'\n\n// Extend defaults.\nObject.assign(FE.DEFAULTS, {\n  placeholderText: 'Type something'\n})\n\nFE.MODULES.placeholder = function (editor) {\n  const $ = editor.$\n\n  /* Show placeholder. */\n  function show() {\n    if (!editor.$placeholder) {\n      _add()\n    }\n\n    const margin_offset = editor.opts.iframe ? editor.$iframe.prev().outerHeight(true) : editor.$el.prev().outerHeight(true)\n\n    // Determine the placeholder position based on the first element inside editor.\n    let margin_top = 0\n    let margin_left = 0\n    let margin_right = 0\n    let padding_top = 0\n    let padding_left = 0\n    let padding_right = 0\n    const contents = editor.node.contents(editor.el)\n\n    const alignment = $(editor.selection.element()).css('text-align')\n\n    if (contents.length && contents[0].nodeType === Node.ELEMENT_NODE) {\n\n      const $first_node = $(contents[0])\n\n      if ((editor.$wp.prev().length > 0 || editor.$el.prev().length > 0) && editor.ready) {\n        margin_top = editor.helpers.getPX($first_node.css('margin-top'))\n        padding_top = editor.helpers.getPX($first_node.css('padding-top'))\n        margin_left = editor.helpers.getPX($first_node.css('margin-left'))\n        margin_right = editor.helpers.getPX($first_node.css('margin-right'))\n        padding_left = editor.helpers.getPX($first_node.css('padding-left'))\n        padding_right = editor.helpers.getPX($first_node.css('padding-right'))\n      }\n\n      editor.$placeholder.css('font-size', $first_node.css('font-size'))\n      editor.$placeholder.css('line-height', $first_node.css('line-height'))\n    }\n    else {\n      editor.$placeholder.css('font-size', editor.$el.css('font-size'))\n      editor.$placeholder.css('line-height', editor.$el.css('line-height'))\n    }\n\n    editor.$wp.addClass('show-placeholder')\n    editor.$placeholder\n      .css({\n        marginTop: Math.max(editor.helpers.getPX(editor.$el.css('margin-top')), margin_top) + (margin_offset ? margin_offset : 0),\n        paddingTop: Math.max(editor.helpers.getPX(editor.$el.css('padding-top')), padding_top),\n        paddingLeft: Math.max(editor.helpers.getPX(editor.$el.css('padding-left')), padding_left),\n        marginLeft: Math.max(editor.helpers.getPX(editor.$el.css('margin-left')), margin_left),\n        paddingRight: Math.max(editor.helpers.getPX(editor.$el.css('padding-right')), padding_right),\n        marginRight: Math.max(editor.helpers.getPX(editor.$el.css('margin-right')), margin_right),\n        textAlign: alignment\n      })\n      .text(editor.language.translate(editor.opts.placeholderText || editor.$oel.attr('placeholder') || ''))\n\n    editor.$placeholder.html(editor.$placeholder.text().replace(/\\n/g, '<br>'))\n  }\n\n  /* Hide placeholder. */\n  function hide() {\n    editor.$wp.removeClass('show-placeholder')\n  }\n\n  /* Check if placeholder is visible */\n  function isVisible() {\n    return !editor.$wp ? true : editor.node.hasClass(editor.$wp.get(0), 'show-placeholder')\n  }\n\n  /* Refresh placeholder. */\n  function refresh() {\n    if (!editor.$wp) {\n      return false\n    }\n\n    if (editor.core.isEmpty()) {\n      show()\n    }\n    else {\n      hide()\n    }\n  }\n\n  function _add() {\n    editor.$placeholder = $(editor.doc.createElement('SPAN')).addClass('fr-placeholder')\n    editor.$wp.append(editor.$placeholder)\n  }\n\n  /* Initialize. */\n  function _init() {\n    if (!editor.$wp) {\n      return false\n    }\n\n    editor.events.on('init input keydown keyup contentChanged initialized', refresh)\n  }\n\n  return {\n    _init,\n    show,\n    hide,\n    refresh,\n    isVisible\n  }\n}\n","import './edit.js'\r\nimport './dom/spaces.js'\r\nimport './dom/selection.js'\r\nimport './options/placeholder.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.UNICODE_NBSP = String.fromCharCode(160)\r\n\r\n// Void Elements http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\r\nFE.VOID_ELEMENTS = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']\r\n\r\nFE.BLOCK_TAGS = ['address', 'article', 'aside', 'audio', 'blockquote', 'canvas', 'details', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'li', 'main', 'nav', 'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul', 'video']\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  htmlAllowedEmptyTags: ['textarea', 'a', 'iframe', 'object', 'video', 'style', 'script', '.fa', '.fr-emoticon', '.fr-inner', 'path', 'line', 'hr'],\r\n  htmlDoNotWrapTags: ['script', 'style'],\r\n  htmlSimpleAmpersand: false,\r\n  htmlIgnoreCSSProperties: [],\r\n  htmlExecuteScripts: true\r\n})\r\n\r\nFE.MODULES.html = function (editor) {\r\n  const $ = editor.$\r\n\r\n  /**\r\n   * Determine the default block tag.\r\n   */\r\n  function defaultTag() {\r\n    if (editor.opts.enter === FE.ENTER_P) {\r\n      return 'p'\r\n    }\r\n    if (editor.opts.enter === FE.ENTER_DIV) {\r\n      return 'div'\r\n    }\r\n\r\n    if (editor.opts.enter === FE.ENTER_BR) {\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tells if the node keeps text formating.\r\n   */\r\n  function isPreformatted(node, look_up) {\r\n    // Stop condition.\r\n    if (!node || node === editor.el) {\r\n      return false\r\n    }\r\n\r\n    // Check only first level.\r\n    if (!look_up) {\r\n      // Is preformatted.\r\n      return ['PRE', 'SCRIPT', 'STYLE'].indexOf(node.tagName) !== -1\r\n    }\r\n    else {\r\n      if (['PRE', 'SCRIPT', 'STYLE'].indexOf(node.tagName) != -1) {\r\n        return true\r\n      }\r\n      return isPreformatted(node.parentNode, look_up)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the empty blocs.\r\n   */\r\n  function emptyBlocks(around_markers) {\r\n\r\n    const empty_blocks = []\r\n    let i\r\n\r\n    // Block tag elements.\r\n    let els = []\r\n\r\n    if (around_markers) {\r\n      const markers = editor.el.querySelectorAll('.fr-marker')\r\n\r\n      for (i = 0; i < markers.length; i++) {\r\n        const p_node = editor.node.blockParent(markers[i]) || markers[i]\r\n\r\n        if (p_node) {\r\n          const next_node = p_node.nextSibling\r\n          const prev_node = p_node.previousSibling\r\n\r\n          // Push current node, prev and next one.\r\n          if (p_node && els.indexOf(p_node) < 0 && editor.node.isBlock(p_node)) {\r\n            els.push(p_node)\r\n          }\r\n\r\n          if (prev_node && editor.node.isBlock(prev_node) && els.indexOf(prev_node) < 0) {\r\n            els.push(prev_node)\r\n          }\r\n\r\n          if (next_node && editor.node.isBlock(next_node) && els.indexOf(next_node) < 0) {\r\n            els.push(next_node)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      els = editor.el.querySelectorAll(blockTagsQuery())\r\n    }\r\n\r\n    let qr = blockTagsQuery()\r\n    qr += `,${FE.VOID_ELEMENTS.join(',')}`\r\n    qr += ', .fr-inner'\r\n    qr += `,${editor.opts.htmlAllowedEmptyTags.join(':not(.fr-marker),')}:not(.fr-marker)`\r\n\r\n    // Check if there are empty block tags with markers.\r\n    for (i = els.length - 1; i >= 0; i--) {\r\n\r\n      // If the block tag has text content, ignore it.\r\n      if (els[i].textContent && els[i].textContent.replace(/\\u200B|\\n/g, '').length > 0) {\r\n        continue\r\n      }\r\n\r\n      if (els[i].querySelectorAll(qr).length > 0) {\r\n        continue\r\n      }\r\n\r\n      // We're checking text from here on.\r\n      const contents = editor.node.contents(els[i])\r\n\r\n      let found = false\r\n\r\n      for (let j = 0; j < contents.length; j++) {\r\n        if (contents[j].nodeType === Node.COMMENT_NODE) {\r\n          continue\r\n        }\r\n\r\n        // Text node that is not empty.\r\n        if (contents[j].textContent && contents[j].textContent.replace(/\\u200B|\\n/g, '').length > 0) {\r\n          found = true\r\n\r\n          break\r\n        }\r\n      }\r\n\r\n      // Make sure we don't add TABLE and TD at the same time for instance.\r\n      if (!found) {\r\n        empty_blocks.push(els[i])\r\n      }\r\n    }\r\n\r\n    return empty_blocks\r\n  }\r\n\r\n  /**\r\n   * Create jQuery query for empty block tags.\r\n   */\r\n  function emptyBlockTagsQuery() {\r\n\r\n    return `${FE.BLOCK_TAGS.join(':empty, ')}:empty`\r\n  }\r\n\r\n  /**\r\n   * Create jQuery query for selecting block tags.\r\n   */\r\n  function blockTagsQuery() {\r\n\r\n    return FE.BLOCK_TAGS.join(', ')\r\n  }\r\n\r\n  /**\r\n   * Remove empty elements that are not VOID elements.\r\n   */\r\n  function cleanEmptyTags(remove_blocks) {\r\n    let els = $.merge([], FE.VOID_ELEMENTS)\r\n    els = $.merge(els, editor.opts.htmlAllowedEmptyTags)\r\n\r\n    if (typeof remove_blocks === 'undefined') {\r\n      els = $.merge(els, FE.BLOCK_TAGS)\r\n    }\r\n    else {\r\n      els = $.merge(els, FE.NO_DELETE_TAGS)\r\n    }\r\n\r\n    let elms\r\n    let ok\r\n\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1938\r\n    elms = editor.el.querySelectorAll(`*:empty:not(${els.join('):not(')}):not(.fr-marker):not(template)`)\r\n\r\n    do {\r\n      ok = false\r\n\r\n      // Remove those elements that have no attributes.\r\n      for (let i = 0; i < elms.length; i++) {\r\n        if (elms[i].attributes.length === 0 || typeof elms[i].getAttribute('href') !== 'undefined') {\r\n          elms[i].parentNode.removeChild(elms[i])\r\n          ok = true\r\n        }\r\n      }\r\n\r\n      //https://github.com/froala-labs/froala-editor-js-2/issues/1938\r\n      elms = editor.el.querySelectorAll(`*:empty:not(${els.join('):not(')}):not(.fr-marker):not(template)`)\r\n    } while (elms.length && ok)\r\n  }\r\n\r\n  /**\r\n   * Wrap the content inside the element passed as argument.\r\n   */\r\n  function _wrapElement(el, temp) {\r\n    let default_tag = defaultTag()\r\n\r\n    if (temp) {\r\n      default_tag = 'div'\r\n    }\r\n\r\n    if (default_tag) {\r\n\r\n      // Rewrite the entire content.\r\n      const main_doc = editor.doc.createDocumentFragment()\r\n\r\n      // Anchor.\r\n      let anchor = null\r\n\r\n      // If we found anything inside the current anchor.\r\n      let found = false\r\n\r\n      let node = el.firstChild\r\n\r\n      let changed = false\r\n\r\n      // Loop through contents.\r\n      while (node) {\r\n        const next_node = node.nextSibling\r\n\r\n        // Current node is a block node.\r\n        // Or it is a do not wrap node and not a fr-marker.\r\n        if (node.nodeType === Node.ELEMENT_NODE && (editor.node.isBlock(node) || editor.opts.htmlDoNotWrapTags.indexOf(node.tagName.toLowerCase()) >= 0 && !editor.node.hasClass(node, 'fr-marker'))) {\r\n          anchor = null\r\n          main_doc.appendChild(node.cloneNode(true))\r\n        }\r\n\r\n        // Other node types than element and text.\r\n        else if (node.nodeType !== Node.ELEMENT_NODE && node.nodeType !== Node.TEXT_NODE) {\r\n          anchor = null\r\n          main_doc.appendChild(node.cloneNode(true))\r\n        }\r\n\r\n        // Current node is BR.\r\n        else if (node.tagName === 'BR') {\r\n\r\n          // There is no anchor.\r\n          if (anchor === null) {\r\n            anchor = editor.doc.createElement(default_tag)\r\n            changed = true\r\n\r\n            if (temp) {\r\n              anchor.setAttribute('class', 'fr-temp-div')\r\n              anchor.setAttribute('data-empty', true)\r\n            }\r\n\r\n            anchor.appendChild(node.cloneNode(true))\r\n\r\n            main_doc.appendChild(anchor)\r\n          }\r\n\r\n          // There is anchor. Just remove BR.\r\n          // There is nothing else except markers and BR inside the new formed tag.\r\n          else if (found === false) {\r\n            anchor.appendChild(editor.doc.createElement('br'))\r\n\r\n            if (temp) {\r\n              anchor.setAttribute('class', 'fr-temp-div')\r\n              anchor.setAttribute('data-empty', true)\r\n            }\r\n          }\r\n\r\n          anchor = null\r\n        }\r\n\r\n        // Text node or other node type.\r\n        else {\r\n          const txt = node.textContent\r\n\r\n          // Node is not text node.\r\n          // Node is text node and it doesn't contain only spaces and NL.\r\n          // There are empty spaces but no new lines.\r\n          if (node.nodeType !== Node.TEXT_NODE || (txt.replace(/\\n/g, '').replace(/(^ *)|( *$)/g, '').length > 0 || (txt.replace(/(^ *)|( *$)/g, '').length && txt.indexOf('\\n') < 0))) {\r\n\r\n            // No anchor.\r\n            if (anchor === null) {\r\n              anchor = editor.doc.createElement(default_tag)\r\n              changed = true\r\n\r\n              if (temp) {\r\n                anchor.setAttribute('class', 'fr-temp-div')\r\n              }\r\n              main_doc.appendChild(anchor)\r\n\r\n              found = false\r\n            }\r\n\r\n            // Add node to anchor.\r\n            anchor.appendChild(node.cloneNode(true))\r\n\r\n            // Check if maybe we have a non empty node.\r\n            if (!found && (!editor.node.hasClass(node, 'fr-marker') && !(node.nodeType === Node.TEXT_NODE && txt.replace(/ /g, '').length === 0))) {\r\n              found = true\r\n            }\r\n          }\r\n          else {\r\n            changed = true;\r\n          }\r\n\r\n          // Else skip the node because it's empty.\r\n        }\r\n\r\n        node = next_node\r\n      }\r\n\r\n      if (changed) {\r\n        el.innerHTML = ''\r\n        el.appendChild(main_doc)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _wrapElements(els, temp) {\r\n    for (let i = els.length - 1; i >= 0; i--) {\r\n      _wrapElement(els[i], temp)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Wrap the direct content inside the default block tag.\r\n   */\r\n  function _wrap(temp, tables, blockquote, inner, li) {\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    if (typeof temp === 'undefined') {\r\n      temp = false\r\n    }\r\n\r\n    if (typeof tables === 'undefined') {\r\n      tables = false\r\n    }\r\n\r\n    if (typeof blockquote === 'undefined') {\r\n      blockquote = false\r\n    }\r\n\r\n    if (typeof inner === 'undefined') {\r\n      inner = false\r\n    }\r\n\r\n    if (typeof li === 'undefined') {\r\n      li = false\r\n    }\r\n\r\n    // Wrap element.\r\n    const wp_st = editor.$wp.scrollTop()\r\n\r\n    _wrapElement(editor.el, temp)\r\n\r\n    if (inner) {\r\n      _wrapElements(editor.el.querySelectorAll('.fr-inner'), temp)\r\n    }\r\n\r\n    // Wrap table contents.\r\n    if (tables) {\r\n      _wrapElements(editor.el.querySelectorAll('td, th'), temp)\r\n    }\r\n\r\n    // Wrap table contents.\r\n    if (blockquote) {\r\n      _wrapElements(editor.el.querySelectorAll('blockquote'), temp)\r\n    }\r\n\r\n    if (li) {\r\n      _wrapElements(editor.el.querySelectorAll('li'), temp)\r\n    }\r\n\r\n    if (wp_st !== editor.$wp.scrollTop()) {\r\n      editor.$wp.scrollTop(wp_st)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unwrap temporary divs.\r\n   */\r\n  function unwrap() {\r\n    editor.$el.find('div.fr-temp-div').each(function () {\r\n      if (this.previousSibling && this.previousSibling.nodeType === Node.TEXT_NODE) {\r\n        $(this).before('<br>')\r\n      }\r\n\r\n      if ($(this).attr('data-empty') || !this.nextSibling || editor.node.isBlock(this.nextSibling) && !$(this.nextSibling).hasClass('fr-temp-div')) {\r\n        $(this).replaceWith($(this).html())\r\n      }\r\n      else {\r\n        $(this).replaceWith(`${$(this).html()}<br>`)\r\n      }\r\n    })\r\n\r\n    // Remove temp class from other blocks.\r\n    editor.$el.find('.fr-temp-div').removeClass('fr-temp-div').filter(function () {\r\n\r\n      return $(this).attr('class') === ''\r\n    }).removeAttr('class')\r\n  }\r\n\r\n  /**\r\n   * Add BR inside empty elements.\r\n   */\r\n  function fillEmptyBlocks(around_markers) {\r\n    const blocks = emptyBlocks(around_markers)\r\n\r\n    if (editor.node.isEmpty(editor.el) && editor.opts.enter === FE.ENTER_BR) {\r\n      blocks.push(editor.el)\r\n    }\r\n\r\n    for (let i = 0; i < blocks.length; i++) {\r\n      const block = blocks[i]\r\n\r\n      if (block.getAttribute('contenteditable') !== 'false' &&\r\n          !block.querySelector(`${editor.opts.htmlAllowedEmptyTags.join(':not(.fr-marker),')}:not(.fr-marker)`) &&\r\n          !editor.node.isVoid(block)) {\r\n        if (block.tagName !== 'TABLE' && block.tagName !== 'TBODY' && block.tagName !== 'TR' && block.tagName !== 'UL' && block.tagName !== 'OL') {\r\n          block.appendChild(editor.doc.createElement('br'))\r\n        }\r\n      }\r\n    }\r\n\r\n    // Fix for https://github.com/froala/wysiwyg-editor/issues/1166#issuecomment-204549406.\r\n    if (editor.browser.msie && editor.opts.enter === FE.ENTER_BR) {\r\n      const contents = editor.node.contents(editor.el)\r\n\r\n      if (contents.length && contents[contents.length - 1].nodeType === Node.TEXT_NODE) {\r\n        editor.$el.append('<br>')\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the blocks inside the editable area.\r\n   */\r\n  function blocks() {\r\n\r\n    return editor.$el.get(0).querySelectorAll(blockTagsQuery())\r\n  }\r\n\r\n  /**\r\n   * Clean the blank spaces between the block tags.\r\n   */\r\n  function cleanBlankSpaces(el) {\r\n    if (typeof el === 'undefined') {\r\n      el = editor.el\r\n    }\r\n\r\n    if (el && ['SCRIPT', 'STYLE', 'PRE'].indexOf(el.tagName) >= 0) {\r\n      return false\r\n    }\r\n\r\n    const walker = editor.doc.createTreeWalker(el, NodeFilter.SHOW_TEXT, editor.node.filter((node) => node.textContent.match(/([ \\n]{2,})|(^[ \\n]{1,})|([ \\n]{1,}$)/g) !== null), false)\r\n\r\n    while (walker.nextNode()) {\r\n\r\n      const node = walker.currentNode\r\n\r\n      if (isPreformatted(node.parentNode, true)) {\r\n        continue\r\n      }\r\n\r\n      const is_block_or_element = editor.node.isBlock(node.parentNode) || editor.node.isElement(node.parentNode)\r\n\r\n      // Remove middle spaces.\r\n      // Replace new lines with spaces.\r\n      // Replace begin/end spaces.\r\n      let txt = node.textContent\r\n        .replace(/(?!^)( ){2,}(?!$)/g, ' ')\r\n        .replace(/\\n/g, ' ')\r\n        .replace(/^[ ]{2,}/g, ' ')\r\n        .replace(/[ ]{2,}$/g, ' ')\r\n\r\n      if (is_block_or_element) {\r\n        const p_node = node.previousSibling\r\n        const n_node = node.nextSibling\r\n\r\n        if (p_node && n_node && txt === ' ') {\r\n          if (editor.node.isBlock(p_node) && editor.node.isBlock(n_node)) {\r\n            txt = ''\r\n          }\r\n          else {\r\n            txt = ' '\r\n          }\r\n        }\r\n        else {\r\n\r\n          // No previous siblings.\r\n          if (!p_node) {\r\n            txt = txt.replace(/^ */, '')\r\n          }\r\n\r\n          // No next siblings.\r\n          if (!n_node) {\r\n            txt = txt.replace(/ *$/, '')\r\n          }\r\n        }\r\n      }\r\n\r\n      node.textContent = txt\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract a specific match for a RegEx.\r\n   */\r\n  function _extractMatch(html, re, id) {\r\n    const reg_exp = new RegExp(re, 'gi')\r\n    const matches = reg_exp.exec(html)\r\n\r\n    if (matches) {\r\n\r\n      return matches[id]\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * Create new doctype.\r\n   */\r\n  function _newDoctype(string, doc) {\r\n    const matches = string.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?\"?([^\"]*)\"? ?\"?([^\"]*)\"?>/i)\r\n\r\n    if (matches) {\r\n\r\n      return doc.implementation.createDocumentType(\r\n        matches[1],\r\n        matches[3],\r\n        matches[4]\r\n      )\r\n    }\r\n\r\n\r\n    return doc.implementation.createDocumentType('html')\r\n\r\n  }\r\n\r\n  /**\r\n   * Get string doctype of a document.\r\n   */\r\n  function getDoctype(doc) {\r\n    const node = doc.doctype\r\n    let doctype = '<!DOCTYPE html>'\r\n\r\n    if (node) {\r\n      doctype = `<!DOCTYPE ${\r\n        node.name\r\n      }${node.publicId ? ` PUBLIC \"${node.publicId}\"` : ''\r\n      }${!node.publicId && node.systemId ? ' SYSTEM' : ''\r\n      }${node.systemId ? ` \"${node.systemId}\"` : ''\r\n      }>`\r\n    }\r\n\r\n    return doctype\r\n  }\r\n\r\n  function _processBR(br) {\r\n    const parent_node = br.parentNode\r\n\r\n    if (parent_node && (editor.node.isBlock(parent_node) || editor.node.isElement(parent_node)) && ['TD', 'TH'].indexOf(parent_node.tagName) < 0) {\r\n      let prev_node = br.previousSibling\r\n      const next_node = br.nextSibling\r\n\r\n      // Ignore non characters.\r\n      while (prev_node && (prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.replace(/\\n|\\r/g, '').length === 0 || editor.node.hasClass(prev_node, 'fr-tmp'))) {\r\n        prev_node = prev_node.previousSibling\r\n      }\r\n\r\n      if (next_node) {\r\n        return false\r\n      }\r\n\r\n      // Previous node.\r\n      // Previous node is not BR.\r\n      // Previoues node is not block tag.\r\n      // No next node.\r\n      // Parent node has text.\r\n      // Previous node has text.\r\n      if (prev_node && parent_node && prev_node.tagName !== 'BR' && !editor.node.isBlock(prev_node) && !next_node && parent_node.textContent.replace(/\\u200B/g, '').length > 0 && prev_node.textContent.length > 0 && !editor.node.hasClass(prev_node, 'fr-marker')) {\r\n        // Fix for https://github.com/froala/wysiwyg-editor/issues/1166#issuecomment-204549406.\r\n        if (!(editor.el === parent_node && !next_node && editor.opts.enter === FE.ENTER_BR && editor.browser.msie)) {\r\n          br.parentNode.removeChild(br)\r\n        }\r\n      }\r\n    }\r\n\r\n    // Regular node.\r\n    else if (parent_node && !(editor.node.isBlock(parent_node) || editor.node.isElement(parent_node))) {\r\n\r\n      // Check if we have something else than BR.\r\n      if (!br.previousSibling && !br.nextSibling && editor.node.isDeletable(br.parentNode)) {\r\n        _processBR(br.parentNode)\r\n      }\r\n    }\r\n  }\r\n\r\n  function cleanBRs() {\r\n    const brs = editor.el.getElementsByTagName('br')\r\n\r\n    for (let i = 0; i < brs.length; i++) {\r\n      _processBR(brs[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Normalize.\r\n   */\r\n  function _normalize() {\r\n    if (!editor.opts.htmlUntouched) {\r\n\r\n      // Remove empty tags.\r\n      cleanEmptyTags()\r\n\r\n      // Wrap possible text.\r\n      _wrap()\r\n\r\n      // Clean blank spaces.\r\n      cleanBlankSpaces()\r\n\r\n      // Normalize spaces.\r\n      editor.spaces.normalize(null, true)\r\n\r\n      // Add BR tag where it is necessary.\r\n      editor.html.fillEmptyBlocks()\r\n\r\n      // Clean lists.\r\n      editor.clean.lists()\r\n\r\n      // Clean tables.\r\n      editor.clean.tables()\r\n\r\n      // Convert to HTML5.\r\n      editor.clean.toHTML5()\r\n\r\n      // Remove unecessary brs.\r\n      editor.html.cleanBRs()\r\n    }\r\n\r\n    // Restore selection.\r\n    editor.selection.restore()\r\n\r\n    // Check if editor is empty and add placeholder.\r\n    checkIfEmpty()\r\n\r\n    // Refresh placeholder.\r\n    editor.placeholder.refresh()\r\n  }\r\n\r\n  function checkIfEmpty() {\r\n    if (editor.node.isEmpty(editor.el)) {\r\n      if (defaultTag() !== null) {\r\n\r\n        // There is no block tag inside the editor.\r\n        if (!editor.el.querySelector(blockTagsQuery()) &&\r\n              !editor.el.querySelector(`${editor.opts.htmlDoNotWrapTags.join(':not(.fr-marker),')}:not(.fr-marker)`)) {\r\n          if (editor.core.hasFocus()) {\r\n            editor.$el.html(`<${defaultTag()}>${FE.MARKERS}<br/></${defaultTag()}>`)\r\n            editor.selection.restore()\r\n          }\r\n          else {\r\n            editor.$el.html(`<${defaultTag()}><br/></${defaultTag()}>`)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n\r\n        // There is nothing in the editor.\r\n        if (!editor.el.querySelector('*:not(.fr-marker):not(br)')) {\r\n          if (editor.core.hasFocus()) {\r\n            editor.$el.html(`${FE.MARKERS}<br/>`)\r\n            editor.selection.restore()\r\n          }\r\n          else {\r\n            editor.$el.html('<br/>')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function extractNode(html, tag) {\r\n\r\n    return _extractMatch(html, `<${tag}[^>]*?>([\\\\w\\\\W]*)</${tag}>`, 1)\r\n  }\r\n\r\n  function extractNodeAttrs(html, tag) {\r\n    const $dv = $(`<div ${_extractMatch(html, `<${tag}([^>]*?)>`, 1) || ''}>`)\r\n\r\n    return editor.node.rawAttributes($dv.get(0))\r\n  }\r\n\r\n  function extractDoctype(html) {\r\n\r\n    return (_extractMatch(html, '<!DOCTYPE([^>]*?)>', 0) || '<!DOCTYPE html>').replace(/\\n/g, ' ').replace(/ {2,}/g, ' ')\r\n  }\r\n\r\n  /*\r\n   * Set html to node.\r\n   */\r\n  function _setHtml($node, html) {\r\n\r\n    if (editor.opts.htmlExecuteScripts) {\r\n      $node.html(html)\r\n    }\r\n    else {\r\n      $node.get(0).innerHTML = html\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set HTML.\r\n   */\r\n  function set(html) {\r\n    let cleaned_html = editor.clean.html((html || '').trim(), [], [], editor.opts.fullPage)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2810 - issue 3\r\n    // not using decodeURI since we don't want to decode any html content. This fix is specific to decoding : symbol in th url.\r\n    let re = new RegExp('%3A//', 'g')\r\n    const clean_html = cleaned_html.replace(re, '://')\r\n\r\n    if (!editor.opts.fullPage) {\r\n      _setHtml(editor.$el, clean_html)\r\n    }\r\n    else {\r\n\r\n      // Get BODY data.\r\n      const body_html = extractNode(clean_html, 'body') || (clean_html.indexOf('<body') >= 0 ? '' : clean_html)\r\n      const body_attrs = extractNodeAttrs(clean_html, 'body')\r\n\r\n      // Get HEAD data.\r\n      let head_html = extractNode(clean_html, 'head') || '<title></title>'\r\n      const head_attrs = extractNodeAttrs(clean_html, 'head')\r\n\r\n      // Get HTML that might be in <head> other than meta tags.\r\n      // https://github.com/froala/wysiwyg-editor/issues/1208\r\n      const $dv = $('<div>')\r\n\r\n      $dv.append(head_html)\r\n        .contents().each(function () {\r\n          if (this.nodeType === Node.COMMENT_NODE || ['BASE', 'LINK', 'META', 'NOSCRIPT', 'SCRIPT', 'STYLE', 'TEMPLATE', 'TITLE'].indexOf(this.tagName) >= 0) {\r\n            this.parentNode.removeChild(this)\r\n          }\r\n        })\r\n\r\n      const head_bad_html = $dv.html().trim()\r\n\r\n      // Filter and keep only meta tags in <head>.\r\n      // https://html.spec.whatwg.org/multipage/dom.html#metadata-content-2\r\n      head_html = $('<div>')\r\n        .append(head_html)\r\n        .contents().map(function () {\r\n          if (this.nodeType === Node.COMMENT_NODE) {\r\n\r\n            return `<!--${this.nodeValue}-->`\r\n          }\r\n          else if (['BASE', 'LINK', 'META', 'NOSCRIPT', 'SCRIPT', 'STYLE', 'TEMPLATE', 'TITLE'].indexOf(this.tagName) >= 0) {\r\n            return this.outerHTML\r\n          }\r\n\r\n\r\n          return ''\r\n\r\n        }).toArray()\r\n        .join('')\r\n\r\n      // Get DOCTYPE.\r\n      const doctype = extractDoctype(clean_html)\r\n\r\n      // Get HTML attributes.\r\n      const html_attrs = extractNodeAttrs(clean_html, 'html')\r\n\r\n      _setHtml(editor.$el, `${head_bad_html}\\n${body_html}`)\r\n      editor.node.clearAttributes(editor.el)\r\n      editor.$el.attr(body_attrs)\r\n      editor.$el.addClass('fr-view')\r\n      editor.$el.attr('spellcheck', editor.opts.spellcheck)\r\n      editor.$el.attr('dir', editor.opts.direction)\r\n\r\n      _setHtml(editor.$head, head_html)\r\n      editor.node.clearAttributes(editor.$head.get(0))\r\n      editor.$head.attr(head_attrs)\r\n\r\n      editor.node.clearAttributes(editor.$html.get(0))\r\n\r\n      editor.$html.attr(html_attrs)\r\n\r\n      editor.iframe_document.doctype.parentNode.replaceChild(\r\n        _newDoctype(doctype, editor.iframe_document),\r\n        editor.iframe_document.doctype\r\n      )\r\n    }\r\n\r\n    // Make sure the content is editable.\r\n    const disabled = editor.edit.isDisabled()\r\n    editor.edit.on()\r\n\r\n    editor.core.injectStyle(editor.opts.iframeDefaultStyle + editor.opts.iframeStyle)\r\n\r\n    _normalize()\r\n\r\n    if (!editor.opts.useClasses) {\r\n\r\n      // Restore orignal attributes if present.\r\n      editor.$el.find('[fr-original-class]').each(function () {\r\n        this.setAttribute('class', this.getAttribute('fr-original-class'))\r\n        this.removeAttribute('fr-original-class')\r\n      })\r\n\r\n      editor.$el.find('[fr-original-style]').each(function () {\r\n        this.setAttribute('style', this.getAttribute('fr-original-style'))\r\n        this.removeAttribute('fr-original-style')\r\n      })\r\n    }\r\n\r\n    if (disabled) {\r\n      editor.edit.off()\r\n    }\r\n\r\n    editor.events.trigger('html.set')\r\n    //https://github.com/froala-labs/froala-editor-js-2/issues/1920\t\t\r\n    editor.events.trigger('charCounter.update');\r\n  }\r\n\r\n  function _specifity(selector) {\r\n    const idRegex = /(#[^\\s+>~.[:]+)/g\r\n    const attributeRegex = /(\\[[^]]+\\])/g\r\n    const classRegex = /(\\.[^\\s+>~.[:]+)/g\r\n    const pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi\r\n    const pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi\r\n\r\n    // A regex for other pseudo classes, which don't have brackets\r\n    const pseudoClassRegex = /(:[^\\s+>~.[:]+)/g\r\n    const elementRegex = /([^\\s+>~.[:]+)/g;\r\n\r\n    // Remove the negation psuedo-class (:not) but leave its argument because specificity is calculated on its argument\r\n    (function () {\r\n      const regex = /:not\\(([^)]*)\\)/g\r\n\r\n      if (regex.test(selector)) {\r\n        selector = selector.replace(regex, '     $1 ')\r\n      }\r\n    }())\r\n\r\n    let s = (selector.match(idRegex) || []).length * 100 +\r\n            (selector.match(attributeRegex) || []).length * 10 +\r\n            (selector.match(classRegex) || []).length * 10 +\r\n            (selector.match(pseudoClassWithBracketsRegex) || []).length * 10 +\r\n            (selector.match(pseudoClassRegex) || []).length * 10 +\r\n            (selector.match(pseudoElementRegex) || []).length\r\n\r\n    // Remove universal selector and separator characters\r\n    selector = selector.replace(/[*\\s+>~]/g, ' ')\r\n\r\n    // Remove any stray dots or hashes which aren't attached to words\r\n    // These may be present if the user is live-editing this selector\r\n    selector = selector.replace(/[#.]/g, ' ')\r\n\r\n    s += (selector.match(elementRegex) || []).length\r\n\r\n    return s\r\n  }\r\n\r\n  /**\r\n   * Do processing on the final html.\r\n   */\r\n  function _processOnGet(el) {\r\n    editor.events.trigger('html.processGet', [el])\r\n\r\n    // Remove class attribute when empty.\r\n    if (el && el.getAttribute && el.getAttribute('class') === '') {\r\n      el.removeAttribute('class')\r\n    }\r\n\r\n    if (el && el.getAttribute && el.getAttribute('style') === '') {\r\n      el.removeAttribute('style')\r\n    }\r\n\r\n    // Look at inner nodes that have no class set.\r\n    if (el && el.nodeType === Node.ELEMENT_NODE) {\r\n      const els = el.querySelectorAll('[class=\"\"],[style=\"\"]')\r\n      let i\r\n\r\n      for (i = 0; i < els.length; i++) {\r\n        const _el = els[i]\r\n\r\n        if (_el.getAttribute('class') === '') {\r\n          _el.removeAttribute('class')\r\n        }\r\n\r\n        if (_el.getAttribute('style') === '') {\r\n          _el.removeAttribute('style')\r\n        }\r\n      }\r\n\r\n      if (el.tagName === 'BR') {\r\n        _processBR(el)\r\n      }\r\n      else {\r\n        const brs = el.querySelectorAll('br')\r\n\r\n        for (i = 0; i < brs.length; i++) {\r\n          _processBR(brs[i])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sort elements by spec.\r\n   */\r\n  function _sortElementsBySpec(a, b) {\r\n    return a[3] - b[3]\r\n  }\r\n\r\n  /**\r\n   * Sync inputs when getting the HTML.\r\n   */\r\n  function syncInputs() {\r\n    const inputs = editor.el.querySelectorAll('input, textarea')\r\n\r\n    for (let i = 0; i < inputs.length; i++) {\r\n      if (inputs[i].type === 'checkbox' || inputs[i].type === 'radio') {\r\n        if (inputs[i].checked) {\r\n          inputs[i].setAttribute('checked', inputs[i].checked)\r\n        } else {\r\n          editor.$(inputs[i]).removeAttr('checked')\r\n        }\r\n      }\r\n\r\n      /**\r\n       * if the input type has value attribute then only updating the value atrribute.\r\n       * Submit and Reset buttons default value is type names\r\n       */ \r\n      if (inputs[i].getAttribute('value')) {\r\n        inputs[i].setAttribute('value', inputs[i].value)\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Get HTML.\r\n   */\r\n  function get(keep_markers, keep_classes) {\r\n    if (!editor.$wp) {\r\n\r\n      return editor.$oel.clone()\r\n        .removeClass('fr-view')\r\n        .removeAttr('contenteditable')\r\n        .get(0).outerHTML\r\n    }\r\n\r\n    let html = ''\r\n\r\n    editor.events.trigger('html.beforeGet')\r\n\r\n    // Convert STYLE from CSS files to inline style.\r\n    const updated_elms = []\r\n    const elms_info = {}\r\n    let i\r\n    let j\r\n    const elems_specs = []\r\n\r\n    syncInputs();\r\n\r\n    if (!editor.opts.useClasses && !keep_classes) {\r\n      const ignoreRegEx = new RegExp(`^${editor.opts.htmlIgnoreCSSProperties.join('$|^')}$`, 'gi')\r\n\r\n      for (i = 0; i < editor.doc.styleSheets.length; i++) {\r\n        let rules\r\n        let head_style = 0\r\n\r\n        try {\r\n          rules = editor.doc.styleSheets[i].cssRules\r\n\r\n          if (editor.doc.styleSheets[i].ownerNode && editor.doc.styleSheets[i].ownerNode.nodeType === 'STYLE') {\r\n            head_style = 1\r\n          }\r\n        }\r\n        catch (ex) {\r\n          // keep empty.\r\n        }\r\n\r\n        if (rules) {\r\n          for (let idx = 0, len = rules.length; idx < len; idx++) {\r\n            if (rules[idx].selectorText) {\r\n              if (rules[idx].style.cssText.length > 0) {\r\n                const selector = rules[idx].selectorText.replace(/body |\\.fr-view /g, '').replace(/::/g, ':')\r\n                let elms\r\n\r\n                try {\r\n                  elms = editor.el.querySelectorAll(selector)\r\n                }\r\n                catch (ex) {\r\n                  elms = []\r\n                }\r\n\r\n                for (j = 0; j < elms.length; j++) {\r\n\r\n                  // Save original style.\r\n                  if (!elms[j].getAttribute('fr-original-style') && elms[j].getAttribute('style')) {\r\n                    elms[j].setAttribute('fr-original-style', elms[j].getAttribute('style'))\r\n                    updated_elms.push(elms[j])\r\n                  }\r\n                  else if (!elms[j].getAttribute('fr-original-style')) {\r\n                    elms[j].setAttribute('fr-original-style', '')\r\n                    updated_elms.push(elms[j])\r\n                  }\r\n\r\n                  if (!elms_info[elms[j]]) {\r\n                    elms_info[elms[j]] = {}\r\n                  }\r\n\r\n                  // Compute specification.\r\n                  const spec = head_style * 1000 + _specifity(rules[idx].selectorText)\r\n\r\n                  // Get CSS text of the rule.\r\n                  const css_text = rules[idx].style.cssText.split(';')\r\n\r\n                  // Get each rule.\r\n                  for (let k = 0; k < css_text.length; k++) {\r\n\r\n                    // Rule.\r\n                    const rule = css_text[k].trim().split(':')[0]\r\n\r\n                    if (!rule) {\r\n                      continue\r\n                    }\r\n\r\n                    // Ignore the CSS rules we don't need.\r\n                    if (rule.match(ignoreRegEx)) {\r\n                      continue\r\n                    }\r\n\r\n                    if (!elms_info[elms[j]][rule]) {\r\n                      elms_info[elms[j]][rule] = 0\r\n\r\n                      if ((elms[j].getAttribute('fr-original-style') || '').indexOf(`${rule}:`) >= 0) {\r\n                        elms_info[elms[j]][rule] = 10000\r\n                      }\r\n                    }\r\n\r\n                    // Current spec is higher than the existing one.\r\n                    if (spec >= elms_info[elms[j]][rule]) {\r\n                      elms_info[elms[j]][rule] = spec\r\n\r\n                      if (css_text[k].trim().length) {\r\n\r\n                        const info = css_text[k].trim().split(':')\r\n                        info.splice(0, 1)\r\n\r\n                        // Add elements with css values and spec. This will be sorted later.\r\n                        elems_specs.push([elms[j], rule.trim(), info.join(':').trim(), spec])\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Sort elements by spec.\r\n      elems_specs.sort(_sortElementsBySpec)\r\n\r\n      // Add style to elements in the order of specification.\r\n      for (i = 0; i < elems_specs.length; i++) {\r\n        const specs_elem = elems_specs[i]\r\n        specs_elem[0].style[specs_elem[1]] = specs_elem[2]\r\n      }\r\n\r\n      // Save original class.\r\n      for (i = 0; i < updated_elms.length; i++) {\r\n        if (updated_elms[i].getAttribute('class')) {\r\n          updated_elms[i].setAttribute('fr-original-class', updated_elms[i].getAttribute('class'))\r\n          updated_elms[i].removeAttribute('class')\r\n        }\r\n\r\n        // Make sure that we have the inline style first.\r\n        if ((updated_elms[i].getAttribute('fr-original-style') || '').trim().length > 0) {\r\n          const original_rules = updated_elms[i].getAttribute('fr-original-style').split(';')\r\n\r\n          for (j = 0; j < original_rules.length; j++) {\r\n            if (original_rules[j].indexOf(':') > 0) {\r\n              const splits = original_rules[j].split(':')\r\n              const original_rule = splits[0]\r\n              splits.splice(0, 1)\r\n\r\n              updated_elms[i].style[original_rule.trim()] = splits.join(':').trim()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // If editor is not empty.\r\n    if (!editor.node.isEmpty(editor.el)) {\r\n      if (typeof keep_markers === 'undefined') {\r\n        keep_markers = false\r\n      }\r\n\r\n      if (!editor.opts.fullPage) {\r\n        html = editor.$el.html()\r\n      }\r\n      else {\r\n        html = getDoctype(editor.iframe_document)\r\n        editor.$el.removeClass('fr-view')\r\n        const heightMin = editor.opts.heightMin\r\n        const height = editor.opts.height;\r\n        const heightMax = editor.opts.heightMax;\r\n        editor.opts.heightMin = null\r\n        editor.opts.height = null;\r\n        editor.opts.heightMax = null;\r\n        editor.size.refresh()\r\n        html += `<html${editor.node.attributes(editor.$html.get(0))}>${editor.$html.html()}</html>`\r\n        editor.opts.heightMin = heightMin\r\n        editor.opts.height = height;\r\n        editor.opts.heightMax = heightMax;\r\n        editor.size.refresh()\r\n        editor.$el.addClass('fr-view')\r\n      }\r\n    }\r\n    else if (editor.opts.fullPage) {\r\n      html = getDoctype(editor.iframe_document)\r\n      html += `<html${editor.node.attributes(editor.$html.get(0))}>${editor.$html.find('head').get(0).outerHTML}<body></body></html>`\r\n    }\r\n\r\n    // Remove unwanted attributes.\r\n    if (!editor.opts.useClasses && !keep_classes) {\r\n      for (i = 0; i < updated_elms.length; i++) {\r\n        if (updated_elms[i].getAttribute('fr-original-class')) {\r\n          updated_elms[i].setAttribute('class', updated_elms[i].getAttribute('fr-original-class'))\r\n          updated_elms[i].removeAttribute('fr-original-class')\r\n        }\r\n\r\n        if (updated_elms[i].getAttribute('fr-original-style') !== null && typeof updated_elms[i].getAttribute('fr-original-style') !== 'undefined') {\r\n          if (updated_elms[i].getAttribute('fr-original-style').length !== 0) {\r\n            updated_elms[i].setAttribute('style', updated_elms[i].getAttribute('fr-original-style'))\r\n          }\r\n          else {\r\n            updated_elms[i].removeAttribute('style')\r\n          }\r\n\r\n          updated_elms[i].removeAttribute('fr-original-style')\r\n        }\r\n        else {\r\n          updated_elms[i].removeAttribute('style')\r\n        }\r\n      }\r\n    }\r\n\r\n    // Clean helpers.\r\n    if (editor.opts.fullPage) {\r\n      html = html.replace(/<style data-fr-style=\"true\">(?:[\\w\\W]*?)<\\/style>/g, '')\r\n      html = html.replace(/<link([^>]*)data-fr-style=\"true\"([^>]*)>/g, '')\r\n      html = html.replace(/<style(?:[\\w\\W]*?)class=\"firebugResetStyles\"(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/style>/g, '')\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) spellcheck=\"true\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$2>$3</body>')\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) contenteditable=\"(true|false)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$3>$4</body>')\r\n\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) dir=\"([\\w]*)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$3>$4</body>')\r\n      html = html.replace(/<body((?:[\\w\\W]*?))class=\"([\\w\\W]*?)(fr-rtl|fr-ltr)([\\w\\W]*?)\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1class=\"$2$4\"$5>$6</body>')\r\n      html = html.replace(/<body((?:[\\w\\W]*?)) class=\"\"((?:[\\w\\W]*?))>((?:[\\w\\W]*?))<\\/body>/g, '<body$1$2>$3</body>')\r\n    }\r\n\r\n    // Ampersand fix.\r\n    if (editor.opts.htmlSimpleAmpersand) {\r\n      html = html.replace(/&amp;/gi, '&')\r\n    }\r\n\r\n    editor.events.trigger('html.afterGet')\r\n\r\n    // Remove markers.\r\n    if (!keep_markers) {\r\n      html = html.replace(/<span[^>]*? class\\s*=\\s*[\"']?fr-marker[\"']?[^>]+>\\u200b<\\/span>/gi, '')\r\n    }\r\n\r\n    html = editor.clean.invisibleSpaces(html)\r\n\r\n    html = editor.clean.exec(html, _processOnGet)\r\n\r\n    const new_html = editor.events.chainTrigger('html.get', html)\r\n\r\n    if (typeof new_html === 'string') {\r\n      html = new_html\r\n    }\r\n\r\n    // Deal with pre.\r\n    html = html.replace(/<pre(?:[\\w\\W]*?)>(?:[\\w\\W]*?)<\\/pre>/g, (str) => str.replace(/<br>/g, '\\n'))\r\n\r\n    // Keep META.\r\n    html = html.replace(/<meta((?:[\\w\\W]*?)) data-fr-http-equiv=\"/g, '<meta$1 http-equiv=\"')\r\n\r\n    return html\r\n  }\r\n\r\n  /**\r\n   * Get selected HTML.\r\n   */\r\n  function getSelected() {\r\n    function wrapSelection(container, node) {\r\n      while (node && (node.nodeType === Node.TEXT_NODE || !editor.node.isBlock(node)) && !editor.node.isElement(node) && !editor.node.hasClass(node, 'fr-inner')) {\r\n        if (node && node.nodeType !== Node.TEXT_NODE) {\r\n          $(container).wrapInner(editor.node.openTagString(node) + editor.node.closeTagString(node))\r\n        }\r\n\r\n        node = node.parentNode\r\n      }\r\n      // else if is for https://github.com/froala/wysiwyg-editor/issues/3352\r\n      if (node && container.innerHTML === node.innerHTML) {\r\n        container.innerHTML = node.outerHTML\r\n      }\r\n      else if (node.innerText.indexOf(container.innerHTML) != -1) {\r\n        container.innerHTML = editor.node.openTagString(node) + node.innerHTML + editor.node.closeTagString(node);\r\n      }\r\n    }\r\n\r\n    function selectionParent() {\r\n      let parent = null\r\n      let sel\r\n\r\n      if (editor.win.getSelection) {\r\n        sel = editor.win.getSelection()\r\n\r\n        if (sel && sel.rangeCount) {\r\n          parent = sel.getRangeAt(0).commonAncestorContainer\r\n\r\n          if (parent.nodeType !== Node.ELEMENT_NODE) {\r\n            parent = parent.parentNode\r\n          }\r\n        }\r\n      }\r\n      else if ((sel = editor.doc.selection) && sel.type !== 'Control') {\r\n        parent = sel.createRange().parentElement()\r\n      }\r\n\r\n      if (parent !== null && ($(parent).parents().toArray().indexOf(editor.el) >= 0 || parent === editor.el)) {\r\n\r\n        return parent\r\n      }\r\n\r\n\r\n      return null\r\n\r\n    }\r\n\r\n    let html = ''\r\n\r\n    if (typeof editor.win.getSelection !== 'undefined') {\r\n\r\n      // Multiple ranges hack.\r\n      if (editor.browser.mozilla) {\r\n        editor.selection.save()\r\n\r\n        if (editor.$el.find('.fr-marker[data-type=\"false\"]').length > 1) {\r\n          editor.$el.find('.fr-marker[data-type=\"false\"][data-id=\"0\"]').remove()\r\n          editor.$el.find('.fr-marker[data-type=\"false\"]:last').attr('data-id', '0')\r\n          editor.$el.find('.fr-marker').not('[data-id=\"0\"]').remove()\r\n        }\r\n        editor.selection.restore()\r\n      }\r\n\r\n      const ranges = editor.selection.ranges()\r\n\r\n      for (let i = 0; i < ranges.length; i++) {\r\n        let container = document.createElement('div')\r\n        container.appendChild(ranges[i].cloneContents())\r\n\r\n        wrapSelection(container, selectionParent())\r\n\r\n        // Fix for https://github.com/froala/wysiwyg-editor/issues/1010.\r\n        if ($(container).find('.fr-element').length > 0) {\r\n          container = editor.el\r\n        }\r\n\r\n        html += container.innerHTML\r\n      }\r\n    }\r\n    else if (typeof editor.doc.selection !== 'undefined') {\r\n      if (editor.doc.selection.type === 'Text') {\r\n        html = editor.doc.selection.createRange().htmlText\r\n      }\r\n    }\r\n\r\n    return html\r\n  }\r\n\r\n  function _hasBlockTags(html) {\r\n    const tmp = editor.doc.createElement('div')\r\n    tmp.innerHTML = html\r\n\r\n    return tmp.querySelector(blockTagsQuery()) !== null\r\n  }\r\n\r\n  function _setCursorAtEnd(html) {\r\n    const tmp = editor.doc.createElement('div')\r\n    tmp.innerHTML = html\r\n\r\n    editor.selection.setAtEnd(tmp, true)\r\n\r\n    return tmp.innerHTML\r\n  }\r\n\r\n  function escapeEntities(str) {\r\n\r\n    return str.replace(/</gi, '&lt;')\r\n      .replace(/>/gi, '&gt;')\r\n      .replace(/\"/gi, '&quot;')\r\n      .replace(/'/gi, '&#39;')\r\n  }\r\n\r\n  function _unwrapForLists(html) {\r\n    if (!editor.html.defaultTag()) {\r\n      return html\r\n    }\r\n\r\n    const tmp = editor.doc.createElement('div')\r\n    tmp.innerHTML = html\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1553. Unwrap default tags from lists.\r\n    const default_tag_els = tmp.querySelectorAll(`:scope > ${editor.html.defaultTag()}`)\r\n\r\n    for (let i = default_tag_els.length - 1; i >= 0; i--) {\r\n      const el = default_tag_els[i]\r\n\r\n      if (!editor.node.isBlock(el.previousSibling)) {\r\n\r\n        // Check previous sibling in order to add br.\r\n        if (el.previousSibling && !editor.node.isEmpty(el)) {\r\n          $('<br>').insertAfter(el.previousSibling)\r\n        }\r\n\r\n        // Unwrap.\r\n        el.outerHTML = el.innerHTML\r\n      }\r\n    }\r\n\r\n    return tmp.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Insert HTML.\r\n   */\r\n  function insert(dirty_html, clean, do_split) {\r\n\r\n    // There is no selection.\r\n    if (!editor.selection.isCollapsed()) {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    let clean_html\r\n\r\n    if (!clean) {\r\n      clean_html = editor.clean.html(dirty_html)\r\n    }\r\n    else {\r\n      clean_html = dirty_html\r\n    }\r\n\r\n    if (dirty_html.indexOf('class=\"fr-marker\"') < 0) {\r\n      clean_html = _setCursorAtEnd(clean_html)\r\n    }\r\n\r\n    // Editor is empty and there are block tags in the pasted HTML.\r\n    if (editor.node.isEmpty(editor.el) && !editor.opts.keepFormatOnDelete && _hasBlockTags(clean_html)) {\r\n      editor.el.innerHTML = clean_html\r\n    }\r\n    else {\r\n\r\n      // Insert a marker.\r\n      let marker = editor.markers.insert()\r\n\r\n      if (!marker) {\r\n        editor.el.innerHTML += clean_html\r\n      }\r\n      else {\r\n\r\n        // Do not insert html inside emoticon.\r\n        if (editor.node.isLastSibling(marker) && $(marker).parent().hasClass('fr-deletable')) {\r\n\r\n          $(marker).insertAfter($(marker).parent())\r\n        }\r\n\r\n        // Check if HTML contains block tags and if so then break the current HTML.\r\n        const block_parent = editor.node.blockParent(marker)\r\n\r\n        if ((_hasBlockTags(clean_html) || do_split) && (editor.node.deepestParent(marker) || block_parent && block_parent.tagName === 'LI')) {\r\n          if (block_parent && block_parent.tagName === 'LI') {\r\n            clean_html = _unwrapForLists(clean_html)\r\n          }\r\n\r\n          marker = editor.markers.split()\r\n\r\n          if (!marker) {\r\n            return false\r\n          }\r\n          marker.outerHTML = clean_html\r\n        }\r\n        else {\r\n          marker.outerHTML = clean_html\r\n        }\r\n      }\r\n    }\r\n\r\n    _normalize()\r\n    editor.keys.positionCaret()\r\n\r\n    editor.events.trigger('html.inserted')\r\n  }\r\n\r\n  /**\r\n   * Clean those tags that have an invisible space inside.\r\n   */\r\n  function cleanWhiteTags(ignore_selection) {\r\n    let current_el = null\r\n\r\n    if (typeof ignore_selection === 'undefined') {\r\n      current_el = editor.selection.element()\r\n    }\r\n\r\n    if (editor.opts.keepFormatOnDelete) {\r\n      return false\r\n    }\r\n\r\n    const current_white = current_el ? (current_el.textContent.match(/\\u200B/g) || []).length - current_el.querySelectorAll('.fr-marker').length : 0\r\n    const total_white = (editor.el.textContent.match(/\\u200B/g) || []).length - editor.el.querySelectorAll('.fr-marker').length\r\n\r\n    if (total_white === current_white) {\r\n      return false\r\n    }\r\n\r\n    let possible_elements\r\n    let removed\r\n\r\n    do {\r\n      removed = false\r\n      possible_elements = editor.el.querySelectorAll('*:not(.fr-marker)')\r\n\r\n      for (let i = 0; i < possible_elements.length; i++) {\r\n        const el = possible_elements[i]\r\n\r\n        if (current_el === el) {\r\n          continue\r\n        }\r\n\r\n        const text = el.textContent\r\n\r\n        if (el.children.length === 0 && text.length === 1 && text.charCodeAt(0) === 8203 && el.tagName !== 'TD') {\r\n          $(el).remove()\r\n          removed = true\r\n        }\r\n      }\r\n    } while (removed)\r\n  }\r\n\r\n  function _cleanTags() {\r\n    cleanWhiteTags()\r\n\r\n    if (editor.placeholder) {\r\n      setTimeout(editor.placeholder.refresh, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    editor.events.$on(editor.$el, 'mousemove', 'span.fr-word-select', function (e) {\r\n      let selection = window.getSelection()\r\n      selection = window.getSelection();\r\n      let range = document.createRange();\r\n      range.selectNodeContents(e.target);\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n    })\r\n    if (editor.$wp) {\r\n      editor.events.on('mouseup', _cleanTags)\r\n      editor.events.on('keydown', _cleanTags)\r\n      editor.events.on('contentChanged', checkIfEmpty)\r\n    }\r\n  }\r\n\r\n  return {\r\n    defaultTag,\r\n    isPreformatted,\r\n    emptyBlocks,\r\n    emptyBlockTagsQuery,\r\n    blockTagsQuery,\r\n    fillEmptyBlocks,\r\n    cleanEmptyTags,\r\n    cleanWhiteTags,\r\n    cleanBlankSpaces,\r\n    blocks,\r\n    getDoctype,\r\n    set,\r\n    syncInputs,\r\n    get,\r\n    getSelected,\r\n    insert,\r\n    wrap: _wrap,\r\n    unwrap,\r\n    escapeEntities,\r\n    checkIfEmpty,\r\n    extractNode,\r\n    extractNodeAttrs,\r\n    extractDoctype,\r\n    cleanBRs,\r\n    _init,\r\n    _setHtml\r\n  }\r\n}\r\n\r\n","import FE from '../../editor.js'\r\n\r\n// Enter possible actions.\r\nFE.ENTER_P = 0\r\nFE.ENTER_DIV = 1\r\nFE.ENTER_BR = 2\r\n\r\nFE.KEYCODE = {\r\n  BACKSPACE: 8,\r\n  TAB: 9,\r\n  ENTER: 13,\r\n  SHIFT: 16,\r\n  CTRL: 17,\r\n  ALT: 18,\r\n  ESC: 27,\r\n  SPACE: 32,\r\n  ARROW_LEFT: 37,\r\n  ARROW_UP: 38,\r\n  ARROW_RIGHT: 39,\r\n  ARROW_DOWN: 40,\r\n  DELETE: 46,\r\n  ZERO: 48,\r\n  ONE: 49,\r\n  TWO: 50,\r\n  THREE: 51,\r\n  FOUR: 52,\r\n  FIVE: 53,\r\n  SIX: 54,\r\n  SEVEN: 55,\r\n  EIGHT: 56,\r\n  NINE: 57,\r\n  FF_SEMICOLON: 59, // Firefox (Gecko) fires this for semicolon instead of 186\r\n  FF_EQUALS: 61, // Firefox (Gecko) fires this for equals instead of 187\r\n  QUESTION_MARK: 63, // needs localization\r\n  A: 65,\r\n  B: 66,\r\n  C: 67,\r\n  D: 68,\r\n  E: 69,\r\n  F: 70,\r\n  G: 71,\r\n  H: 72,\r\n  I: 73,\r\n  J: 74,\r\n  K: 75,\r\n  L: 76,\r\n  M: 77,\r\n  N: 78,\r\n  O: 79,\r\n  P: 80,\r\n  Q: 81,\r\n  R: 82,\r\n  S: 83,\r\n  T: 84,\r\n  U: 85,\r\n  V: 86,\r\n  W: 87,\r\n  X: 88,\r\n  Y: 89,\r\n  Z: 90,\r\n  META: 91,\r\n  NUM_ZERO: 96,\r\n  NUM_ONE: 97,\r\n  NUM_TWO: 98,\r\n  NUM_THREE: 99,\r\n  NUM_FOUR: 100,\r\n  NUM_FIVE: 101,\r\n  NUM_SIX: 102,\r\n  NUM_SEVEN: 103,\r\n  NUM_EIGHT: 104,\r\n  NUM_NINE: 105,\r\n  NUM_MULTIPLY: 106,\r\n  NUM_PLUS: 107,\r\n  NUM_MINUS: 109,\r\n  NUM_PERIOD: 110,\r\n  NUM_DIVISION: 111,\r\n\r\n  F1: 112,\r\n  F2: 113,\r\n  F3: 114,\r\n  F4: 115,\r\n  F5: 116,\r\n  F6: 117,\r\n  F7: 118,\r\n  F8: 119,\r\n  F9: 120,\r\n  F10: 121,\r\n  F11: 122,\r\n  F12: 123,\r\n\r\n  FF_HYPHEN: 173, // Firefox (Gecko) fires this for hyphen instead of 189s\r\n  SEMICOLON: 186, // needs localization\r\n  DASH: 189, // needs localization\r\n  EQUALS: 187, // needs localization\r\n  COMMA: 188, // needs localization\r\n  HYPHEN: 189, // needs localization\r\n  PERIOD: 190, // needs localization\r\n  SLASH: 191, // needs localization\r\n  APOSTROPHE: 192, // needs localization\r\n  TILDE: 192, // needs localization\r\n  SINGLE_QUOTE: 222, // needs localization\r\n  OPEN_SQUARE_BRACKET: 219, // needs localization\r\n  BACKSLASH: 220, // needs localization\r\n  CLOSE_SQUARE_BRACKET: 221, // needs localization\r\n\r\n  IME: 229\r\n}\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  enter: FE.ENTER_P,\r\n  multiLine: true,\r\n  tabSpaces: 0\r\n})\r\n\r\nFE.MODULES.keys = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let IME = false\r\n\r\n  /**\r\n   * ENTER.\r\n   */\r\n  function _enter(e) {\r\n    if (!editor.opts.multiLine) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    }\r\n\r\n    // Not iOS.\r\n    else {\r\n\r\n      // Do not prevent default on IOS.\r\n      if (!editor.helpers.isIOS()) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n\r\n      if (!editor.selection.isCollapsed()) {\r\n        editor.selection.remove()\r\n      }\r\n\r\n      editor.cursor.enter()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * SHIFT ENTER.\r\n   */\r\n  function _shiftEnter(e) {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    if (editor.opts.multiLine) {\r\n      if (!editor.selection.isCollapsed()) {\r\n        editor.selection.remove()\r\n      }\r\n\r\n      editor.cursor.enter(true)\r\n    }\r\n  }\r\n  /**\r\n   * Control/Command Backspace.\r\n   */\r\n  function _ctlBackspace() {\r\n\r\n    setTimeout(() => {\r\n      editor.events.disableBlur()\r\n      editor.events.focus()\r\n    }, 0)\r\n  }\r\n\r\n  /**\r\n   * BACKSPACE.\r\n   */\r\n  function _backspace(e) {\r\n\r\n    // There is no selection.\r\n    if (editor.selection.isCollapsed()) {\r\n      if (['INPUT','BUTTON','TEXTAREA'].indexOf(e.target && e.target.tagName) < 0) {\r\n        editor.cursor.backspace()\r\n      }\r\n\r\n      if (editor.helpers.isIOS()) {\r\n        const range = editor.selection.ranges(0)\r\n        range.deleteContents()\r\n        range.insertNode(document.createTextNode('\\u200B'))\r\n\r\n        const sel = editor.selection.get()\r\n        sel.modify('move', 'forward', 'character')\r\n      }\r\n      else {\r\n        if (['INPUT','BUTTON','TEXTAREA'].indexOf(e.target && e.target.tagName) < 0) {\r\n          e.preventDefault()\r\n        }\r\n\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n\r\n    // We have text selected.\r\n    else {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      editor.selection.remove()\r\n    }\r\n\r\n    editor.placeholder.refresh()\r\n  }\r\n\r\n  /**\r\n   * DELETE\r\n   */\r\n  function _del(e) {\r\n    if (['INPUT','BUTTON','TEXTAREA'].indexOf(e.target && e.target.tagName) < 0) {\r\n      e.preventDefault()\r\n    }\r\n\r\n    e.stopPropagation()\r\n\r\n    // There is no selection or only image selection.\r\n    // https://github.com/froala/wysiwyg-editor/issues/3342\r\n    if (editor.selection.text() === '' && (editor.selection.isCollapsed() || editor.selection.element().tagName != 'IMG')) {\r\n      editor.cursor.del();\r\n    }\r\n\r\n    // We have text selected.\r\n    else {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    editor.placeholder.refresh()\r\n  }\r\n\r\n  /**\r\n   * SPACE\r\n   */\r\n  function _space(e) {\r\n    const el = editor.selection.element()\r\n\r\n    // Do nothing on mobile.\r\n    // Browser is Mozilla or we're inside a link tag.\r\n    if (!editor.helpers.isMobile() && (el && el.tagName === 'A')) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      if (!editor.selection.isCollapsed()) {\r\n        editor.selection.remove()\r\n      }\r\n      const marker = editor.markers.insert()\r\n\r\n      if (marker) {\r\n        const prev_node = marker.previousSibling\r\n        const next_node = marker.nextSibling\r\n\r\n        if (!next_node && marker.parentNode && marker.parentNode.tagName === 'A') {\r\n          marker.parentNode.insertAdjacentHTML('afterend', `&nbsp;${FE.MARKERS}`)\r\n          marker.parentNode.removeChild(marker)\r\n        }\r\n        else {\r\n          if (prev_node && prev_node.nodeType === Node.TEXT_NODE && prev_node.textContent.length === 1 && prev_node.textContent.charCodeAt(0) === 160) {\r\n            prev_node.textContent += ' '\r\n          }\r\n          else {\r\n            marker.insertAdjacentHTML('beforebegin', '&nbsp;')\r\n          }\r\n\r\n          marker.outerHTML = FE.MARKERS\r\n        }\r\n\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle typing in Korean for FF.\r\n   */\r\n  function _input() {\r\n\r\n    // Select is collapsed and we're not using IME.\r\n    if (editor.browser.mozilla && editor.selection.isCollapsed() && !IME) {\r\n      const range = editor.selection.ranges(0)\r\n      const start_container = range.startContainer\r\n      const start_offset = range.startOffset\r\n\r\n      // Start container is text and last char before cursor is space.\r\n      if (start_container && start_container.nodeType === Node.TEXT_NODE && start_offset <= start_container.textContent.length && start_offset > 0 && start_container.textContent.charCodeAt(start_offset - 1) === 32) {\r\n        editor.selection.save()\r\n        editor.spaces.normalize()\r\n        editor.selection.restore()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cut.\r\n   */\r\n  function _cut() {\r\n    if (editor.selection.isFull()) {\r\n      setTimeout(() => {\r\n        const default_tag = editor.html.defaultTag()\r\n\r\n        if (default_tag) {\r\n          editor.$el.html(`<${default_tag}>${FE.MARKERS}<br/></${default_tag}>`)\r\n        }\r\n        else {\r\n          editor.$el.html(`${FE.MARKERS}<br/>`)\r\n        }\r\n        editor.selection.restore()\r\n\r\n        editor.placeholder.refresh()\r\n        editor.button.bulkRefresh()\r\n        editor.undo.saveStep()\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tab.\r\n   */\r\n  function _tab(e) {\r\n    if (editor.opts.tabSpaces > 0) {\r\n      if (editor.selection.isCollapsed()) {\r\n        editor.undo.saveStep()\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        let str = ''\r\n\r\n        for (let i = 0; i < editor.opts.tabSpaces; i++) {\r\n          str += '&nbsp;'\r\n        }\r\n        editor.html.insert(str)\r\n        editor.placeholder.refresh()\r\n\r\n        editor.undo.saveStep()\r\n      }\r\n      else {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        if (!e.shiftKey) {\r\n          editor.commands.indent()\r\n        }\r\n        else {\r\n          editor.commands.outdent()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Map keyPress actions.\r\n   */\r\n  function _mapKeyPress() {\r\n    IME = false\r\n  }\r\n\r\n  function _clearIME() {\r\n    IME = false\r\n  }\r\n\r\n  /**\r\n   * If is IME.\r\n   */\r\n  function isIME() {\r\n    return IME\r\n  }\r\n\r\n  let key_down_code\r\n\r\n  function _empty() {\r\n    const default_tag = editor.html.defaultTag()\r\n\r\n    if (default_tag) {\r\n      editor.$el.html(`<${default_tag}>${FE.MARKERS}<br/></${default_tag}>`)\r\n    }\r\n    else {\r\n      editor.$el.html(`${FE.MARKERS}<br/>`)\r\n    }\r\n\r\n    editor.selection.restore()\r\n  }\r\n    \r\n  /**\r\n   * https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n   * Extra Space after Image in list (ul, ol).\r\n   */\r\n\r\n  function ImageCaptionSpace(sel_el,e){\r\n    if(sel_el.innerHTML.indexOf('<span') > -1 || sel_el.parentElement.innerHTML.indexOf('<span') > -1 || sel_el.parentElement.parentElement.innerHTML.indexOf('<span') > -1){\r\n      if (sel_el.classList.contains('fr-img-space-wrap') || sel_el.parentElement.classList.contains('fr-img-space-wrap') || sel_el.parentElement.parentElement.classList.contains('fr-img-space-wrap')){\r\n        if($(sel_el.parentElement).is('p')){\r\n          let strHTML = sel_el.parentElement.innerHTML\r\n          strHTML = strHTML.replace(/<br>/g, '')\r\n          if(strHTML.length < 1){\r\n            sel_el.parentElement.insertAdjacentHTML('afterbegin', '&nbsp;');\r\n          }\r\n          else if(strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Backspace'){\r\n            _backspace(e)\r\n          }\r\n          else if(strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Delete'){\r\n            _del(e)\r\n          }\r\n          return true\r\n        }\r\n        else if($(sel_el).is('p')){\r\n          let orgStr = sel_el.innerHTML\r\n          let strHTML = orgStr.replace(/<br>/g, '')\r\n          if(strHTML.length < 1){\r\n            sel_el.insertAdjacentHTML('afterbegin', '&nbsp;');\r\n          }\r\n          else if(strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Backspace'){\r\n            _backspace(e)\r\n          }\r\n          else if (strHTML != '&nbsp;' && strHTML != ' ' && e.key == 'Delete'){\r\n            _del(e)\r\n          }\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Map keyDown actions.\r\n   */\r\n  function _mapKeyDown(e) {\r\n    const sel_el = editor.selection.element()\r\n\r\n    if (sel_el && ['INPUT', 'TEXTAREA'].indexOf(sel_el.tagName) >= 0) {\r\n      return true\r\n    }\r\n\r\n    if (e && isArrow(e.which)) {\r\n      return true\r\n    }\r\n\r\n    editor.events.disableBlur()\r\n\r\n    const key_code = e.which\r\n\r\n    if (key_code === 16) {\r\n      return true\r\n    }\r\n\r\n    key_down_code = key_code\r\n\r\n    // Handle Japanese typing.\r\n    if (key_code === FE.KEYCODE.IME) {\r\n      IME = true\r\n\r\n      return true\r\n    }\r\n\r\n    IME = false\r\n\r\n\r\n    const char_key = isCharacter(key_code) && !ctrlKey(e) && !e.altKey\r\n    const del_key = key_code === FE.KEYCODE.BACKSPACE || key_code === FE.KEYCODE.DELETE\r\n\r\n    // 1. Selection is full.\r\n    // 2. Del key is hit, editor is empty and there is keepFormatOnDelete.\r\n    if (editor.selection.isFull() && !editor.opts.keepFormatOnDelete && !editor.placeholder.isVisible() || del_key && editor.placeholder.isVisible() && editor.opts.keepFormatOnDelete) {\r\n      if (char_key || del_key) {\r\n        _empty()\r\n\r\n        if (!isCharacter(key_code)) {\r\n          e.preventDefault()\r\n\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    // ENTER.\r\n    if (key_code === FE.KEYCODE.ENTER) {\r\n      //code edited https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      // added code for fr-inner class check\r\n      if (e.shiftKey || sel_el.classList.contains('fr-inner') || sel_el.parentElement.classList.contains('fr-inner')){\r\n        _shiftEnter(e)\r\n      }\r\n      else {\r\n        _enter(e)\r\n      }\r\n    }\r\n\r\n    // Ctrl/Command Backspace.\r\n    else if (key_code === FE.KEYCODE.BACKSPACE && (e.metaKey || e.ctrlKey)) {\r\n      _ctlBackspace()\r\n    }\r\n\r\n    // Backspace.\r\n    else if (key_code === FE.KEYCODE.BACKSPACE && !ctrlKey(e) && !e.altKey) {\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      if(ImageCaptionSpace(sel_el, e)){\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        return\r\n      }\r\n      \r\n      if (!editor.placeholder.isVisible()) {\r\n        _backspace(e)\r\n      }\r\n      else {\r\n        if (!editor.opts.keepFormatOnDelete) {\r\n          _empty()\r\n        }\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n\r\n    // Delete.\r\n    else if (key_code === FE.KEYCODE.DELETE && !ctrlKey(e) && !e.altKey && !e.shiftKey) {\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1864\r\n      if(ImageCaptionSpace(sel_el, e)){\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        return\r\n      }\r\n      \r\n      if (!editor.placeholder.isVisible()) {\r\n        _del(e)\r\n      }\r\n      else {\r\n        if (!editor.opts.keepFormatOnDelete) {\r\n          _empty()\r\n        }\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n      }\r\n    }\r\n\r\n    // Space.\r\n    else if (key_code === FE.KEYCODE.SPACE) {\r\n      _space(e)\r\n    }\r\n\r\n    // Tab.\r\n    else if (key_code === FE.KEYCODE.TAB) {\r\n      _tab(e)\r\n    }\r\n\r\n    // Char key.\r\n    else if (!ctrlKey(e) && isCharacter(e.which) && !editor.selection.isCollapsed() && !e.ctrlKey && !e.altKey) {\r\n      editor.selection.remove()\r\n    }\r\n\r\n    editor.events.enableBlur()\r\n  }\r\n\r\n  /**\r\n   * Remove U200B.\r\n   */\r\n  function _replaceU200B(el) {\r\n    const walker = editor.doc.createTreeWalker(el, NodeFilter.SHOW_TEXT, editor.node.filter((node) => /\\u200B/gi.test(node.textContent)), false)\r\n\r\n    while (walker.nextNode()) {\r\n      const node = walker.currentNode\r\n\r\n      node.textContent = node.textContent.replace(/\\u200B/gi, '')\r\n    }\r\n  }\r\n\r\n  function positionCaret() {\r\n    if (!editor.$wp) {\r\n      return true\r\n    }\r\n\r\n    let info\r\n\r\n    if (!editor.opts.height && !editor.opts.heightMax) {\r\n\r\n      // Make sure we scroll bottom.\r\n      info = editor.position.getBoundingRect()\r\n        .top\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/834.\r\n      if (editor.opts.toolbarBottom) {\r\n        info += editor.opts.toolbarStickyOffset\r\n      }\r\n\r\n      if (editor.helpers.isIOS() || editor.helpers.isAndroid()) {\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        info += editor.$iframe.offset()\r\n          .top\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/432 . getBoundingRect will return different results in iframe because the viewport.\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      info += editor.opts.toolbarStickyOffset\r\n\r\n      if (info > editor.o_win.innerHeight - 20) {\r\n        $(editor.o_win)\r\n          .scrollTop(info + editor.helpers.scrollTop() - editor.o_win.innerHeight + 20)\r\n      }\r\n\r\n      // Make sure we scroll top.\r\n      info = editor.position.getBoundingRect()\r\n        .top\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/834.\r\n      if (!editor.opts.toolbarBottom) {\r\n        info -= editor.opts.toolbarStickyOffset\r\n      }\r\n\r\n      if (editor.helpers.isIOS() || editor.helpers.isAndroid()) {\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        info += editor.$iframe.offset()\r\n          .top\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/432 . getBoundingRect will return different results in iframe because the viewport.\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (info < 100) {\r\n        $(editor.o_win)\r\n          .scrollTop(info + editor.helpers.scrollTop() - 100)\r\n      }\r\n    }\r\n    else {\r\n\r\n      // Make sure we scroll bottom.\r\n      info = editor.position.getBoundingRect()\r\n        .top\r\n\r\n      if (editor.helpers.isIOS() || editor.helpers.isAndroid()) {\r\n        info -= editor.helpers.scrollTop()\r\n      }\r\n\r\n      if (editor.opts.iframe) {\r\n        info += editor.$iframe.offset()\r\n          .top\r\n      }\r\n\r\n      if (info > editor.$wp.offset()\r\n        .top - editor.helpers.scrollTop() + editor.$wp.height() - 20) {\r\n        editor.$wp.scrollTop(info + editor.$wp.scrollTop() - (editor.$wp.height() + editor.$wp.offset()\r\n          .top) + editor.helpers.scrollTop() + 20)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Map keyUp actions.\r\n   */\r\n  function _mapKeyUp(e) {\r\n    const sel_el = editor.selection.element()\r\n\r\n    if (sel_el && ['INPUT', 'TEXTAREA'].indexOf(sel_el.tagName) >= 0) {\r\n      return true\r\n    }\r\n\r\n    // When using iOS soft keyboard, in keyup we get 0 for keycode,\r\n    // therefore, we are using the one we got on keydown.\r\n    if (e && e.which === 0 && key_down_code) {\r\n      e.which = key_down_code\r\n    }\r\n\r\n    if (editor.helpers.isAndroid() && editor.browser.mozilla) {\r\n\r\n      return true\r\n    }\r\n\r\n    // IME IE.\r\n    if (IME) {\r\n      return false\r\n    }\r\n\r\n    // Revert ios default ENTER.\r\n    if (e && editor.helpers.isIOS() && e.which === FE.KEYCODE.ENTER) {\r\n      editor.doc.execCommand('undo')\r\n    }\r\n\r\n    if (!editor.selection.isCollapsed()) {\r\n      return true\r\n    }\r\n\r\n    if (e && (e.which === FE.KEYCODE.META || e.which === FE.KEYCODE.CTRL)) {\r\n      return true\r\n    }\r\n\r\n    if (e && isArrow(e.which)) {\r\n      return true\r\n    }\r\n\r\n    if (e && !editor.helpers.isIOS() && (e.which === FE.KEYCODE.ENTER || e.which === FE.KEYCODE.BACKSPACE || e.which >= 37 && e.which <= 40 && !editor.browser.msie)) {\r\n      try {\r\n        positionCaret()\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n\r\n    // Remove invisible space where possible.\r\n    function has_invisible(node) {\r\n      if (!node) {\r\n        return false\r\n      }\r\n\r\n      let text = node.innerHTML\r\n      text = text.replace(/<span[^>]*? class\\s*=\\s*[\"']?fr-marker[\"']?[^>]+>\\u200b<\\/span>/gi, '')\r\n\r\n      if (text && /\\u200B/.test(text) && text.replace(/\\u200B/gi, '')\r\n        .length > 0) {\r\n        return true\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    function ios_CJK(el) {\r\n      const CJKRegEx = /[\\u3041-\\u3096\\u30A0-\\u30FF\\u4E00-\\u9FFF\\u3130-\\u318F\\uAC00-\\uD7AF]/gi\r\n\r\n      return !editor.helpers.isIOS() || ((el.textContent || '')\r\n        .match(CJKRegEx) || [])\r\n        .length === 0\r\n    }\r\n\r\n    // Get the selection element.\r\n    const el = editor.selection.element()\r\n\r\n    if (has_invisible(el) && !editor.node.hasClass(el, 'fr-marker') && el.tagName !== 'IFRAME' && ios_CJK(el)) {\r\n      editor.selection.save()\r\n      _replaceU200B(el)\r\n      editor.selection.restore()\r\n    }\r\n  }\r\n\r\n  // Check if we should consider that CTRL key is pressed.\r\n  function ctrlKey(e) {\r\n    if (navigator.userAgent.indexOf('Mac OS X') !== -1) {\r\n      if (e.metaKey && !e.altKey) {\r\n        return true\r\n      }\r\n    }\r\n    else if (e.ctrlKey && !e.altKey) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function isArrow(key_code) {\r\n    if (key_code >= FE.KEYCODE.ARROW_LEFT && key_code <= FE.KEYCODE.ARROW_DOWN) {\r\n\r\n      return true\r\n    }\r\n  }\r\n\r\n  function isCharacter(key_code) {\r\n    if (key_code >= FE.KEYCODE.ZERO &&\r\n      key_code <= FE.KEYCODE.NINE) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (key_code >= FE.KEYCODE.NUM_ZERO &&\r\n      key_code <= FE.KEYCODE.NUM_MULTIPLY) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (key_code >= FE.KEYCODE.A &&\r\n      key_code <= FE.KEYCODE.Z) {\r\n\r\n      return true\r\n    }\r\n\r\n    // Safari sends zero key code for non-latin characters.\r\n    if (editor.browser.webkit && key_code === 0) {\r\n\r\n      return true\r\n    }\r\n\r\n    switch (key_code) {\r\n    case FE.KEYCODE.SPACE:\r\n    case FE.KEYCODE.QUESTION_MARK:\r\n    case FE.KEYCODE.NUM_PLUS:\r\n    case FE.KEYCODE.NUM_MINUS:\r\n    case FE.KEYCODE.NUM_PERIOD:\r\n    case FE.KEYCODE.NUM_DIVISION:\r\n    case FE.KEYCODE.SEMICOLON:\r\n    case FE.KEYCODE.FF_SEMICOLON:\r\n    case FE.KEYCODE.DASH:\r\n    case FE.KEYCODE.EQUALS:\r\n    case FE.KEYCODE.FF_EQUALS:\r\n    case FE.KEYCODE.COMMA:\r\n    case FE.KEYCODE.PERIOD:\r\n    case FE.KEYCODE.SLASH:\r\n    case FE.KEYCODE.APOSTROPHE:\r\n    case FE.KEYCODE.SINGLE_QUOTE:\r\n    case FE.KEYCODE.OPEN_SQUARE_BRACKET:\r\n    case FE.KEYCODE.BACKSLASH:\r\n    case FE.KEYCODE.CLOSE_SQUARE_BRACKET:\r\n\r\n      return true\r\n    default:\r\n\r\n      return false\r\n    }\r\n\r\n  }\r\n\r\n  let _typing_timeout\r\n  let _temp_snapshot\r\n\r\n  function _typingKeyDown(e) {\r\n    const keycode = e.which\r\n\r\n    if (ctrlKey(e) || keycode >= 37 && keycode <= 40 || !isCharacter(keycode) && keycode !== FE.KEYCODE.DELETE && keycode !== FE.KEYCODE.BACKSPACE && keycode !== FE.KEYCODE.ENTER && keycode !== FE.KEYCODE.IME) {\r\n      return true\r\n    }\r\n\r\n    if (!_typing_timeout) {\r\n      _temp_snapshot = editor.snapshot.get()\r\n\r\n      if (!editor.undo.canDo()) {\r\n        editor.undo.saveStep()\r\n      }\r\n    }\r\n\r\n    clearTimeout(_typing_timeout)\r\n    _typing_timeout = setTimeout(() => {\r\n      _typing_timeout = null\r\n      editor.undo.saveStep()\r\n    }, Math.max(250, editor.opts.typingTimer))\r\n  }\r\n\r\n  function _typingKeyUp(e) {\r\n    const keycode = e.which\r\n\r\n    if (ctrlKey(e) || keycode >= 37 && keycode <= 40) {\r\n      return true\r\n    }\r\n\r\n    if (_temp_snapshot && _typing_timeout) {\r\n      editor.undo.saveStep(_temp_snapshot)\r\n      _temp_snapshot = null\r\n    }\r\n\r\n    // iOS choosing suggestion.\r\n    else if ((typeof keycode === 'undefined' || keycode === 0) && !_temp_snapshot && !_typing_timeout) {\r\n      editor.undo.saveStep()\r\n    }\r\n  }\r\n\r\n  function forceUndo() {\r\n    if (_typing_timeout) {\r\n      clearTimeout(_typing_timeout)\r\n      editor.undo.saveStep()\r\n      _temp_snapshot = null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if key event is part of browser accessibility.\r\n   */\r\n  function isBrowserAction(e) {\r\n    const keycode = e.which\r\n\r\n    return ctrlKey(e) || keycode === FE.KEYCODE.F5\r\n  }\r\n\r\n  // Node doesn't have a BR or text inside it.\r\n  function _isEmpty(node) {\r\n    if (node && node.tagName === 'BR') {\r\n      return false\r\n    }\r\n\r\n    // No text and no BR.\r\n    // Special case for image caption / video.\r\n    try {\r\n      return (node.textContent || '').length === 0 && node.querySelector && !node.querySelector(':scope > br') ||\r\n        node.childNodes && node.childNodes.length === 1 && node.childNodes[0].getAttribute && (node.childNodes[0].getAttribute('contenteditable') === 'false' || editor.node.hasClass(node.childNodes[0], 'fr-img-caption'))\r\n    }\r\n    catch (ex) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Allow typing after/before last element.\r\n   */\r\n  function _allowTypingOnEdges(e) {\r\n    const childs = editor.el.childNodes\r\n    const dt = editor.html.defaultTag()\r\n    let deep_parent = editor.node.blockParent(editor.selection.blocks()[0])\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n    if (deep_parent && deep_parent.tagName == 'TR' && deep_parent.getAttribute('contenteditable') == undefined) {\r\n      deep_parent = deep_parent.closest('table')\r\n    }\r\n\r\n    // https://github.com/CelestialSystem/froala-editor-js-2/tree/1303\r\n    // get the selected text block parent as deep_parent\r\n    // Check for content editable:false node and disable toolbar\r\n    if (!editor.node.isEditable(e.target) || (deep_parent && deep_parent.getAttribute('contenteditable') === 'false')) {\r\n      editor.toolbar.disable()\r\n    }\r\n    else {\r\n      editor.toolbar.enable()\r\n    }\r\n\r\n    if (e.target && e.target !== editor.el) {\r\n      return true\r\n    }\r\n\r\n    // No childs.\r\n    if (childs.length === 0) {\r\n      return true\r\n    }\r\n\r\n    // At the bottom.\r\n    // https://github.com/froala/wysiwyg-editor/issues/3397\r\n    if ((childs[0].offsetHeight + childs[0].offsetTop) <= e.offsetY) {\r\n      if (_isEmpty(childs[childs.length - 1])) {\r\n        if (dt) {\r\n          editor.$el.append(`<${dt}>${FE.MARKERS}<br></${dt}>`)\r\n        }\r\n        else {\r\n          editor.$el.append(`${FE.MARKERS}<br>`)\r\n        }\r\n\r\n        // Restore selection and scroll.\r\n        editor.selection.restore()\r\n        positionCaret()\r\n      }\r\n    }\r\n\r\n    // At the top\r\n    else if (e.offsetY <= 10) {\r\n      if (_isEmpty(childs[0])) {\r\n        if (dt) {\r\n          editor.$el.prepend(`<${dt}>${FE.MARKERS}<br></${dt}>`)\r\n        }\r\n        else {\r\n          editor.$el.prepend(`${FE.MARKERS}<br>`)\r\n        }\r\n\r\n        // Restore selection and scroll.\r\n        editor.selection.restore()\r\n        positionCaret()\r\n      }\r\n    }\r\n  }\r\n\r\n  function _clearTypingTimer() {\r\n    if (_typing_timeout) {\r\n      clearTimeout(_typing_timeout)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n  function _init() {\r\n    editor.events.on('keydown', _typingKeyDown)\r\n    editor.events.on('input', _input)\r\n    editor.events.on('mousedown', _clearIME)\r\n    editor.events.on('keyup input', _typingKeyUp)\r\n\r\n    // Register for handling.\r\n    editor.events.on('keypress', _mapKeyPress)\r\n    editor.events.on('keydown', _mapKeyDown)\r\n    editor.events.on('keyup', _mapKeyUp)\r\n    editor.events.on('destroy', _clearTypingTimer)\r\n\r\n    editor.events.on('html.inserted', _mapKeyUp)\r\n\r\n    // Handle cut.\r\n    editor.events.on('cut', _cut)\r\n\r\n    // Click in editor at beginning / end.\r\n    if (editor.opts.multiLine) {\r\n      editor.events.on('click', _allowTypingOnEdges);\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    ctrlKey,\r\n    isCharacter,\r\n    isArrow,\r\n    forceUndo,\r\n    isIME,\r\n    isBrowserAction,\r\n    positionCaret\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  pastePlain: false,\r\n  pasteDeniedTags: ['colgroup', 'col', 'meta'],\r\n  pasteDeniedAttrs: ['class', 'id'],\r\n  pasteAllowedStyleProps: ['.*'],\r\n  pasteAllowLocalImages: false\r\n})\r\n\r\nFE.MODULES.paste = function (editor) {\r\n  const $ = editor.$\r\n\r\n  let clipboard_html\r\n  let clipboard_rtf\r\n  let $paste_div\r\n  let snapshot\r\n\r\n  function saveCopiedText(html, plain) {\r\n    try {\r\n      editor.win.localStorage.setItem('fr-copied-html', html)\r\n      editor.win.localStorage.setItem('fr-copied-text', plain)\r\n    }\r\n    catch (ex) {\r\n      // do no matter what\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle copy and cut.\r\n   */\r\n  function _handleCopy(e) {\r\n    const copied_html = editor.html.getSelected()\r\n    saveCopiedText(copied_html, $(editor.doc.createElement('div')).html(copied_html).text())\r\n\r\n    if (e.type === 'cut') {\r\n      editor.undo.saveStep()\r\n\r\n      setTimeout(() => {\r\n        editor.selection.save()\r\n        editor.html.wrap()\r\n        editor.selection.restore()\r\n        editor.events.focus()\r\n        editor.undo.saveStep()\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle pasting.\r\n   */\r\n  let stop_paste = false\r\n\r\n  function _handlePaste(e) {\r\n\r\n    // if content is copied in input tag do the normal paste.\r\n    if (e.target.nodeName === 'INPUT' && e.target.type === 'text') {\r\n      return true\r\n    }\r\n\r\n    if (editor.edit.isDisabled()) {\r\n      return false\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2067\r\n    if (isContetnEditable(e.target)) {\r\n      return false\r\n    }\r\n\r\n    if (stop_paste) {\r\n\r\n      return false\r\n    }\r\n\r\n    if (e.originalEvent) {\r\n      e = e.originalEvent\r\n    }\r\n\r\n    if (editor.events.trigger('paste.before', [e]) === false) {\r\n      e.preventDefault()\r\n\r\n      return false\r\n    }\r\n\r\n    // Read data from clipboard.\r\n    if (e && e.clipboardData && e.clipboardData.getData) {\r\n      let types = ''\r\n      const clipboard_types = e.clipboardData.types\r\n\r\n      if (editor.helpers.isArray(clipboard_types)) {\r\n        for (let i = 0; i < clipboard_types.length; i++) {\r\n          types += `${clipboard_types[i]};`\r\n        }\r\n      }\r\n      else {\r\n        types = clipboard_types\r\n      }\r\n\r\n      clipboard_html = ''\r\n\r\n      // Get rtf clipboard.\r\n      if (/text\\/rtf/.test(types)) {\r\n        clipboard_rtf = e.clipboardData.getData('text/rtf')\r\n      }\r\n\r\n      // HTML.\r\n      if (/text\\/html/.test(types) && !editor.browser.safari) {\r\n        clipboard_html = e.clipboardData.getData('text/html')\r\n      }\r\n\r\n      // Safari HTML.\r\n      else if (/text\\/rtf/.test(types) && editor.browser.safari) {\r\n        clipboard_html = clipboard_rtf\r\n      }\r\n\r\n      // Safari HTML for iOS.\r\n      else if (/public.rtf/.test(types) && editor.browser.safari) {\r\n        clipboard_html = e.clipboardData.getData('text/rtf')\r\n      }\r\n\r\n      if (clipboard_html !== '') {\r\n        _processPaste()\r\n\r\n        if (e.preventDefault) {\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n        }\r\n\r\n        return false\r\n      }\r\n\r\n      clipboard_html = null\r\n\r\n    }\r\n\r\n    // Normal paste.\r\n    _beforePaste()\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * check for contentEditable.\r\n   */\r\n  function isContetnEditable (el) {\r\n    return el && el.contentEditable === 'false'\r\n  }\r\n\r\n  /**\r\n   * Handle dropping content in the editor.\r\n   */\r\n  function _dropPaste(e) {\r\n    if (e.originalEvent) {\r\n      e = e.originalEvent\r\n    }\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/2067\r\n    if (isContetnEditable(e.target)) {\r\n      return false\r\n    }\r\n\r\n    // Read data from clipboard.\r\n    if (e && e.dataTransfer && e.dataTransfer.getData) {\r\n      let types = ''\r\n      const clipboard_types = e.dataTransfer.types\r\n\r\n      if (editor.helpers.isArray(clipboard_types)) {\r\n        for (let i = 0; i < clipboard_types.length; i++) {\r\n          types += `${clipboard_types[i]};`\r\n        }\r\n      }\r\n      else {\r\n        types = clipboard_types\r\n      }\r\n\r\n      clipboard_html = ''\r\n\r\n      // Get rtf clipboard.\r\n      if (/text\\/rtf/.test(types)) {\r\n        clipboard_rtf = e.dataTransfer.getData('text/rtf')\r\n      }\r\n\r\n      // HTML.\r\n      if (/text\\/html/.test(types)) {\r\n        clipboard_html = e.dataTransfer.getData('text/html')\r\n      }\r\n\r\n      // Safari HTML.\r\n      else if (/text\\/rtf/.test(types) && editor.browser.safari) {\r\n        clipboard_html = clipboard_rtf\r\n      }\r\n      else if (/text\\/plain/.test(types) && !this.browser.mozilla) {\r\n        clipboard_html = editor.html.escapeEntities(e.dataTransfer.getData('text/plain')).replace(/\\n/g, '<br>')\r\n      }\r\n\r\n      if (clipboard_html !== '') {\r\n        editor.keys.forceUndo()\r\n        snapshot = editor.snapshot.get()\r\n\r\n        // Save selection, but change markers class so that we can restore it later.\r\n        editor.selection.save()\r\n        editor.$el.find('.fr-marker').removeClass('fr-marker').addClass('fr-marker-helper')\r\n\r\n        // Insert marker point helper and change class to restore it later.\r\n        const ok = editor.markers.insertAtPoint(e)\r\n        editor.$el.find('.fr-marker').removeClass('fr-marker').addClass('fr-marker-placeholder')\r\n\r\n        // Restore selection and remove it.\r\n        editor.$el.find('.fr-marker-helper').addClass('fr-marker').removeClass('fr-marker-helper')\r\n        editor.selection.restore()\r\n        editor.selection.remove()\r\n\r\n        // Restore marker point helper.\r\n        editor.$el.find('.fr-marker-placeholder').addClass('fr-marker').removeClass('fr-marker-placeholder')\r\n\r\n        if (ok !== false) {\r\n          // Insert markers.\r\n          const marker = editor.el.querySelector('.fr-marker')\r\n\r\n          $(marker).replaceWith(FE.MARKERS)\r\n          editor.selection.restore()\r\n\r\n          _processPaste()\r\n\r\n          if (e.preventDefault) {\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n          }\r\n\r\n          return false\r\n        }\r\n      }\r\n      else {\r\n        clipboard_html = null\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Before starting to paste.\r\n   */\r\n  function _beforePaste() {\r\n\r\n    // Save selection\r\n    editor.selection.save()\r\n    editor.events.disableBlur()\r\n\r\n    // Set clipboard HTML.\r\n    clipboard_html = null\r\n\r\n    // Remove and store the editable content\r\n    if (!$paste_div) {\r\n      $paste_div = $('<div contenteditable=\"true\" style=\"position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%; -moz-user-select: text; -webkit-user-select: text; -ms-user-select: text; user-select: text;\" tabIndex=\"-1\"></div>')\r\n\r\n      // Sketch app fix. https://github.com/froala/wysiwyg-editor/issues/2042\r\n      // Also: when using iframe Safari needs to have focus in the same window.\r\n      if (editor.browser.webkit || editor.browser.mozilla) {\r\n        $paste_div.css('top', editor.$sc.scrollTop())\r\n        editor.$el.after($paste_div)\r\n      }\r\n      else if (editor.browser.edge && editor.opts.iframe) {\r\n        editor.$el.append($paste_div)\r\n      }\r\n      else {\r\n        editor.$box.after($paste_div)\r\n      }\r\n\r\n      editor.events.on('destroy', () => {\r\n        $paste_div.remove()\r\n      })\r\n    }\r\n    else {\r\n      $paste_div.html('')\r\n\r\n      if (editor.browser.edge && editor.opts.iframe) {\r\n        editor.$el.append($paste_div)\r\n      }\r\n    }\r\n\r\n    let st;\r\n\r\n    // Prevent iOS scroll.\r\n    if (editor.helpers.isIOS() && editor.$sc) {\r\n      st = editor.$sc.scrollTop();\r\n    }\r\n\r\n    // Focus on the pasted div.\r\n    if (editor.opts.iframe) {\r\n      editor.$el.attr('contenteditable', 'false')\r\n    }\r\n    $paste_div.focus()\r\n\r\n    // Prevent iOS scroll.\r\n    if (editor.helpers.isIOS() && editor.$sc) {\r\n      editor.$sc.scrollTop(st);\r\n    }\r\n\r\n    // Process paste soon.\r\n    editor.win.setTimeout(_processPaste, 1)\r\n  }\r\n\r\n  /**\r\n   * Clean HTML that was pasted from Word.\r\n   */\r\n  function _wordClean(html) {\r\n\r\n    let i\r\n\r\n    // Single item list.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraph\"?'? ([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ul><li>$3</li></ul>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedText\"?'? ([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ol><li>$3</li></ol>'\r\n    )\r\n\r\n    // List start.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraphCxSpFirst\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ul><li$3>$5</li>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedTextCxSpFirst\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<ol><li$3>$5</li>'\r\n    )\r\n\r\n    // List middle.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraphCxSpMiddle\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedTextCxSpMiddle\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListBullet\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li>'\r\n    )\r\n\r\n    // List end.\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?MsoListParagraphCxSpLast\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li></ul>'\r\n    )\r\n    html = html.replace(\r\n      /<p(.*?)class=\"?'?NumberedTextCxSpLast\"?'?([\\s\\S]*?)(level\\d)?([\\s\\S]*?)>([\\s\\S]*?)<\\/p>/gi,\r\n      '<li$3>$5</li></ol>'\r\n    )\r\n\r\n    // Clean list bullets.\r\n    html = html.replace(/<span([^<]*?)style=\"?'?mso-list:Ignore\"?'?([\\s\\S]*?)>([\\s\\S]*?)<span/gi, '<span><span')\r\n\r\n    // Webkit clean list bullets.\r\n    html = html.replace(/<!--\\[if !supportLists\\]-->([\\s\\S]*?)<!--\\[endif\\]-->/gi, '')\r\n    html = html.replace(/<!\\[if !supportLists\\]>([\\s\\S]*?)<!\\[endif\\]>/gi, '')\r\n\r\n    // Remove mso classes.\r\n    html = html.replace(/(\\n|\\r| class=(\")?Mso[a-zA-Z0-9]+(\")?)/gi, ' ')\r\n\r\n    // Remove comments.\r\n    html = html.replace(/<!--[\\s\\S]*?-->/gi, '')\r\n\r\n    // Remove tags but keep content.\r\n    html = html.replace(/<(\\/)*(meta|link|span|\\\\?xml:|st1:|o:|font)(.*?)>/gi, '')\r\n\r\n    // Remove no needed tags.\r\n    const word_tags = ['style', 'script', 'applet', 'embed', 'noframes', 'noscript']\r\n\r\n    for (i = 0; i < word_tags.length; i++) {\r\n      const regex = new RegExp(`<${word_tags[i]}.*?${word_tags[i]}(.*?)>`, 'gi')\r\n      html = html.replace(regex, '')\r\n    }\r\n\r\n    // Remove spaces.\r\n    html = html.replace(/&nbsp;/gi, ' ')\r\n\r\n    // Keep empty TH and TD.\r\n    html = html.replace(/<td([^>]*)><\\/td>/g, '<td$1><br></td>')\r\n    html = html.replace(/<th([^>]*)><\\/th>/g, '<th$1><br></th>')\r\n\r\n    // Remove empty tags.\r\n    let oldHTML\r\n\r\n    do {\r\n      oldHTML = html\r\n      html = html.replace(/<[^/>][^>]*><\\/[^>]+>/gi, '')\r\n    } while (html !== oldHTML)\r\n\r\n    // Process list indentation.\r\n    html = html.replace(/<lilevel([^1])([^>]*)>/gi, '<li data-indent=\"true\"$2>')\r\n    html = html.replace(/<lilevel1([^>]*)>/gi, '<li$1>')\r\n\r\n    // Clean HTML.\r\n    html = editor.clean.html(html, editor.opts.pasteDeniedTags, editor.opts.pasteDeniedAttrs)\r\n\r\n    // Clean empty links.\r\n    html = html.replace(/<a>(.[^<]+)<\\/a>/gi, '$1')\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1364.\r\n    html = html.replace(/<br> */g, '<br>')\r\n\r\n    // Process list indent.\r\n    const div = editor.o_doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    const lis = div.querySelectorAll('li[data-indent]')\r\n\r\n    for (i = 0; i < lis.length; i++) {\r\n      const li = lis[i]\r\n\r\n      const p_li = li.previousElementSibling\r\n\r\n      if (p_li && p_li.tagName === 'LI') {\r\n        let list = p_li.querySelector(':scope > ul, :scope > ol')\r\n\r\n        if (!list) {\r\n          list = document.createElement('ul')\r\n          p_li.appendChild(list)\r\n        }\r\n\r\n        list.appendChild(li)\r\n      }\r\n      else {\r\n        li.removeAttribute('data-indent')\r\n      }\r\n    }\r\n\r\n    editor.html.cleanBlankSpaces(div)\r\n\r\n    html = div.innerHTML\r\n\r\n    return html\r\n  }\r\n\r\n  /**\r\n   * Plain clean.\r\n   */\r\n  function _plainPasteClean(html) {\r\n\r\n    let el = null\r\n    let i\r\n    const div = editor.doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    let els = div.querySelectorAll('p, div, h1, h2, h3, h4, h5, h6, pre, blockquote')\r\n\r\n    for (i = 0; i < els.length; i++) {\r\n      el = els[i]\r\n      el.outerHTML = `<${editor.html.defaultTag() || 'DIV'}>${el.innerHTML}</${editor.html.defaultTag() || 'DIV'}>`\r\n    }\r\n\r\n    els = div.querySelectorAll(`*:not(${'p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img'.split(',').join('):not(')})`)\r\n\r\n    for (i = els.length - 1; i >= 0; i--) {\r\n      el = els[i]\r\n      el.outerHTML = el.innerHTML\r\n    }\r\n\r\n    // Remove comments.\r\n    function cleanComments(node) {\r\n      const contents = editor.node.contents(node)\r\n\r\n      for (let i = 0; i < contents.length; i++) {\r\n        if (contents[i].nodeType !== Node.TEXT_NODE && contents[i].nodeType !== Node.ELEMENT_NODE) {\r\n          contents[i].parentNode.removeChild(contents[i])\r\n        }\r\n        else {\r\n          cleanComments(contents[i])\r\n        }\r\n      }\r\n    }\r\n\r\n    cleanComments(div)\r\n\r\n    return div.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Process the pasted HTML.\r\n   */\r\n  function _processPaste() {\r\n    if (editor.opts.iframe) {\r\n      editor.$el.attr('contenteditable', 'true')\r\n    }\r\n    if (editor.browser.edge && editor.opts.iframe) {\r\n      editor.$box.after($paste_div)\r\n    }\r\n\r\n    // Save undo snapshot.\r\n    if (!snapshot) {\r\n      editor.keys.forceUndo()\r\n      snapshot = editor.snapshot.get()\r\n    }\r\n\r\n    // Cannot read from clipboard.\r\n    if (!clipboard_html) {\r\n      clipboard_html = $paste_div.get(0).innerHTML\r\n\r\n      editor.selection.restore()\r\n      editor.events.enableBlur()\r\n    }\r\n\r\n    const is_word = clipboard_html.match(/(class=\"?Mso|class='?Mso|class=\"?Xl|class='?Xl|class=Xl|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument|LibreOffice)/gi)\r\n\r\n    // Trigger chain cleanp.\r\n    const response = editor.events.chainTrigger('paste.beforeCleanup', clipboard_html)\r\n\r\n    if (response && typeof response === 'string') {\r\n      clipboard_html = response\r\n    }\r\n\r\n    // Clean non-word or word if no plugin processed the paste.\r\n    if (!is_word || is_word && editor.events.trigger('paste.wordPaste', [clipboard_html]) !== false) {\r\n      clean(clipboard_html, is_word)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if pasted content comes from the editor.\r\n   */\r\n  function _isFromEditor(clipboard_html) {\r\n    let possible_text = null\r\n\r\n    try {\r\n      possible_text = editor.win.localStorage.getItem('fr-copied-text')\r\n    }\r\n    catch (ex) {\r\n      // continue no matter what.a\r\n    }\r\n\r\n    // Updated to handle the whitespace mismatches while comparing.\r\n    if (possible_text && ($('<div>').html(clipboard_html).text().replace(/\\u00A0/gi, ' ').replace(/\\r|\\n/gi, '') === possible_text.replace(/\\u00A0/gi, ' ').replace(/\\r|\\n/gi, '') || $('<div>').html(clipboard_html).text().replace(/\\s/g, '') === possible_text.replace(/\\s/g, ''))) {\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function _buildTabs(len) {\r\n    let tabs = ''\r\n    let i = 0\r\n\r\n    while (i++ < len) {\r\n      tabs += '&nbsp;'\r\n    }\r\n\r\n    return tabs\r\n  }\r\n\r\n  /**\r\n   * Clean clipboard html.\r\n   */\r\n  function clean(clipboard_html, is_word, keep_formatting) {\r\n    let els = null\r\n    let el = null\r\n    let i\r\n\r\n    // Keep only body if there is.\r\n    if (clipboard_html.toLowerCase().indexOf('<body') >= 0) {\r\n      let style = ''\r\n\r\n      if (clipboard_html.indexOf('<style') >= 0) {\r\n        style = clipboard_html.replace(/[.\\s\\S\\w\\W<>]*(<style[^>]*>[\\s]*[.\\s\\S\\w\\W<>]*[\\s]*<\\/style>)[.\\s\\S\\w\\W<>]*/gi, '$1')\r\n      }\r\n\r\n      clipboard_html = style + clipboard_html.replace(/[.\\s\\S\\w\\W<>]*<body[^>]*>[\\s]*([.\\s\\S\\w\\W<>]*)[\\s]*<\\/body>[.\\s\\S\\w\\W<>]*/gi, '$1')\r\n      clipboard_html = clipboard_html.replace(/ \\n/g, ' ').replace(/\\n /g, ' ').replace(/([^>])\\n([^<])/g, '$1 $2')\r\n    }\r\n\r\n    // Google Docs paste.\r\n    let is_gdocs = false\r\n\r\n    if (clipboard_html.indexOf('id=\"docs-internal-guid') >= 0) {\r\n      clipboard_html = clipboard_html.replace(/^[\\w\\W\\s\\S]* id=\"docs-internal-guid[^>]*>([\\w\\W\\s\\S]*)<\\/b>[\\w\\W\\s\\S]*$/g, '$1')\r\n      is_gdocs = true\r\n    }\r\n\r\n    if (clipboard_html.indexOf('content=\"Sheets\"') >= 0) {\r\n      clipboard_html = clipboard_html.replace(/width:0px;/g, '')\r\n    }\r\n\r\n    // Not word paste.\r\n    let is_editor_content = false\r\n\r\n    if (!is_word) {\r\n      is_editor_content = _isFromEditor(clipboard_html)\r\n\r\n      // Remove pasting token.\r\n      if (is_editor_content) {\r\n        clipboard_html = editor.win.localStorage.getItem('fr-copied-html')\r\n      }\r\n\r\n      if (!is_editor_content) {\r\n        // Remove comments.\r\n        const htmlAllowedStylePropsCopy = editor.opts.htmlAllowedStyleProps\r\n        editor.opts.htmlAllowedStyleProps = editor.opts.pasteAllowedStyleProps\r\n        editor.opts.htmlAllowComments = false\r\n\r\n        // Pasting from Apple Notes.\r\n        clipboard_html = clipboard_html.replace(/<span class=\"Apple-tab-span\">\\s*<\\/span>/g, _buildTabs(editor.opts.tabSpaces || 4))\r\n        clipboard_html = clipboard_html.replace(/<span class=\"Apple-tab-span\" style=\"white-space:pre\">(\\t*)<\\/span>/g, (str, x) => _buildTabs(x.length * (editor.opts.tabSpaces || 4)))\r\n\r\n        // Pasting from other sources with tabs.\r\n        clipboard_html = clipboard_html.replace(/\\t/g, _buildTabs(editor.opts.tabSpaces || 4))\r\n\r\n        clipboard_html = editor.clean.html(clipboard_html, editor.opts.pasteDeniedTags, editor.opts.pasteDeniedAttrs)\r\n\r\n        editor.opts.htmlAllowedStyleProps = htmlAllowedStylePropsCopy\r\n        editor.opts.htmlAllowComments = true\r\n\r\n        // Remove empty tags.\r\n        clipboard_html = cleanEmptyTagsAndDivs(clipboard_html)\r\n\r\n        // Do not keep entities that are not HTML compatible.\r\n        clipboard_html = clipboard_html.replace(/\\r/g, '')\r\n\r\n        // Trail ending and starting spaces.\r\n        clipboard_html = clipboard_html.replace(/^ */g, '').replace(/ *$/g, '')\r\n      }\r\n      else {\r\n        clipboard_html = editor.clean.html(clipboard_html, editor.opts.pasteDeniedTags, editor.opts.pasteDeniedAttrs);\r\n      }\r\n    }\r\n\r\n    // Word paste cleanup when word plugin is not used.\r\n    if (is_word && (!editor.wordPaste || !keep_formatting)) {\r\n\r\n      // Strip spaces at the beginning.\r\n      clipboard_html = clipboard_html.replace(/^\\n*/g, '').replace(/^ /g, '')\r\n\r\n      // Firefox paste.\r\n      if (clipboard_html.indexOf('<colgroup>') === 0) {\r\n        clipboard_html = `<table>${clipboard_html}</table>`\r\n      }\r\n\r\n      clipboard_html = _wordClean(clipboard_html)\r\n\r\n      clipboard_html = cleanEmptyTagsAndDivs(clipboard_html)\r\n    }\r\n\r\n    // Do plain paste cleanup.\r\n    if (editor.opts.pastePlain && !is_editor_content) {\r\n      clipboard_html = _plainPasteClean(clipboard_html)\r\n    }\r\n\r\n    // After paste cleanup event.\r\n    const response = editor.events.chainTrigger('paste.afterCleanup', clipboard_html)\r\n\r\n    if (typeof response === 'string') {\r\n      clipboard_html = response\r\n    }\r\n\r\n    // Check if there is anything to clean.\r\n    if (clipboard_html !== '') {\r\n      // Normalize spaces.\r\n      const tmp = editor.o_doc.createElement('div')\r\n      tmp.innerHTML = clipboard_html\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/2632.\r\n      if (clipboard_html.indexOf('<body>') >= 0) {\r\n        editor.html.cleanBlankSpaces(tmp)\r\n        editor.spaces.normalize(tmp, true)\r\n      }\r\n      else {\r\n        editor.spaces.normalize(tmp)\r\n      }\r\n\r\n      // Remove all spans.\r\n      const spans = tmp.getElementsByTagName('span')\r\n\r\n      for (i = spans.length - 1; i >= 0; i--) {\r\n        const span = spans[i]\r\n\r\n        if (span.attributes.length === 0) {\r\n          span.outerHTML = span.innerHTML\r\n        }\r\n      }\r\n\r\n      // Check for a tags linkAlwaysBlank.\r\n      if (editor.opts.linkAlwaysBlank === true) {\r\n\r\n        let aTags = tmp.getElementsByTagName('a');\r\n\r\n        for (i = aTags.length - 1; i >= 0; i--) {\r\n          let aTag = aTags[i];\r\n\r\n          if (!aTag.getAttribute('target')) {\r\n            aTag.setAttribute('target', '_blank');\r\n          }\r\n        }\r\n      }\r\n\r\n      // Check if we're inside a list.\r\n      const selection_el = editor.selection.element()\r\n      let in_list = false\r\n\r\n      if (selection_el && $(selection_el).parentsUntil(editor.el, 'ul, ol').length) {\r\n        in_list = true\r\n      }\r\n\r\n      // Unwrap lists if they are the only thing in the pasted HTML.\r\n      if (in_list) {\r\n        const list = tmp.children\r\n\r\n        if (list.length === 1 && ['OL', 'UL'].indexOf(list[0].tagName) >= 0) {\r\n          list[0].outerHTML = list[0].innerHTML\r\n        }\r\n      }\r\n\r\n      // Remove unecessary new_lines.\r\n      if (!is_gdocs) {\r\n        const brs = tmp.getElementsByTagName('br')\r\n\r\n        for (i = brs.length - 1; i >= 0; i--) {\r\n          const br = brs[i]\r\n\r\n          if (editor.node.isBlock(br.previousSibling)) {\r\n            br.parentNode.removeChild(br)\r\n          }\r\n        }\r\n      }\r\n\r\n      // https://github.com/froala/wysiwyg-editor/issues/1493\r\n      if (editor.opts.enter === FE.ENTER_BR) {\r\n        els = tmp.querySelectorAll('p, div')\r\n\r\n        for (i = els.length - 1; i >= 0; i--) {\r\n          el = els[i]\r\n\r\n          // Fixes https://github.com/froala/wysiwyg-editor/issues/1895.\r\n          if (el.attributes.length === 0) {\r\n            el.outerHTML = el.innerHTML + (el.nextSibling && !editor.node.isEmpty(el) ? '<br>' : '')\r\n          }\r\n        }\r\n      }\r\n      else if (editor.opts.enter === FE.ENTER_DIV) {\r\n\r\n        els = tmp.getElementsByTagName('p')\r\n\r\n        for (i = els.length - 1; i >= 0; i--) {\r\n          el = els[i]\r\n\r\n          if (el.attributes.length === 0) {\r\n            el.outerHTML = `<div>${el.innerHTML}</div>`\r\n          }\r\n        }\r\n      }\r\n      else if (editor.opts.enter === FE.ENTER_P) {\r\n        if (tmp.childNodes.length === 1 && tmp.childNodes[0].tagName === 'P' && tmp.childNodes[0].attributes.length === 0) {\r\n          tmp.childNodes[0].outerHTML = tmp.childNodes[0].innerHTML\r\n        }\r\n      }\r\n\r\n      clipboard_html = tmp.innerHTML\r\n\r\n      if (is_editor_content) {\r\n        clipboard_html = removeEmptyTags(clipboard_html)\r\n      }\r\n\r\n      // Insert HTML.\r\n      editor.html.insert(clipboard_html, true)\r\n    }\r\n\r\n    _afterPaste()\r\n\r\n    editor.undo.saveStep(snapshot)\r\n    snapshot = null\r\n    editor.undo.saveStep()\r\n  }\r\n\r\n  /**\r\n   * After pasting.\r\n   */\r\n  function _afterPaste() {\r\n    editor.events.trigger('paste.after')\r\n  }\r\n\r\n  /*\r\n   * Get clipboard in RTF format.\r\n   */\r\n  function getRtfClipboard() {\r\n\r\n    return clipboard_rtf\r\n  }\r\n\r\n  /*\r\n   * Remove those nodes with attrs.\r\n   */\r\n  function _filterNoAttrs(arry) {\r\n    for (let t = arry.length - 1; t >= 0; t--) {\r\n      if (arry[t].attributes && arry[t].attributes.length) {\r\n        arry.splice(t, 1)\r\n      }\r\n    }\r\n\r\n    return arry\r\n  }\r\n\r\n  function cleanEmptyTagsAndDivs(html) {\r\n    let i\r\n    const div = editor.o_doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    // Workaround for Nodepad paste.\r\n    let divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll(':scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])')))\r\n\r\n    while (divs.length) {\r\n      const dv = divs[divs.length - 1]\r\n\r\n      if (editor.html.defaultTag() && editor.html.defaultTag() !== 'div') {\r\n\r\n        // If we have nested block tags unwrap them.\r\n        if (dv.querySelector(editor.html.blockTagsQuery())) {\r\n          dv.outerHTML = dv.innerHTML\r\n        }\r\n        else {\r\n          dv.outerHTML = `<${editor.html.defaultTag()}>${dv.innerHTML}</${editor.html.defaultTag()}>`\r\n        }\r\n      }\r\n      else {\r\n        const els = dv.querySelectorAll('*')\r\n\r\n        // Node has some other content than BR.\r\n        if (!els.length || els[els.length - 1].tagName !== 'BR' && dv.innerText.length === 0) {\r\n          dv.outerHTML = dv.innerHTML + (dv.nextSibling ? '<br>' : '');\r\n        }\r\n        // Last node is not BR.\r\n        else if (!(els.length && els[els.length - 1].tagName === 'BR' && !els[els.length - 1].nextSibling)) {\r\n          dv.outerHTML = dv.innerHTML + (dv.nextSibling ? '<br>' : '');\r\n        }\r\n        else {\r\n          dv.outerHTML = dv.innerHTML\r\n        }\r\n      }\r\n\r\n      divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll(':scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])')))\r\n    }\r\n\r\n    // Remove divs.\r\n    divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll('div:not([style])')))\r\n\r\n    while (divs.length) {\r\n      for (i = 0; i < divs.length; i++) {\r\n        const el = divs[i]\r\n        const text = el.innerHTML.replace(/\\u0009/gi, '').trim()\r\n\r\n        el.outerHTML = text\r\n      }\r\n\r\n      divs = _filterNoAttrs(Array.prototype.slice.call(div.querySelectorAll('div:not([style])')))\r\n    }\r\n\r\n    return div.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Remove possible empty tags in pasted HTML.\r\n   */\r\n  function removeEmptyTags(html) {\r\n\r\n    let i\r\n    const div = editor.o_doc.createElement('div')\r\n    div.innerHTML = html\r\n\r\n    // Clean empty tags.\r\n    let empty_tags = div.querySelectorAll(`*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not(${FE.VOID_ELEMENTS.join('):not(')}):not(${editor.opts.htmlAllowedEmptyTags.join('):not(')})`)\r\n\r\n    while (empty_tags.length) {\r\n      for (i = 0; i < empty_tags.length; i++) {\r\n        empty_tags[i].parentNode.removeChild(empty_tags[i])\r\n      }\r\n\r\n      empty_tags = div.querySelectorAll(`*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not(${FE.VOID_ELEMENTS.join('):not(')}):not(${editor.opts.htmlAllowedEmptyTags.join('):not(')})`)\r\n    }\r\n\r\n    return div.innerHTML\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n    editor.el.addEventListener('copy', _handleCopy)\r\n    editor.el.addEventListener('cut', _handleCopy)\r\n    editor.el.addEventListener('paste', _handlePaste, {\r\n      capture: true\r\n    })\r\n\r\n    editor.events.on('drop', _dropPaste)\r\n\r\n    if (editor.browser.msie && editor.browser.version < 11) {\r\n      editor.events.on('mouseup', (e) => {\r\n        if (e.button === 2) {\r\n          setTimeout(() => {\r\n            stop_paste = false\r\n          }, 50)\r\n          stop_paste = true\r\n        }\r\n      }, true)\r\n\r\n      editor.events.on('beforepaste', _handlePaste)\r\n    }\r\n\r\n    editor.events.on('destroy', _destroy)\r\n  }\r\n\r\n  function _destroy() {\r\n    editor.el.removeEventListener('copy', _handleCopy)\r\n    editor.el.removeEventListener('cut', _handleCopy)\r\n    editor.el.removeEventListener('paste', _handlePaste)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    cleanEmptyTagsAndDivs,\r\n    getRtfClipboard,\r\n    saveCopiedText,\r\n    clean\r\n  }\r\n}\r\n","import FE from '../../editor.js'\n\nObject.assign(FE.DEFAULTS, {\n  shortcutsEnabled: [],\n  shortcutsHint: true\n})\n\nFE.SHORTCUTS_MAP = {}\n\nFE.RegisterShortcut = function (key, cmd, val, letter, shift, option) {\n  FE.SHORTCUTS_MAP[(shift ? '^' : '') + (option ? '@' : '') + key] = {\n    cmd,\n    val,\n    letter,\n    shift,\n    option\n  }\n\n  FE.DEFAULTS.shortcutsEnabled.push(cmd)\n}\n\nFE.RegisterShortcut(FE.KEYCODE.E, 'show', null, 'E', false, false)\nFE.RegisterShortcut(FE.KEYCODE.B, 'bold', null, 'B', false, false)\nFE.RegisterShortcut(FE.KEYCODE.I, 'italic', null, 'I', false, false)\nFE.RegisterShortcut(FE.KEYCODE.U, 'underline', null, 'U', false, false)\nFE.RegisterShortcut(FE.KEYCODE.S, 'strikeThrough', null, 'S', false, false)\nFE.RegisterShortcut(FE.KEYCODE.CLOSE_SQUARE_BRACKET, 'indent', null, ']', false, false)\nFE.RegisterShortcut(FE.KEYCODE.OPEN_SQUARE_BRACKET, 'outdent', null, '[', false, false)\nFE.RegisterShortcut(FE.KEYCODE.Z, 'undo', null, 'Z', false, false)\nFE.RegisterShortcut(FE.KEYCODE.Z, 'redo', null, 'Z', true, false)\nFE.RegisterShortcut(FE.KEYCODE.Y, 'redo', null, 'Y', false, false)\n\nFE.MODULES.shortcuts = function (editor) {\n  let inverse_map = null\n\n  function get(cmd) {\n    if (!editor.opts.shortcutsHint) {\n      return null\n    }\n\n    if (!inverse_map) {\n      inverse_map = {}\n\n      for (const key in FE.SHORTCUTS_MAP) {\n        if (Object.prototype.hasOwnProperty.call(FE.SHORTCUTS_MAP, key) && editor.opts.shortcutsEnabled.indexOf(FE.SHORTCUTS_MAP[key].cmd) >= 0) {\n          inverse_map[`${FE.SHORTCUTS_MAP[key].cmd}.${FE.SHORTCUTS_MAP[key].val || ''}`] = {\n            shift: FE.SHORTCUTS_MAP[key].shift,\n            option: FE.SHORTCUTS_MAP[key].option,\n            letter: FE.SHORTCUTS_MAP[key].letter\n          }\n        }\n      }\n    }\n\n    const srct = inverse_map[cmd]\n\n    if (!srct) {\n      return null\n    }\n\n    return (editor.helpers.isMac() ? String.fromCharCode(8984) : `${editor.language.translate('Ctrl')}+`) +\n            (srct.shift ? editor.helpers.isMac() ? String.fromCharCode(8679) : `${editor.language.translate('Shift')}+` : '') +\n            (srct.option ? editor.helpers.isMac() ? String.fromCharCode(8997) : `${editor.language.translate('Alt')}+` : '') +\n            srct.letter\n  }\n\n  let active = false\n\n  /**\n   * Execute shortcut.\n   */\n  function exec(e) {\n    if (!editor.core.hasFocus()) {\n      return true\n    }\n\n    const keycode = e.which\n\n    const ctrlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? e.metaKey : e.ctrlKey\n\n    if (e.type === 'keyup' && active) {\n      if (keycode !== FE.KEYCODE.META) {\n        active = false\n\n        return false\n      }\n    }\n\n    if (e.type === 'keydown') {\n      active = false\n    }\n\n    // Build shortcuts map.\n    const map_key = (e.shiftKey ? '^' : '') + (e.altKey ? '@' : '') + keycode\n    let deep_parent = editor.node.blockParent(editor.selection.blocks()[0])\n\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1571\n    if (deep_parent && deep_parent.tagName == 'TR' && deep_parent.getAttribute('contenteditable') == undefined) {\n      deep_parent = deep_parent.closest('table')\n    }\n\n    // https://github.com/CelestialSystem/froala-editor-js-2/tree/1303\n    // Check for content editable:false node and do not allow short-cuts\n    if (ctrlKey && FE.SHORTCUTS_MAP[map_key] && !(deep_parent && deep_parent.getAttribute('contenteditable') === 'false')) {\n      const cmd = FE.SHORTCUTS_MAP[map_key].cmd\n\n      // Check if shortcut is enabled.\n      if (cmd && editor.opts.shortcutsEnabled.indexOf(cmd) >= 0) {\n        const val = FE.SHORTCUTS_MAP[map_key].val\n\n        if (editor.events.trigger('shortcut', [e, cmd, val]) !== false) {\n          // Search for command.\n          if (cmd && (editor.commands[cmd] || FE.COMMANDS[cmd] && FE.COMMANDS[cmd].callback)) {\n            e.preventDefault()\n            e.stopPropagation()\n\n            if (e.type === 'keydown') {\n              (editor.commands[cmd] || FE.COMMANDS[cmd].callback)()\n              active = true\n            }\n\n            return false\n          }\n        }\n        else {\n          active = true;\n\n          return false;\n        }\n      }\n    }\n  }\n\n  /**\n   * Initialize.\n   */\n  function _init() {\n    editor.events.on('keydown', exec, true)\n    editor.events.on('keyup', exec, true)\n  }\n\n  return {\n    _init,\n    get\n  }\n}\n","import FE from '../../editor.js'\n\nFE.MODULES.snapshot = function (editor) {\n  /**\n   * Get the index of a node inside it's parent.\n   */\n  function _getNodeIndex(node) {\n    const childNodes = node.parentNode.childNodes\n    let idx = 0\n    let prevNode = null\n\n    for (let i = 0; i < childNodes.length; i++) {\n      if (prevNode) {\n\n        // Current node is text and it is empty.\n        const isEmptyText = childNodes[i].nodeType === Node.TEXT_NODE && childNodes[i].textContent === ''\n\n        // Previous node is text, current node is text.\n        const twoTexts = prevNode.nodeType === Node.TEXT_NODE && childNodes[i].nodeType === Node.TEXT_NODE\n\n        // Empty prev node.\n        var emptyPrevNode = (prevNode.nodeType === Node.TEXT_NODE && prevNode.textContent === '');\n\n        if (!isEmptyText && !twoTexts && !emptyPrevNode) {\n          idx++\n        }\n      }\n\n      if (childNodes[i] === node) {\n        return idx\n      }\n\n      prevNode = childNodes[i]\n    }\n  }\n\n  /**\n   * Determine the location of the node inside the element.\n   */\n  function _getNodeLocation(node) {\n    const loc = []\n\n    if (!node.parentNode) {\n      return []\n    }\n\n    while (!editor.node.isElement(node)) {\n      loc.push(_getNodeIndex(node))\n      node = node.parentNode\n    }\n\n    return loc.reverse()\n  }\n\n  /**\n   * Get the range offset inside the node.\n   */\n  function _getRealNodeOffset(node, offset) {\n    while (node && node.nodeType === Node.TEXT_NODE) {\n      const prevNode = node.previousSibling\n\n      if (prevNode && prevNode.nodeType === Node.TEXT_NODE) {\n        offset += prevNode.textContent.length\n      }\n      node = prevNode\n    }\n\n    return offset\n  }\n\n  /**\n   * Codify each range.\n   */\n  function _getRange(range) {\n    return {\n      scLoc: _getNodeLocation(range.startContainer),\n      scOffset: _getRealNodeOffset(range.startContainer, range.startOffset),\n      ecLoc: _getNodeLocation(range.endContainer),\n      ecOffset: _getRealNodeOffset(range.endContainer, range.endOffset)\n    }\n  }\n\n  /**\n   * Get the current snapshot.\n   */\n  function get() {\n    const snapshot = {}\n\n    editor.events.trigger('snapshot.before')\n\n    snapshot.html = (editor.$wp ? editor.$el.html() : editor.$oel.get(0).outerHTML).replace(/ style=\"\"/g, '')\n\n    snapshot.ranges = []\n\n    if (editor.$wp && editor.selection.inEditor() && editor.core.hasFocus()) {\n      const ranges = editor.selection.ranges()\n\n      for (let i = 0; i < ranges.length; i++) {\n        snapshot.ranges.push(_getRange(ranges[i]))\n      }\n    }\n\n    editor.events.trigger('snapshot.after', [snapshot])\n\n    return snapshot\n  }\n\n  /**\n   * Determine node by its location in the main element.\n   */\n  function _getNodeByLocation(loc) {\n    let node = editor.el\n\n    for (let i = 0; i < loc.length; i++) {\n      node = node.childNodes[loc[i]]\n    }\n\n    return node\n  }\n\n  /**\n   * Restore range from snapshot.\n   */\n  function _restoreRange(sel, range_snapshot) {\n    try {\n\n      // Get range info.\n      const startNode = _getNodeByLocation(range_snapshot.scLoc)\n      const startOffset = range_snapshot.scOffset\n      const endNode = _getNodeByLocation(range_snapshot.ecLoc)\n      const endOffset = range_snapshot.ecOffset\n\n      // Restore range.\n      const range = editor.doc.createRange()\n      range.setStart(startNode, startOffset)\n      range.setEnd(endNode, endOffset)\n\n      sel.addRange(range)\n    }\n    catch (ex) {\n      // continue regardless of error\n    }\n  }\n\n  /**\n   * Restore snapshot.\n   */\n  function restore(snapshot) {\n\n    // Restore HTML.\n    if (editor.$el.html() !== snapshot.html) {\n      if (editor.opts.htmlExecuteScripts) {\n        editor.$el.html(snapshot.html)\n      }\n      else {\n        editor.el.innerHTML = snapshot.html\n      }\n    }\n\n    // Get selection.\n    const sel = editor.selection.get()\n\n    // Make sure to clear current selection.\n    editor.selection.clear()\n\n    // Focus.\n    editor.events.focus(true)\n\n    // Restore Ranges.\n    for (let i = 0; i < snapshot.ranges.length; i++) {\n      _restoreRange(sel, snapshot.ranges[i])\n    }\n  }\n\n  /**\n   * Compare two snapshots.\n   */\n  function equal(s1, s2) {\n    if (s1.html !== s2.html) {\n      return false\n    }\n\n    if (editor.core.hasFocus() && JSON.stringify(s1.ranges) !== JSON.stringify(s2.ranges)) {\n      return false\n    }\n\n    return true\n  }\n\n  return {\n    get,\n    restore,\n    equal\n  }\n}\n","import FE from '../../editor.js'\n\nFE.MODULES.undo = function (editor) {\n  /**\n   * Disable the default browser undo.\n   */\n  function _disableBrowserUndo(e) {\n    const keyCode = e.which\n    const ctrlKey = editor.keys.ctrlKey(e)\n\n    // Ctrl Key.\n    if (ctrlKey) {\n      if (keyCode === FE.KEYCODE.Z && e.shiftKey) {\n        e.preventDefault()\n      }\n\n      if (keyCode === FE.KEYCODE.Z) {\n        e.preventDefault()\n      }\n    }\n  }\n\n  function canDo() {\n    if (editor.undo_stack.length === 0 || editor.undo_index <= 1) {\n      return false\n    }\n\n    return true\n  }\n\n  function canRedo() {\n    if (editor.undo_index === editor.undo_stack.length) {\n      return false\n    }\n\n    return true\n  }\n\n  let last_html = null\n\n  function saveStep(snapshot) {\n    if (!editor.undo_stack || editor.undoing || editor.el.querySelector('.fr-marker')) {\n      return\n    }\n\n    if (typeof snapshot === 'undefined') {\n      snapshot = editor.snapshot.get()\n\n      if (!editor.undo_stack[editor.undo_index - 1] || !editor.snapshot.equal(editor.undo_stack[editor.undo_index - 1], snapshot)) {\n        dropRedo()\n        editor.undo_stack.push(snapshot)\n        editor.undo_index++\n\n        if (snapshot.html !== last_html) {\n          editor.events.trigger('contentChanged')\n          last_html = snapshot.html\n        }\n      }\n    }\n    else {\n      dropRedo()\n\n      if (editor.undo_index > 0) {\n        editor.undo_stack[editor.undo_index - 1] = snapshot\n      }\n      else {\n        editor.undo_stack.push(snapshot)\n        editor.undo_index++\n      }\n    }\n  }\n\n  function dropRedo() {\n    if (!editor.undo_stack || editor.undoing) {\n      return\n    }\n\n    while (editor.undo_stack.length > editor.undo_index) {\n      editor.undo_stack.pop()\n    }\n  }\n\n  function _do() {\n    if (editor.undo_index > 1) {\n      editor.undoing = true\n\n      // Get snapshot.\n      const snapshot = editor.undo_stack[--editor.undo_index - 1]\n\n      // Clear any existing content changed timers.\n      clearTimeout(editor._content_changed_timer)\n\n      // Restore snapshot.\n      editor.snapshot.restore(snapshot)\n      last_html = snapshot.html\n\n      // Hide popups.\n      editor.popups.hideAll()\n\n      // Enable toolbar.\n      editor.toolbar.enable()\n\n      // Call content changed.\n      editor.events.trigger('contentChanged')\n\n      editor.events.trigger('commands.undo')\n\n      editor.undoing = false\n    }\n  }\n\n  function _redo() {\n    if (editor.undo_index < editor.undo_stack.length) {\n      editor.undoing = true\n\n      // Get snapshot.\n      const snapshot = editor.undo_stack[editor.undo_index++]\n\n      // Clear any existing content changed timers.\n      clearTimeout(editor._content_changed_timer)\n\n      // Restore snapshot.\n      editor.snapshot.restore(snapshot)\n      last_html = snapshot.html\n\n      // Hide popups.\n      editor.popups.hideAll()\n\n      // Enable toolbar.\n      editor.toolbar.enable()\n\n      // Call content changed.\n      editor.events.trigger('contentChanged')\n\n      editor.events.trigger('commands.redo')\n\n      editor.undoing = false\n    }\n  }\n\n  function reset() {\n    editor.undo_index = 0\n    editor.undo_stack = []\n  }\n\n  function _destroy() {\n    editor.undo_stack = []\n  }\n\n  /**\n   * Initialize\n   */\n  function _init() {\n    reset()\n    editor.events.on('initialized', () => {\n      last_html = (editor.$wp ? editor.$el.html() : editor.$oel.get(0).outerHTML).replace(/ style=\"\"/g, '')\n    })\n\n    editor.events.on('blur', () => {\n      if (!editor.el.querySelector('.fr-dragging')) {\n        editor.undo.saveStep()\n      }\n    })\n\n    editor.events.on('keydown', _disableBrowserUndo)\n\n    editor.events.on('destroy', _destroy)\n  }\n\n  return {\n    _init,\n    run: _do,\n    redo: _redo,\n    canDo,\n    canRedo,\n    dropRedo,\n    reset,\n    saveStep\n  }\n}\n","import FE from '../../../editor.js'\n\n// Extend defaults.\nObject.assign(FE.DEFAULTS, {\n  height: null,\n  heightMax: null,\n  heightMin: null,\n  width: null\n})\n\nFE.MODULES.size = function (editor) {\n\n  function syncIframe() {\n    refresh()\n\n    if (editor.opts.height) {\n      editor.$el.css('minHeight', editor.opts.height - editor.helpers.getPX(editor.$el.css('padding-top')) - editor.helpers.getPX(editor.$el.css('padding-bottom')))\n    }\n\n    editor.$iframe.height(editor.$el.outerHeight(true))\n  }\n\n  function refresh() {\n    if (editor.opts.heightMin) {\n      editor.$el.css('minHeight', editor.opts.heightMin)\n    }\n    else {\n      editor.$el.css('minHeight', '')\n    }\n\n    if (editor.opts.heightMax) {\n      editor.$wp.css('maxHeight', editor.opts.heightMax)\n      editor.$wp.css('overflow', 'auto')\n    }\n    else {\n      editor.$wp.css('maxHeight', '')\n      editor.$wp.css('overflow', '')\n    }\n\n    // Set height.\n    if (editor.opts.height) {\n      editor.$wp.css('height', editor.opts.height)\n      editor.$wp.css('overflow', 'auto')\n      editor.$el.css('minHeight', editor.opts.height - editor.helpers.getPX(editor.$el.css('padding-top')) - editor.helpers.getPX(editor.$el.css('padding-bottom')))\n    }\n    else {\n      editor.$wp.css('height', '')\n\n      if (!editor.opts.heightMin) {\n        editor.$el.css('minHeight', '')\n      }\n\n      if (!editor.opts.heightMax) {\n        editor.$wp.css('overflow', '')\n      }\n    }\n\n    if (editor.opts.width) {\n      editor.$box.width(editor.opts.width)\n    }\n  }\n\n  function _init() {\n    if (!editor.$wp) {\n      return false\n    }\n\n    refresh()\n\n    // Sync iframe height.\n    if (editor.$iframe) {\n      editor.events.on('keyup keydown', () => {\n        setTimeout(syncIframe, 0)\n      }, true)\n\n      editor.events.on('commands.after html.set init initialized paste.after', syncIframe)\n    }\n  }\n\n  return {\n    _init,\n    syncIframe,\n    refresh\n  }\n}\n","import './core/clean.js'\r\nimport './core/commands.js'\r\nimport './core/cursor_lists.js'\r\nimport './core/cursor.js'\r\nimport './core/data.js'\r\nimport './core/edit.js'\r\nimport './core/events.js'\r\nimport './core/format.js'\r\nimport './core/helpers.js'\r\nimport './core/html.js'\r\nimport './core/keys.js'\r\nimport './core/paste.js'\r\nimport './core/shortcuts.js'\r\nimport './core/snapshot.js'\r\nimport './core/undo.js'\r\nimport './core/dom/markers.js'\r\nimport './core/dom/node.js'\r\nimport './core/dom/selection.js'\r\nimport './core/dom/spaces.js'\r\nimport './core/options/language.js'\r\nimport './core/options/size.js'\r\n\r\nimport FE from '../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  documentReady: false,\r\n  editorClass: null,\r\n  typingTimer: 500,\r\n  iframe: false,\r\n  requestWithCORS: true,\r\n  requestWithCredentials: false,\r\n  requestHeaders: {},\r\n  useClasses: true,\r\n  spellcheck: true,\r\n  iframeDefaultStyle: 'html{margin:0px;height:auto;}body{height:auto;padding:20px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:\"\";display:block;clear:both;}body::-moz-selection{background:#b5d6fd;color:#000;}body::selection{background:#b5d6fd;color:#000;}',\r\n  iframeStyle: '',\r\n  iframeStyleFiles: [],\r\n  direction: 'auto',\r\n  zIndex: 1,\r\n  tabIndex: null,\r\n  disableRightClick: false,\r\n  scrollableContainer: 'body',\r\n  keepFormatOnDelete: false,\r\n  theme: null\r\n})\r\n\r\nFE.MODULES.core = function (editor) {\r\n  const $ = editor.$\r\n\r\n  function injectStyle(style) {\r\n    if (editor.opts.iframe) {\r\n      editor.$head.find('style[data-fr-style], link[data-fr-style]').remove()\r\n      editor.$head.append(`<style data-fr-style=\"true\">${style}</style>`)\r\n\r\n      for (let i = 0; i < editor.opts.iframeStyleFiles.length; i++) {\r\n        const $link = $(`<link data-fr-style=\"true\" rel=\"stylesheet\" href=\"${editor.opts.iframeStyleFiles[i]}\">`)\r\n\r\n        // Listen to the load event in order to sync iframe.\r\n        $link.get(0).addEventListener('load', editor.size.syncIframe)\r\n\r\n        // Append to the head.\r\n        editor.$head.append($link)\r\n      }\r\n    }\r\n  }\r\n\r\n  function _initElementStyle() {\r\n    if (!editor.opts.iframe) {\r\n      editor.$el.addClass('fr-element fr-view')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init the editor style.\r\n   */\r\n\r\n  function _initStyle() {\r\n    editor.$box.addClass(`fr-box${editor.opts.editorClass ? ` ${editor.opts.editorClass}` : ''}`)\r\n    editor.$box.attr('role', 'application')\r\n    editor.$wp.addClass('fr-wrapper')\r\n\r\n    if (editor.opts.documentReady) {\r\n      editor.$box.addClass('fr-document');\r\n    }\r\n\r\n    _initElementStyle()\r\n\r\n    if (editor.opts.iframe) {\r\n      editor.$iframe.addClass('fr-iframe')\r\n      editor.$el.addClass('fr-view')\r\n\r\n      for (let i = 0; i < editor.o_doc.styleSheets.length; i++) {\r\n        let rules\r\n\r\n        try {\r\n          rules = editor.o_doc.styleSheets[i].cssRules\r\n        }\r\n        catch (ex) {\r\n          // ok.\r\n        }\r\n\r\n        if (rules) {\r\n          for (let idx = 0, len = rules.length; idx < len; idx++) {\r\n            if (rules[idx].selectorText && (rules[idx].selectorText.indexOf('.fr-view') === 0 || rules[idx].selectorText.indexOf('.fr-element') === 0)) {\r\n              if (rules[idx].style.cssText.length > 0) {\r\n                if (rules[idx].selectorText.indexOf('.fr-view') === 0) {\r\n                  editor.opts.iframeStyle += `${rules[idx].selectorText.replace(/\\.fr-view/g, 'body')}{${rules[idx].style.cssText}}`\r\n                }\r\n                else {\r\n                  editor.opts.iframeStyle += `${rules[idx].selectorText.replace(/\\.fr-element/g, 'body')}{${rules[idx].style.cssText}}`\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (editor.opts.direction !== 'auto') {\r\n      editor.$box.removeClass('fr-ltr fr-rtl').addClass(`fr-${editor.opts.direction}`)\r\n    }\r\n    editor.$el.attr('dir', editor.opts.direction)\r\n    editor.$wp.attr('dir', editor.opts.direction)\r\n\r\n    if (editor.opts.zIndex > 1) {\r\n      editor.$box.css('z-index', editor.opts.zIndex)\r\n    }\r\n\r\n    if (editor.opts.theme) {\r\n      editor.$box.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    // Set tabIndex option.\r\n    editor.opts.tabIndex = editor.opts.tabIndex || editor.$oel.attr('tabIndex')\r\n\r\n    if (editor.opts.tabIndex) {\r\n      editor.$el.attr('tabIndex', editor.opts.tabIndex)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determine if the editor is empty.\r\n   */\r\n\r\n  function isEmpty() {\r\n    return editor.node.isEmpty(editor.el)\r\n  }\r\n\r\n  /**\r\n   * Check if the browser allows drag and init it.\r\n   */\r\n\r\n  function _initDrag() {\r\n\r\n    // Drag and drop support.\r\n    editor.drag_support = {\r\n      filereader: typeof FileReader !== 'undefined',\r\n      formdata: Boolean(editor.win.FormData),\r\n      progress: 'upload' in new XMLHttpRequest()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an XHR object.\r\n   */\r\n\r\n  function getXHR(url, method) {\r\n    const xhr = new XMLHttpRequest()\r\n\r\n    // Make it async.\r\n    xhr.open(method, url, true)\r\n\r\n    // Set with credentials.\r\n    if (editor.opts.requestWithCredentials) {\r\n      xhr.withCredentials = true\r\n    }\r\n\r\n    // Set headers.\r\n    for (const header in editor.opts.requestHeaders) {\r\n      if (Object.prototype.hasOwnProperty.call(editor.opts.requestHeaders, header)) {\r\n        xhr.setRequestHeader(header, editor.opts.requestHeaders[header])\r\n      }\r\n    }\r\n\r\n    return xhr\r\n  }\r\n\r\n  function _destroy(html) {\r\n    if (editor.$oel.get(0).tagName === 'TEXTAREA') {\r\n      editor.$oel.val(html)\r\n    }\r\n\r\n    if (editor.$box) {\r\n      editor.$box.removeAttr('role')\r\n    }\r\n\r\n    if (editor.$wp) {\r\n      if (editor.$oel.get(0).tagName === 'TEXTAREA') {\r\n        editor.$el.html('')\r\n        editor.$wp.html('')\r\n        editor.$box.replaceWith(editor.$oel)\r\n        editor.$oel.show()\r\n      }\r\n      else {\r\n        editor.$wp.replaceWith(html)\r\n        editor.$el.html('')\r\n        editor.$box.removeClass(`fr-view fr-ltr fr-box ${editor.opts.editorClass || ''}`)\r\n\r\n        if (editor.opts.theme) {\r\n          editor.$box.addClass(`${editor.opts.theme}-theme`)\r\n        }\r\n      }\r\n    }\r\n\r\n    this.$wp = null\r\n    this.$el = null\r\n    this.el = null\r\n    this.$box = null\r\n  }\r\n\r\n  function hasFocus() {\r\n    if (editor.browser.mozilla && editor.helpers.isMobile()) {\r\n      return editor.selection.inEditor()\r\n    }\r\n\r\n    return editor.node.hasFocus(editor.el) || editor.$el.find('*:focus').length > 0\r\n  }\r\n\r\n  function sameInstance($obj) {\r\n    if (!$obj) {\r\n      return false\r\n    }\r\n\r\n    const inst = $obj.data('instance')\r\n\r\n    return inst ? inst.id === editor.id : false\r\n  }\r\n\r\n  /**\r\n   * Tear up.\r\n   */\r\n\r\n  function _init() {\r\n    FE.INSTANCES.push(editor)\r\n\r\n    _initDrag()\r\n\r\n    // Call initialization methods.\r\n    if (editor.$wp) {\r\n      _initStyle()\r\n      editor.html.set(editor._original_html)\r\n\r\n      // Set spellcheck.\r\n      editor.$el.attr('spellcheck', editor.opts.spellcheck)\r\n\r\n      // Disable autocomplete.\r\n      if (editor.helpers.isMobile()) {\r\n        editor.$el.attr('autocomplete', editor.opts.spellcheck ? 'on' : 'off')\r\n        editor.$el.attr('autocorrect', editor.opts.spellcheck ? 'on' : 'off')\r\n        editor.$el.attr('autocapitalize', editor.opts.spellcheck ? 'on' : 'off')\r\n      }\r\n\r\n      // Disable right click.\r\n      if (editor.opts.disableRightClick) {\r\n        editor.events.$on(editor.$el, 'contextmenu', (e) => {\r\n          if (e.button === 2) {\r\n\r\n            // https://github.com/froala-labs/froala-editor-js-2/issues/2150\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            \r\n            return false\r\n          }\r\n        })\r\n      }\r\n\r\n      try {\r\n        editor.doc.execCommand('styleWithCSS', false, false)\r\n      }\r\n      catch (ex) {\r\n        // ok.\r\n      }\r\n    }\r\n\r\n    if (editor.$oel.get(0).tagName === 'TEXTAREA') {\r\n\r\n      // Sync on contentChanged.\r\n      editor.events.on('contentChanged', () => {\r\n        editor.$oel.val(editor.html.get())\r\n      })\r\n\r\n      // Set HTML on form submit.\r\n      editor.events.on('form.submit', () => {\r\n        editor.$oel.val(editor.html.get())\r\n      })\r\n\r\n      editor.events.on('form.reset', () => {\r\n        editor.html.set(editor._original_html)\r\n      })\r\n\r\n      editor.$oel.val(editor.html.get())\r\n    }\r\n\r\n    // iOS focus fix.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on(editor.$doc, 'selectionchange', () => {\r\n        if (!editor.$doc.get(0).hasFocus()) {\r\n          editor.$win.get(0).focus()\r\n        }\r\n      })\r\n    }\r\n\r\n    editor.events.trigger('init')\r\n\r\n    // Autofocus.\r\n    if (editor.opts.autofocus && !editor.opts.initOnClick && editor.$wp) {\r\n      editor.events.on('initialized', () => {\r\n        editor.events.focus(true)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    destroy: _destroy,\r\n    isEmpty,\r\n    getXHR,\r\n    injectStyle,\r\n    hasFocus,\r\n    sameInstance\r\n  }\r\n}\r\n","import FE from '../../editor.js'\r\n\r\nFE.POPUP_TEMPLATES = {\r\n  'text.edit': '[_EDIT_]'\r\n}\r\n\r\nFE.RegisterTemplate = function (name, template) {\r\n  FE.POPUP_TEMPLATES[name] = template\r\n}\r\n\r\nFE.MODULES.popups = function (editor) {\r\n  const $ = editor.$\r\n  let screenHeightofBrowser\r\n\r\n  if (!editor.shared.popups) {\r\n    editor.shared.popups = {}\r\n  }\r\n  let popups = editor.shared.popups\r\n\r\n  // To store active popup buttons\r\n  let $btnActivePopups\r\n\r\n  function setContainer(id, $container) {\r\n    if (!$container.isVisible()) {\r\n      $container = editor.$sc\r\n    }\r\n\r\n    if (!$container.is(popups[id].data('container'))) {\r\n      popups[id].data('container', $container)\r\n      $container.append(popups[id])\r\n    }\r\n  }\r\n\r\n\r\n  function setFileListHeight($popup) {\r\n    $popup.find('.fr-upload-progress').addClass('fr-height-set')\r\n    $popup.find('.fr-upload-progress').removeClass('fr-height-auto')\r\n    editor.popups.get('filesManager.insert').removeClass('fr-height-auto')\r\n    let activeLayerIndex\r\n    $popup.find('.fr-files-upload-layer').hasClass('fr-active') ? activeLayerIndex = 1 : ''  \r\n    $popup.find('.fr-files-by-url-layer').hasClass('fr-active') ? activeLayerIndex = 2 : ''\r\n    $popup.find('.fr-files-embed-layer').hasClass('fr-active') ? activeLayerIndex = 3 : ''\r\n\r\n    if($popup.find('.fr-upload-progress-layer').get(0).clientHeight + 10 < $popup.find('.fr-upload-progress').get(0).clientHeight)\r\n    {\r\n      $popup.find('.fr-upload-progress').addClass('fr-height-auto')\r\n    }\r\n\r\n    if($popup[0].clientHeight > 400)\r\n      $popup[0].childNodes[4].style.height = `${$popup[0].clientHeight - ($popup[0].childNodes[0].clientHeight + $popup[0].childNodes[activeLayerIndex].clientHeight)-80}px`\r\n\r\n  }\r\n\r\n  let prevHeight = 2000\r\n  function setPopupDimensions($popup, isDelete) {\r\n    if (isDelete && $popup.find('.fr-upload-progress-layer').get(0).clientHeight < prevHeight) {\r\n      $popup.find('.fr-upload-progress').addClass('fr-height-auto')\r\n      editor.popups.get('filesManager.insert').addClass('fr-height-auto')\r\n      $popup.find('.fr-upload-progress').removeClass('fr-height-set')\r\n      prevHeight = 2000\r\n    }\r\n    if ($popup.get(0).clientHeight > window.innerHeight / 2) {\r\n      if (window.innerWidth < 500) {\r\n        if ($popup.get(0).clientHeight > screenHeightofBrowser * 0.6) {\r\n\r\n\r\n          setFileListHeight($popup)\r\n        }\r\n      } else {\r\n        if ($popup.get(0).clientHeight > 400) {\r\n\r\n\r\n          setFileListHeight($popup)\r\n        }\r\n      }\r\n\r\n      prevHeight = $popup.find('.fr-upload-progress-layer').get(0).clientHeight\r\n    }\r\n    let width = window.innerWidth\r\n    switch (true) {\r\n    case (width <= 320):\r\n      $popup.width(200)\r\n      break;\r\n    case (width <= 420):\r\n      $popup.width(250)\r\n      break;\r\n    case (width <= 520):\r\n      $popup.width(300)\r\n      break;\r\n    case (width <= 720):\r\n      $popup.width(400)\r\n      break;\r\n    case (width > 720):\r\n      $popup.width(530)\r\n      break;\r\n    }\r\n  }\r\n\r\n  function refreshContainer(id, $container) {\r\n    if (!$container.isVisible()) {\r\n      $container = editor.$sc\r\n    }\r\n\r\n    if (!$container.contains([popups[id].get(0)])) {\r\n      $container.append(popups[id])\r\n    }\r\n  }\r\n\r\n  /**\r\n * Handles focus event on input boxes\r\n */\r\n  function _inputRefreshEmptyOnFocus() {\r\n    $(this).toggleClass('fr-not-empty', true)\r\n  }\r\n\r\n  /**\r\n * Handles blur event on input boxes\r\n */\r\n  function _inputRefreshEmptyOnBlur() {\r\n    const $elm = $(this)\r\n    $elm.toggleClass('fr-not-empty', $elm.val() !== '')\r\n  }\r\n\r\n  /**\r\n * Remove placeholder and attach label next to input box for focus and blur transitions\r\n */\r\n  function _addLabel($inputElms) {\r\n    for (let i = 0; i < $inputElms.length; i++) {\r\n      const elm = $inputElms[i]\r\n      const $elm = $(elm)\r\n\r\n      // Attach a label in place of placeholder for input box transition\r\n      const $label = $elm.next()\r\n      if ($label.length === 0 && $elm.attr('placeholder')) {\r\n        $elm.after(`<label for=\"${$elm.attr('id')}\">${$elm.attr('placeholder')}</label>`)\r\n\r\n        // Remove placeholder\r\n        $elm.attr('placeholder', '')\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Show popup at a specific position.\r\n   */\r\n  function show(id, left, top, obj_height, applyLeftOffset) {\r\n\r\n    // Restore selection on show if it is there.\r\n    if (!isVisible(id)) {\r\n      if (areVisible() && editor.$el.find('.fr-marker').length > 0) {\r\n        editor.events.disableBlur()\r\n        editor.selection.restore()\r\n      }\r\n      else if (!areVisible()) {\r\n\r\n        // We must have focus into editor because we may want to save selection.\r\n        editor.events.disableBlur()\r\n        editor.events.focus()\r\n        editor.events.enableBlur()\r\n      }\r\n    }\r\n\r\n    hideAll([id])\r\n\r\n    if (!popups[id]) {\r\n      return false\r\n    }\r\n\r\n    // Hide active dropdowns.\r\n    const $active_dropdowns = editor.button.getButtons('.fr-dropdown.fr-active')\r\n    $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).parents('.fr-toolbar').css('zIndex', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n    $active_dropdowns.next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\r\n\r\n    // Set the current instance for the popup.\r\n    popups[id].data('instance', editor)\r\n\r\n    if (editor.$tb) {\r\n      editor.$tb.data('instance', editor)\r\n    }\r\n\r\n    const is_visible = isVisible(id)\r\n    popups[id].addClass('fr-active').removeClass('fr-hidden').find('input, textarea').removeAttr('disabled')\r\n\r\n    let $container = popups[id].data('container')\r\n\r\n    refreshContainer(id, $container)\r\n\r\n    // Inline mode when container is toolbar.\r\n    if (editor.opts.toolbarInline && $container && editor.$tb && $container.get(0) === editor.$tb.get(0)) {\r\n      setContainer(id, editor.$sc)\r\n      top = editor.$tb.offset().top - editor.helpers.getPX(editor.$tb.css('margin-top'))\r\n      left = editor.$tb.offset().left + editor.$tb.outerWidth() / 2\r\n\r\n      if (editor.node.hasClass(editor.$tb.get(0), 'fr-above') && top) {\r\n        top += editor.$tb.outerHeight()\r\n      }\r\n\r\n      obj_height = 0\r\n    }\r\n\r\n    // Apply iframe correction.\r\n    $container = popups[id].data('container')\r\n\r\n    if (editor.opts.iframe && !obj_height && !is_visible) {\r\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\r\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\r\n      if (left) {\r\n        left -= editor.$iframe.offset().left + iframePaddingLeft\r\n      }\r\n\r\n      if (top) {\r\n        top -= editor.$iframe.offset().top + iframePaddingTop\r\n      }\r\n    }\r\n\r\n    // If container is toolbar then increase zindex.\r\n    if ($container.is(editor.$tb)) {\r\n      editor.$tb.css('zIndex', (editor.opts.zIndex || 1) + 4)\r\n    }\r\n    else {\r\n      popups[id].css('zIndex', (editor.opts.zIndex || 1) + 3)\r\n    }\r\n\r\n    // Toolbar at the bottom and container is toolbar.\r\n    if (editor.opts.toolbarBottom && $container && editor.$tb && $container.get(0) === editor.$tb.get(0)) {\r\n      popups[id].addClass('fr-above')\r\n\r\n      if (top) {\r\n        top -= popups[id].outerHeight()\r\n      }\r\n    }\r\n\r\n    // Add popup offset left offset based on the popup width\r\n    if (applyLeftOffset) {\r\n      left -= popups[id].width() / 2\r\n    }\r\n    \r\n    // Check if it exceeds window on the right.\r\n    if (left + popups[id].outerWidth() > editor.$sc.offset().left + editor.$sc.width()) {\r\n      left -= (left + popups[id].outerWidth() - editor.$sc.offset().left - editor.$sc.width())\r\n    }\r\n\r\n    // Check if it exceeds window on the left.\r\n    if (left < editor.$sc.offset().left && editor.opts.direction === 'rtl') {\r\n      left = editor.$sc.offset().left\r\n    }\r\n\r\n    // Position editor.\r\n    popups[id].removeClass('fr-active')\r\n    editor.position.at(left, top, popups[id], obj_height || 0)\r\n    popups[id].addClass('fr-active')\r\n\r\n    if (!is_visible) {\r\n      editor.accessibility.focusPopup(popups[id])\r\n    }\r\n\r\n    if (editor.opts.toolbarInline) {\r\n      editor.toolbar.hide()\r\n    }\r\n\r\n    // Update the button for active popup\r\n    if (editor.$tb) {\r\n      $btnActivePopups = editor.$tb.find('.fr-btn-active-popup')\r\n    }\r\n    editor.events.trigger(`popups.show.${id}`)\r\n\r\n    // https://github.com/froala/wysiwyg-editor/issues/1248\r\n    _events(id)._repositionPopup()\r\n\r\n    _unmarkExit()\r\n  }\r\n\r\n  function onShow(id, callback) {\r\n    editor.events.on(`popups.show.${id}`, callback)\r\n  }\r\n\r\n  /**\r\n   * Find visible popup.\r\n   */\r\n  function isVisible(id) {\r\n    return popups[id] && editor.node.hasClass(popups[id], 'fr-active') && editor.core.sameInstance(popups[id]) || false\r\n  }\r\n\r\n  /**\r\n   * Check if there is any popup visible.\r\n   */\r\n  function areVisible(new_instance) {\r\n    for (const id in popups) {\r\n      if (Object.prototype.hasOwnProperty.call(popups, id)) {\r\n        if (isVisible(id) && (typeof new_instance === 'undefined' || popups[id].data('instance') === new_instance)) {\r\n          return popups[id]\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /**\r\n   * Hide popup.\r\n   */\r\n  function hide(id) {\r\n    let $popup = null\r\n\r\n    if (typeof id !== 'string') {\r\n      $popup = id\r\n    }\r\n    else {\r\n      $popup = popups[id]\r\n    }\r\n\r\n    if(id === 'filesManager.insert' && (editor.filesManager !== undefined) && editor.filesManager.isChildWindowOpen()){\r\n      return false\r\n    }\r\n\r\n    if ($popup && editor.node.hasClass($popup, 'fr-active')) {\r\n      $popup.removeClass('fr-active fr-above')\r\n      editor.events.trigger(`popups.hide.${id}`)\r\n\r\n      // Reset toolbar zIndex.\r\n      if (editor.$tb) {\r\n        if (editor.opts.zIndex > 1) {\r\n          editor.$tb.css('zIndex', editor.opts.zIndex + 1)\r\n        }\r\n        else {\r\n          editor.$tb.css('zIndex', '')\r\n        }\r\n      }\r\n\r\n      editor.events.disableBlur()\r\n      $popup.find('input, textarea, button').each(function () {\r\n        if (this === this.ownerDocument.activeElement) {\r\n          this.blur()\r\n        }\r\n      })\r\n\r\n      // Mark the input boxes as empty\r\n      $popup.find('input, textarea').attr('disabled', 'disabled')\r\n\r\n      // Remove styling from active popup buttons when popup is closed\r\n      if ($btnActivePopups) {\r\n        for (let index = 0; index < $btnActivePopups.length; index++) {\r\n          $($btnActivePopups[index]).removeClass('fr-btn-active-popup')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Assign an event for hiding.\r\n   */\r\n  function onHide(id, callback) {\r\n    editor.events.on(`popups.hide.${id}`, callback)\r\n  }\r\n\r\n  /**\r\n   * Get the popup with the specific id.\r\n   */\r\n  function get(id) {\r\n    const $popup = popups[id]\r\n\r\n    if ($popup && !$popup.data(`inst${editor.id}`)) {\r\n      const ev = _events(id)\r\n      _bindInstanceEvents(ev, id)\r\n    }\r\n\r\n    return $popup\r\n  }\r\n\r\n  function onRefresh(id, callback) {\r\n    editor.events.on(`popups.refresh.${id}`, callback)\r\n  }\r\n\r\n  /**\r\n   * Refresh content inside the popup.\r\n   */\r\n  function refresh(id) {\r\n    // Set the instance id for the popup.\r\n    popups[id].data('instance', editor)\r\n\r\n    editor.events.trigger(`popups.refresh.${id}`)\r\n\r\n    const btns = popups[id].find('.fr-command')\r\n\r\n    for (let i = 0; i < btns.length; i++) {\r\n      const $btn = $(btns[i])\r\n\r\n      if ($btn.parents('.fr-dropdown-menu').length === 0) {\r\n        editor.button.refresh($btn)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hide all popups.\r\n   */\r\n  function hideAll(except) {\r\n    if (typeof except === 'undefined') {\r\n      except = []\r\n    }\r\n\r\n    for (const id in popups) {\r\n      if (Object.prototype.hasOwnProperty.call(popups, id)) {\r\n        if (except.indexOf(id) < 0) {\r\n          hide(id)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  editor.shared.exit_flag = false\r\n\r\n  function _markExit() {\r\n    editor.shared.exit_flag = true\r\n  }\r\n\r\n  function _unmarkExit() {\r\n    editor.shared.exit_flag = false\r\n  }\r\n\r\n  function _canExit() {\r\n    return editor.shared.exit_flag\r\n  }\r\n\r\n  function _buildTemplate(id, template) {\r\n\r\n    // Load template.\r\n    let html = FE.POPUP_TEMPLATES[id]\r\n\r\n    if (!html) {\r\n      return null\r\n    }\r\n\r\n    if (typeof html === 'function') {\r\n      html = html.apply(editor)\r\n    }\r\n\r\n    for (const nm in template) {\r\n      if (Object.prototype.hasOwnProperty.call(template, nm)) {\r\n        html = html.replace(`[_${nm.toUpperCase()}_]`, template[nm])\r\n      }\r\n    }\r\n\r\n    return html\r\n  }\r\n\r\n  function _build(id, template) {\r\n    let $container\r\n    const html = _buildTemplate(id, template)\r\n\r\n    const $popup = $(editor.doc.createElement('DIV'))\r\n    if (!html) {\r\n      \r\n      if (id === 'filesManager.insert') {\r\n        $popup.addClass('fr-popup fr-files-manager fr-empty')\r\n      } else {\r\n        $popup.addClass('fr-popup fr-empty')\r\n      }\r\n\r\n      $container = $('body').first()\r\n      $container.append($popup)\r\n      $popup.data('container', $container)\r\n\r\n      popups[id] = $popup\r\n\r\n      return $popup\r\n    }\r\n\r\n    if (id === 'filesManager.insert') {\r\n      $popup.addClass(`fr-popup fr-files-manager${editor.helpers.isMobile() ? ' fr-mobile' : ' fr-desktop'}${editor.opts.toolbarInline ? ' fr-inline' : ''}`)\r\n    } else {\r\n      $popup.addClass(`fr-popup${editor.helpers.isMobile() ? ' fr-mobile' : ' fr-desktop'}${editor.opts.toolbarInline ? ' fr-inline' : ''}`)\r\n    }\r\n\r\n    $popup.html(html)\r\n\r\n    if (editor.opts.theme) {\r\n      $popup.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    if (editor.opts.zIndex > 1) {\r\n      if (!editor.opts.editInPopup && editor.$tb) {\r\n        editor.$tb.css('z-index', editor.opts.zIndex + 2)\r\n      }\r\n      else {\r\n        $popup.css('z-index', editor.opts.zIndex + 2)\r\n      }\r\n    }\r\n\r\n    if (editor.opts.direction !== 'auto') {\r\n      $popup.removeClass('fr-ltr fr-rtl').addClass(`fr-${editor.opts.direction}`)\r\n    }\r\n\r\n    $popup.find('input, textarea').attr('dir', editor.opts.direction).attr('disabled', 'disabled')\r\n\r\n    $container = $('body').first()\r\n    $container.append($popup)\r\n    $popup.data('container', $container)\r\n\r\n    popups[id] = $popup\r\n\r\n    const $colorHexLayer = $popup.find('.fr-color-hex-layer')\r\n    if ($colorHexLayer.length > 0) {\r\n      const spanWidth = editor.helpers.getPX($popup.find('.fr-color-set > span').css('width'))\r\n      const paddingLeft = editor.helpers.getPX($colorHexLayer.css('paddingLeft'))\r\n      const paddingRight = editor.helpers.getPX($colorHexLayer.css('paddingRight'))\r\n      $colorHexLayer.css('width', spanWidth * editor.opts.colorsStep + paddingLeft + paddingRight)\r\n    }\r\n\r\n    // Bind commands from the popup.\r\n    editor.button.bindCommands($popup, false)\r\n\r\n    return $popup\r\n  }\r\n\r\n  function _events(id) {\r\n    const $popup = popups[id]\r\n\r\n    return {\r\n      /**\r\n       * Resize window.\r\n       */\r\n      _windowResize() {\r\n        const inst = $popup.data('instance') || editor\r\n        if (!inst.helpers.isMobile() && $popup.isVisible()) {\r\n          inst.events.disableBlur()\r\n          inst.popups.hide(id)\r\n          inst.events.enableBlur()\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Focus on an input.\r\n       */\r\n      _inputFocus(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        const $target = $(e.currentTarget)\r\n\r\n        if ($target.is('input:file')) {\r\n          $target.closest('.fr-layer').addClass('fr-input-focus')\r\n        }\r\n\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        // IE workaround.\r\n        setTimeout(() => {\r\n          inst.events.enableBlur()\r\n        }, 100)\r\n\r\n        // Reposition scroll on mobile to the original one.\r\n        if (inst.helpers.isMobile()) {\r\n          const t = $(inst.o_win).scrollTop()\r\n          setTimeout(() => {\r\n            $(inst.o_win).scrollTop(t)\r\n          }, 0)\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Blur on an input.\r\n       */\r\n      _inputBlur(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        const $target = $(e.currentTarget)\r\n\r\n        if ($target.is('input:file')) {\r\n          $target.closest('.fr-layer').removeClass('fr-input-focus')\r\n        }\r\n\r\n        // Do not do blur on window change.\r\n        if (document.activeElement !== this && $(this).isVisible()) {\r\n          if (inst.events.blurActive()) {\r\n            inst.events.trigger('blur')\r\n          }\r\n\r\n          inst.events.enableBlur()\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Editor keydown.\r\n       */\r\n      _editorKeydown(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // ESC.\r\n        if (!inst.keys.ctrlKey(e) && e.which !== FE.KEYCODE.ALT && e.which !== FE.KEYCODE.ESC) {\r\n          if (isVisible(id) && $popup.findVisible('.fr-back').length) {\r\n            inst.button.exec($popup.findVisible('.fr-back').first())\r\n          }\r\n          // Don't hide if alt alone is pressed to allow Alt + F10 shortcut for accessibility.\r\n          else if (e.which !== FE.KEYCODE.ALT) {\r\n            inst.popups.hide(id)\r\n          }\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Handling hitting the popup elements with the mouse.\r\n       */\r\n      _preventFocus(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // Get the original target.\r\n        const originalTarget = e.originalEvent ? e.originalEvent.target || e.originalEvent.originalTarget : null\r\n\r\n        // Do not disable blur on mouseup because it is the last event in the chain.\r\n        if (e.type !== 'mouseup' && !$(originalTarget).is(':focus')) {\r\n          inst.events.disableBlur()\r\n        }\r\n\r\n        // Hide popup's active dropdowns on mouseup.\r\n        if (e.type === 'mouseup' && !($(originalTarget).hasClass('fr-command') || $(originalTarget).parents('.fr-command').length > 0) && !$(originalTarget).hasClass('fr-dropdown-content')) {\r\n          editor.button.hideActiveDropdowns($popup)\r\n        }\r\n\r\n        // https://github.com/froala/wysiwyg-editor/issues/1733\r\n        // https://github.com/froala/wysiwyg-editor/issues/1838 . Firefox: with Jquery > 2 $(originalTarget).is(':focus') returns the oposite to Jquery < 2.\r\n        if ((editor.browser.safari || editor.browser.mozilla) && e.type === 'mousedown' && $(originalTarget).is('input[type=file]')) {\r\n          inst.events.disableBlur()\r\n        }\r\n\r\n        // Define the input selector.\r\n        const input_selector = 'input, textarea, button, select, label, .fr-command'\r\n\r\n        // Click was not made inside an input.\r\n        if (originalTarget && !$(originalTarget).is(input_selector) && $(originalTarget).parents(input_selector).length === 0) {\r\n          e.stopPropagation()\r\n\r\n          return false\r\n        }\r\n\r\n        // Click was made on another input inside popup. Prevent propagation of the event.\r\n        else if (originalTarget && $(originalTarget).is(input_selector)) {\r\n          e.stopPropagation()\r\n        }\r\n\r\n        _unmarkExit()\r\n      },\r\n\r\n      /**\r\n       * Mouseup inside the editor.\r\n       */\r\n      _editorMouseup() {\r\n\r\n        // Check if popup is visible and we can exit.\r\n        if ($popup.isVisible() && _canExit()) {\r\n\r\n          // If we have an input focused, then disable blur.\r\n          if ($popup.findVisible('input:focus, textarea:focus, button:focus, select:focus').length > 0) {\r\n            editor.events.disableBlur()\r\n          }\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Mouseup on window.\r\n       */\r\n      _windowMouseup(e) {\r\n        if (!editor.core.sameInstance($popup)) {\r\n          return true\r\n        }\r\n\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        if ($popup.isVisible() && _canExit()) {\r\n          e.stopPropagation()\r\n          inst.markers.remove()\r\n          inst.popups.hide(id)\r\n\r\n          _unmarkExit()\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Keydown on window.\r\n       */\r\n      _windowKeydown(e) {\r\n        if (!editor.core.sameInstance($popup)) {\r\n          return true\r\n        }\r\n\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        const key_code = e.which\r\n\r\n        // ESC.\r\n        if (FE.KEYCODE.ESC === key_code) {\r\n          if (inst.popups.isVisible(id) && inst.opts.toolbarInline) {\r\n            e.stopPropagation()\r\n\r\n            if (inst.popups.isVisible(id)) {\r\n              if ($popup.findVisible('.fr-back').length) {\r\n                inst.button.exec($popup.findVisible('.fr-back').first())\r\n\r\n                // Focus back popup button.\r\n                inst.accessibility.focusPopupButton($popup)\r\n              }\r\n              else if ($popup.findVisible('.fr-dismiss').length) {\r\n                inst.button.exec($popup.findVisible('.fr-dismiss').first())\r\n              }\r\n              else {\r\n                inst.popups.hide(id)\r\n                inst.toolbar.showInline(null, true)\r\n\r\n                // Focus back popup button.\r\n                inst.accessibility.focusPopupButton($popup)\r\n              }\r\n            }\r\n\r\n            return false\r\n          }\r\n          else if (inst.popups.isVisible(id)) {\r\n            if ($popup.findVisible('.fr-back').length) {\r\n              inst.button.exec($popup.findVisible('.fr-back').first)\r\n\r\n              // Focus back popup button.\r\n              inst.accessibility.focusPopupButton($popup)\r\n            }\r\n            else if ($popup.findVisible('.fr-dismiss').length) {\r\n              inst.button.exec($popup.findVisible('.fr-dismiss').first())\r\n            }\r\n            else {\r\n              inst.popups.hide(id)\r\n\r\n              // Focus back popup button.\r\n              inst.accessibility.focusPopupButton($popup)\r\n            }\r\n\r\n            return false\r\n          }\r\n        }\r\n      },\r\n\r\n      /**\r\n       * Reposition popup.\r\n       */\r\n      _repositionPopup() {\r\n\r\n        // No height set or toolbar inline.\r\n        if (!(editor.opts.height || editor.opts.heightMax) || editor.opts.toolbarInline) {\r\n          return true\r\n        }\r\n\r\n        if (editor.$wp && isVisible(id) && $popup.parent().get(0) === editor.$sc.get(0)) {\r\n\r\n          // Popup top - wrapper top.\r\n          let p_top = $popup.offset().top - editor.$wp.offset().top\r\n\r\n          // Wrapper height.\r\n          const w_height = editor.$wp.outerHeight()\r\n\r\n          if (editor.node.hasClass($popup.get(0), 'fr-above')) {\r\n            p_top += $popup.outerHeight()\r\n          }\r\n\r\n          // 1. Popup top > w_height.\r\n          // 2. Popup top + popup height < 0.\r\n          if (p_top > w_height || p_top < 0) {\r\n            $popup.addClass('fr-hidden')\r\n          }\r\n          else {\r\n            $popup.removeClass('fr-hidden')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function _bindInstanceEvents(ev, id) {\r\n\r\n    // Editor mouseup.\r\n    editor.events.on('mouseup', ev._editorMouseup, true)\r\n\r\n    if (editor.$wp) {\r\n      editor.events.on('keydown', ev._editorKeydown)\r\n    }\r\n\r\n    // Remove popup class on focus as pop up will be hidden on focus of editor\r\n    editor.events.on('focus', () => {\r\n      popups[id].removeClass('focused');\r\n    })\r\n\r\n    // Hide all popups on blur.\r\n    editor.events.on('blur', () => {\r\n      if (areVisible()) {\r\n        editor.markers.remove()\r\n      }\r\n      \r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/2044\r\n      if (editor.helpers.isMobile()) {\r\n\r\n        if (popups[id].hasClass('focused')) {\r\n          hideAll()\r\n          popups[id].removeClass('focused')\r\n        } else {\r\n          popups[id].addClass('focused')\r\n        }\r\n      } else {\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/858\r\n        if (!popups[id].find('iframe').length) {\r\n          hideAll()\r\n        }\r\n      }\r\n    })\r\n\r\n    // Update the position of the popup.\r\n    if (editor.$wp && !editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$wp, `scroll.popup${id}`, ev._repositionPopup)\r\n    }\r\n\r\n    editor.events.on('window.mouseup', ev._windowMouseup, true)\r\n    editor.events.on('window.keydown', ev._windowKeydown, true)\r\n\r\n    popups[id].data(`inst${editor.id}`, true)\r\n\r\n    editor.events.on('destroy', () => {\r\n      if (editor.core.sameInstance(popups[id])) {\r\n        $('body').first().append(popups[id])\r\n        popups[id].removeClass('fr-active')\r\n      }\r\n    }, true)\r\n  }\r\n\r\n  /**\r\n   * Handles a checkbox label click event\r\n   */\r\n  function _checkboxLabelClick() {\r\n    // Get checkbox next to the label\r\n    const $checkbox = $(this).prev().children().first()\r\n\r\n    // Toggle the checkbox\r\n    $checkbox.attr('checked', !$checkbox.attr('checked'))\r\n  }\r\n\r\n  /**\r\n   * Create a popup.\r\n   */\r\n  function create(id, template) {\r\n    const $popup = _build(id, template)\r\n\r\n    // Build events.\r\n    const ev = _events(id)\r\n\r\n    // Events binded here should be assigned in every instace.\r\n    _bindInstanceEvents(ev, id)\r\n\r\n    // Input Focus / Blur / Keydown.\r\n    editor.events.$on($popup, 'mousedown mouseup touchstart touchend touch', '*', ev._preventFocus, true)\r\n    editor.events.$on($popup, 'focus', 'input, textarea, button, select', ev._inputFocus, true)\r\n    editor.events.$on($popup, 'blur', 'input, textarea, button, select', ev._inputBlur, true)\r\n\r\n    // Attach focus and blur events for transitions\r\n    let $labelElms = $popup.find('input, textarea')\r\n    _addLabel($labelElms)\r\n\r\n    editor.events.$on($labelElms, 'focus', _inputRefreshEmptyOnFocus)\r\n    editor.events.$on($labelElms, 'blur change', _inputRefreshEmptyOnBlur)\r\n\r\n    // Toggle the checkbox on click on label\r\n    editor.events.$on($popup, 'click', '.fr-checkbox + label', _checkboxLabelClick)\r\n\r\n    // Register popup to handle keyboard accessibility.\r\n    editor.accessibility.registerPopup(id)\r\n\r\n    // Toggle checkbox.\r\n    if (editor.helpers.isIOS()) {\r\n      editor.events.$on($popup, 'touchend', 'label', function () {\r\n        $(`#${$(this).attr('for')}`).prop('checked', (i, val) => !val)\r\n      }, true)\r\n    }\r\n\r\n    // Window mouseup.\r\n    editor.events.$on($(editor.o_win), 'resize', ev._windowResize, true)\r\n\r\n    if (id === 'filesManager.insert') {\r\n      popups['filesManager.insert'].css('zIndex', 2147483641)\r\n    }\r\n    return $popup\r\n  }\r\n\r\n  /**\r\n   * Destroy.\r\n   */\r\n  function _destroy() {\r\n    for (const id in popups) {\r\n      if (Object.prototype.hasOwnProperty.call(popups, id)) {\r\n        const $popup = popups[id]\r\n\r\n        if ($popup) {\r\n          $popup.html('').removeData().remove()\r\n          popups[id] = null\r\n        }\r\n      }\r\n    }\r\n\r\n    popups = []\r\n  }\r\n\r\n  /**\r\n   * Initialization.\r\n   */\r\n  function _init() {\r\n    screenHeightofBrowser = window.innerHeight\r\n    editor.events.on('shared.destroy', _destroy, true)\r\n\r\n    editor.events.on('window.mousedown', _markExit)\r\n    editor.events.on('window.touchmove', _unmarkExit)\r\n\r\n    // Prevent hiding popups while we scroll.\r\n    editor.events.$on($(editor.o_win), 'scroll', _unmarkExit)\r\n\r\n    editor.events.on('mousedown', (e) => {\r\n      if (areVisible()) {\r\n        e.stopPropagation()\r\n\r\n        // Remove markers.\r\n        editor.$el.find('.fr-marker').remove()\r\n\r\n        // Prepare for exit.\r\n        _markExit()\r\n\r\n        // Disable blur.\r\n        editor.events.disableBlur()\r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    create,\r\n    get,\r\n    show,\r\n    hide,\r\n    onHide,\r\n    hideAll,\r\n    setContainer,\r\n    refresh,\r\n    onRefresh,\r\n    onShow,\r\n    isVisible,\r\n    setFileListHeight,\r\n    areVisible,\r\n    setPopupDimensions\r\n  }\r\n}\r\n","import '../ui/popups.js'\r\n\r\nimport FE from '../../editor.js'\r\n\r\nFE.MODULES.accessibility = function (editor) {\r\n  const $ = editor.$\r\n\r\n  // Flag to tell if mouseenter can blur popup elements with tabindex. This is in case that popup shows over the cursor so mouseenter should not blur immediately.\r\n  // FireFox issue.\r\n  let can_blur = true\r\n\r\n  /*\r\n   * Focus an element.\r\n   */\r\n  function focusToolbarElement($el) {\r\n    const contenteditableEl = editor.$el.find('[contenteditable=\"true\"]')\r\n    let focusedEditableEl = false\r\n    let ind = 0\r\n    // Check if there is a contenteditable element in focus.\r\n    while (contenteditableEl.get(ind)) {\r\n      if ($(contenteditableEl.get(ind)).is(':focus')) {\r\n        focusedEditableEl = true\r\n      }\r\n      ind++\r\n    }\r\n    // Check if it is empty.\r\n    // https://github.com/froala/wysiwyg-editor/issues/2427.\r\n    if (!$el || !$el.length || focusedEditableEl) {\r\n      return\r\n    }\r\n\r\n    // Add blur event handler on the element that do not reside on a popup.\r\n    if (!$el.data('blur-event-set') && !$el.parents('.fr-popup').length) {\r\n\r\n      // Set shared event for blur on element because it resides in a popup.\r\n      editor.events.$on($el, 'blur', () => {\r\n\r\n        // Get current instance.\r\n        const inst = $el.parents('.fr-toolbar, .fr-popup').data('instance') || editor\r\n\r\n        // Check if we should actually trigger blur.\r\n        if (inst.events.blurActive()  && !editor.core.hasFocus()) {\r\n          inst.events.trigger('blur')\r\n        }\r\n\r\n        // Allow blur.\r\n        // IE hack.\r\n        setTimeout(() => {\r\n          inst.events.enableBlur()\r\n        }, 100)\r\n      }, true)\r\n\r\n      $el.data('blur-event-set', true)\r\n    }\r\n\r\n    // Get current instance.\r\n    const inst = $el.parents('.fr-toolbar, .fr-popup').data('instance') || editor\r\n\r\n    // Do not allow blur on the editor until element focus.\r\n    inst.events.disableBlur()\r\n    $el.get(0).focus()\r\n\r\n    // Store it as the current focused element.\r\n    editor.shared.$f_el = $el\r\n  }\r\n\r\n  /*\r\n   * Focus first or last toolbar button.\r\n   */\r\n  function focusToolbar($tb, last) {\r\n    const position = last ? 'last' : 'first'\r\n    // Get all toobar buttons.\r\n    // Re-order the toolbar buttons\r\n    const $btn = _reorderToolbarButtons(_getVisibleToolbarButtons($tb))[position]()\r\n\r\n    if ($btn.length) {\r\n      focusToolbarElement($btn)\r\n\r\n      return true\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus a popup content element.\r\n   */\r\n  function focusContentElement($el) {\r\n\r\n    // Save editor selection only if the element we want to focus is input text or textarea.\r\n    if ($el.is('input, textarea, select')) {\r\n      saveSelection()\r\n    }\r\n\r\n    editor.events.disableBlur()\r\n    $el.get(0).focus()\r\n\r\n    return true\r\n  }\r\n\r\n  /*\r\n   * Focus popup's content.\r\n   */\r\n  function focusContent($content, backward) {\r\n\r\n    // First input.\r\n    let $first_input = $content.find('input, textarea, button, select').filter(function () {\r\n      return $(this).isVisible()\r\n    }).not(':disabled')\r\n\r\n    $first_input = backward ? $first_input.last() : $first_input.first()\r\n\r\n    if ($first_input.length) {\r\n      return focusContentElement($first_input)\r\n    }\r\n\r\n    if (editor.shared.with_kb) {\r\n\r\n      // Active item.\r\n      const $active_item = $content.findVisible('.fr-active-item').first()\r\n\r\n      if ($active_item.length) {\r\n        return focusContentElement($active_item)\r\n      }\r\n\r\n      // First element with tabindex.\r\n      const $first_tab_index = $content.findVisible('[tabIndex]').first()\r\n\r\n      if ($first_tab_index.length) {\r\n        return focusContentElement($first_tab_index)\r\n      }\r\n    }\r\n  }\r\n\r\n  function saveSelection() {\r\n    if (editor.$el.find('.fr-marker').length === 0 && editor.core.hasFocus()) {\r\n      editor.selection.save()\r\n    }\r\n  }\r\n\r\n  function restoreSelection() {\r\n\r\n    // Restore selection.\r\n    if (editor.$el.find('.fr-marker').length) {\r\n      editor.events.disableBlur()\r\n      editor.selection.restore()\r\n      editor.events.enableBlur()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus popup.\r\n   */\r\n  function focusPopup($popup) {\r\n\r\n    // Get popup content without fr-buttons toolbar.\r\n    const $popup_content = $popup.children().not('.fr-buttons')\r\n\r\n    // Blur popup on mouseenter.\r\n    if (!$popup_content.data('mouseenter-event-set')) {\r\n      editor.events.$on($popup_content, 'mouseenter', '[tabIndex]', (e) => {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // FireFox issue.\r\n        if (!can_blur) {\r\n\r\n          // Popup showed over the cursor.\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n\r\n          return\r\n        }\r\n        const $focused_item = $popup_content.find(':focus').first()\r\n\r\n        if ($focused_item.length && !$focused_item.is('input, button, textarea, select')) {\r\n          inst.events.disableBlur()\r\n          $focused_item.blur()\r\n          inst.events.disableBlur()\r\n          inst.events.focus()\r\n        }\r\n      })\r\n\r\n      $popup_content.data('mouseenter-event-set', true)\r\n    }\r\n\r\n    // Focus content if possible, else focus toolbar if the popup is opened with keyboard.\r\n    if (!focusContent($popup_content) && editor.shared.with_kb) {\r\n      focusToolbar($popup.find('.fr-buttons'))\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus modal.\r\n   */\r\n  function focusModal($modal) {\r\n\r\n    // Make sure we have focus on editing area.\r\n    if (!editor.core.hasFocus()) {\r\n      editor.events.disableBlur()\r\n      editor.events.focus()\r\n    }\r\n\r\n    // Save selection.\r\n    editor.accessibility.saveSelection()\r\n    editor.events.disableBlur()\r\n\r\n    // Blur editor and clear selection to enable arrow keys scrolling.\r\n    editor.el.blur()\r\n    editor.selection.clear()\r\n\r\n    editor.events.disableBlur()\r\n\r\n    if (editor.shared.with_kb) {\r\n      $modal.find('.fr-command[tabIndex], [tabIndex]').first().focus()\r\n    }\r\n    else {\r\n      $modal.find('[tabIndex]').first().focus()\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus popup toolbar or main toolbar.\r\n   */\r\n  function focusToolbars() {\r\n\r\n    // Look for active popup.\r\n    const $popup = editor.popups.areVisible()\r\n\r\n    if ($popup) {\r\n      const $tb = $popup.find('.fr-buttons')\r\n\r\n      if (!$tb.find('button:focus, .fr-group span:focus').length) {\r\n        return !focusToolbar($tb)\r\n      }\r\n\r\n      return !focusToolbar($popup.data('instance').$tb)\r\n\r\n    }\r\n\r\n    // Focus main toolbar if no others were found.\r\n    return !focusToolbar(editor.$tb)\r\n  }\r\n\r\n  /*\r\n   * Get the dropdown button that is active and is focused or is active and its commands are focused.\r\n   */\r\n  function _getActiveFocusedDropdown() {\r\n    let $activeDropdown = null\r\n\r\n    // Is active and focused.\r\n    if (editor.shared.$f_el.is('.fr-dropdown.fr-active')) {\r\n      $activeDropdown = editor.shared.$f_el\r\n    }\r\n\r\n    // Is active and its commands are focused. editor.shared.$f_el is a dropdown command.\r\n    else if (editor.shared.$f_el.closest('.fr-dropdown-menu').prev().is('.fr-dropdown.fr-active')) {\r\n      $activeDropdown = editor.shared.$f_el.closest('.fr-dropdown-menu').prev()\r\n    }\r\n\r\n    return $activeDropdown\r\n  }\r\n\r\n  /**\r\n   * Insert the more toolbar buttons after its corresponding more button\r\n   */\r\n  function _reorderToolbarButtons($buttons) {\r\n\r\n    // Get the more button position\r\n    let moreBtnIndex = -1\r\n    for (let i = 0; i < $buttons.length; i++) {\r\n      if ($($buttons[i]).hasClass('fr-open')) {\r\n        moreBtnIndex = i\r\n      }\r\n    }\r\n\r\n    // Get first open more toolbar button position\r\n    let firstMoreToolbarBtnIndex = $buttons.index(editor.$tb.find('.fr-more-toolbar.fr-expanded > button.fr-command').first())\r\n\r\n    // If atleast one more toolbar is expanded\r\n    if (firstMoreToolbarBtnIndex > 0 && moreBtnIndex !== -1) {\r\n      // Insert the more toolbar buttons after its more button\r\n      const $moreToolbarBtns = $buttons.slice(firstMoreToolbarBtnIndex, $buttons.length)\r\n      $buttons = $buttons.slice(0, firstMoreToolbarBtnIndex)\r\n      const left = $buttons.slice(0, moreBtnIndex + 1)\r\n      const right = $buttons.slice(moreBtnIndex + 1, $buttons.length)\r\n      \r\n      $buttons = left\r\n      \r\n      for (let i = 0; i < $moreToolbarBtns.length; i++) {\r\n        $buttons.push($moreToolbarBtns[i])\r\n      }\r\n\r\n      for (let i = 0; i < right.length; i++) {\r\n        $buttons.push(right[i])\r\n      }\r\n    }\r\n\r\n    return $buttons\r\n  }\r\n  \r\n  /**\r\n   * Returns the visible toolbar buttons\r\n   */\r\n  function _getVisibleToolbarButtons($tb) {\r\n    return $tb.findVisible('button:not(.fr-disabled), .fr-group span.fr-command').filter((btn) => {\r\n      const $moreToolbar = $(btn).parents('.fr-more-toolbar')\r\n      // Remove all the buttons which are not part of the open more toolbar\r\n      return ($moreToolbar.length === 0 || ($moreToolbar.length > 0 && $moreToolbar.hasClass('fr-expanded')))\r\n    })\r\n  }\r\n\r\n  function _moveHorizontally($tb, tab_key, forward) {\r\n    if (editor.shared.$f_el) {\r\n      const $activeDropdown = _getActiveFocusedDropdown()\r\n\r\n      // A focused active dropdown button.\r\n      if ($activeDropdown) {\r\n\r\n        // Unclick.\r\n        editor.button.click($activeDropdown)\r\n        editor.shared.$f_el = $activeDropdown\r\n      }\r\n\r\n      // Focus the next/previous button.\r\n\r\n      // Get all toobar buttons.\r\n      // Re-order the toolbar buttons\r\n      const $buttons = _reorderToolbarButtons(_getVisibleToolbarButtons($tb))\r\n\r\n      // Get focused button position.\r\n      let index = $buttons.index(editor.shared.$f_el)\r\n      \r\n      // Last or first button reached.\r\n      if (index === 0 && !forward || index === $buttons.length - 1 && forward) {\r\n        let status\r\n\r\n        // Focus content if last or first toolbar button is reached.\r\n        if (tab_key) {\r\n          if ($tb.parent().is('.fr-popup')) {\r\n            const $popup_content = $tb.parent().children().not('.fr-buttons')\r\n            status = !focusContent($popup_content, !forward)\r\n          }\r\n\r\n          if (status === false) {\r\n            editor.shared.$f_el = null\r\n          }\r\n        }\r\n\r\n        // Arrow used or popup listeners were not active.\r\n        if (!tab_key || status !== false) {\r\n\r\n          // Focus to the opposite side button of the toolbar.\r\n          focusToolbar($tb, !forward)\r\n        }\r\n      }\r\n      else {\r\n\r\n        // Focus next or previous button.\r\n        focusToolbarElement($($buttons.get(index + (forward ? 1 : -1))))\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  function moveForward($tb, tab_key) {\r\n    return _moveHorizontally($tb, tab_key, true)\r\n  }\r\n\r\n  function moveBackward($tb, tab_key) {\r\n    return _moveHorizontally($tb, tab_key)\r\n  }\r\n\r\n  function _moveVertically(down) {\r\n    if (editor.shared.$f_el) {\r\n\r\n      let $destination\r\n\r\n      // Dropdown button.\r\n      if (editor.shared.$f_el.is('.fr-dropdown.fr-active')) {\r\n\r\n        // Focus the first/last dropdown command.\r\n        if (down) {\r\n          $destination = editor.shared.$f_el.next().find('.fr-command:not(.fr-disabled)').first()\r\n        }\r\n        else {\r\n          $destination = editor.shared.$f_el.next().find('.fr-command:not(.fr-disabled)').last()\r\n        }\r\n\r\n        focusToolbarElement($destination)\r\n\r\n        return false\r\n      }\r\n\r\n      // Dropdown command.\r\n      else if (editor.shared.$f_el.is('a.fr-command')) {\r\n\r\n        // Focus the previous/next dropdown command.\r\n        if (down) {\r\n          $destination = editor.shared.$f_el.closest('li').nextAllVisible().first().find('.fr-command:not(.fr-disabled)').first()\r\n        }\r\n        else {\r\n          $destination = editor.shared.$f_el.closest('li').prevAllVisible().first().find('.fr-command:not(.fr-disabled)').first()\r\n        }\r\n\r\n        // Last or first button reached: Focus to the opposite side element of the dropdown.\r\n        if (!$destination.length) {\r\n          if (down) {\r\n            $destination = editor.shared.$f_el.closest('.fr-dropdown-menu').find('.fr-command:not(.fr-disabled)').first()\r\n          }\r\n          else {\r\n            $destination = editor.shared.$f_el.closest('.fr-dropdown-menu').find('.fr-command:not(.fr-disabled)').last()\r\n          }\r\n        }\r\n\r\n        focusToolbarElement($destination)\r\n\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  function moveDown() {\r\n\r\n    // Also enable dropdown opening on arrow down.\r\n    if (editor.shared.$f_el && editor.shared.$f_el.is('.fr-dropdown:not(.fr-active)')) {\r\n      return enter()\r\n    }\r\n\r\n    return _moveVertically(true)\r\n\r\n  }\r\n\r\n  function moveUp() {\r\n    return _moveVertically()\r\n  }\r\n\r\n  function enter() {\r\n    if (editor.shared.$f_el) {\r\n\r\n      // Check if the focused element is a dropdown button.\r\n      if (editor.shared.$f_el.hasClass('fr-dropdown')) {\r\n\r\n        // Do click and focus the first dropdown item.\r\n        editor.button.click(editor.shared.$f_el)\r\n      }\r\n      else if (editor.shared.$f_el.is('button.fr-back')) {\r\n        if (editor.opts.toolbarInline) {\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        const $popup = editor.popups.areVisible(editor)\r\n\r\n        // Previous popup will show up so we need to not default focus the popup because back popup button have to be focused.\r\n        if ($popup) {\r\n          editor.shared.with_kb = false\r\n        }\r\n\r\n        editor.button.click(editor.shared.$f_el)\r\n\r\n        // Focus back popup button.\r\n        focusPopupButton($popup)\r\n      }\r\n      else {\r\n        editor.events.disableBlur()\r\n        editor.button.click(editor.shared.$f_el)\r\n\r\n        // If it is a more button\r\n        if (editor.shared.$f_el.attr('data-group-name')) {\r\n          // Focus the first active button in the more toolbar only if the more toolbar is open\r\n          const $moreToolbar = editor.$tb.find(`.fr-more-toolbar[data-name=\"${editor.shared.$f_el.attr('data-group-name')}\"]`)\r\n          let $btn = editor.shared.$f_el\r\n          if ($moreToolbar.hasClass('fr-expanded')) {\r\n            $btn = $moreToolbar.findVisible('button:not(.fr-disabled)')['first']()\r\n          }\r\n          if ($btn) {\r\n            focusToolbarElement($btn)\r\n          }\r\n        }\r\n        else if (editor.shared.$f_el.attr('data-popup')) {\r\n\r\n          // Attach button to visible popup.\r\n          const $visible_popup = editor.popups.areVisible(editor)\r\n\r\n          if ($visible_popup) {\r\n            $visible_popup.data('popup-button', editor.shared.$f_el)\r\n          }\r\n        }\r\n        else if (editor.shared.$f_el.attr('data-modal')) {\r\n\r\n          // Attach button to visible modal.\r\n          const $visible_modal = editor.modals.areVisible(editor)\r\n\r\n          if ($visible_modal) {\r\n            $visible_modal.data('modal-button', editor.shared.$f_el)\r\n          }\r\n        }\r\n\r\n        editor.shared.$f_el = null\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  function focusEditor() {\r\n    if (editor.shared.$f_el) {\r\n      editor.events.disableBlur()\r\n      editor.shared.$f_el.blur()\r\n      editor.shared.$f_el = null\r\n    }\r\n\r\n    // Trigger custom behavior.\r\n    if (editor.events.trigger('toolbar.focusEditor') === false) {\r\n      return\r\n    }\r\n\r\n    editor.events.disableBlur()\r\n    editor.$el.get(0).focus()\r\n    editor.events.focus()\r\n  }\r\n\r\n  function esc($tb) {\r\n    if (editor.shared.$f_el) {\r\n      const $activeDropdown = _getActiveFocusedDropdown()\r\n\r\n      // Active focused dropdown.\r\n      if ($activeDropdown) {\r\n\r\n        // Unclick.\r\n        editor.button.click($activeDropdown)\r\n\r\n        // Focus the unactive dropdown.\r\n        focusToolbarElement($activeDropdown)\r\n      }\r\n\r\n      // Toolbar contains a back button.\r\n      else if ($tb.parent().findVisible('.fr-back').length) {\r\n        editor.shared.with_kb = false\r\n\r\n        if (editor.opts.toolbarInline) {\r\n\r\n          // Toolbar inline needs focus in order to show up.\r\n          editor.events.disableBlur()\r\n          editor.events.focus()\r\n        }\r\n        editor.button.exec($tb.parent().findVisible('.fr-back')).first()\r\n\r\n        // Focus back popup button.\r\n        focusPopupButton($tb.parent())\r\n      }\r\n\r\n      // A toolbar that gets opened from the editable area.\r\n      else if (editor.shared.$f_el.is('button, .fr-group span')) {\r\n        if ($tb.parent().is('.fr-popup')) {\r\n\r\n          // Restore selection.\r\n          editor.accessibility.restoreSelection()\r\n          editor.shared.$f_el = null\r\n\r\n          // Trigger custom behaviour.\r\n          if (editor.events.trigger('toolbar.esc') !== false) {\r\n\r\n            // Default behaviour.\r\n            // Hide popup.\r\n            editor.popups.hide($tb.parent())\r\n\r\n            // Show inline toolbar.\r\n            if (editor.opts.toolbarInline) {\r\n              editor.toolbar.showInline(null, true)\r\n            }\r\n\r\n            // Focus back popup button.\r\n            focusPopupButton($tb.parent())\r\n          }\r\n        }\r\n        else {\r\n          focusEditor()\r\n        }\r\n      }\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Execute shortcut.\r\n   */\r\n  function exec(e, $tb) {\r\n    const ctrlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? e.metaKey : e.ctrlKey\r\n\r\n    const keycode = e.which\r\n\r\n    let status = false\r\n\r\n    // Tab.\r\n    if (keycode === FE.KEYCODE.TAB && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveForward($tb, true)\r\n    }\r\n\r\n    // Arrow right -> .\r\n    else if (keycode === FE.KEYCODE.ARROW_RIGHT && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveForward($tb)\r\n    }\r\n\r\n    // Shift + Tab.\r\n    else if (keycode === FE.KEYCODE.TAB && !ctrlKey && e.shiftKey && !e.altKey) {\r\n      status = moveBackward($tb, true)\r\n    }\r\n\r\n    // Arrow left <- .\r\n    else if (keycode === FE.KEYCODE.ARROW_LEFT && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveBackward($tb)\r\n    }\r\n\r\n    // Arrow up.\r\n    else if (keycode === FE.KEYCODE.ARROW_UP && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveUp()\r\n    }\r\n\r\n    // Arrow down.\r\n    else if (keycode === FE.KEYCODE.ARROW_DOWN && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = moveDown()\r\n    }\r\n\r\n    // Enter.\r\n    else if ((keycode === FE.KEYCODE.ENTER || keycode === FE.KEYCODE.SPACE) && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = enter()\r\n    }\r\n\r\n    // Esc.\r\n    else if (keycode === FE.KEYCODE.ESC && !ctrlKey && !e.shiftKey && !e.altKey) {\r\n      status = esc($tb)\r\n    }\r\n\r\n    // Alt + F10.\r\n    else if (keycode === FE.KEYCODE.F10 && !ctrlKey && !e.shiftKey && e.altKey) {\r\n      status = focusToolbars()\r\n    }\r\n\r\n    // No focused element and no action done. Eg: popup is opened.\r\n    if (!editor.shared.$f_el && typeof status === 'undefined') {\r\n      status = true\r\n    }\r\n\r\n    // Check if key event is a browser action. Eg: Ctrl + R.\r\n    if (!status && editor.keys.isBrowserAction(e)) {\r\n      status = true\r\n    }\r\n\r\n    // Propagate to the next key listeners.\r\n    if (status) {\r\n      return true\r\n    }\r\n\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    return false\r\n\r\n  }\r\n\r\n  /*\r\n   * Register a toolbar to keydown event.\r\n   */\r\n  function registerToolbar($tb) {\r\n    if (!$tb || !$tb.length) {\r\n      return\r\n    }\r\n\r\n    // Hitting keydown on toolbar.\r\n    editor.events.$on($tb, 'keydown', (e) => {\r\n      // Allow only buttons.fr-command.\r\n      if (!$(e.target).is('a.fr-command, button.fr-command, .fr-group span.fr-command')) {\r\n        return true\r\n      }\r\n\r\n      // Get the current editor instance for the popup.\r\n      const inst = $tb.parents('.fr-popup').data('instance') || $tb.data('instance') || editor\r\n\r\n      // Keyboard used.\r\n      editor.shared.with_kb = true\r\n      const status = inst.accessibility.exec(e, $tb)\r\n      editor.shared.with_kb = false\r\n\r\n      return status\r\n    }, true)\r\n\r\n    // Unfocus the toolbar on mouseenter.\r\n    editor.events.$on($tb, 'mouseenter', '[tabIndex]', (e) => {\r\n      const inst = $tb.parents('.fr-popup').data('instance') || $tb.data('instance') || editor\r\n\r\n      // FireFox issue.\r\n      if (!can_blur) {\r\n\r\n        // Popup showed over the cursor.\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n\r\n        return\r\n      }\r\n\r\n      const $hovered_el = $(e.currentTarget)\r\n\r\n      if (inst.shared.$f_el && inst.shared.$f_el.not($hovered_el)) {\r\n        inst.accessibility.focusEditor()\r\n      }\r\n\r\n    }, true)\r\n\r\n    // Update the focused shared variable after every transition\r\n    if (editor.$tb) {\r\n      editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', function() {\r\n        editor.shared.$f_el = $(document.activeElement)\r\n      })\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Register a popup to a keydown event.\r\n   */\r\n  function registerPopup(id) {\r\n    const $popup = editor.popups.get(id)\r\n    const ev = _getPopupEvents(id)\r\n\r\n    // Register popup toolbar.\r\n    registerToolbar($popup.find('.fr-buttons'))\r\n\r\n    // Clear popup button on mouseenter.\r\n    editor.events.$on($popup, 'mouseenter', 'tabIndex', ev._tiMouseenter, true)\r\n\r\n    // Keydown handler on every element that has tabIndex.\r\n    editor.events.$on($popup.children().not('.fr-buttons'), 'keydown', '[tabIndex]', ev._tiKeydown, true)\r\n\r\n    // Restore selection on popups hide for the current active popup.\r\n    editor.popups.onHide(id, () => {\r\n      const inst = $popup.data('instance') || editor\r\n      inst.accessibility.restoreSelection()\r\n    })\r\n\r\n    // FireFox issue: Prevent immediate popup bluring. Popup could show up over the cursor.\r\n    editor.popups.onShow(id, () => {\r\n      can_blur = false\r\n      setTimeout(() => {\r\n        can_blur = true\r\n      }, 0)\r\n    })\r\n  }\r\n\r\n  /*\r\n   * Get popup events.\r\n   */\r\n  function _getPopupEvents(id) {\r\n    const $popup = editor.popups.get(id)\r\n\r\n    return {\r\n      /**\r\n       * Keydown on an input.\r\n       */\r\n      _tiKeydown(e) {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        // See if plugins listeners are active.\r\n        if (inst.events.trigger('popup.tab', [e]) === false) {\r\n          return false\r\n        }\r\n\r\n        const key_code = e.which\r\n\r\n        const $focused_item = $popup.find(':focus').first()\r\n\r\n        // Tabbing.\r\n        if (FE.KEYCODE.TAB === key_code) {\r\n          e.preventDefault()\r\n\r\n          // Focus next/previous input.\r\n          const $popup_content = $popup.children().not('.fr-buttons')\r\n          const inputs = $popup_content.findVisible('input, textarea, button, select').not('.fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled').toArray()\r\n          const idx = inputs.indexOf(this) + (e.shiftKey ? -1 : 1)\r\n\r\n          if (idx >= 0 && idx < inputs.length) {\r\n            inst.events.disableBlur()\r\n            $(inputs[idx]).focus()\r\n\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n\r\n          // Focus toolbar.\r\n          const $tb = $popup.find('.fr-buttons')\r\n\r\n          if ($tb.length && focusToolbar($tb, Boolean(e.shiftKey))) {\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n\r\n          // Focus content.\r\n          if (focusContent($popup_content)) {\r\n            e.stopPropagation()\r\n\r\n            return false\r\n          }\r\n        }\r\n\r\n        // ENTER.\r\n        else if (FE.KEYCODE.ENTER === key_code && e.target && e.target.tagName !== 'TEXTAREA') {\r\n          let $active_button = null\r\n\r\n          if ($popup.findVisible('.fr-submit').length > 0) {\r\n            $active_button = $popup.findVisible('.fr-submit').first()\r\n          }\r\n          else if ($popup.findVisible('.fr-dismiss').length) {\r\n            $active_button = $popup.findVisible('.fr-dismiss').first()\r\n          }\r\n\r\n          if ($active_button) {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            inst.events.disableBlur()\r\n            inst.button.exec($active_button)\r\n          }\r\n        }\r\n\r\n        // ESC.\r\n        else if (FE.KEYCODE.ESC === key_code) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n\r\n          // Restore selection.\r\n          inst.accessibility.restoreSelection()\r\n\r\n          if (inst.popups.isVisible(id) && $popup.findVisible('.fr-back').length) {\r\n            if (inst.opts.toolbarInline) {\r\n\r\n              // Toolbar inline needs focus in order to show up.\r\n              inst.events.disableBlur()\r\n              inst.events.focus()\r\n            }\r\n            inst.button.exec($popup.findVisible('.fr-back').first())\r\n\r\n            // Focus back popup button.\r\n            focusPopupButton($popup)\r\n          }\r\n          else if (inst.popups.isVisible(id) && $popup.findVisible('.fr-dismiss').length) {\r\n            inst.button.exec($popup.findVisible('.fr-dismiss').first())\r\n          }\r\n          else {\r\n            inst.popups.hide(id)\r\n\r\n            if (inst.opts.toolbarInline) {\r\n              inst.toolbar.showInline(null, true)\r\n            }\r\n\r\n            // Focus back popup button.\r\n            focusPopupButton($popup)\r\n          }\r\n\r\n          return false\r\n        }\r\n\r\n        // Allow space.\r\n        else if (FE.KEYCODE.SPACE === key_code && ($focused_item.is('.fr-submit') || $focused_item.is('.fr-dismiss'))) {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n          inst.events.disableBlur()\r\n          inst.button.exec($focused_item)\r\n\r\n          return true\r\n        }\r\n\r\n        // Other KEY. Stop propagation to the window.\r\n        else {\r\n\r\n          // Check if key event is a browser action. Eg: Ctrl + R.\r\n          if (inst.keys.isBrowserAction(e)) {\r\n            e.stopPropagation()\r\n\r\n            return\r\n          }\r\n\r\n          if ($focused_item.is('input[type=text], textarea')) {\r\n            e.stopPropagation()\r\n\r\n            return\r\n          }\r\n\r\n          if (FE.KEYCODE.SPACE === key_code && ($focused_item.is('.fr-link-attr') || $focused_item.is('input[type=file]'))) {\r\n            e.stopPropagation()\r\n\r\n            return\r\n          }\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n\r\n          return false\r\n        }\r\n      },\r\n\r\n      _tiMouseenter() {\r\n        const inst = $popup.data('instance') || editor\r\n\r\n        _clearPopupButton(inst)\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus the button from which the popup was showed.\r\n   */\r\n  function focusPopupButton($popup) {\r\n    const $popup_button = $popup.data('popup-button')\r\n\r\n    if ($popup_button) {\r\n      setTimeout(() => {\r\n        focusToolbarElement($popup_button)\r\n        $popup.data('popup-button', null)\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Focus the button from which the modal was showed.\r\n   */\r\n  function focusModalButton($modal) {\r\n    const $modal_button = $modal.data('modal-button')\r\n\r\n    if ($modal_button) {\r\n      setTimeout(() => {\r\n        focusToolbarElement($modal_button)\r\n        $modal.data('modal-button', null)\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  function hasFocus() {\r\n    return editor.shared.$f_el !== null\r\n  }\r\n\r\n  function _clearPopupButton(inst) {\r\n    const $visible_popup = editor.popups.areVisible(inst)\r\n\r\n    if ($visible_popup) {\r\n      $visible_popup.data('popup-button', null)\r\n    }\r\n  }\r\n\r\n  function _editorKeydownHandler(e) {\r\n    const ctrlKey = navigator.userAgent.indexOf('Mac OS X') !== -1 ? e.metaKey : e.ctrlKey\r\n    const keycode = e.which\r\n\r\n    // Alt + F10.\r\n    if (keycode === FE.KEYCODE.F10 && !ctrlKey && !e.shiftKey && e.altKey) {\r\n\r\n      // Keyboard used.\r\n      editor.shared.with_kb = true\r\n\r\n      // Focus active popup content inside the current editor if possible, else focus an available toolbar.\r\n      const $visible_popup = editor.popups.areVisible(editor)\r\n      let focused_content = false\r\n\r\n      if ($visible_popup) {\r\n        focused_content = focusContent($visible_popup.children().not('.fr-buttons'))\r\n      }\r\n\r\n      if (!focused_content) {\r\n        focusToolbars()\r\n      }\r\n\r\n      editor.shared.with_kb = false\r\n\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Initialize.\r\n   */\r\n  function _init() {\r\n\r\n    // Key down on the editing area.\r\n    if (editor.$wp) {\r\n      editor.events.on('keydown', _editorKeydownHandler, true)\r\n    }\r\n    else {\r\n      editor.events.$on(editor.$win, 'keydown', _editorKeydownHandler, true)\r\n    }\r\n\r\n    // Mousedown on the editing area.\r\n    editor.events.on('mousedown', (e) => {\r\n      _clearPopupButton(editor)\r\n\r\n      if (editor.shared.$f_el && editor.el.isSameNode(editor.shared.$f_el[0])) {\r\n        editor.accessibility.restoreSelection()\r\n        e.stopPropagation()\r\n        editor.events.disableBlur()\r\n        editor.shared.$f_el = null\r\n      }\r\n    }, true)\r\n\r\n    // Blur on the editing area.\r\n    editor.events.on('blur', () => {\r\n      editor.shared.$f_el = null\r\n      _clearPopupButton(editor)\r\n    }, true)\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    registerPopup,\r\n    registerToolbar,\r\n    focusToolbarElement,\r\n    focusToolbar,\r\n    focusContent,\r\n    focusPopup,\r\n    focusModal,\r\n    focusEditor,\r\n    focusPopupButton,\r\n    focusModalButton,\r\n    hasFocus,\r\n    exec,\r\n    saveSelection,\r\n    restoreSelection\r\n  }\r\n}\r\n","import FE from '../../editor.js'\n\n// Extend defaults.\nObject.assign(FE.DEFAULTS, {\n  tooltips: true\n})\n\nFE.MODULES.tooltip = function (editor) {\n  const $ = editor.$\n\n  function hide() {\n    if (editor.helpers.isMobile()) {\n      return\n    }\n\n    // Position fixed for: https://github.com/froala/wysiwyg-editor/issues/1247.\n    if (editor.$tooltip) {\n      editor.$tooltip.removeClass('fr-visible').css('left', '-3000px').css('position', 'fixed')\n    }\n  }\n\n  function to($el, above) {\n    if (editor.helpers.isMobile()) {\n      return\n    }\n\n    if (!$el.data('title')) {\n      $el.data('title', $el.attr('title'))\n    }\n\n    if (!$el.data('title')) {\n      return\n    }\n\n    if (!editor.$tooltip) {\n      _init()\n    }\n\n    $el.removeAttr('title')\n    editor.$tooltip.text(editor.language.translate($el.data('title')))\n    editor.$tooltip.addClass('fr-visible')\n\n    let left = $el.offset().left + ($el.outerWidth() - editor.$tooltip.outerWidth()) / 2\n\n    // Normalize screen position.\n    if (left < 0) {\n      left = 0\n    }\n\n    if (left + editor.$tooltip.outerWidth() > $(editor.o_win).width()) {\n      left = $(editor.o_win).width() - editor.$tooltip.outerWidth()\n    }\n\n    if (typeof above === 'undefined') {\n      above = editor.opts.toolbarBottom\n    }\n\n    if ((($el.offset().top - $(window).scrollTop()) + $el.outerHeight() + 10) >= $(window).height()) {\n      above = true\n    }\n\n    const top = !above ? $el.offset().top + $el.outerHeight() : $el.offset().top - editor.$tooltip.height()\n\n    editor.$tooltip.css('position', '')\n    editor.$tooltip.css('left', left)\n    editor.$tooltip.css('top', Math.ceil(top))\n\n    if ($(editor.o_doc).find('body').first().css('position') !== 'static') {\n      editor.$tooltip.css('margin-left', -$(editor.o_doc).find('body').first().offset().left)\n      editor.$tooltip.css('margin-top', -$(editor.o_doc).find('body').first().offset().top)\n    }\n    else {\n      editor.$tooltip.css('margin-left', '')\n      editor.$tooltip.css('margin-top', '')\n    }\n  }\n\n  function bind($el, selector, above) {\n    if (editor.opts.tooltips && !editor.helpers.isMobile()) {\n      editor.events.$on($el, 'mouseover', selector, (e) => {\n        if (!editor.node.hasClass(e.currentTarget, 'fr-disabled') && !editor.edit.isDisabled()) {\n          to($(e.currentTarget), above)\n        }\n      }, true)\n\n      editor.events.$on($el, `mouseout ${editor._mousedown} ${editor._mouseup}`, selector, () => {\n        hide()\n      }, true)\n    }\n  }\n\n  function _init() {\n    if (editor.opts.tooltips && !editor.helpers.isMobile()) {\n      if (!editor.shared.$tooltip) {\n        editor.shared.$tooltip = $(editor.doc.createElement('DIV')).addClass('fr-tooltip')\n\n        editor.$tooltip = editor.shared.$tooltip\n\n        if (editor.opts.theme) {\n          editor.$tooltip.addClass(`${editor.opts.theme}-theme`)\n        }\n\n        $(editor.o_doc).find('body').first().append(editor.$tooltip)\n      }\n      else {\n        editor.$tooltip = editor.shared.$tooltip\n      }\n\n      editor.events.on('shared.destroy', () => {\n        editor.$tooltip.html('').removeData().remove()\n        editor.$tooltip = null\n      }, true)\n    }\n  }\n\n  return {\n    hide,\n    to,\n    bind\n  }\n}\n","import './tooltip.js'\n\nimport FE from '../../editor.js'\n\nFE.TOOLBAR_VISIBLE_BUTTONS = 3\n\nFE.MODULES.button = function (editor) {\n  const $ = editor.$\n\n  let buttons = []\n\n  if (editor.opts.toolbarInline || editor.opts.toolbarContainer) {\n    if (!editor.shared.buttons) {\n      editor.shared.buttons = []\n    }\n    buttons = editor.shared.buttons\n  }\n\n  let popup_buttons = []\n\n  if (!editor.shared.popup_buttons) {\n    editor.shared.popup_buttons = []\n  }\n  popup_buttons = editor.shared.popup_buttons\n\n  /**\n   * Add a new button to the buttons list\n   */\n  function addButtons($btns) {\n    for (let i = 0; i < $btns.length; i++) {\n      buttons.push($btns)\n    }\n  }\n\n  /*\n   * Filter buttons based on a specified selector.\n   */\n  function _filterButtons(butons_list, selector, search_dropdowns) {\n\n    let $filtered_buttons = $()\n\n    for (let i = 0; i < butons_list.length; i++) {\n      const $button = $(butons_list[i])\n\n      if ($button.is(selector)) {\n        $filtered_buttons = $filtered_buttons.add($button)\n      }\n\n      // Search for dropdowns menuitems\n      if (search_dropdowns && $button.is('.fr-dropdown')) {\n        const $dropdown_menu_items = $button.next().find(selector)\n        $filtered_buttons = $filtered_buttons.add($dropdown_menu_items)\n      }\n    }\n\n    return $filtered_buttons\n  }\n\n  /*\n   * Get all buttons from page based on a specified selector.\n   */\n  function getButtons(selector, search_dropdowns) {\n\n    let $buttons = $()\n    let id\n\n    if (!selector) {\n\n      return $buttons\n    }\n\n    // Search all toolbar buttons.\n    $buttons = $buttons.add(_filterButtons(buttons, selector, search_dropdowns))\n\n    // Search all popups buttons.\n    $buttons = $buttons.add(_filterButtons(popup_buttons, selector, search_dropdowns))\n\n    // Look in popup's content.\n    for (id in editor.shared.popups) {\n\n      if (Object.prototype.hasOwnProperty.call(editor.shared.popups, id)) {\n        const $popup = editor.shared.popups[id]\n        const $popup_buttons = $popup.children().find(selector)\n        $buttons = $buttons.add($popup_buttons)\n      }\n    }\n\n    // Look in modal's content.\n    for (id in editor.shared.modals) {\n\n      if (Object.prototype.hasOwnProperty.call(editor.shared.modals, id)) {\n        const $modal_hash = editor.shared.modals[id]\n        const $modal_buttons = $modal_hash.$modal.find(selector)\n        $buttons = $buttons.add($modal_buttons)\n      }\n    }\n\n    return $buttons\n  }\n\n  /*\n  To get popup position with respect to element\n  */\n  function getPosition($elm) {\n    const left = $elm.offset().left\n    const toolbarBottomOffset = 10\n    const topOffset = (editor.opts.toolbarBottom ? toolbarBottomOffset : $elm.outerHeight() - toolbarBottomOffset)\n    const top = $elm.offset().top + topOffset\n    return { left, top }\n  }\n\n  /**\n   * Expands the dropdown\n   */\n  function _expandDropdown($dropdownWrapper, height, maxHeight) {\n    // Show scroll only when height of the dropdown is more than max height\n    if (height >= maxHeight) {\n      $dropdownWrapper.parent().css('overflow', 'auto')\n    }\n\n    // Height of the dropdown is minimum of its content height and dropdown max height\n    $dropdownWrapper.css('height', Math.min(height, maxHeight))\n  }\n\n  /**\n   * Click was made on a dropdown button.\n   */\n  function _dropdownButtonClick($btn) {\n    const $dropdown = $btn.next()\n\n    const active = editor.node.hasClass($btn.get(0), 'fr-active')\n\n    const $active_dropdowns = getButtons('.fr-dropdown.fr-active').not($btn)\n\n    const inst = $btn.parents('.fr-toolbar, .fr-popup').data('instance') || editor\n\n    // Hide keyboard. We need the entire space.\n    if (inst.helpers.isIOS() && !inst.el.querySelector('.fr-marker')) {\n      inst.selection.save()\n      inst.selection.clear()\n      inst.selection.restore()\n    }\n\n    $dropdown.parents('.fr-more-toolbar').addClass('fr-overflow-visible')\n\n    let ht = 0\n    let dropdownMaxHeight = 0\n    let $dropdownWrapper = $dropdown.find('> .fr-dropdown-wrapper')\n\n    // Dropdown is not active.\n    if (!active) {\n      // Call refresh on show.\n      const cmd = $btn.data('cmd')\n      $dropdown.find('.fr-command').removeClass('fr-active').attr('aria-selected', false)\n\n      if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].refreshOnShow) {\n        FE.COMMANDS[cmd].refreshOnShow.apply(inst, [$btn, $dropdown])\n      }\n\n      $dropdown.css('left', $btn.offset().left - $btn.parents('.fr-btn-wrap, .fr-toolbar, .fr-buttons').offset().left - (editor.opts.direction === 'rtl' ? $dropdown.width() - $btn.outerWidth() : 0))\n\n      // Test height.\n      $dropdown.addClass('test-height')\n      ht = $dropdown.outerHeight()\n      dropdownMaxHeight = editor.helpers.getPX($dropdownWrapper.css('max-height'))\n      $dropdown.removeClass('test-height')\n\n      // Reset top and bottom.\n      $dropdown.css('top', '').css('bottom', '')\n\n      // Just to overlap the button with the dropdown by a bit\n      const dropdownOffsetTop = $btn.outerHeight() / 10\n\n      // Toolbar top or dropdown is exceeding the window.\n      if (!editor.opts.toolbarBottom && $dropdown.offset().top + $btn.outerHeight() + ht < $(editor.o_doc).height()) {\n        $dropdown.css('top', $btn.position().top + $btn.outerHeight() - dropdownOffsetTop)\n      }\n      else {\n        let moreToolbarHeight = 0\n        const $moreToolbar = $btn.parents('.fr-more-toolbar')\n        if ($moreToolbar.length > 0) {\n          moreToolbarHeight = $moreToolbar.first().height()\n        }\n        $dropdown.css('bottom', $btn.parents('.fr-popup, .fr-toolbar').first().height() - moreToolbarHeight - $btn.position().top)\n      }\n    }\n\n    // Blink and activate.\n    $btn.addClass('fr-blink').toggleClass('fr-active')\n\n    if ($btn.hasClass('fr-options')) {\n      const $prevBtn = $btn.prev()\n      $prevBtn.toggleClass('fr-expanded')\n    }\n\n    if ($btn.hasClass('fr-active')) {\n      $dropdown.attr('aria-hidden', false)\n      $btn.attr('aria-expanded', true)\n      \n      // Expand the dropdown\n      _expandDropdown($dropdownWrapper, ht, dropdownMaxHeight)\n    }\n    else {\n      $dropdown.attr('aria-hidden', true).css('overflow', '')\n      $btn.attr('aria-expanded', false)\n\n      // Close active dropdowns\n      $dropdownWrapper.css('height', '')\n    }\n\n    setTimeout(() => {\n      $btn.removeClass('fr-blink')\n    }, 300)\n\n    // Reset left margin for dropdown.\n    $dropdown.css('margin-left', '')\n\n    // Check if it exceeds window on the right.\n    if ($dropdown.offset().left + $dropdown.outerWidth() > editor.$sc.offset().left + editor.$sc.width()) {\n      $dropdown.css('margin-left', -($dropdown.offset().left + $dropdown.outerWidth() - editor.$sc.offset().left - editor.$sc.width()))\n    }\n\n    // Check if it exceeds window on the left.\n    if ($dropdown.offset().left < editor.$sc.offset().left && editor.opts.direction === 'rtl') {\n      $dropdown.css('margin-left', editor.$sc.offset().left)\n    }\n\n    // Hide dropdowns that might be active.\n    // Close active dropdowns\n    $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\n    $active_dropdowns.prev('.fr-expanded').removeClass('fr-expanded')\n    $active_dropdowns.parents('.fr-toolbar:not(.fr-inline)').css('zIndex', '')\n\n    if ($btn.parents('.fr-popup').length === 0 && !editor.opts.toolbarInline) {\n      if (editor.node.hasClass($btn.get(0), 'fr-active')) {\n        editor.$tb.css('zIndex', (editor.opts.zIndex || 1) + 4)\n      }\n      else {\n        editor.$tb.css('zIndex', '')\n      }\n    }\n\n    // Focus the active element or the dropdown button to enable accessibility.\n    const $active_element = $dropdown.find('a.fr-command.fr-active').first()\n\n    // We do not need to focus on mobile.\n    if (!editor.helpers.isMobile()) {\n\n      if ($active_element.length) {\n        editor.accessibility.focusToolbarElement($active_element)\n\n        // Scroll the selected element to the middle\n        $dropdownWrapper.scrollTop(Math.abs($active_element.parents('.fr-dropdown-content').offset().top - $active_element.offset().top) - $active_element.offset().top)\n      }\n      else {\n        editor.accessibility.focusToolbarElement($btn)\n        $dropdownWrapper.scrollTop(0)\n      }\n    }\n  }\n\n  function exec($btn) {\n\n    // Blink.\n    $btn.addClass('fr-blink')\n    setTimeout(() => {\n      $btn.removeClass('fr-blink')\n    }, 500)\n\n    // Get command, value and additional params.\n    const cmd = $btn.data('cmd')\n    const params = []\n\n    while (typeof $btn.data(`param${params.length + 1}`) !== 'undefined') {\n      params.push($btn.data(`param${params.length + 1}`))\n    }\n\n    // Hide dropdowns that might be active including the current one.\n    const $active_dropdowns = getButtons('.fr-dropdown.fr-active')\n\n    if ($active_dropdowns.length) {\n      $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\n      $active_dropdowns.prev('.fr-expanded').removeClass('fr-expanded')\n      $active_dropdowns.parents('.fr-toolbar:not(.fr-inline)').css('zIndex', '')\n    }\n\n    // Call the command.\n    $btn.parents('.fr-popup, .fr-toolbar').data('instance').commands.exec(cmd, params)\n  }\n\n  /**\n   * Click was made on a command button.\n   */\n  function _commandButtonClick($btn) {\n    exec($btn)\n  }\n\n  function click($btn) {\n    // Get current editor instance\n    const inst = $btn.parents('.fr-popup, .fr-toolbar').data('instance')\n\n    // Active popup button only if it is not active\n    if ($btn.parents('.fr-popup').length === 0 && $btn.data('popup') && !$btn.hasClass('fr-btn-active-popup')) {\n      $btn.addClass('fr-btn-active-popup')\n    }\n\n    if ($btn.parents('.fr-popup').length === 0 && !$btn.data('popup')) {\n      inst.popups.hideAll()\n    }\n\n    // Popups are visible, but not in the current instance.\n    if (inst.popups.areVisible() && !inst.popups.areVisible(inst)) {\n\n      // Hide markers in other instances.\n      for (let i = 0; i < FE.INSTANCES.length; i++) {\n        if (FE.INSTANCES[i] !== inst && FE.INSTANCES[i].popups && FE.INSTANCES[i].popups.areVisible()) {\n          FE.INSTANCES[i].$el.find('.fr-marker').remove()\n        }\n      }\n\n      inst.popups.hideAll()\n    }\n\n    // Dropdown button.\n    if (editor.node.hasClass($btn.get(0), 'fr-dropdown')) {\n      _dropdownButtonClick($btn)\n    }\n\n    // Regular button.\n    else {\n      _commandButtonClick($btn)\n\n      if (FE.COMMANDS[$btn.data('cmd')] && FE.COMMANDS[$btn.data('cmd')].refreshAfterCallback !== false) {\n        inst.button.bulkRefresh()\n      }\n    }\n  }\n\n  function _click(e) {\n    const $btn = $(e.currentTarget)\n\n    click($btn)\n  }\n\n  function hideActiveDropdowns($el) {\n    const $active_dropdowns = $el.find('.fr-dropdown.fr-active')\n\n    if ($active_dropdowns.length) {\n      $active_dropdowns.removeClass('fr-active').attr('aria-expanded', false).next().attr('aria-hidden', true).css('overflow', '').find('> .fr-dropdown-wrapper').css('height', '')\n\n      $active_dropdowns.parents('.fr-toolbar:not(.fr-inline)').css('zIndex', '')\n      $active_dropdowns.prev().removeClass('fr-expanded')\n    }\n  }\n\n  /**\n   * Click in the dropdown menu.\n   */\n  function _dropdownMenuClick(e) {\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  /**\n   * Click on the dropdown wrapper.\n   */\n  function _dropdownWrapperClick(e) {\n    e.stopPropagation()\n\n    // Prevent blurring.\n    if (!editor.helpers.isMobile()) {\n      return false\n    }\n  }\n\n  /**\n   * Bind callbacks for commands.\n   */\n  function bindCommands($el, tooltipAbove) {\n    editor.events.bindClick($el, '.fr-command:not(.fr-disabled)', _click)\n\n    // Click on the dropdown menu.\n    editor.events.$on($el, `${editor._mousedown} ${editor._mouseup} ${editor._move}`, '.fr-dropdown-menu', _dropdownMenuClick, true)\n\n    // Click on the dropdown wrapper.\n    editor.events.$on($el, `${editor._mousedown} ${editor._mouseup} ${editor._move}`, '.fr-dropdown-menu .fr-dropdown-wrapper', _dropdownWrapperClick, true)\n\n    // Hide dropdowns that might be active.\n    const _document = $el.get(0).ownerDocument\n    const _window = 'defaultView' in _document ? _document.defaultView : _document.parentWindow\n\n    function hideDropdowns(e) {\n      if (!e || e.type === editor._mouseup && e.target !== $('html').get(0) || e.type === 'keydown' && (editor.keys.isCharacter(e.which) && !editor.keys.ctrlKey(e) || e.which === FE.KEYCODE.ESC)) {\n        hideActiveDropdowns($el)\n      }\n    }\n    editor.events.$on($(_window), `${editor._mouseup} resize keydown`, hideDropdowns, true)\n\n    if (editor.opts.iframe) {\n      editor.events.$on(editor.$win, editor._mouseup, hideDropdowns, true)\n    }\n\n    // Add refresh.\n    if (editor.node.hasClass($el.get(0), 'fr-popup')) {\n      $.merge(popup_buttons, $el.find('.fr-btn').toArray())\n    }\n    else {\n      $.merge(buttons, $el.find('.fr-btn').toArray())\n    }\n\n    // Assing tooltips to buttons.\n    editor.tooltip.bind($el, '.fr-btn, .fr-title', tooltipAbove)\n  }\n\n  /**\n   * Create the content for dropdown.\n   */\n  function _content(command, info) {\n    let c = ''\n\n    if (info.html) {\n      if (typeof info.html === 'function') {\n        c += info.html.call(editor)\n      }\n      else {\n        c += info.html\n      }\n    }\n    else {\n      let options = info.options\n\n      if (typeof options === 'function') {\n        options = options()\n      }\n\n      c += '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\n\n      for (const val in options) {\n        if (Object.prototype.hasOwnProperty.call(options, val)) {\n          let shortcut = editor.shortcuts.get(`${command}.${val}`)\n\n          if (shortcut) {\n            shortcut = `<span class=\"fr-shortcut\">${shortcut}</span>`\n          }\n          else {\n            shortcut = ''\n          }\n\n          c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"${(info.type === 'options' ? command.replace(/Options/g, '') : command)}\" data-param1=\"${val}\" title=\"${options[val]}\">${editor.language.translate(options[val])}</a></li>`\n        }\n      }\n      c += '</ul>'\n    }\n\n    return c\n  }\n\n  /**\n   * Create button.\n   */\n  function build(command, info = {}, visible) {\n    if (editor.helpers.isMobile() && info.showOnMobile === false) {\n      return ''\n    }\n\n    let display_selection = info.displaySelection\n\n    if (typeof display_selection === 'function') {\n      display_selection = display_selection(editor)\n    }\n\n    let icon = ''\n\n    if (info.type !== 'options') {\n      if (display_selection) {\n        const default_selection = typeof info.defaultSelection === 'function' ? info.defaultSelection(editor) : info.defaultSelection\n        icon = `<span style=\"width:${info.displaySelectionWidth || 100}px\">${editor.language.translate(default_selection || info.title)}</span>`\n      }\n      else {\n        icon = editor.icon.create(info.icon || command)\n\n        // Used instead of aria-label. The advantage is that it also display text when the css is disabled.\n        icon += `<span class=\"fr-sr-only\">${editor.language.translate(info.title) || ''}</span>`\n      }\n    }\n\n    const popup = info.popup ? ' data-popup=\"true\"' : ''\n\n    const modal = info.modal ? ' data-modal=\"true\"' : ''\n\n    let shortcut = editor.shortcuts.get(`${command}.`)\n\n    if (shortcut) {\n      shortcut = ` (${shortcut})`\n    }\n    else {\n      shortcut = ''\n    }\n\n    // Add custom id if present\n    const button_id = `${command}-${editor.id}`\n\n    const dropdown_id = `dropdown-menu-${button_id}`\n\n    let btn = `<button id=\"${button_id}\"${info.more_btn ? ` data-group-name=\"${button_id}\" `: ''}type=\"button\" tabIndex=\"-1\" role=\"button\"${info.toggle ? ' aria-pressed=\"false\"' : ''}${info.type === 'dropdown' || info.type === 'options' ? ` aria-controls=\"${dropdown_id}\" aria-expanded=\"false\" aria-haspopup=\"true\"` : ''}${info.disabled ? ' aria-disabled=\"true\"' : ''} title=\"${editor.language.translate(info.title) || ''}${shortcut}\" class=\"fr-command fr-btn${info.type === 'dropdown' || info.type == 'options' ? ' fr-dropdown' : ''}${(info.type == 'options' ? ' fr-options' : '')}${(info.type == 'more' ? ' fr-more' : '')}${info.displaySelection ? ' fr-selection' : ''}${info.back ? ' fr-back' : ''}${info.disabled ? ' fr-disabled' : ''}${!visible ? ' fr-hidden' : ''}\" data-cmd=\"${command}\"${popup}${modal}>${icon}</button>`\n\n    if (info.type === 'dropdown' || info.type === 'options') {\n\n      // Build dropdown.\n      let dropdown = `<div id=\"${dropdown_id}\" class=\"fr-dropdown-menu\" role=\"listbox\" aria-labelledby=\"${button_id}\" aria-hidden=\"true\"><div class=\"fr-dropdown-wrapper\" role=\"presentation\"><div class=\"fr-dropdown-content\" role=\"presentation\">`\n\n      dropdown += _content(command, info)\n\n      dropdown += '</div></div></div>'\n\n      btn += dropdown\n    }\n\n    if (info.hasOptions && info.hasOptions.apply(editor)) {\n      btn = `<div class=\"fr-btn-wrap\">${btn} ${build(command + 'Options', Object.assign({}, info, { type: 'options', hasOptions: false }), visible)}  </div>`\n    }\n\n    return btn\n  }\n\n  function buildList(buttons, visible_buttons) {\n    let str = ''\n\n    for (let i = 0; i < buttons.length; i++) {\n      const cmd_name = buttons[i]\n      const cmd_info = FE.COMMANDS[cmd_name]\n\n      if (cmd_info && typeof cmd_info.plugin !== 'undefined' && editor.opts.pluginsEnabled.indexOf(cmd_info.plugin) < 0) {\n        continue\n      }\n\n      if (cmd_info) {\n        const visible = typeof visible_buttons !== 'undefined' ? visible_buttons.indexOf(cmd_name) >= 0 : true\n        str += build(cmd_name, cmd_info, visible)\n      }\n      else if (cmd_name === '|') {\n        str += '<div class=\"fr-separator fr-vs\" role=\"separator\" aria-orientation=\"vertical\"></div>'\n      }\n      else if (cmd_name === '-') {\n        str += '<div class=\"fr-separator fr-hs\" role=\"separator\" aria-orientation=\"horizontal\"></div>'\n      }\n    }\n\n    return str\n  }\n\n  /**\n   * Build button groups html\n   */\n  function buildGroup(buttonGroups){\n\n    // Toolbar Groups HTML\n    let mainToolbarGroupsHTML = ''\n    let moreToolbarGroupsHTML = ''\n\n    for (const groupName in buttonGroups) {\n\n      let buttonGroup = buttonGroups[groupName]\n\n      // Ignore non-button groups\n      if (!buttonGroup.buttons) {\n        continue\n      }\n\n      // Current button group Details\n      let mainToolbarButtonsHTML = ''\n      let moreToolbarButtonsHTML = ''\n      let buttonCount = 0\n      let alignment = 'left'\n      let visibleButtons = FE.TOOLBAR_VISIBLE_BUTTONS\n\n      for(let i = 0; i < buttonGroup.buttons.length; i++) {\n\n        // Get command name\n        const cmdName = buttonGroup.buttons[i]\n\n        // Get command details\n        const cmdInfo = FE.COMMANDS[cmdName]\n\n        if (!cmdInfo) {\n          if (cmdName == '|') {\n            mainToolbarButtonsHTML += '<div class=\"fr-separator fr-vs\" role=\"separator\" aria-orientation=\"vertical\"></div>'\n          }\n          else if (cmdName == '-') {\n            mainToolbarButtonsHTML += '<div class=\"fr-separator fr-hs\" role=\"separator\" aria-orientation=\"horizontal\"></div>'\n          }\n        }\n\n        if (!cmdInfo || (cmdInfo && typeof cmdInfo.plugin !== 'undefined' && editor.opts.pluginsEnabled.indexOf(cmdInfo.plugin) < 0)) {\n          continue\n        }\n\n        // If alignment of group is provided then use it\n        if (buttonGroups[groupName].align !== undefined) {\n          alignment = buttonGroups[groupName].align\n        }\n\n        // If buttonsVisible is provided then use it\n        if (buttonGroups[groupName].buttonsVisible !== undefined) {\n          visibleButtons = buttonGroups[groupName].buttonsVisible\n        }\n\n        // Build button groups from command details\n        if (buttonGroups.showMoreButtons && buttonCount >= visibleButtons) {\n          moreToolbarButtonsHTML += build(cmdName, cmdInfo, true)\n        }\n        else {\n          mainToolbarButtonsHTML += build(cmdName, cmdInfo, true)\n        }\n\n        buttonCount++\n      }\n\n      // If atleast one hidden group exists then add its corresponding more button\n      if (buttonGroups.showMoreButtons && buttonCount > visibleButtons) {\n        const cmdName = groupName\n        const cmdInfo = FE.COMMANDS[cmdName]\n        cmdInfo.more_btn = true\n        mainToolbarButtonsHTML += build(cmdName, cmdInfo, true)\n      }\n\n      // Add toolbar buttons html to the groups html\n      mainToolbarGroupsHTML += `<div class=\"fr-btn-grp fr-float-${alignment}\">${mainToolbarButtonsHTML}</div>`\n      if (buttonGroups.showMoreButtons && moreToolbarButtonsHTML.length > 0) {\n        moreToolbarGroupsHTML += `<div class=\"fr-more-toolbar\" data-name=\"${groupName + '-' + editor.id}\">${moreToolbarButtonsHTML}</div>`\n      }\n\n    }\n\n    // Return toolbar button groups html\n    if (editor.opts.toolbarBottom) {\n      return `${moreToolbarGroupsHTML}<div class=\"fr-newline\"></div>${mainToolbarGroupsHTML}`\n    }\n    return `${mainToolbarGroupsHTML}<div class=\"fr-newline\"></div>${moreToolbarGroupsHTML}`\n  }\n\n  function refresh($btn) {\n    const inst = $btn.parents('.fr-popup, .fr-toolbar').data('instance') || editor\n\n    const cmd = $btn.data('cmd')\n\n    let $dropdown\n\n    if (!editor.node.hasClass($btn.get(0), 'fr-dropdown')) {\n      $btn.removeClass('fr-active')\n\n      if ($btn.attr('aria-pressed')) {\n        $btn.attr('aria-pressed', false)\n      }\n    }\n    else {\n      $dropdown = $btn.next()\n    }\n\n    if (FE.COMMANDS[cmd] && FE.COMMANDS[cmd].refresh) {\n      FE.COMMANDS[cmd].refresh.apply(inst, [$btn, $dropdown])\n    }\n    else if (editor.refresh[cmd]) {\n      inst.refresh[cmd]($btn, $dropdown)\n    }\n    \n  }\n\n  function _bulkRefresh(btns) {\n    const inst = editor.$tb ? editor.$tb.data('instance') || editor : editor\n\n    // Check the refresh event.\n    if (editor.events.trigger('buttons.refresh') === false) {\n      return true\n    }\n\n    setTimeout(() => {\n      const focused = inst.selection.inEditor() && inst.core.hasFocus()\n\n      for (let i = 0; i < btns.length; i++) {\n        const $btn = $(btns[i])\n        const cmd = $btn.data('cmd')\n\n        if ($btn.parents('.fr-popup').length === 0) {\n          if (focused || FE.COMMANDS[cmd] && FE.COMMANDS[cmd].forcedRefresh) {\n            inst.button.refresh($btn)\n          }\n          else if (!editor.node.hasClass($btn.get(0), 'fr-dropdown')) {\n            $btn.removeClass('fr-active')\n\n            if ($btn.attr('aria-pressed')) {\n              $btn.attr('aria-pressed', false)\n            }\n          }\n        }\n        else if ($btn.parents('.fr-popup').isVisible()) {\n          inst.button.refresh($btn)\n        }\n      }\n    }, 0)\n  }\n\n  /**\n   * Do buttons refresh.\n   */\n  function bulkRefresh() {\n    _bulkRefresh(buttons)\n    _bulkRefresh(popup_buttons)\n  }\n\n  function _destroy() {\n    buttons = []\n    popup_buttons = []\n  }\n\n  let refresh_timeout = null\n\n  function delayedBulkRefresh() {\n    clearTimeout(refresh_timeout)\n    refresh_timeout = setTimeout(bulkRefresh, 50)\n  }\n\n  /**\n   * Initialize.\n   */\n  function _init() {\n\n    // Assign refresh and do refresh.\n    if (editor.opts.toolbarInline) {\n      editor.events.on('toolbar.show', bulkRefresh)\n    }\n    else {\n      editor.events.on('mouseup', delayedBulkRefresh)\n      editor.events.on('keyup', delayedBulkRefresh)\n      editor.events.on('blur', delayedBulkRefresh)\n      editor.events.on('focus', delayedBulkRefresh)\n      editor.events.on('contentChanged', delayedBulkRefresh)\n\n      if (editor.helpers.isMobile()) {\n        editor.events.$on(editor.$doc, 'selectionchange', bulkRefresh)\n      }\n    }\n\n    editor.events.on('shared.destroy', _destroy)\n  }\n\n  return {\n    _init,\n    build,\n    buildList,\n    buildGroup,\n    bindCommands,\n    refresh,\n    bulkRefresh,\n    exec,\n    click,\n    hideActiveDropdowns,\n    addButtons,\n    getButtons,\n    getPosition\n  }\n}\n","import FE from '../../editor.js'\r\n\r\nFE.ICON_TEMPLATES = {\r\n  font_awesome: '<i class=\"fa fa-[NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5: '<i class=\"fas fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5r: '<i class=\"far fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5l: '<i class=\"fal fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  font_awesome_5b: '<i class=\"fab fa-[FA5NAME]\" aria-hidden=\"true\"></i>',\r\n  text: '<span style=\"text-align: center;\">[NAME]</span>',\r\n  image: '<img src=[SRC] alt=[ALT] />',\r\n  svg: '<svg class=\"fr-svg\" focusable=\"false\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"[PATH]\"/></svg>',\r\n  empty: ' '\r\n}\r\n\r\nFE.ICONS = {\r\n  bold: {\r\n    NAME: 'bold',\r\n    SVG_KEY: 'bold'\r\n  },\r\n  italic: {\r\n    NAME: 'italic',\r\n    SVG_KEY: 'italic'\r\n  },\r\n  underline: {\r\n    NAME: 'underline',\r\n    SVG_KEY: 'underline'\r\n  },\r\n  strikeThrough: {\r\n    NAME: 'strikethrough',\r\n    SVG_KEY: 'strikeThrough'\r\n  },\r\n  subscript: {\r\n    NAME: 'subscript',\r\n    SVG_KEY: 'subscript'\r\n  },\r\n  superscript: {\r\n    NAME: 'superscript',\r\n    SVG_KEY: 'superscript'\r\n  },\r\n  cancel: {\r\n    NAME: 'cancel',\r\n    SVG_KEY: 'cancel'\r\n  },\r\n  color: {\r\n    NAME: 'tint',\r\n    SVG_KEY: 'textColor'\r\n  },\r\n  outdent: {\r\n    NAME: 'outdent',\r\n    SVG_KEY: 'outdent'\r\n  },\r\n  indent: {\r\n    NAME: 'indent',\r\n    SVG_KEY: 'indent'\r\n  },\r\n  undo: {\r\n    NAME: 'rotate-left',\r\n    FA5NAME: 'undo',\r\n    SVG_KEY: 'undo'\r\n  },\r\n  redo: {\r\n    NAME: 'rotate-right',\r\n    FA5NAME: 'redo',\r\n    SVG_KEY: 'redo'\r\n  },\r\n  \r\n  insert: {\r\n    NAME: 'insert',\r\n    SVG_KEY: 'insert'\r\n  },\r\n  insertAll: {\r\n    NAME: 'insertAll',\r\n    SVG_KEY: 'insertAll'\r\n  },\r\n  insertHR: {\r\n    NAME: 'minus',\r\n    SVG_KEY: 'horizontalLine'\r\n  },\r\n  clearFormatting: {\r\n    NAME: 'eraser',\r\n    SVG_KEY: 'clearFormatting'\r\n  },\r\n  selectAll: {\r\n    NAME: 'mouse-pointer',\r\n    SVG_KEY: 'selectAll'\r\n  },\r\n  minimize: {\r\n    NAME: 'minimize',\r\n    SVG_KEY: 'minimize'\r\n  },\r\n  moreText: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'textMore'\r\n  },\r\n  moreParagraph: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'paragraphMore'\r\n  },\r\n  moreRich: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'insertMore'\r\n  },\r\n  moreMisc: {\r\n    NAME: 'ellipsis-v',\r\n    SVG_KEY: 'more'\r\n  }\r\n}\r\n\r\nFE.DefineIconTemplate = function (name, options) {\r\n  FE.ICON_TEMPLATES[name] = options\r\n}\r\n\r\nFE.DefineIcon = function (name, options) {\r\n  FE.ICONS[name] = options\r\n}\r\n\r\nObject.assign(FE.DEFAULTS, {\r\n  iconsTemplate: 'svg'\r\n})\r\n\r\nFE.MODULES.icon = function (editor) {\r\n  function create(command) {\r\n    let icon = null\r\n    const info = FE.ICONS[command]\r\n\r\n    if (typeof info !== 'undefined') {\r\n      let template = info.template || FE.ICON_DEFAULT_TEMPLATE || editor.opts.iconsTemplate\r\n\r\n      if (template && template.apply) {\r\n        template = template.apply(editor);\r\n      }\r\n\r\n      if (!info.FA5NAME) {\r\n        info.FA5NAME = info.NAME\r\n      }\r\n\r\n      if (template === 'svg'  && !info.PATH) {\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1812\r\n        // if user doesn't specify `SVG_KEY`, pass it as string\r\n        info.PATH = FE.SVG[info.SVG_KEY] || ''\r\n      }\r\n\r\n      if (template && (template = FE.ICON_TEMPLATES[template])) {\r\n        icon = template.replace(/\\[([a-zA-Z0-9]*)\\]/g, (str, a1) => {\r\n\r\n          if (a1 === 'NAME') {\r\n            return info[a1] || command\r\n          }\r\n\r\n          return info[a1]\r\n        })\r\n      }\r\n    }\r\n\r\n    return icon || command\r\n  }\r\n\r\n  function getTemplate(command) {\r\n    const info = FE.ICONS[command]\r\n    let template = editor.opts.iconsTemplate\r\n\r\n    if (typeof info !== 'undefined') {\r\n      template = info.template || FE.ICON_DEFAULT_TEMPLATE || editor.opts.iconsTemplate\r\n\r\n      return template\r\n    }\r\n\r\n    return template\r\n  }\r\n\r\n  function getFileIcon(command) {\r\n    const info = FE.FILEICONS[command]\r\n    if (typeof info !== 'undefined') {\r\n      return info\r\n    }\r\n    return command\r\n  }\r\n  return {\r\n    create,\r\n    getTemplate,\r\n    getFileIcon\r\n  }\r\n}\r\n\r\nFE.SVG = {\r\n  add: 'M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z',\r\n\r\n  advancedImageEditor: 'M3,17v2h6v-2H3z M3,5v2h10V5H3z M13,21v-2h8v-2h-8v-2h-2v6H13z M7,9v2H3v2h4v2h2V9H7z M21,13v-2H11v2H21z M15,9h2V7h4V5h-4  V3h-2V9z',\r\n\r\n  alignCenter: 'M9,18h6v-2H9V18z M6,11v2h12v-2H6z M3,6v2h18V6H3z',\r\n\r\n  alignJustify: 'M3,18h18v-2H3V18z M3,11v2h18v-2H3z M3,6v2h18V6H3z',\r\n\r\n  alignLeft: 'M3,18h6v-2H3V18z M3,11v2h12v-2H3z M3,6v2h18V6H3z',\r\n\r\n  alignRight: 'M15,18h6v-2h-6V18z M9,11v2h12v-2H9z M3,6v2h18V6H3z',\r\n\r\n  anchors: 'M16,4h-4H8C6.9,4,6,4.9,6,6v4v10l6-2.6l6,2.6V10V6C18,4.9,17.1,4,16,4z M16,17l-4-1.8L8,17v-7V6h4h4v4V17z',\r\n\r\n  autoplay: 'M 7.570312 0.292969 C 7.542969 0.292969 7.515625 0.292969 7.488281 0.296875 C 7.203125 0.324219 6.984375 0.539062 6.980469 0.792969 L 6.925781 3.535156 C 2.796875 3.808594 -0.0078125 6.425781 -0.0859375 10.09375 C -0.121094 11.96875 0.710938 13.6875 2.265625 14.921875 C 3.769531 16.117188 5.839844 16.796875 8.097656 16.828125 C 8.140625 16.828125 12.835938 16.898438 13.035156 16.886719 C 15.171875 16.796875 17.136719 16.128906 18.558594 15.003906 C 20.066406 13.816406 20.882812 12.226562 20.917969 10.40625 C 20.960938 8.410156 20.023438 6.605469 18.289062 5.335938 C 18.214844 5.277344 18.128906 5.230469 18.035156 5.203125 C 17.636719 5.074219 17.222656 5.199219 17 5.476562 L 15.546875 7.308594 C 15.304688 7.609375 15.363281 8.007812 15.664062 8.265625 C 16.351562 8.851562 16.707031 9.625 16.6875 10.5 C 16.652344 12.25 15.070312 13.390625 12.757812 13.535156 C 12.59375 13.539062 8.527344 13.472656 8.164062 13.464844 C 5.703125 13.429688 4.101562 12.191406 4.140625 10.3125 C 4.175781 8.570312 5.132812 7.46875 6.847656 7.199219 L 6.796875 9.738281 C 6.792969 9.992188 7 10.214844 7.285156 10.253906 C 7.3125 10.257812 7.339844 10.257812 7.367188 10.257812 C 7.503906 10.261719 7.632812 10.222656 7.738281 10.148438 L 14.039062 5.785156 C 14.171875 5.691406 14.253906 5.558594 14.253906 5.410156 C 14.257812 5.261719 14.1875 5.125 14.058594 5.027344 L 7.941406 0.414062 C 7.835938 0.335938 7.707031 0.292969 7.570312 0.292969 ',\r\n\r\n  back: 'M20 11L7.83 11 11.425 7.405 10.01 5.991 5.416 10.586 5.414 10.584 4 11.998 4.002 12 4 12.002 5.414 13.416 5.416 13.414 10.01 18.009 11.425 16.595 7.83 13 20 13 20 13 20 11 20 11Z',\r\n\r\n  backgroundColor: 'M9.91752,12.24082l7.74791-5.39017,1.17942,1.29591-6.094,7.20747L9.91752,12.24082M7.58741,12.652l4.53533,4.98327a.93412.93412,0,0,0,1.39531-.0909L20.96943,8.7314A.90827.90827,0,0,0,20.99075,7.533l-2.513-2.76116a.90827.90827,0,0,0-1.19509-.09132L7.809,11.27135A.93412.93412,0,0,0,7.58741,12.652ZM2.7939,18.52772,8.41126,19.5l1.47913-1.34617-3.02889-3.328Z',\r\n\r\n  blockquote: 'M10.31788,5l.93817,1.3226A12.88271,12.88271,0,0,0,8.1653,9.40125a5.54242,5.54242,0,0,0-.998,3.07866v.33733q.36089-.04773.66067-.084a4.75723,4.75723,0,0,1,.56519-.03691,2.87044,2.87044,0,0,1,2.11693.8427,2.8416,2.8416,0,0,1,.8427,2.09274,3.37183,3.37183,0,0,1-.8898,2.453A3.143,3.143,0,0,1,8.10547,19,3.40532,3.40532,0,0,1,5.375,17.7245,4.91156,4.91156,0,0,1,4.30442,14.453,9.3672,9.3672,0,0,1,5.82051,9.32933,14.75716,14.75716,0,0,1,10.31788,5Zm8.39243,0,.9369,1.3226a12.88289,12.88289,0,0,0-3.09075,3.07865,5.54241,5.54241,0,0,0-.998,3.07866v.33733q.33606-.04773.63775-.084a4.91773,4.91773,0,0,1,.58938-.03691,2.8043,2.8043,0,0,1,2.1042.83,2.89952,2.89952,0,0,1,.80578,2.10547,3.42336,3.42336,0,0,1-.86561,2.453A3.06291,3.06291,0,0,1,16.49664,19,3.47924,3.47924,0,0,1,13.742,17.7245,4.846,4.846,0,0,1,12.64721,14.453,9.25867,9.25867,0,0,1,14.17476,9.3898,15.26076,15.26076,0,0,1,18.71031,5Z',\r\n\r\n  bold: 'M15.25,11.8h0A3.68,3.68,0,0,0,17,9a3.93,3.93,0,0,0-3.86-4H6.65V19h7a3.74,3.74,0,0,0,3.7-3.78V15.1A3.64,3.64,0,0,0,15.25,11.8ZM8.65,7h4.2a2.09,2.09,0,0,1,2,1.3,2.09,2.09,0,0,1-1.37,2.61,2.23,2.23,0,0,1-.63.09H8.65Zm4.6,10H8.65V13h4.6a2.09,2.09,0,0,1,2,1.3,2.09,2.09,0,0,1-1.37,2.61A2.23,2.23,0,0,1,13.25,17Z',\r\n\r\n  cancel: 'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z',\r\n\r\n  cellBackground: 'M16.6,12.4L7.6,3.5L6.2,4.9l2.4,2.4l-5.2,5.2c-0.6,0.6-0.6,1.5,0,2.1l5.5,5.5c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4  l5.5-5.5C17.2,14,17.2,13,16.6,12.4z M5.2,13.5L10,8.7l4.8,4.8H5.2z M19,15c0,0-2,2.2-2,3.5c0,1.1,0.9,2,2,2s2-0.9,2-2  C21,17.2,19,15,19,15z',\r\n\r\n  cellBorderColor: 'M22,22H2v2h20V22z',\r\n\r\n  cellOptions: 'M20,5H4C2.9,5,2,5.9,2,7v10c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V7C22,5.9,21.1,5,20,5z M9.5,6.5h5V9h-5V6.5z M8,17.5H4  c-0.3,0-0.5-0.2-0.5-0.4c0,0,0,0,0,0V17v-2H8V17.5z M8,13.5H3.5v-3H8V13.5z M8,9H3.5V7c0-0.3,0.2-0.5,0.4-0.5c0,0,0,0,0,0H8V9z   M14.5,17.5h-5V15h5V17.5z M20.5,17c0,0.3-0.2,0.5-0.4,0.5c0,0,0,0,0,0H16V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M20.5,9H16V6.5h4  c0.3,0,0.5,0.2,0.5,0.4c0,0,0,0,0,0V9z',\r\n\r\n  cellStyle: 'M20,19.9l0.9,3.6l-3.2-1.9l-3.3,1.9l0.8-3.6L12.3,17h3.8l1.7-3.5l1.4,3.5H23L20,19.9z M20,5H4C2.9,5,2,5.9,2,7v10  c0,1.1,0.9,2,2,2h7.5l-0.6-0.6L10,17.5H9.5V15h5.4l1.1-2.3v-2.2h4.5v3H20l0.6,1.5H22V7C22,5.9,21.1,5,20,5z M3.5,7  c0-0.3,0.2-0.5,0.4-0.5c0,0,0,0,0.1,0h4V9H3.5V7z M3.5,10.5H8v3H3.5V10.5z M4,17.5c-0.3,0-0.5-0.2-0.5-0.4c0,0,0,0,0-0.1v-2H8v2.5H4  z M14.5,9h-5V6.5h5V9z M20.5,9H16V6.5h4c0.3,0,0.5,0.2,0.5,0.4c0,0,0,0,0,0.1V9z',\r\n\r\n  clearFormatting: 'M11.48,10.09l-1.2-1.21L8.8,7.41,6.43,5,5.37,6.1,8.25,9,4.66,19h2l1.43-4h5.14l1.43,4h2l-.89-2.51L18.27,19l1.07-1.06L14.59,13.2ZM8.8,13l.92-2.56L12.27,13Zm.56-7.15L9.66,5h2l1.75,4.9Z',\r\n\r\n  close: 'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z',\r\n\r\n  codeView: 'M9.4,16.6,4.8,12,9.4,7.4,8,6,2,12l6,6Zm5.2,0L19.2,12,14.6,7.4,16,6l6,6-6,6Z',\r\n\r\n  cogs: 'M18.877 12.907a6.459 6.459 0 0 0 0 -1.814l1.952 -1.526a0.468 0.468 0 0 0 0.111 -0.593l-1.851 -3.2a0.461 0.461 0 0 0 -0.407 -0.231 0.421 0.421 0 0 0 -0.157 0.028l-2.3 0.925a6.755 6.755 0 0 0 -1.563 -0.907l-0.352 -2.452a0.451 0.451 0 0 0 -0.453 -0.388h-3.7a0.451 0.451 0 0 0 -0.454 0.388L9.347 5.588A7.077 7.077 0 0 0 7.783 6.5l-2.3 -0.925a0.508 0.508 0 0 0 -0.166 -0.028 0.457 0.457 0 0 0 -0.4 0.231l-1.851 3.2a0.457 0.457 0 0 0 0.111 0.593l1.952 1.526A7.348 7.348 0 0 0 5.063 12a7.348 7.348 0 0 0 0.064 0.907L3.175 14.433a0.468 0.468 0 0 0 -0.111 0.593l1.851 3.2a0.461 0.461 0 0 0 0.407 0.231 0.421 0.421 0 0 0 0.157 -0.028l2.3 -0.925a6.74 6.74 0 0 0 1.564 0.907L9.7 20.864a0.451 0.451 0 0 0 0.454 0.388h3.7a0.451 0.451 0 0 0 0.453 -0.388l0.352 -2.452a7.093 7.093 0 0 0 1.563 -0.907l2.3 0.925a0.513 0.513 0 0 0 0.167 0.028 0.457 0.457 0 0 0 0.4 -0.231l1.851 -3.2a0.468 0.468 0 0 0 -0.111 -0.593Zm-0.09 2.029l-0.854 1.476 -2.117 -0.852 -0.673 0.508a5.426 5.426 0 0 1 -1.164 0.679l-0.795 0.323 -0.33 2.269h-1.7l-0.32 -2.269 -0.793 -0.322a5.3 5.3 0 0 1 -1.147 -0.662L8.2 15.56l-2.133 0.86 -0.854 -1.475 1.806 -1.411 -0.1 -0.847c-0.028 -0.292 -0.046 -0.5 -0.046 -0.687s0.018 -0.4 0.045 -0.672l0.106 -0.854L5.217 9.064l0.854 -1.475 2.117 0.851 0.673 -0.508a5.426 5.426 0 0 1 1.164 -0.679l0.8 -0.323 0.331 -2.269h1.7l0.321 2.269 0.792 0.322a5.3 5.3 0 0 1 1.148 0.661l0.684 0.526 2.133 -0.859 0.853 1.473 -1.8 1.421 0.1 0.847a5 5 0 0 1 0.046 0.679c0 0.193 -0.018 0.4 -0.045 0.672l-0.106 0.853ZM12 14.544A2.544 2.544 0 1 1 14.546 12 2.552 2.552 0 0 1 12 14.544Z',\r\n\r\n  columns: 'M20,5H4C2.9,5,2,5.9,2,7v10c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V7C22,5.9,21.1,5,20,5z M8,17.5H4c-0.3,0-0.5-0.2-0.5-0.4  c0,0,0,0,0,0V17v-2H8V17.5z M8,13.5H3.5v-3H8V13.5z M8,9H3.5V7c0-0.3,0.2-0.5,0.4-0.5c0,0,0,0,0,0H8V9z M20.5,17  c0,0.3-0.2,0.5-0.4,0.5c0,0,0,0,0,0H16V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M20.5,9H16V6.5h4c0.3,0,0.5,0.2,0.5,0.4c0,0,0,0,0,0  V9z',\r\n\r\n  edit: 'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z',\r\n\r\n  exitFullscreen: 'M5,16H8v3h2V14H5ZM8,8H5v2h5V5H8Zm6,11h2V16h3V14H14ZM16,8V5H14v5h5V8Z',\r\n\r\n  fileInsert: 'M 8.09375 12.75 L 5.90625 12.75 C 5.542969 12.75 5.25 12.394531 5.25 11.953125 L 5.25 6.375 L 2.851562 6.375 C 2.367188 6.375 2.121094 5.660156 2.464844 5.242188 L 6.625 0.1875 C 6.832031 -0.0585938 7.167969 -0.0585938 7.371094 0.1875 L 11.535156 5.242188 C 11.878906 5.660156 11.632812 6.375 11.148438 6.375 L 8.75 6.375 L 8.75 11.953125 C 8.75 12.394531 8.457031 12.75 8.09375 12.75 Z M 14 12.484375 L 14 16.203125 C 14 16.644531 13.707031 17 13.34375 17 L 0.65625 17 C 0.292969 17 0 16.644531 0 16.203125 L 0 12.484375 C 0 12.042969 0.292969 11.6875 0.65625 11.6875 L 4.375 11.6875 L 4.375 11.953125 C 4.375 12.980469 5.0625 13.8125 5.90625 13.8125 L 8.09375 13.8125 C 8.9375 13.8125 9.625 12.980469 9.625 11.953125 L 9.625 11.6875 L 13.34375 11.6875 C 13.707031 11.6875 14 12.042969 14 12.484375 Z M 10.609375 15.40625 C 10.609375 15.039062 10.363281 14.742188 10.0625 14.742188 C 9.761719 14.742188 9.515625 15.039062 9.515625 15.40625 C 9.515625 15.773438 9.761719 16.070312 10.0625 16.070312 C 10.363281 16.070312 10.609375 15.773438 10.609375 15.40625 Z M 12.359375 15.40625 C 12.359375 15.039062 12.113281 14.742188 11.8125 14.742188 C 11.511719 14.742188 11.265625 15.039062 11.265625 15.40625 C 11.265625 15.773438 11.511719 16.070312 11.8125 16.070312 C 12.113281 16.070312 12.359375 15.773438 12.359375 15.40625 Z M 12.359375 15.40625 ',\r\n\r\n  fileManager: 'M 0 5.625 L 20.996094 5.625 L 21 15.75 C 21 16.371094 20.410156 16.875 19.6875 16.875 L 1.3125 16.875 C 0.585938 16.875 0 16.371094 0 15.75 Z M 0 5.625 M 21 4.5 L 0 4.5 L 0 2.25 C 0 1.628906 0.585938 1.125 1.3125 1.125 L 6.921875 1.125 C 7.480469 1.125 8.015625 1.316406 8.40625 1.652344 L 9.800781 2.847656 C 10.195312 3.183594 10.730469 3.375 11.289062 3.375 L 19.6875 3.375 C 20.414062 3.375 21 3.878906 21 4.5 Z M 21 4.5',\r\n\r\n  fontAwesome: 'M18.99018,13.98212V7.52679c-.08038-1.21875-1.33929-.683-1.33929-.683-2.933,1.39282-4.36274.61938-5.85938.15625a6.23272,6.23272,0,0,0-2.79376-.20062l-.00946.004A1.98777,1.98777,0,0,0,7.62189,5.106a.984.984,0,0,0-.17517-.05432c-.02447-.0055-.04882-.01032-.0736-.0149A.9565.9565,0,0,0,7.1908,5H6.82539a.9565.9565,0,0,0-.18232.0368c-.02472.00458-.04907.0094-.07348.01484a.985.985,0,0,0-.17523.05438,1.98585,1.98585,0,0,0-.573,3.49585v9.394A1.004,1.004,0,0,0,6.82539,19H7.1908a1.00406,1.00406,0,0,0,1.00409-1.00409V15.52234c3.64221-1.09827,5.19709.64282,7.09888.57587a5.57291,5.57291,0,0,0,3.25446-1.05805A1.2458,1.2458,0,0,0,18.99018,13.98212Z',\r\n\r\n  fontFamily: 'M16,19h2L13,5H11L6,19H8l1.43-4h5.14Zm-5.86-6L12,7.8,13.86,13Z',\r\n\r\n  fontSize: 'M20.75,19h1.5l-3-10h-1.5l-3,10h1.5L17,16.5h3Zm-3.3-4,1.05-3.5L19.55,15Zm-5.7,4h2l-5-14h-2l-5,14h2l1.43-4h5.14ZM5.89,13,7.75,7.8,9.61,13Z',\r\n\r\n  fullscreen: 'M7,14H5v5h5V17H7ZM5,10H7V7h3V5H5Zm12,7H14v2h5V14H17ZM14,5V7h3v3h2V5Z',\r\n\r\n  help: 'M11,17h2v2h-2V17z M12,5C9.8,5,8,6.8,8,9h2c0-1.1,0.9-2,2-2s2,0.9,2,2c0,2-3,1.7-3,5v1h2v-1c0-2.2,3-2.5,3-5  C16,6.8,14.2,5,12,5z',\r\n\r\n  horizontalLine: 'M5,12h14 M19,11H5v2h14V11z',\r\n\r\n  imageAltText: 'M19,7h-6v12h-2V7H5V5h6h2h6V7z',\r\n\r\n  imageCaption: 'M14.2,11l3.8,5H6l3-3.9l2.1,2.7L14,11H14.2z M8.5,11c0.8,0,1.5-0.7,1.5-1.5S9.3,8,8.5,8S7,8.7,7,9.5C7,10.3,7.7,11,8.5,11z   M22,6v12c0,1.1-0.9,2-2,2H4c-1.1,0-2-0.9-2-2V6c0-1.1,0.9-2,2-2h16C21.1,4,22,4.9,22,6z M20,8.8V6H4v12h16V8.8z M22,22H2v2h20V22z',\r\n\r\n  imageClass: 'M9.5,13.4l-2.9-2.9h3.8L12.2,7l1.4,3.5h3.8l-3,2.9l0.9,3.6L12,15.1L8.8,17L9.5,13.4z M22,6v12c0,1.1-0.9,2-2,2H4  c-1.1,0-2-0.9-2-2V6c0-1.1,0.9-2,2-2h16C21.1,4,22,4.9,22,6z M20,6H4v12h16V8.8V6z',\r\n\r\n  imageDisplay: 'M3,5h18v2H3V5z M13,9h8v2h-8V9z M13,13h8v2h-8V13z M3,17h18v2H3V17z M3,9h8v6H3V9z',\r\n\r\n  imageManager: 'M20,6h-7l-2-2H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8C22,6.9,21.1,6,20,6z M20,18H4V6h6.2l2,2H20V18z   M18,16l-3.8-5H14l-2.9,3.8L9,12.1L6,16H18z M10,9.5C10,8.7,9.3,8,8.5,8S7,8.7,7,9.5S7.7,11,8.5,11S10,10.3,10,9.5z',\r\n\r\n  imageSize: 'M16.9,4c-0.3,0-0.5,0.2-0.8,0.3L3.3,13c-0.9,0.6-1.1,1.9-0.5,2.8l2.2,3.3c0.4,0.7,1.2,1,2,0.8c0.3,0,0.5-0.2,0.8-0.3  L20.7,11c0.9-0.6,1.1-1.9,0.5-2.8l-2.2-3.3C18.5,4.2,17.7,3.9,16.9,4L16.9,4z M16.9,9.9L18.1,9l-2-2.9L17,5.6c0.1,0,0.1-0.1,0.2-0.1  c0.2,0,0.4,0,0.5,0.2L19.9,9c0.2,0.2,0.1,0.5-0.1,0.7L7,18.4c-0.1,0-0.1,0.1-0.2,0.1c-0.2,0-0.4,0-0.5-0.2L4.1,15  c-0.2-0.2-0.1-0.5,0.1-0.7L5,13.7l2,2.9l1.2-0.8l-2-2.9L7.5,12l1.1,1.7l1.2-0.8l-1.1-1.7l1.2-0.8l2,2.9l1.2-0.8l-2-2.9l1.2-0.8  l1.1,1.7l1.2-0.8l-1.1-1.7L14.9,7L16.9,9.9z',\r\n\r\n  indent: 'M3,9v6l3-3L3,9z M3,19h18v-2H3V19z M3,7h18V5H3V7z M9,11h12V9H9V11z M9,15h12v-2H9V15z',\r\n\r\n  inlineClass: 'M9.9,13.313A1.2,1.2,0,0,1,9.968,13H6.277l1.86-5.2,1.841,5.148A1.291,1.291,0,0,1,11.212,12h.426l-2.5-7h-2l-5,14h2l1.43-4H9.9Zm2.651,6.727a2.884,2.884,0,0,1-.655-2.018v-2.71A1.309,1.309,0,0,1,13.208,14h3.113a3.039,3.039,0,0,1,2,1.092s1.728,1.818,2.964,2.928a1.383,1.383,0,0,1,.318,1.931,1.44,1.44,0,0,1-.19.215l-3.347,3.31a1.309,1.309,0,0,1-1.832.258h0a1.282,1.282,0,0,1-.258-.257l-1.71-1.728Zm2.48-3.96a.773.773,0,1,0,.008,0Z',\r\n\r\n  inlineStyle: 'M11.88,15h.7l.7-1.7-3-8.3h-2l-5,14h2l1.4-4Zm-4.4-2,1.9-5.2,1.9,5.2ZM15.4,21.545l3.246,1.949-.909-3.637L20.72,17H16.954l-1.429-3.506L13.837,17H10.071l2.857,2.857-.779,3.637Z',\r\n\r\n  insert: 'M13.889,11.611c-0.17,0.17-0.443,0.17-0.612,0l-3.189-3.187l-3.363,3.36c-0.171,0.171-0.441,0.171-0.612,0c-0.172-0.169-0.172-0.443,0-0.611l3.667-3.669c0.17-0.17,0.445-0.172,0.614,0l3.496,3.493C14.058,11.167,14.061,11.443,13.889,11.611 M18.25,10c0,4.558-3.693,8.25-8.25,8.25c-4.557,0-8.25-3.692-8.25-8.25c0-4.557,3.693-8.25,8.25-8.25C14.557,1.75,18.25,5.443,18.25,10 M17.383,10c0-4.07-3.312-7.382-7.383-7.382S2.618,5.93,2.618,10S5.93,17.381,10,17.381S17.383,14.07,17.383,10',\r\n\r\n  insertEmbed: 'M20.73889,15.45929a3.4768,3.4768,0,0,0-5.45965-.28662L9.5661,12.50861a3.49811,3.49811,0,0,0-.00873-1.01331l5.72174-2.66809a3.55783,3.55783,0,1,0-.84527-1.81262L8.70966,9.6839a3.50851,3.50851,0,1,0,.0111,4.63727l5.7132,2.66412a3.49763,3.49763,0,1,0,6.30493-1.526ZM18.00745,5.01056A1.49993,1.49993,0,1,1,16.39551,6.3894,1.49994,1.49994,0,0,1,18.00745,5.01056ZM5.99237,13.49536a1.49989,1.49989,0,1,1,1.61194-1.37878A1.49982,1.49982,0,0,1,5.99237,13.49536Zm11.78211,5.494a1.49993,1.49993,0,1,1,1.61193-1.37885A1.49987,1.49987,0,0,1,17.77448,18.98932Z',\r\n\r\n  insertFile: 'M7,3C5.9,3,5,3.9,5,5v14c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9,2-2V7.6L14.4,3H7z M17,19H7V5h6v4h4V19z',\r\n\r\n  insertImage: 'M14.2,11l3.8,5H6l3-3.9l2.1,2.7L14,11H14.2z M8.5,11c0.8,0,1.5-0.7,1.5-1.5S9.3,8,8.5,8S7,8.7,7,9.5C7,10.3,7.7,11,8.5,11z   M22,6v12c0,1.1-0.9,2-2,2H4c-1.1,0-2-0.9-2-2V6c0-1.1,0.9-2,2-2h16C21.1,4,22,4.9,22,6z M20,8.8V6H4v12h16V8.8z',\r\n\r\n  insertLink: 'M11,17H7A5,5,0,0,1,7,7h4V9H7a3,3,0,0,0,0,6h4ZM17,7H13V9h4a3,3,0,0,1,0,6H13v2h4A5,5,0,0,0,17,7Zm-1,4H8v2h8Z',\r\n\r\n  insertMore: 'M16.5,13h-6v6h-2V13h-6V11h6V5h2v6h6Zm5,4.5A1.5,1.5,0,1,1,20,16,1.5,1.5,0,0,1,21.5,17.5Zm0-4A1.5,1.5,0,1,1,20,12,1.5,1.5,0,0,1,21.5,13.5Zm0-4A1.5,1.5,0,1,1,20,8,1.5,1.5,0,0,1,21.5,9.5Z',\r\n\r\n  insertTable: 'M20,5H4C2.9,5,2,5.9,2,7v2v1.5v3V15v2c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2v-2v-1.5v-3V9V7C22,5.9,21.1,5,20,5z M9.5,13.5v-3  h5v3H9.5z M14.5,15v2.5h-5V15H14.5z M9.5,9V6.5h5V9H9.5z M3.5,7c0-0.3,0.2-0.5,0.5-0.5h4V9H3.5V7z M3.5,10.5H8v3H3.5V10.5z M3.5,17  v-2H8v2.5H4C3.7,17.5,3.5,17.3,3.5,17z M20.5,17c0,0.3-0.2,0.5-0.5,0.5h-4V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M16,9V6.5h4  c0.3,0,0.5,0.2,0.5,0.5v2H16z',\r\n\r\n  insertVideo: 'M15,8v8H5V8H15m2,2.5V7a1,1,0,0,0-1-1H4A1,1,0,0,0,3,7V17a1,1,0,0,0,1,1H16a1,1,0,0,0,1-1V13.5l2.29,2.29A1,1,0,0,0,21,15.08V8.91a1,1,0,0,0-1.71-.71Z',\r\n\r\n  upload: 'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z',\r\n\r\n  uploadFiles: 'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z',\r\n\r\n  italic: 'M11.76,9h2l-2.2,10h-2Zm1.68-4a1,1,0,1,0,1,1,1,1,0,0,0-1-1Z',\r\n\r\n  search: 'M15.5 14h-0.79l-0.28 -0.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09 -0.59 4.23 -1.57l0.27 0.28v0.79l5 4.99L20.49 19l-4.99 -5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',\r\n\r\n  lineHeight: 'M6.25,7h2.5L5.25,3.5,1.75,7h2.5V17H1.75l3.5,3.5L8.75,17H6.25Zm4-2V7h12V5Zm0,14h12V17h-12Zm0-6h12V11h-12Z',\r\n\r\n  linkStyles: 'M19,17.9l0.9,3.6l-3.2-1.9l-3.3,1.9l0.8-3.6L11.3,15h3.8l1.7-3.5l1.4,3.5H22L19,17.9z M20,12c0,0.3-0.1,0.7-0.2,1h2.1  c0.1-0.3,0.1-0.6,0.1-1c0-2.8-2.2-5-5-5h-4v2h4C18.7,9,20,10.3,20,12z M14.8,11H8v2h3.3h2.5L14.8,11z M9.9,16.4L8.5,15H7  c-1.7,0-3-1.3-3-3s1.3-3,3-3h4V7H7c-2.8,0-5,2.2-5,5s2.2,5,5,5h3.5L9.9,16.4z',\r\n\r\n  mention: 'M12.4,5c-4.1,0-7.5,3.4-7.5,7.5S8.3,20,12.4,20h3.8v-1.5h-3.8c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6v1.1  c0,0.6-0.5,1.2-1.1,1.2s-1.1-0.6-1.1-1.2v-1.1c0-2.1-1.7-3.8-3.8-3.8s-3.7,1.7-3.7,3.8s1.7,3.8,3.8,3.8c1,0,2-0.4,2.7-1.1  c0.5,0.7,1.3,1.1,2.2,1.1c1.5,0,2.6-1.2,2.6-2.7v-1.1C19.9,8.4,16.6,5,12.4,5z M12.4,14.7c-1.2,0-2.3-1-2.3-2.2s1-2.3,2.3-2.3  s2.3,1,2.3,2.3S13.6,14.7,12.4,14.7z',\r\n\r\n  minimize: 'M5,12h14 M19,11H5v2h14V11z',\r\n\r\n  more: 'M13.5,17c0,0.8-0.7,1.5-1.5,1.5s-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5S13.5,16.2,13.5,17z M13.5,12c0,0.8-0.7,1.5-1.5,1.5 s-1.5-0.7-1.5-1.5s0.7-1.5,1.5-1.5S13.5,11.2,13.5,12z M13.5,7c0,0.8-0.7,1.5-1.5,1.5S10.5,7.8,10.5,7s0.7-1.5,1.5-1.5 S13.5,6.2,13.5,7z',\r\n\r\n  openLink: 'M17,17H7V7h3V5H7C6,5,5,6,5,7v10c0,1,1,2,2,2h10c1,0,2-1,2-2v-3h-2V17z M14,5v2h1.6l-5.8,5.8l1.4,1.4L17,8.4V10h2V5H14z',\r\n\r\n  orderedList: 'M2.5,16h2v.5h-1v1h1V18h-2v1h3V15h-3Zm1-7h1V5h-2V6h1Zm-1,2H4.3L2.5,13.1V14h3V13H3.7l1.8-2.1V10h-3Zm5-5V8h14V6Zm0,12h14V16H7.5Zm0-5h14V11H7.5Z',\r\n\r\n  outdent: 'M3,12l3,3V9L3,12z M3,19h18v-2H3V19z M3,7h18V5H3V7z M9,11h12V9H9V11z M9,15h12v-2H9V15z',\r\n\r\n  pageBreaker: 'M3,9v6l3-3L3,9z M21,9H8V4h2v3h9V4h2V9z M21,20h-2v-3h-9v3H8v-5h13V20z M11,13H8v-2h3V13z M16,13h-3v-2h3V13z M21,13h-3v-2  h3V13z',\r\n\r\n  paragraphFormat: 'M10.15,5A4.11,4.11,0,0,0,6.08,8.18,4,4,0,0,0,10,13v6h2V7h2V19h2V7h2V5ZM8,9a2,2,0,0,1,2-2v4A2,2,0,0,1,8,9Z',\r\n\r\n  paragraphMore: 'M7.682,5a4.11,4.11,0,0,0-4.07,3.18,4,4,0,0,0,3.11,4.725h0l.027.005a3.766,3.766,0,0,0,.82.09v6h2V7h2V19h2V7h2V5ZM5.532,9a2,2,0,0,1,2-2v4A2,2,0,0,1,5.532,9Zm14.94,8.491a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.472,17.491Zm0-4a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.472,13.491Zm0-4a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.472,9.491Z',\r\n\r\n  paragraphStyle: 'M4,9c0-1.1,0.9-2,2-2v4C4.9,11,4,10.1,4,9z M16.7,20.5l3.2,1.9L19,18.8l3-2.9h-3.7l-1.4-3.5L15.3,16h-3.8l2.9,2.9l-0.9,3.6  L16.7,20.5z M10,17.4V19h1.6L10,17.4z M6.1,5c-1.9,0-3.6,1.3-4,3.2c-0.5,2.1,0.8,4.2,2.9,4.7c0,0,0,0,0,0h0.2C5.5,13,5.8,13,6,13v6  h2V7h2v7h2V7h2V5H6.1z',\r\n\r\n  pdfExport: 'M7,3C5.9,3,5,3.9,5,5v14c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9,2-2V7.6L14.4,3H7z M17,19H7V5h6v4h4V19z M16.3,13.5  c-0.2-0.6-1.1-0.8-2.6-0.8c-0.1,0-0.1,0-0.2,0c-0.3-0.3-0.8-0.9-1-1.2c-0.2-0.2-0.3-0.3-0.4-0.6c0.2-0.7,0.2-1,0.3-1.5  c0.1-0.9,0-1.6-0.2-1.8c-0.4-0.2-0.7-0.2-0.9-0.2c-0.1,0-0.3,0.2-0.7,0.7c-0.2,0.7-0.1,1.8,0.6,2.8c-0.2,0.8-0.7,1.6-1,2.4  c-0.8,0.2-1.5,0.7-1.9,1.1c-0.7,0.7-0.9,1.1-0.7,1.6c0,0.3,0.2,0.6,0.7,0.6c0.3-0.1,0.3-0.2,0.7-0.3c0.6-0.3,1.2-1.7,1.7-2.4  c0.8-0.2,1.7-0.3,2-0.3c0.1,0,0.3,0,0.6,0c0.8,0.8,1.2,1.1,1.8,1.2c0.1,0,0.2,0,0.3,0c0.3,0,0.8-0.1,1-0.6  C16.4,14.1,16.4,13.9,16.3,13.5z M8.3,15.7c-0.1,0.1-0.2,0.1-0.2,0.1c0-0.1,0-0.3,0.6-0.8c0.2-0.2,0.6-0.3,0.9-0.7  C9,15,8.6,15.5,8.3,15.7z M11.3,9c0-0.1,0.1-0.2,0.1-0.2S11.6,9,11.5,10c0,0.1,0,0.3-0.1,0.7C11.3,10.1,11,9.5,11.3,9z M10.9,13.1  c0.2-0.6,0.6-1,0.7-1.5c0.1,0.1,0.1,0.1,0.2,0.2c0.1,0.2,0.3,0.7,0.7,0.9C12.2,12.8,11.6,13,10.9,13.1z M15.2,14.1  c-0.1,0-0.1,0-0.2,0c-0.2,0-0.7-0.2-1-0.7c1.1,0,1.6,0.2,1.6,0.6C15.5,14.1,15.4,14.1,15.2,14.1z',\r\n\r\n  print: 'M16.1,17c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1s-0.4,1-1,1C16.5,18,16.1,17.6,16.1,17z M22,15v4c0,1.1-0.9,2-2,2H4  c-1.1,0-2-0.9-2-2v-4c0-1.1,0.9-2,2-2h1V5c0-1.1,0.9-2,2-2h7.4L19,7.6V13h1C21.1,13,22,13.9,22,15z M7,13h10V9h-4V5H7V13z M20,15H4  v4h16V15z',\r\n\r\n  redo: 'M13.6,9.4c1.7,0.3,3.2,0.9,4.6,2L21,8.5v7h-7l2.7-2.7C13,10.1,7.9,11,5.3,14.7c-0.2,0.3-0.4,0.5-0.5,0.8L3,14.6  C5.1,10.8,9.3,8.7,13.6,9.4z',\r\n\r\n  removeTable: 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z',\r\n\r\n  insertAll: 'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 ',\r\n\r\n  remove: 'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z',\r\n\r\n  replaceImage: 'M16,5v3H4v2h12v3l4-4L16,5z M8,19v-3h12v-2H8v-3l-4,4L8,19z',\r\n\r\n  row: 'M20,5H4C2.9,5,2,5.9,2,7v2v1.5v3V15v2c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2v-2v-1.5v-3V9V7C22,5.9,21.1,5,20,5z M16,6.5h4  c0.3,0,0.5,0.2,0.5,0.5v2H16V6.5z M9.5,6.5h5V9h-5V6.5z M3.5,7c0-0.3,0.2-0.5,0.5-0.5h4V9H3.5V7z M8,17.5H4c-0.3,0-0.5-0.2-0.5-0.5  v-2H8V17.5z M14.5,17.5h-5V15h5V17.5z M20.5,17c0,0.3-0.2,0.5-0.5,0.5h-4V15h4.5V17z',\r\n\r\n  selectAll: 'M5,7h2V5C5.9,5,5,5.9,5,7z M5,11h2V9H5V11z M9,19h2v-2H9V19z M5,11h2V9H5V11z M15,5h-2v2h2V5z M17,5v2h2C19,5.9,18.1,5,17,5  z M7,19v-2H5C5,18.1,5.9,19,7,19z M5,15h2v-2H5V15z M11,5H9v2h2V5z M13,19h2v-2h-2V19z M17,11h2V9h-2V11z M17,19c1.1,0,2-0.9,2-2h-2  V19z M17,11h2V9h-2V11z M17,15h2v-2h-2V15z M13,19h2v-2h-2V19z M13,7h2V5h-2V7z M9,15h6V9H9V15z M11,11h2v2h-2V11z',\r\n\r\n  smile: 'M11.991,3A9,9,0,1,0,21,12,8.99557,8.99557,0,0,0,11.991,3ZM12,19a7,7,0,1,1,7-7A6.99808,6.99808,0,0,1,12,19Zm3.105-5.2h1.503a4.94542,4.94542,0,0,1-9.216,0H8.895a3.57808,3.57808,0,0,0,6.21,0ZM7.5,9.75A1.35,1.35,0,1,1,8.85,11.1,1.35,1.35,0,0,1,7.5,9.75Zm6.3,0a1.35,1.35,0,1,1,1.35,1.35A1.35,1.35,0,0,1,13.8,9.75Z',\r\n\r\n  spellcheck: 'M19.1,13.6l-5.6,5.6l-2.7-2.7l-1.4,1.4l4.1,4.1l7-7L19.1,13.6z M10.8,13.7l2.7,2.7l0.8-0.8L10.5,5h-2l-5,14h2l1.4-4h2.6  L10.8,13.7z M9.5,7.8l1.9,5.2H7.6L9.5,7.8z',\r\n\r\n  star: 'M12.1,7.7l1,2.5l0.4,0.9h1h2.4l-2.1,2l-0.6,0.6l0.2,0.9l0.6,2.3l-2.2-1.3L12,15.2l-0.8,0.5L9,17l0.5-2.5l0.1-0.8L9,13.1  l-2-2h2.5h0.9l0.4-0.8L12.1,7.7 M12.2,4L9.5,9.6H3.4L8,14.2L6.9,20l5.1-3.1l5.3,3.1l-1.5-5.8l4.8-4.6h-6.1L12.2,4L12.2,4z',\r\n\r\n  strikeThrough: 'M3,12.20294H21v1.5H16.63422a3.59782,3.59782,0,0,1,.34942,1.5929,3.252,3.252,0,0,1-1.31427,2.6997A5.55082,5.55082,0,0,1,12.20251,19a6.4421,6.4421,0,0,1-2.62335-.539,4.46335,4.46335,0,0,1-1.89264-1.48816,3.668,3.668,0,0,1-.67016-2.15546V14.704h.28723v-.0011h.34149v.0011H9.02v.11334a2.18275,2.18275,0,0,0,.85413,1.83069,3.69,3.69,0,0,0,2.32836.67926,3.38778,3.38778,0,0,0,2.07666-.5462,1.73346,1.73346,0,0,0,.7013-1.46655,1.69749,1.69749,0,0,0-.647-1.43439,3.00525,3.00525,0,0,0-.27491-.17725H3ZM16.34473,7.05981A4.18163,4.18163,0,0,0,14.6236,5.5462,5.627,5.627,0,0,0,12.11072,5,5.16083,5.16083,0,0,0,8.74719,6.06213,3.36315,3.36315,0,0,0,7.44006,8.76855a3.22923,3.22923,0,0,0,.3216,1.42786h2.59668c-.08338-.05365-.18537-.10577-.25269-.16064a1.60652,1.60652,0,0,1-.65283-1.30036,1.79843,1.79843,0,0,1,.68842-1.5108,3.12971,3.12971,0,0,1,1.96948-.55243,3.04779,3.04779,0,0,1,2.106.6687,2.35066,2.35066,0,0,1,.736,1.83258v.11341h2.00317V9.17346A3.90013,3.90013,0,0,0,16.34473,7.05981Z',\r\n\r\n  subscript: 'M10.4,12l3.6,3.6L12.6,17L9,13.4L5.4,17L4,15.6L7.6,12L4,8.4L5.4,7L9,10.6L12.6,7L14,8.4L10.4,12z M18.31234,19.674  l1.06812-1.1465c0.196-0.20141,0.37093-0.40739,0.5368-0.6088c0.15975-0.19418,0.30419-0.40046,0.432-0.617  c0.11969-0.20017,0.21776-0.41249,0.29255-0.6334c0.07103-0.21492,0.10703-0.43986,0.10662-0.66621  c0.00297-0.28137-0.04904-0.56062-0.1531-0.82206c-0.09855-0.24575-0.25264-0.46534-0.45022-0.6416  c-0.20984-0.18355-0.45523-0.32191-0.72089-0.40646c-0.63808-0.19005-1.3198-0.17443-1.94851,0.04465  c-0.28703,0.10845-0.54746,0.2772-0.76372,0.49487c-0.20881,0.20858-0.37069,0.45932-0.47483,0.73548  c-0.10002,0.26648-0.15276,0.54838-0.15585,0.833l-0.00364,0.237H17.617l0.00638-0.22692  c0.00158-0.12667,0.01966-0.25258,0.05377-0.37458c0.03337-0.10708,0.08655-0.20693,0.15679-0.29437  c0.07105-0.08037,0.15959-0.14335,0.25882-0.1841c0.22459-0.08899,0.47371-0.09417,0.7018-0.01458  c0.0822,0.03608,0.15559,0.08957,0.21509,0.15679c0.06076,0.07174,0.10745,0.15429,0.13761,0.24333  c0.03567,0.10824,0.05412,0.22141,0.05469,0.33538c-0.00111,0.08959-0.0118,0.17881-0.0319,0.26612  c-0.02913,0.10428-0.07076,0.20465-0.124,0.29893c-0.07733,0.13621-0.1654,0.26603-0.26338,0.38823  c-0.13438,0.17465-0.27767,0.34226-0.42929,0.50217l-2.15634,2.35315V21H21v-1.326H18.31234z',\r\n\r\n  superscript: 'M10.4,12,14,15.6,12.6,17,9,13.4,5.4,17,4,15.6,7.6,12,4,8.4,5.4,7,9,10.6,12.6,7,14,8.4Zm8.91234-3.326,1.06812-1.1465c.196-.20141.37093-.40739.5368-.6088a4.85745,4.85745,0,0,0,.432-.617,3.29,3.29,0,0,0,.29255-.6334,2.11079,2.11079,0,0,0,.10662-.66621,2.16127,2.16127,0,0,0-.1531-.82206,1.7154,1.7154,0,0,0-.45022-.6416,2.03,2.03,0,0,0-.72089-.40646,3.17085,3.17085,0,0,0-1.94851.04465,2.14555,2.14555,0,0,0-.76372.49487,2.07379,2.07379,0,0,0-.47483.73548,2.446,2.446,0,0,0-.15585.833l-.00364.237H18.617L18.62338,5.25a1.45865,1.45865,0,0,1,.05377-.37458.89552.89552,0,0,1,.15679-.29437.70083.70083,0,0,1,.25882-.1841,1.00569,1.00569,0,0,1,.7018-.01458.62014.62014,0,0,1,.21509.15679.74752.74752,0,0,1,.13761.24333,1.08893,1.08893,0,0,1,.05469.33538,1.25556,1.25556,0,0,1-.0319.26612,1.34227,1.34227,0,0,1-.124.29893,2.94367,2.94367,0,0,1-.26338.38823,6.41629,6.41629,0,0,1-.42929.50217L17.19709,8.92642V10H22V8.674Z',\r\n\r\n  symbols: 'M15.77493,16.98885a8.21343,8.21343,0,0,0,1.96753-2.57651,7.34824,7.34824,0,0,0,.6034-3.07618A6.09092,6.09092,0,0,0,11.99515,5a6.13347,6.13347,0,0,0-4.585,1.79187,6.417,6.417,0,0,0-1.756,4.69207,6.93955,6.93955,0,0,0,.622,2.97415,8.06587,8.06587,0,0,0,1.949,2.53076H5.41452V19h5.54114v-.04331h-.00147V16.84107a5.82825,5.82825,0,0,1-2.2052-2.2352A6.40513,6.40513,0,0,1,7.97672,11.447,4.68548,4.68548,0,0,1,9.07785,8.19191a3.73232,3.73232,0,0,1,2.9173-1.22462,3.76839,3.76839,0,0,1,2.91241,1.21489,4.482,4.482,0,0,1,1.11572,3.154,6.71141,6.71141,0,0,1-.75384,3.24732,5.83562,5.83562,0,0,1-2.22357,2.25759v2.11562H13.0444V19h5.54108V16.98885Z',\r\n\r\n  tags: 'M8.9749 7.47489a1.5 1.5 0 1 1 -1.5 1.5A1.5 1.5 0 0 1 8.9749 7.47489Zm3.78866 -3.12713L16.5362 8.12041l0.33565 0.33564 2.77038 2.77038a2.01988 2.01988 0 0 1 0.59 1.42 1.95518 1.95518 0 0 1 -0.5854 1.40455l0.00044 0.00043 -5.59583 5.59583 -0.00043 -0.00044a1.95518 1.95518 0 0 1 -1.40455 0.5854 1.98762 1.98762 0 0 1 -1.41 -0.58L8.45605 16.87185l-0.33564 -0.33565L4.35777 12.77357a1.99576 1.99576 0 0 1 -0.59 -1.42V9.36358l0 -3.59582a2.00579 2.00579 0 0 1 2 -2l3.59582 0h1.98995A1.98762 1.98762 0 0 1 12.76356 4.34776ZM15.46186 9.866l-0.33564 -0.33564L11.36359 5.76776H5.76776v5.59583L9.866 15.46186l2.7794 2.7794 5.5878 -5.60385 -0.001 -0.001Z',\r\n\r\n  tableHeader: 'M20,5H4C2.9,5,2,5.9,2,7v10c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V7C22,5.9,21.1,5,20,5z M8,17.5H4c-0.3,0-0.5-0.2-0.5-0.4  l0,0V17v-2H8V17.5z M8,13.5H3.5v-3H8V13.5z M14.5,17.5h-5V15h5V17.5z M14.5,13.5h-5v-3h5V13.5z M20.5,17c0,0.3-0.2,0.5-0.4,0.5l0,0  H16V15h4.5V17z M20.5,13.5H16v-3h4.5V13.5z M20.5,9h-4.4H16h-1.5h-5H8H7.9H3.5V7c0-0.3,0.2-0.5,0.4-0.5l0,0h4l0,0h8.2l0,0H20  c0.3,0,0.5,0.2,0.5,0.4l0,0V9z',\r\n\r\n  tableStyle: 'M20.0171,19.89752l.9,3.6-3.2-1.9-3.3,1.9.8-3.6-2.9-2.9h3.8l1.7-3.5,1.4,3.5h3.8ZM20,5H4A2.00591,2.00591,0,0,0,2,7V17a2.00591,2.00591,0,0,0,2,2h7.49115l-.58826-.58826L9.99115,17.5H9.5V14.9975h5.36511L16,12.66089V10.5h4.5v3h-.52783l.599,1.4975H22V7A2.00591,2.00591,0,0,0,20,5ZM3.5,7A.4724.4724,0,0,1,4,6.5H8V9H3.5Zm0,3.5H8v3H3.5Zm.5,7a.4724.4724,0,0,1-.5-.5V15H8v2.5Zm10.5-4h-5v-3h5Zm0-4.5h-5V6.5h5Zm6,0H16V6.5h4a.4724.4724,0,0,1,.5.5Z',\r\n\r\n  textColor: 'M15.2,13.494s-3.6,3.9-3.6,6.3a3.65,3.65,0,0,0,7.3.1v-.1C18.9,17.394,15.2,13.494,15.2,13.494Zm-1.47-1.357.669-.724L12.1,5h-2l-5,14h2l1.43-4h2.943A24.426,24.426,0,0,1,13.726,12.137ZM11.1,7.8l1.86,5.2H9.244Z',\r\n\r\n  textMore: 'M13.55,19h2l-5-14h-2l-5,14h2l1.4-4h5.1Zm-5.9-6,1.9-5.2,1.9,5.2Zm12.8,4.5a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.45,17.5Zm0-4a1.5,1.5,0,1,1-1.5-1.5A1.5,1.5,0,0,1,20.45,13.5Zm0-4A1.5,1.5,0,1,1,18.95,8,1.5,1.5,0,0,1,20.45,9.5Z',\r\n\r\n  underline: 'M19,20v2H5V20Zm-3-6.785a4,4,0,0,1-5.74,3.4A3.75,3.75,0,0,1,8,13.085V5.005H6v8.21a6,6,0,0,0,8,5.44,5.851,5.851,0,0,0,4-5.65v-8H16ZM16,5v0h2V5ZM8,5H6v0H8Z',\r\n\r\n  undo: 'M10.4,9.4c-1.7,0.3-3.2,0.9-4.6,2L3,8.5v7h7l-2.7-2.7c3.7-2.6,8.8-1.8,11.5,1.9c0.2,0.3,0.4,0.5,0.5,0.8l1.8-0.9  C18.9,10.8,14.7,8.7,10.4,9.4z',\r\n\r\n  unlink: 'M14.4,11l1.6,1.6V11H14.4z M17,7h-4v1.9h4c1.7,0,3.1,1.4,3.1,3.1c0,1.3-0.8,2.4-1.9,2.8l1.4,1.4C21,15.4,22,13.8,22,12  C22,9.2,19.8,7,17,7z M2,4.3l3.1,3.1C3.3,8.1,2,9.9,2,12c0,2.8,2.2,5,5,5h4v-1.9H7c-1.7,0-3.1-1.4-3.1-3.1c0-1.6,1.2-2.9,2.8-3.1  L8.7,11H8v2h2.7l2.3,2.3V17h1.7l4,4l1.4-1.4L3.4,2.9L2,4.3z',\r\n\r\n  unorderedList: 'M4,10.5c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S4.8,10.5,4,10.5z M4,5.5C3.2,5.5,2.5,6.2,2.5,7  S3.2,8.5,4,8.5S5.5,7.8,5.5,7S4.8,5.5,4,5.5z M4,15.5c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S4.8,15.5,4,15.5z   M7.5,6v2h14V6H7.5z M7.5,18h14v-2h-14V18z M7.5,13h14v-2h-14V13z',\r\n\r\n  verticalAlignBottom: 'M16,13h-3V3h-2v10H8l4,4L16,13z M3,19v2h18v-2H3z',\r\n\r\n  verticalAlignMiddle: 'M3,11v2h18v-2H3z M8,18h3v3h2v-3h3l-4-4L8,18z M16,6h-3V3h-2v3H8l4,4L16,6z',\r\n\r\n  verticalAlignTop: 'M8,11h3v10h2V11h3l-4-4L8,11z M21,5V3H3v2H21z'\r\n}\r\n\r\nFE.FILEICONS = {\r\n  docIcon: {\r\n    extension: '.doc',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 9.617188 46.875 C 13.234375 46.875 16.160156 43.929688 16.160156 40.292969 C 16.160156 36.695312 13.234375 33.75 9.617188 33.75 L 7.402344 33.75 C 6.820312 33.75 6.371094 34.199219 6.371094 34.78125 L 6.371094 45.84375 C 6.371094 46.335938 6.714844 46.757812 7.191406 46.855469 L 7.402344 46.875 Z M 9.617188 44.792969 L 8.453125 44.792969 L 8.453125 35.832031 L 9.617188 35.832031 C 12.089844 35.832031 14.078125 37.835938 14.078125 40.292969 C 14.078125 42.789062 12.089844 44.773438 9.617188 44.792969 Z M 24.816406 46.875 C 26.539062 46.875 28.191406 46.085938 29.296875 44.867188 C 30.460938 43.648438 31.191406 41.980469 31.191406 40.125 C 31.191406 38.269531 30.460938 36.617188 29.296875 35.382812 C 28.191406 34.144531 26.539062 33.375 24.816406 33.375 C 23.015625 33.375 21.367188 34.144531 20.222656 35.382812 C 19.058594 36.617188 18.367188 38.269531 18.367188 40.125 C 18.367188 41.980469 19.058594 43.648438 20.222656 44.867188 C 21.367188 46.085938 23.015625 46.875 24.816406 46.875 Z M 24.816406 44.738281 C 23.617188 44.738281 22.566406 44.230469 21.777344 43.386719 C 20.992188 42.582031 20.503906 41.398438 20.503906 40.125 C 20.503906 38.851562 20.992188 37.667969 21.777344 36.84375 C 22.566406 36 23.617188 35.511719 24.816406 35.511719 C 25.941406 35.511719 26.992188 36 27.777344 36.84375 C 28.546875 37.667969 29.054688 38.851562 29.054688 40.125 C 29.054688 41.398438 28.546875 42.582031 27.777344 43.386719 C 26.992188 44.230469 25.941406 44.738281 24.816406 44.738281 Z M 39.996094 46.875 C 41.648438 46.875 43.148438 46.332031 44.328125 45.414062 C 44.777344 45.054688 44.851562 44.382812 44.515625 43.914062 C 44.140625 43.460938 43.445312 43.386719 43.015625 43.707031 C 42.171875 44.382812 41.160156 44.738281 39.996094 44.738281 C 38.703125 44.738281 37.503906 44.210938 36.621094 43.386719 C 35.777344 42.5625 35.253906 41.398438 35.253906 40.125 C 35.253906 38.851562 35.777344 37.726562 36.621094 36.863281 C 37.503906 36.039062 38.703125 35.511719 39.996094 35.511719 C 41.160156 35.511719 42.191406 35.867188 43.015625 36.542969 C 43.445312 36.882812 44.140625 36.804688 44.515625 36.335938 C 44.851562 35.867188 44.777344 35.210938 44.328125 34.835938 C 43.148438 33.917969 41.648438 33.375 39.996094 33.375 C 36.246094 33.394531 33.132812 36.414062 33.117188 40.125 C 33.132812 43.855469 36.246094 46.875 39.996094 46.875 Z M 39.996094 46.875 \"/>\r\n      </g>`\r\n  },\r\n  gifIcon: {\r\n    extension: '.gif',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 17.394531 46.875 C 18.988281 46.875 20.46875 46.332031 21.648438 45.414062 C 21.835938 45.28125 21.949219 45.132812 22.003906 44.960938 L 22.003906 44.945312 C 22.023438 44.90625 22.023438 44.886719 22.042969 44.851562 C 22.0625 44.738281 22.097656 44.664062 22.097656 44.53125 L 22.097656 40.386719 C 22.097656 39.789062 21.613281 39.335938 21.011719 39.335938 L 17.28125 39.335938 C 16.699219 39.335938 16.210938 39.789062 16.210938 40.386719 C 16.210938 40.96875 16.699219 41.457031 17.28125 41.457031 L 19.960938 41.457031 L 19.960938 44.023438 C 19.210938 44.457031 18.332031 44.738281 17.394531 44.738281 C 16.042969 44.738281 14.863281 44.230469 14.019531 43.367188 C 13.136719 42.523438 12.613281 41.382812 12.613281 40.144531 C 12.613281 38.867188 13.136719 37.726562 14.019531 36.882812 C 14.863281 36.019531 16.042969 35.511719 17.394531 35.511719 C 18.519531 35.511719 19.550781 35.90625 20.355469 36.523438 C 20.824219 36.898438 21.519531 36.804688 21.875 36.355469 C 22.230469 35.886719 22.15625 35.195312 21.667969 34.835938 C 20.503906 33.917969 18.988281 33.375 17.394531 33.375 C 13.585938 33.375 10.472656 36.375 10.472656 40.144531 C 10.472656 43.894531 13.585938 46.875 17.394531 46.875 Z M 26.945312 46.875 C 27.507812 46.875 27.996094 46.425781 27.996094 45.84375 L 27.996094 34.78125 C 27.996094 34.199219 27.507812 33.75 26.945312 33.75 C 26.363281 33.75 25.914062 34.199219 25.914062 34.78125 L 25.914062 45.84375 C 25.914062 46.425781 26.363281 46.875 26.945312 46.875 Z M 33.066406 46.875 C 33.648438 46.875 34.117188 46.40625 34.117188 45.84375 L 34.117188 41.34375 L 38.488281 41.34375 C 39.050781 41.34375 39.519531 40.875 39.519531 40.292969 C 39.519531 39.75 39.050781 39.261719 38.488281 39.261719 L 34.117188 39.261719 L 34.117188 35.832031 L 39.199219 35.832031 C 39.742188 35.832031 40.230469 35.363281 40.230469 34.78125 C 40.230469 34.21875 39.742188 33.75 39.199219 33.75 L 33.066406 33.75 C 32.488281 33.75 32.035156 34.21875 32.035156 34.78125 L 32.035156 45.84375 C 32.035156 46.40625 32.488281 46.875 33.066406 46.875 Z M 33.066406 46.875 \"/>\r\n      </g>`\r\n  },\r\n  jpegIcon: {\r\n    extension: '.jpeg',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 9 43.75 C 11.140625 43.75 12.890625 42.015625 12.890625 39.875 L 12.890625 33.671875 C 12.890625 33.1875 12.5 32.8125 12.03125 32.8125 C 11.546875 32.8125 11.15625 33.1875 11.15625 33.671875 L 11.15625 39.875 C 11.15625 41.046875 10.1875 42.015625 9 42.015625 C 8.046875 42.015625 7.234375 41.390625 6.953125 40.53125 C 6.8125 40.078125 6.328125 39.828125 5.859375 39.984375 C 5.421875 40.109375 5.15625 40.59375 5.3125 41.0625 C 5.8125 42.625 7.28125 43.75 9 43.75 Z M 15.640625 43.75 C 16.125 43.75 16.515625 43.359375 16.515625 42.890625 L 16.515625 39.5 L 18.4375 39.5 C 20.296875 39.5 21.796875 38 21.796875 36.171875 C 21.796875 34.3125 20.296875 32.8125 18.4375 32.8125 L 15.640625 32.8125 C 15.171875 32.8125 14.78125 33.1875 14.78125 33.671875 L 14.78125 42.890625 C 14.78125 43.359375 15.171875 43.75 15.640625 43.75 Z M 18.4375 37.765625 L 16.515625 37.765625 L 16.515625 34.546875 L 18.4375 34.546875 C 19.34375 34.546875 20.046875 35.265625 20.0625 36.171875 C 20.046875 37.046875 19.34375 37.765625 18.4375 37.765625 Z M 29.234375 43.75 C 29.6875 43.75 30.09375 43.359375 30.09375 42.890625 C 30.09375 42.40625 29.6875 42.015625 29.234375 42.015625 L 25 42.015625 L 25 39.140625 L 28.640625 39.140625 C 29.109375 39.140625 29.5 38.75 29.5 38.265625 C 29.5 37.8125 29.109375 37.40625 28.640625 37.40625 L 25 37.40625 L 25 34.546875 L 29.234375 34.546875 C 29.6875 34.546875 30.09375 34.15625 30.09375 33.671875 C 30.09375 33.1875 29.6875 32.8125 29.234375 32.8125 L 24.125 32.8125 C 23.640625 32.8125 23.265625 33.1875 23.265625 33.671875 L 23.265625 42.890625 C 23.265625 43.359375 23.640625 43.75 24.125 43.75 C 24.125 43.75 24.140625 43.734375 24.140625 43.734375 C 24.140625 43.734375 24.140625 43.75 24.171875 43.75 Z M 37.1875 43.75 C 38.515625 43.75 39.75 43.296875 40.734375 42.53125 C 40.890625 42.421875 40.984375 42.296875 41.03125 42.15625 L 41.03125 42.140625 C 41.046875 42.109375 41.046875 42.09375 41.0625 42.0625 C 41.078125 41.96875 41.109375 41.90625 41.109375 41.796875 L 41.109375 38.34375 C 41.109375 37.914062 40.8125 37.578125 40.410156 37.492188 L 40.203125 37.46875 L 37.09375 37.46875 C 36.609375 37.46875 36.203125 37.84375 36.203125 38.34375 C 36.203125 38.828125 36.609375 39.234375 37.09375 39.234375 L 39.328125 39.234375 L 39.328125 41.375 C 38.703125 41.734375 37.96875 41.96875 37.1875 41.96875 C 36.0625 41.96875 35.078125 41.546875 34.375 40.828125 C 33.640625 40.125 33.203125 39.171875 33.203125 38.140625 C 33.203125 37.078125 33.640625 36.125 34.375 35.421875 C 35.078125 34.703125 36.0625 34.28125 37.1875 34.28125 C 38.125 34.28125 38.984375 34.609375 39.65625 35.125 C 40.046875 35.4375 40.625 35.359375 40.921875 34.984375 C 41.21875 34.59375 41.15625 34.015625 40.75 33.71875 C 39.78125 32.953125 38.515625 32.5 37.1875 32.5 C 34.015625 32.5 31.421875 35 31.421875 38.140625 C 31.421875 41.265625 34.015625 43.75 37.1875 43.75 Z M 37.1875 43.75 \"/>\r\n      </g>`\r\n  },\r\n  logIcon: {\r\n    extension: '.log',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 13.542969 46.875 C 14.085938 46.875 14.574219 46.40625 14.574219 45.84375 C 14.574219 45.261719 14.085938 44.792969 13.542969 44.792969 L 8.460938 44.792969 L 8.460938 34.78125 C 8.460938 34.21875 7.992188 33.75 7.410156 33.75 C 6.828125 33.75 6.378906 34.21875 6.378906 34.78125 L 6.378906 45.84375 C 6.378906 46.40625 6.828125 46.875 7.410156 46.875 Z M 21.742188 46.875 C 23.46875 46.875 25.117188 46.085938 26.222656 44.867188 C 27.386719 43.648438 28.117188 41.980469 28.117188 40.125 C 28.117188 38.269531 27.386719 36.617188 26.222656 35.382812 C 25.117188 34.144531 23.46875 33.375 21.742188 33.375 C 19.941406 33.375 18.292969 34.144531 17.148438 35.382812 C 15.984375 36.617188 15.292969 38.269531 15.292969 40.125 C 15.292969 41.980469 15.984375 43.648438 17.148438 44.867188 C 18.292969 46.085938 19.941406 46.875 21.742188 46.875 Z M 21.742188 44.738281 C 20.542969 44.738281 19.492188 44.230469 18.703125 43.386719 C 17.917969 42.582031 17.429688 41.398438 17.429688 40.125 C 17.429688 38.851562 17.917969 37.667969 18.703125 36.84375 C 19.492188 36 20.542969 35.511719 21.742188 35.511719 C 22.867188 35.511719 23.917969 36 24.703125 36.84375 C 25.472656 37.667969 25.980469 38.851562 25.980469 40.125 C 25.980469 41.398438 25.472656 42.582031 24.703125 43.386719 C 23.917969 44.230469 22.867188 44.738281 21.742188 44.738281 Z M 37.300781 46.875 C 38.894531 46.875 40.375 46.332031 41.558594 45.414062 C 41.746094 45.28125 41.855469 45.132812 41.914062 44.960938 L 41.914062 44.945312 L 41.949219 44.851562 C 41.96875 44.738281 42.007812 44.664062 42.007812 44.53125 L 42.007812 40.386719 C 42.007812 39.789062 41.519531 39.335938 40.917969 39.335938 L 37.1875 39.335938 C 36.605469 39.335938 36.121094 39.789062 36.121094 40.386719 C 36.121094 40.96875 36.605469 41.457031 37.1875 41.457031 L 39.871094 41.457031 L 39.871094 44.023438 C 39.121094 44.457031 38.238281 44.738281 37.300781 44.738281 C 35.949219 44.738281 34.769531 44.230469 33.925781 43.367188 C 33.042969 42.523438 32.519531 41.382812 32.519531 40.144531 C 32.519531 38.867188 33.042969 37.726562 33.925781 36.882812 C 34.769531 36.019531 35.949219 35.511719 37.300781 35.511719 C 38.425781 35.511719 39.457031 35.90625 40.261719 36.523438 C 40.730469 36.898438 41.425781 36.804688 41.78125 36.355469 C 42.136719 35.886719 42.0625 35.195312 41.574219 34.835938 C 40.414062 33.917969 38.894531 33.375 37.300781 33.375 C 33.496094 33.375 30.382812 36.375 30.382812 40.144531 C 30.382812 43.894531 33.496094 46.875 37.300781 46.875 Z M 37.300781 46.875 \"/>\r\n      </g>`\r\n  },\r\n  movIcon: {\r\n    extension: '.mov',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 15.472656 46.875 C 16.035156 46.875 16.523438 46.40625 16.523438 45.84375 L 16.523438 34.78125 C 16.523438 34.289062 16.152344 33.882812 15.679688 33.777344 L 15.472656 33.75 L 15.453125 33.75 C 15.117188 33.75 14.816406 33.898438 14.609375 34.179688 L 10.878906 39.355469 L 7.148438 34.179688 C 6.960938 33.898438 6.625 33.75 6.324219 33.75 L 6.265625 33.75 C 5.703125 33.75 5.234375 34.21875 5.234375 34.78125 L 5.234375 45.84375 C 5.234375 46.40625 5.703125 46.875 6.265625 46.875 C 6.847656 46.875 7.316406 46.40625 7.316406 45.84375 L 7.316406 37.949219 L 10 41.699219 C 10.203125 41.980469 10.523438 42.132812 10.859375 42.132812 L 10.898438 42.132812 C 11.234375 42.132812 11.535156 41.980469 11.742188 41.699219 L 14.441406 37.949219 L 14.441406 45.84375 C 14.441406 46.40625 14.890625 46.875 15.472656 46.875 Z M 25.460938 46.875 C 27.1875 46.875 28.835938 46.085938 29.941406 44.867188 C 31.105469 43.648438 31.835938 41.980469 31.835938 40.125 C 31.835938 38.269531 31.105469 36.617188 29.941406 35.382812 C 28.835938 34.144531 27.1875 33.375 25.460938 33.375 C 23.660156 33.375 22.011719 34.144531 20.867188 35.382812 C 19.703125 36.617188 19.011719 38.269531 19.011719 40.125 C 19.011719 41.980469 19.703125 43.648438 20.867188 44.867188 C 22.011719 46.085938 23.660156 46.875 25.460938 46.875 Z M 25.460938 44.738281 C 24.261719 44.738281 23.210938 44.230469 22.421875 43.386719 C 21.636719 42.582031 21.148438 41.398438 21.148438 40.125 C 21.148438 38.851562 21.636719 37.667969 22.421875 36.84375 C 23.210938 36 24.261719 35.511719 25.460938 35.511719 C 26.585938 35.511719 27.636719 36 28.421875 36.84375 C 29.191406 37.667969 29.699219 38.851562 29.699219 40.125 C 29.699219 41.398438 29.191406 42.582031 28.421875 43.386719 C 27.636719 44.230469 26.585938 44.738281 25.460938 44.738281 Z M 38.683594 46.855469 L 38.71875 46.855469 C 38.777344 46.835938 38.8125 46.820312 38.871094 46.820312 C 38.886719 46.800781 38.886719 46.800781 38.90625 46.800781 C 38.964844 46.78125 39.019531 46.726562 39.058594 46.707031 L 39.09375 46.6875 L 39.207031 46.59375 C 39.226562 46.574219 39.226562 46.574219 39.246094 46.539062 L 39.339844 46.425781 C 39.355469 46.425781 39.355469 46.425781 39.355469 46.40625 C 39.394531 46.367188 39.414062 46.292969 39.433594 46.257812 L 44.0625 35.304688 C 44.269531 34.800781 44.027344 34.179688 43.5 33.976562 C 42.996094 33.75 42.375 33.992188 42.152344 34.519531 L 38.496094 43.199219 L 34.839844 34.519531 C 34.613281 33.992188 34.011719 33.75 33.507812 33.976562 C 32.964844 34.179688 32.71875 34.800781 32.945312 35.304688 L 37.539062 46.257812 C 37.574219 46.292969 37.613281 46.367188 37.632812 46.40625 C 37.632812 46.425781 37.652344 46.425781 37.652344 46.425781 C 37.667969 46.460938 37.707031 46.5 37.746094 46.539062 C 37.746094 46.574219 37.761719 46.574219 37.761719 46.59375 C 37.820312 46.632812 37.855469 46.648438 37.894531 46.6875 L 37.914062 46.6875 C 37.96875 46.726562 38.042969 46.78125 38.082031 46.800781 L 38.101562 46.800781 C 38.101562 46.800781 38.121094 46.800781 38.121094 46.820312 C 38.15625 46.820312 38.230469 46.835938 38.269531 46.855469 L 38.308594 46.855469 L 38.402344 46.871094 L 38.496094 46.875 C 38.550781 46.875 38.605469 46.875 38.683594 46.855469 Z M 38.683594 46.855469 \"/>\r\n      </g>`\r\n  },\r\n  ogvIcon: {\r\n    extension: '.ogv',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 11.511719 46.875 C 13.238281 46.875 14.886719 46.085938 15.996094 44.867188 C 17.15625 43.648438 17.886719 41.980469 17.886719 40.125 C 17.886719 38.269531 17.15625 36.617188 15.996094 35.382812 C 14.886719 34.144531 13.238281 33.375 11.511719 33.375 C 9.714844 33.375 8.0625 34.144531 6.917969 35.382812 C 5.757812 36.617188 5.0625 38.269531 5.0625 40.125 C 5.0625 41.980469 5.757812 43.648438 6.917969 44.867188 C 8.0625 46.085938 9.714844 46.875 11.511719 46.875 Z M 11.511719 44.738281 C 10.3125 44.738281 9.261719 44.230469 8.476562 43.386719 C 7.6875 42.582031 7.199219 41.398438 7.199219 40.125 C 7.199219 38.851562 7.6875 37.667969 8.476562 36.84375 C 9.261719 36 10.3125 35.511719 11.511719 35.511719 C 12.636719 35.511719 13.6875 36 14.476562 36.84375 C 15.246094 37.667969 15.75 38.851562 15.75 40.125 C 15.75 41.398438 15.246094 42.582031 14.476562 43.386719 C 13.6875 44.230469 12.636719 44.738281 11.511719 44.738281 Z M 27.25 46.875 C 28.84375 46.875 30.324219 46.332031 31.507812 45.414062 C 31.695312 45.28125 31.804688 45.132812 31.863281 44.960938 L 31.863281 44.945312 C 31.882812 44.90625 31.882812 44.886719 31.898438 44.851562 C 31.917969 44.738281 31.957031 44.664062 31.957031 44.53125 L 31.957031 40.386719 C 31.957031 39.789062 31.46875 39.335938 30.867188 39.335938 L 27.136719 39.335938 C 26.554688 39.335938 26.070312 39.789062 26.070312 40.386719 C 26.070312 40.96875 26.554688 41.457031 27.136719 41.457031 L 29.820312 41.457031 L 29.820312 44.023438 C 29.070312 44.457031 28.1875 44.738281 27.25 44.738281 C 25.898438 44.738281 24.71875 44.230469 23.875 43.367188 C 22.992188 42.523438 22.46875 41.382812 22.46875 40.144531 C 22.46875 38.867188 22.992188 37.726562 23.875 36.882812 C 24.71875 36.019531 25.898438 35.511719 27.25 35.511719 C 28.375 35.511719 29.40625 35.90625 30.210938 36.523438 C 30.679688 36.898438 31.375 36.804688 31.730469 36.355469 C 32.085938 35.886719 32.011719 35.195312 31.523438 34.835938 C 30.363281 33.917969 28.84375 33.375 27.25 33.375 C 23.445312 33.375 20.332031 36.375 20.332031 40.144531 C 20.332031 43.894531 23.445312 46.875 27.25 46.875 Z M 40.191406 46.855469 L 40.230469 46.855469 C 40.285156 46.835938 40.324219 46.820312 40.378906 46.820312 C 40.398438 46.800781 40.398438 46.800781 40.417969 46.800781 C 40.472656 46.78125 40.53125 46.726562 40.566406 46.707031 C 40.605469 46.6875 40.605469 46.6875 40.605469 46.6875 L 40.71875 46.59375 C 40.738281 46.574219 40.738281 46.574219 40.753906 46.539062 L 40.847656 46.425781 C 40.867188 46.425781 40.867188 46.425781 40.867188 46.40625 C 40.90625 46.367188 40.925781 46.292969 40.941406 46.257812 L 45.574219 35.304688 C 45.78125 34.800781 45.535156 34.179688 45.011719 33.976562 C 44.503906 33.75 43.886719 33.992188 43.660156 34.519531 L 40.003906 43.199219 L 36.347656 34.519531 C 36.125 33.992188 35.523438 33.75 35.019531 33.976562 C 34.472656 34.179688 34.230469 34.800781 34.457031 35.304688 L 39.050781 46.257812 C 39.085938 46.292969 39.125 46.367188 39.144531 46.40625 C 39.144531 46.425781 39.160156 46.425781 39.160156 46.425781 C 39.179688 46.460938 39.21875 46.5 39.253906 46.539062 C 39.253906 46.574219 39.273438 46.574219 39.273438 46.59375 C 39.332031 46.632812 39.367188 46.648438 39.40625 46.6875 L 39.425781 46.6875 C 39.480469 46.726562 39.554688 46.78125 39.59375 46.800781 L 39.613281 46.800781 C 39.613281 46.800781 39.628906 46.800781 39.628906 46.820312 C 39.667969 46.820312 39.742188 46.835938 39.78125 46.855469 L 39.816406 46.855469 L 39.910156 46.871094 L 40.003906 46.875 C 40.0625 46.875 40.117188 46.875 40.191406 46.855469 Z M 40.191406 46.855469 \"/>\r\n      </g>`\r\n  },\r\n  pngIcon: {\r\n    extension: '.png',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 7.523438 46.875 C 8.105469 46.875 8.574219 46.40625 8.574219 45.84375 L 8.574219 41.773438 L 10.878906 41.773438 C 13.109375 41.773438 14.910156 39.976562 14.910156 37.78125 C 14.910156 35.550781 13.109375 33.75 10.878906 33.75 L 7.523438 33.75 C 6.960938 33.75 6.492188 34.199219 6.492188 34.78125 L 6.492188 45.84375 C 6.492188 46.40625 6.960938 46.875 7.523438 46.875 Z M 10.878906 39.695312 L 8.574219 39.695312 L 8.574219 35.832031 L 10.878906 35.832031 C 11.964844 35.832031 12.808594 36.695312 12.828125 37.78125 C 12.808594 38.832031 11.964844 39.695312 10.878906 39.695312 Z M 26.75 46.875 C 27.3125 46.875 27.78125 46.40625 27.78125 45.84375 L 27.78125 34.949219 C 27.78125 34.40625 27.3125 33.9375 26.75 33.9375 C 26.1875 33.9375 25.738281 34.40625 25.738281 34.949219 L 25.738281 42.675781 L 19.679688 34.292969 C 19.363281 33.84375 18.722656 33.75 18.253906 34.070312 C 17.972656 34.273438 17.824219 34.613281 17.84375 34.929688 L 17.84375 45.84375 C 17.84375 46.40625 18.292969 46.875 18.875 46.875 C 19.417969 46.875 19.886719 46.40625 19.886719 45.84375 L 19.886719 38.0625 L 25.886719 46.386719 C 25.90625 46.425781 25.941406 46.460938 25.980469 46.5 C 26.167969 46.726562 26.449219 46.875 26.75 46.875 Z M 38.082031 46.875 C 39.675781 46.875 41.15625 46.332031 42.339844 45.414062 C 42.527344 45.28125 42.636719 45.132812 42.695312 44.960938 L 42.695312 44.945312 C 42.714844 44.90625 42.714844 44.886719 42.730469 44.851562 C 42.75 44.738281 42.789062 44.664062 42.789062 44.53125 L 42.789062 40.386719 C 42.789062 39.789062 42.300781 39.335938 41.699219 39.335938 L 37.96875 39.335938 C 37.386719 39.335938 36.902344 39.789062 36.902344 40.386719 C 36.902344 40.96875 37.386719 41.457031 37.96875 41.457031 L 40.652344 41.457031 L 40.652344 44.023438 C 39.902344 44.457031 39.019531 44.738281 38.082031 44.738281 C 36.730469 44.738281 35.550781 44.230469 34.707031 43.367188 C 33.824219 42.523438 33.300781 41.382812 33.300781 40.144531 C 33.300781 38.867188 33.824219 37.726562 34.707031 36.882812 C 35.550781 36.019531 36.730469 35.511719 38.082031 35.511719 C 39.207031 35.511719 40.238281 35.90625 41.042969 36.523438 C 41.511719 36.898438 42.207031 36.804688 42.5625 36.355469 C 42.917969 35.886719 42.84375 35.195312 42.355469 34.835938 C 41.195312 33.917969 39.675781 33.375 38.082031 33.375 C 34.277344 33.375 31.164062 36.375 31.164062 40.144531 C 31.164062 43.894531 34.277344 46.875 38.082031 46.875 Z M 38.082031 46.875 \"/>\r\n      </g>`\r\n  },\r\n  txtIcon: {\r\n    extension: '.txt',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 12.847656 46.875 C 13.429688 46.875 13.878906 46.425781 13.878906 45.84375 L 13.878906 35.832031 L 16.859375 35.832031 C 17.421875 35.832031 17.890625 35.34375 17.890625 34.78125 C 17.890625 34.199219 17.421875 33.75 16.859375 33.75 L 8.855469 33.75 C 8.273438 33.75 7.824219 34.199219 7.824219 34.78125 C 7.824219 35.34375 8.273438 35.832031 8.855469 35.832031 L 11.816406 35.832031 L 11.816406 45.84375 C 11.816406 46.425781 12.285156 46.875 12.847656 46.875 Z M 29.019531 46.875 C 29.222656 46.875 29.429688 46.800781 29.617188 46.667969 C 30.085938 46.351562 30.160156 45.695312 29.84375 45.242188 L 26.28125 40.367188 L 29.84375 35.53125 C 30.160156 35.0625 30.085938 34.425781 29.617188 34.105469 C 29.148438 33.75 28.53125 33.84375 28.175781 34.332031 L 25.023438 38.644531 L 21.855469 34.332031 C 21.535156 33.84375 20.878906 33.75 20.429688 34.105469 C 19.960938 34.425781 19.867188 35.0625 20.1875 35.53125 L 23.75 40.367188 L 20.1875 45.242188 C 19.867188 45.695312 19.960938 46.351562 20.429688 46.667969 C 20.597656 46.800781 20.804688 46.875 21.03125 46.875 C 21.347656 46.875 21.648438 46.707031 21.855469 46.445312 L 25.023438 42.113281 L 28.175781 46.445312 C 28.378906 46.707031 28.679688 46.875 29.019531 46.875 Z M 37.464844 46.875 C 38.042969 46.875 38.496094 46.425781 38.496094 45.84375 L 38.496094 35.832031 L 41.476562 35.832031 C 42.039062 35.832031 42.507812 35.34375 42.507812 34.78125 C 42.507812 34.199219 42.039062 33.75 41.476562 33.75 L 33.46875 33.75 C 32.886719 33.75 32.4375 34.199219 32.4375 34.78125 C 32.4375 35.34375 32.886719 35.832031 33.46875 35.832031 L 36.433594 35.832031 L 36.433594 45.84375 C 36.433594 46.425781 36.902344 46.875 37.464844 46.875 Z M 37.464844 46.875 \"/>\r\n      </g>`\r\n  },\r\n  webmIcon: {\r\n    extension: '.webm',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 7.195312 43.734375 L 7.242188 43.734375 C 7.273438 43.71875 7.304688 43.703125 7.367188 43.703125 C 7.367188 43.6875 7.382812 43.6875 7.382812 43.6875 L 7.398438 43.6875 C 7.429688 43.671875 7.476562 43.625 7.523438 43.59375 L 7.554688 43.59375 C 7.585938 43.5625 7.617188 43.53125 7.648438 43.515625 C 7.648438 43.5 7.664062 43.5 7.664062 43.46875 L 7.757812 43.375 C 7.757812 43.375 7.757812 43.359375 7.773438 43.359375 C 7.789062 43.328125 7.820312 43.265625 7.835938 43.21875 L 9.882812 38.375 L 11.929688 43.21875 C 11.945312 43.265625 11.960938 43.328125 11.992188 43.359375 C 11.992188 43.359375 11.992188 43.375 12.023438 43.375 L 12.085938 43.46875 C 12.101562 43.5 12.101562 43.5 12.117188 43.515625 C 12.148438 43.53125 12.179688 43.5625 12.226562 43.59375 L 12.242188 43.59375 C 12.273438 43.625 12.320312 43.671875 12.382812 43.6875 C 12.398438 43.6875 12.398438 43.6875 12.414062 43.703125 C 12.445312 43.703125 12.476562 43.71875 12.523438 43.734375 L 12.570312 43.734375 L 12.640625 43.746094 L 12.710938 43.75 C 12.773438 43.75 12.820312 43.75 12.867188 43.734375 L 12.898438 43.734375 C 12.945312 43.71875 12.992188 43.703125 13.023438 43.703125 C 13.023438 43.6875 13.039062 43.6875 13.039062 43.6875 L 13.054688 43.6875 C 13.117188 43.671875 13.148438 43.625 13.195312 43.59375 L 13.210938 43.59375 C 13.242188 43.5625 13.289062 43.53125 13.320312 43.515625 C 13.320312 43.5 13.335938 43.5 13.335938 43.46875 C 13.367188 43.4375 13.398438 43.40625 13.414062 43.375 C 13.414062 43.375 13.429688 43.359375 13.429688 43.359375 C 13.460938 43.328125 13.492188 43.265625 13.507812 43.21875 L 17.335938 34.109375 C 17.523438 33.6875 17.320312 33.171875 16.898438 33 C 16.445312 32.8125 15.945312 33.015625 15.757812 33.453125 L 12.710938 40.6875 L 10.695312 35.890625 C 10.539062 35.546875 10.210938 35.359375 9.882812 35.359375 C 9.539062 35.359375 9.210938 35.546875 9.070312 35.890625 L 7.054688 40.6875 L 3.992188 33.453125 C 3.820312 33.015625 3.304688 32.8125 2.882812 33 C 2.429688 33.171875 2.242188 33.6875 2.414062 34.109375 L 6.257812 43.21875 C 6.289062 43.265625 6.304688 43.328125 6.335938 43.359375 L 6.335938 43.375 C 6.367188 43.40625 6.382812 43.4375 6.414062 43.46875 C 6.429688 43.5 6.429688 43.5 6.445312 43.515625 C 6.492188 43.53125 6.507812 43.5625 6.554688 43.59375 L 6.570312 43.59375 C 6.601562 43.625 6.664062 43.671875 6.710938 43.6875 C 6.726562 43.6875 6.726562 43.6875 6.742188 43.703125 C 6.773438 43.703125 6.804688 43.71875 6.851562 43.734375 L 6.898438 43.734375 L 6.976562 43.746094 L 7.054688 43.75 C 7.101562 43.75 7.148438 43.75 7.195312 43.734375 Z M 25.179688 43.75 C 25.632812 43.75 26.039062 43.359375 26.039062 42.890625 C 26.039062 42.40625 25.632812 42.015625 25.179688 42.015625 L 20.945312 42.015625 L 20.945312 39.140625 L 24.585938 39.140625 C 25.054688 39.140625 25.445312 38.75 25.445312 38.265625 C 25.445312 37.8125 25.054688 37.40625 24.585938 37.40625 L 20.945312 37.40625 L 20.945312 34.546875 L 25.179688 34.546875 C 25.632812 34.546875 26.039062 34.15625 26.039062 33.671875 C 26.039062 33.1875 25.632812 32.8125 25.179688 32.8125 L 20.070312 32.8125 C 19.585938 32.8125 19.210938 33.1875 19.210938 33.671875 L 19.210938 42.890625 C 19.210938 43.359375 19.585938 43.75 20.070312 43.75 C 20.070312 43.75 20.085938 43.734375 20.085938 43.734375 C 20.085938 43.734375 20.085938 43.75 20.117188 43.75 Z M 31.539062 43.75 C 33.382812 43.75 34.882812 42.25 34.882812 40.390625 C 34.882812 39.203125 34.242188 38.15625 33.304688 37.5625 C 33.679688 37.0625 33.898438 36.453125 33.898438 35.78125 C 33.898438 34.140625 32.570312 32.8125 30.929688 32.8125 L 28.710938 32.8125 C 28.242188 32.8125 27.851562 33.1875 27.851562 33.671875 L 27.851562 42.890625 C 27.851562 43.359375 28.242188 43.75 28.710938 43.75 L 28.757812 43.734375 C 28.757812 43.734375 28.757812 43.75 28.773438 43.75 Z M 30.929688 37.046875 L 29.585938 37.046875 L 29.585938 34.546875 L 30.929688 34.546875 C 31.617188 34.546875 32.164062 35.09375 32.164062 35.78125 C 32.164062 36.46875 31.617188 37.046875 30.929688 37.046875 Z M 31.539062 42.015625 L 29.585938 42.015625 L 29.585938 38.78125 L 31.539062 38.78125 C 32.429688 38.796875 33.148438 39.5 33.148438 40.390625 C 33.148438 41.296875 32.429688 42 31.539062 42.015625 Z M 45.664062 43.75 C 46.132812 43.75 46.539062 43.359375 46.539062 42.890625 L 46.539062 33.671875 C 46.539062 33.269531 46.242188 32.9375 45.859375 32.839844 L 45.664062 32.8125 L 45.648438 32.8125 C 45.367188 32.8125 45.117188 32.9375 44.945312 33.171875 L 41.835938 37.484375 L 38.726562 33.171875 C 38.570312 32.9375 38.289062 32.8125 38.039062 32.8125 L 37.992188 32.8125 C 37.523438 32.8125 37.132812 33.203125 37.132812 33.671875 L 37.132812 42.890625 C 37.132812 43.359375 37.523438 43.75 37.992188 43.75 C 38.476562 43.75 38.867188 43.359375 38.867188 42.890625 L 38.867188 36.3125 L 41.101562 39.4375 C 41.273438 39.671875 41.539062 39.796875 41.820312 39.796875 L 41.851562 39.796875 C 42.132812 39.796875 42.382812 39.671875 42.554688 39.4375 L 44.804688 36.3125 L 44.804688 42.890625 C 44.804688 43.359375 45.179688 43.75 45.664062 43.75 Z M 45.664062 43.75 \"/>\r\n      </g>`\r\n  },\r\n  webpIcon: {\r\n    extension: '.webp',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 9.234375 43.734375 L 9.28125 43.734375 C 9.3125 43.71875 9.34375 43.703125 9.40625 43.703125 L 9.414062 43.6875 C 9.421875 43.6875 9.421875 43.6875 9.4375 43.6875 C 9.46875 43.671875 9.515625 43.625 9.5625 43.59375 L 9.59375 43.59375 C 9.625 43.5625 9.65625 43.53125 9.6875 43.515625 C 9.6875 43.5 9.703125 43.5 9.703125 43.46875 L 9.796875 43.375 C 9.796875 43.375 9.796875 43.359375 9.8125 43.359375 C 9.828125 43.328125 9.859375 43.265625 9.875 43.21875 L 11.921875 38.375 L 13.96875 43.21875 C 13.984375 43.265625 14 43.328125 14.03125 43.359375 C 14.03125 43.359375 14.03125 43.375 14.0625 43.375 L 14.125 43.46875 C 14.140625 43.5 14.140625 43.5 14.15625 43.515625 L 14.203125 43.546875 L 14.265625 43.59375 C 14.265625 43.59375 14.265625 43.59375 14.28125 43.59375 C 14.3125 43.625 14.359375 43.671875 14.421875 43.6875 C 14.4375 43.6875 14.4375 43.6875 14.453125 43.703125 C 14.484375 43.703125 14.515625 43.71875 14.5625 43.734375 L 14.609375 43.734375 L 14.679688 43.746094 L 14.75 43.75 C 14.8125 43.75 14.859375 43.75 14.90625 43.734375 L 14.9375 43.734375 C 14.984375 43.71875 15.03125 43.703125 15.0625 43.703125 C 15.0625 43.6875 15.078125 43.6875 15.078125 43.6875 L 15.09375 43.6875 C 15.15625 43.671875 15.1875 43.625 15.234375 43.59375 L 15.25 43.59375 C 15.28125 43.5625 15.328125 43.53125 15.359375 43.515625 C 15.359375 43.5 15.375 43.5 15.375 43.46875 C 15.40625 43.4375 15.4375 43.40625 15.453125 43.375 L 15.46875 43.359375 C 15.5 43.328125 15.53125 43.265625 15.546875 43.21875 L 19.375 34.109375 C 19.5625 33.6875 19.359375 33.171875 18.9375 33 C 18.484375 32.8125 17.984375 33.015625 17.796875 33.453125 L 14.75 40.6875 L 12.734375 35.890625 C 12.578125 35.546875 12.25 35.359375 11.921875 35.359375 C 11.578125 35.359375 11.25 35.546875 11.109375 35.890625 L 9.09375 40.6875 L 6.03125 33.453125 C 5.859375 33.015625 5.34375 32.8125 4.921875 33 C 4.46875 33.171875 4.28125 33.6875 4.453125 34.109375 L 8.296875 43.21875 C 8.328125 43.265625 8.34375 43.328125 8.375 43.359375 L 8.375 43.375 C 8.40625 43.40625 8.421875 43.4375 8.453125 43.46875 C 8.46875 43.5 8.46875 43.5 8.484375 43.515625 L 8.539062 43.546875 L 8.59375 43.59375 C 8.59375 43.59375 8.59375 43.59375 8.609375 43.59375 C 8.640625 43.625 8.703125 43.671875 8.75 43.6875 C 8.765625 43.6875 8.765625 43.6875 8.78125 43.703125 C 8.8125 43.703125 8.84375 43.71875 8.890625 43.734375 L 8.9375 43.734375 L 9.015625 43.746094 L 9.09375 43.75 C 9.140625 43.75 9.1875 43.75 9.234375 43.734375 Z M 27.21875 43.75 C 27.671875 43.75 28.078125 43.359375 28.078125 42.890625 C 28.078125 42.40625 27.671875 42.015625 27.21875 42.015625 L 22.984375 42.015625 L 22.984375 39.140625 L 26.625 39.140625 C 27.09375 39.140625 27.484375 38.75 27.484375 38.265625 C 27.484375 37.8125 27.09375 37.40625 26.625 37.40625 L 22.984375 37.40625 L 22.984375 34.546875 L 27.21875 34.546875 C 27.671875 34.546875 28.078125 34.15625 28.078125 33.671875 C 28.078125 33.1875 27.671875 32.8125 27.21875 32.8125 L 22.109375 32.8125 C 21.625 32.8125 21.25 33.1875 21.25 33.671875 L 21.25 42.890625 C 21.25 43.359375 21.625 43.75 22.109375 43.75 L 22.125 43.734375 C 22.125 43.734375 22.125 43.75 22.15625 43.75 Z M 33.578125 43.75 C 35.421875 43.75 36.921875 42.25 36.921875 40.390625 C 36.921875 39.203125 36.28125 38.15625 35.34375 37.5625 C 35.71875 37.0625 35.9375 36.453125 35.9375 35.78125 C 35.9375 34.140625 34.609375 32.8125 32.96875 32.8125 L 30.75 32.8125 C 30.28125 32.8125 29.890625 33.1875 29.890625 33.671875 L 29.890625 42.890625 C 29.890625 43.359375 30.28125 43.75 30.75 43.75 C 30.765625 43.75 30.765625 43.734375 30.796875 43.734375 C 30.796875 43.734375 30.796875 43.75 30.8125 43.75 Z M 32.96875 37.046875 L 31.625 37.046875 L 31.625 34.546875 L 32.96875 34.546875 C 33.65625 34.546875 34.203125 35.09375 34.203125 35.78125 C 34.203125 36.46875 33.65625 37.046875 32.96875 37.046875 Z M 33.578125 42.015625 L 31.625 42.015625 L 31.625 38.78125 L 33.578125 38.78125 C 34.46875 38.796875 35.1875 39.5 35.1875 40.390625 C 35.1875 41.296875 34.46875 42 33.578125 42.015625 Z M 40.03125 43.75 C 40.515625 43.75 40.90625 43.359375 40.90625 42.890625 L 40.90625 39.5 L 42.828125 39.5 C 44.6875 39.5 46.1875 38 46.1875 36.171875 C 46.1875 34.3125 44.6875 32.8125 42.828125 32.8125 L 40.03125 32.8125 C 39.5625 32.8125 39.171875 33.1875 39.171875 33.671875 L 39.171875 42.890625 C 39.171875 43.359375 39.5625 43.75 40.03125 43.75 Z M 42.828125 37.765625 L 40.90625 37.765625 L 40.90625 34.546875 L 42.828125 34.546875 C 43.734375 34.546875 44.4375 35.265625 44.453125 36.171875 C 44.4375 37.046875 43.734375 37.765625 42.828125 37.765625 Z M 42.828125 37.765625 \"/>\r\n      </g>`\r\n  },\r\n  wmvIcon: {\r\n    extension: '.wmv',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 8.484375 43.734375 L 8.53125 43.734375 C 8.5625 43.71875 8.59375 43.703125 8.65625 43.703125 L 8.664062 43.6875 C 8.671875 43.6875 8.671875 43.6875 8.6875 43.6875 C 8.71875 43.671875 8.765625 43.625 8.8125 43.59375 L 8.84375 43.59375 C 8.875 43.5625 8.90625 43.53125 8.9375 43.515625 C 8.9375 43.5 8.953125 43.5 8.953125 43.46875 L 9.046875 43.375 C 9.046875 43.375 9.046875 43.359375 9.0625 43.359375 C 9.078125 43.328125 9.109375 43.265625 9.125 43.21875 L 11.171875 38.375 L 13.21875 43.21875 C 13.234375 43.265625 13.25 43.328125 13.28125 43.359375 C 13.28125 43.359375 13.28125 43.375 13.3125 43.375 L 13.375 43.46875 C 13.390625 43.5 13.390625 43.5 13.40625 43.515625 L 13.453125 43.546875 L 13.515625 43.59375 C 13.515625 43.59375 13.515625 43.59375 13.53125 43.59375 C 13.5625 43.625 13.609375 43.671875 13.671875 43.6875 C 13.6875 43.6875 13.6875 43.6875 13.703125 43.703125 C 13.734375 43.703125 13.765625 43.71875 13.8125 43.734375 L 13.859375 43.734375 L 13.929688 43.746094 L 14 43.75 C 14.0625 43.75 14.109375 43.75 14.15625 43.734375 L 14.1875 43.734375 C 14.234375 43.71875 14.28125 43.703125 14.3125 43.703125 C 14.3125 43.6875 14.328125 43.6875 14.328125 43.6875 L 14.34375 43.6875 C 14.40625 43.671875 14.4375 43.625 14.484375 43.59375 L 14.5 43.59375 C 14.53125 43.5625 14.578125 43.53125 14.609375 43.515625 C 14.609375 43.5 14.625 43.5 14.625 43.46875 C 14.65625 43.4375 14.6875 43.40625 14.703125 43.375 L 14.71875 43.359375 C 14.75 43.328125 14.78125 43.265625 14.796875 43.21875 L 18.625 34.109375 C 18.8125 33.6875 18.609375 33.171875 18.1875 33 C 17.734375 32.8125 17.234375 33.015625 17.046875 33.453125 L 14 40.6875 L 11.984375 35.890625 C 11.828125 35.546875 11.5 35.359375 11.171875 35.359375 C 10.828125 35.359375 10.5 35.546875 10.359375 35.890625 L 8.34375 40.6875 L 5.28125 33.453125 C 5.109375 33.015625 4.59375 32.8125 4.171875 33 C 3.71875 33.171875 3.53125 33.6875 3.703125 34.109375 L 7.546875 43.21875 C 7.578125 43.265625 7.59375 43.328125 7.625 43.359375 L 7.625 43.375 C 7.65625 43.40625 7.671875 43.4375 7.703125 43.46875 C 7.71875 43.5 7.71875 43.5 7.734375 43.515625 L 7.789062 43.546875 L 7.84375 43.59375 C 7.84375 43.59375 7.84375 43.59375 7.859375 43.59375 C 7.890625 43.625 7.953125 43.671875 8 43.6875 C 8.015625 43.6875 8.015625 43.6875 8.03125 43.703125 C 8.0625 43.703125 8.09375 43.71875 8.140625 43.734375 L 8.1875 43.734375 L 8.265625 43.746094 L 8.34375 43.75 C 8.390625 43.75 8.4375 43.75 8.484375 43.734375 Z M 29.03125 43.75 C 29.5 43.75 29.90625 43.359375 29.90625 42.890625 L 29.90625 33.671875 C 29.90625 33.269531 29.609375 32.9375 29.226562 32.839844 L 29.03125 32.8125 L 29.015625 32.8125 C 28.734375 32.8125 28.484375 32.9375 28.3125 33.171875 L 25.203125 37.484375 L 22.09375 33.171875 C 21.9375 32.9375 21.65625 32.8125 21.40625 32.8125 L 21.359375 32.8125 C 20.890625 32.8125 20.5 33.203125 20.5 33.671875 L 20.5 42.890625 C 20.5 43.359375 20.890625 43.75 21.359375 43.75 C 21.84375 43.75 22.234375 43.359375 22.234375 42.890625 L 22.234375 36.3125 L 24.46875 39.4375 C 24.640625 39.671875 24.90625 39.796875 25.1875 39.796875 L 25.21875 39.796875 C 25.5 39.796875 25.75 39.671875 25.921875 39.4375 L 28.171875 36.3125 L 28.171875 42.890625 C 28.171875 43.359375 28.546875 43.75 29.03125 43.75 Z M 37.015625 43.734375 L 37.0625 43.734375 C 37.09375 43.71875 37.125 43.703125 37.1875 43.703125 L 37.195312 43.6875 C 37.203125 43.6875 37.203125 43.6875 37.21875 43.6875 C 37.25 43.671875 37.296875 43.625 37.34375 43.59375 L 37.375 43.59375 C 37.40625 43.5625 37.4375 43.53125 37.46875 43.515625 C 37.46875 43.5 37.484375 43.5 37.484375 43.46875 L 37.578125 43.375 C 37.578125 43.375 37.578125 43.359375 37.59375 43.359375 C 37.609375 43.328125 37.640625 43.265625 37.65625 43.21875 L 39.703125 38.375 L 41.75 43.21875 C 41.765625 43.265625 41.78125 43.328125 41.8125 43.359375 C 41.8125 43.359375 41.8125 43.375 41.84375 43.375 L 41.90625 43.46875 C 41.921875 43.5 41.921875 43.5 41.9375 43.515625 L 41.984375 43.546875 L 42.046875 43.59375 C 42.046875 43.59375 42.046875 43.59375 42.0625 43.59375 C 42.09375 43.625 42.140625 43.671875 42.203125 43.6875 C 42.21875 43.6875 42.21875 43.6875 42.234375 43.703125 C 42.265625 43.703125 42.296875 43.71875 42.34375 43.734375 L 42.390625 43.734375 L 42.460938 43.746094 L 42.53125 43.75 C 42.59375 43.75 42.640625 43.75 42.6875 43.734375 L 42.71875 43.734375 C 42.765625 43.71875 42.8125 43.703125 42.84375 43.703125 C 42.84375 43.6875 42.859375 43.6875 42.859375 43.6875 L 42.875 43.6875 C 42.9375 43.671875 42.96875 43.625 43.015625 43.59375 L 43.03125 43.59375 C 43.0625 43.5625 43.109375 43.53125 43.140625 43.515625 C 43.140625 43.5 43.15625 43.5 43.15625 43.46875 C 43.1875 43.4375 43.21875 43.40625 43.234375 43.375 L 43.25 43.359375 C 43.28125 43.328125 43.3125 43.265625 43.328125 43.21875 L 47.15625 34.109375 C 47.34375 33.6875 47.140625 33.171875 46.71875 33 C 46.265625 32.8125 45.765625 33.015625 45.578125 33.453125 L 42.53125 40.6875 L 40.515625 35.890625 C 40.359375 35.546875 40.03125 35.359375 39.703125 35.359375 C 39.359375 35.359375 39.03125 35.546875 38.890625 35.890625 L 36.875 40.6875 L 33.8125 33.453125 C 33.640625 33.015625 33.125 32.8125 32.703125 33 C 32.25 33.171875 32.0625 33.6875 32.234375 34.109375 L 36.078125 43.21875 C 36.109375 43.265625 36.125 43.328125 36.15625 43.359375 L 36.15625 43.375 C 36.1875 43.40625 36.203125 43.4375 36.234375 43.46875 C 36.25 43.5 36.25 43.5 36.265625 43.515625 L 36.320312 43.546875 L 36.375 43.59375 C 36.375 43.59375 36.375 43.59375 36.390625 43.59375 C 36.421875 43.625 36.484375 43.671875 36.53125 43.6875 C 36.546875 43.6875 36.546875 43.6875 36.5625 43.703125 C 36.59375 43.703125 36.625 43.71875 36.671875 43.734375 L 36.71875 43.734375 L 36.796875 43.746094 L 36.875 43.75 C 36.921875 43.75 36.96875 43.75 37.015625 43.734375 Z M 37.015625 43.734375 \"/>\r\n      </g>`\r\n  },\r\n  xlsIcon: {\r\n    extension: '.xls',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 17.21875 46.875 C 17.425781 46.875 17.632812 46.800781 17.820312 46.667969 C 18.289062 46.351562 18.363281 45.695312 18.042969 45.242188 L 14.480469 40.367188 L 18.042969 35.53125 C 18.363281 35.0625 18.289062 34.425781 17.820312 34.105469 C 17.351562 33.75 16.730469 33.84375 16.375 34.332031 L 13.226562 38.644531 L 10.054688 34.332031 C 9.738281 33.84375 9.082031 33.75 8.632812 34.105469 C 8.164062 34.425781 8.070312 35.0625 8.386719 35.53125 L 11.949219 40.367188 L 8.386719 45.242188 C 8.070312 45.695312 8.164062 46.351562 8.632812 46.667969 C 8.800781 46.800781 9.007812 46.875 9.230469 46.875 C 9.550781 46.875 9.851562 46.707031 10.054688 46.445312 L 13.226562 42.113281 L 16.375 46.445312 C 16.582031 46.707031 16.882812 46.875 17.21875 46.875 Z M 29.351562 46.875 C 29.894531 46.875 30.382812 46.40625 30.382812 45.84375 C 30.382812 45.261719 29.894531 44.792969 29.351562 44.792969 L 24.269531 44.792969 L 24.269531 34.78125 C 24.269531 34.21875 23.800781 33.75 23.21875 33.75 C 22.636719 33.75 22.1875 34.21875 22.1875 34.78125 L 22.1875 45.84375 C 22.1875 46.335938 22.53125 46.757812 23.007812 46.855469 L 23.222656 46.875 Z M 37.28125 46.855469 C 38.613281 46.855469 39.832031 46.460938 40.75 45.789062 C 41.6875 45.113281 42.363281 44.082031 42.363281 42.882812 C 42.363281 42.300781 42.195312 41.738281 41.914062 41.289062 C 41.480469 40.59375 40.804688 40.105469 40.039062 39.730469 C 39.289062 39.375 38.40625 39.132812 37.449219 38.945312 L 37.414062 38.945312 C 36.398438 38.757812 35.554688 38.457031 35.070312 38.117188 C 34.824219 37.949219 34.65625 37.78125 34.5625 37.632812 C 34.46875 37.480469 34.429688 37.332031 34.429688 37.105469 C 34.429688 36.710938 34.636719 36.300781 35.144531 35.925781 C 35.648438 35.550781 36.398438 35.289062 37.242188 35.289062 C 38.386719 35.289062 39.304688 35.851562 40.261719 36.488281 C 40.710938 36.789062 41.3125 36.65625 41.59375 36.207031 C 41.894531 35.773438 41.761719 35.175781 41.332031 34.875 C 40.375 34.257812 39.042969 33.375 37.242188 33.375 C 36.023438 33.375 34.882812 33.730469 34 34.367188 C 33.136719 35.007812 32.5 35.980469 32.5 37.105469 C 32.5 37.667969 32.648438 38.195312 32.929688 38.644531 C 33.34375 39.300781 33.960938 39.769531 34.675781 40.105469 C 35.386719 40.445312 36.210938 40.667969 37.09375 40.835938 L 37.132812 40.835938 C 38.238281 41.042969 39.15625 41.363281 39.699219 41.71875 C 39.980469 41.90625 40.148438 42.09375 40.261719 42.28125 C 40.375 42.46875 40.429688 42.636719 40.429688 42.882812 C 40.429688 43.351562 40.1875 43.820312 39.625 44.230469 C 39.0625 44.644531 38.21875 44.925781 37.28125 44.925781 C 35.949219 44.945312 34.523438 44.15625 33.699219 43.480469 C 33.289062 43.144531 32.667969 43.199219 32.332031 43.613281 C 32.011719 44.023438 32.070312 44.644531 32.480469 44.980469 C 33.550781 45.824219 35.257812 46.835938 37.28125 46.855469 Z M 37.28125 46.855469 \"/>\r\n      </g>`\r\n  },\r\n\r\n  xlsxIcon: {\r\n    extension: '.xlsx',\r\n\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 13.070312 43.75 C 13.242188 43.75 13.414062 43.6875 13.570312 43.578125 C 13.960938 43.3125 14.023438 42.765625 13.757812 42.390625 L 10.789062 38.328125 L 13.757812 34.296875 C 14.023438 33.90625 13.960938 33.375 13.570312 33.109375 C 13.179688 32.8125 12.664062 32.890625 12.367188 33.296875 L 9.742188 36.890625 L 7.101562 33.296875 C 6.835938 32.890625 6.289062 32.8125 5.914062 33.109375 C 5.523438 33.375 5.445312 33.90625 5.710938 34.296875 L 8.679688 38.328125 L 5.710938 42.390625 C 5.445312 42.765625 5.523438 43.3125 5.914062 43.578125 C 6.054688 43.6875 6.226562 43.75 6.414062 43.75 C 6.679688 43.75 6.929688 43.609375 7.101562 43.390625 L 9.742188 39.78125 L 12.367188 43.390625 C 12.539062 43.609375 12.789062 43.75 13.070312 43.75 Z M 23.179688 43.75 C 23.632812 43.75 24.039062 43.359375 24.039062 42.890625 C 24.039062 42.40625 23.632812 42.015625 23.179688 42.015625 L 18.945312 42.015625 L 18.945312 33.671875 C 18.945312 33.203125 18.554688 32.8125 18.070312 32.8125 C 17.585938 32.8125 17.210938 33.203125 17.210938 33.671875 L 17.210938 42.890625 C 17.210938 43.359375 17.585938 43.75 18.070312 43.75 Z M 29.789062 43.734375 C 30.898438 43.734375 31.914062 43.40625 32.679688 42.84375 C 33.460938 42.28125 34.023438 41.421875 34.023438 40.421875 C 34.023438 39.9375 33.882812 39.46875 33.648438 39.09375 C 33.289062 38.515625 32.726562 38.109375 32.085938 37.796875 C 31.460938 37.5 30.726562 37.296875 29.929688 37.140625 L 29.898438 37.140625 C 29.054688 36.984375 28.351562 36.734375 27.945312 36.453125 C 27.742188 36.3125 27.601562 36.171875 27.523438 36.046875 C 27.445312 35.921875 27.414062 35.796875 27.414062 35.609375 C 27.414062 35.28125 27.585938 34.9375 28.007812 34.625 C 28.429688 34.3125 29.054688 34.09375 29.757812 34.09375 C 30.710938 34.09375 31.476562 34.5625 32.273438 35.09375 C 32.648438 35.34375 33.148438 35.234375 33.382812 34.859375 C 33.632812 34.5 33.523438 34 33.164062 33.75 C 32.367188 33.234375 31.257812 32.5 29.757812 32.5 C 28.742188 32.5 27.789062 32.796875 27.054688 33.328125 C 26.335938 33.859375 25.804688 34.671875 25.804688 35.609375 C 25.804688 36.078125 25.929688 36.515625 26.164062 36.890625 C 26.507812 37.4375 27.023438 37.828125 27.617188 38.109375 C 28.210938 38.390625 28.898438 38.578125 29.632812 38.71875 L 29.664062 38.71875 C 30.585938 38.890625 31.351562 39.15625 31.804688 39.453125 C 32.039062 39.609375 32.179688 39.765625 32.273438 39.921875 C 32.367188 40.078125 32.414062 40.21875 32.414062 40.421875 C 32.414062 40.8125 32.210938 41.203125 31.742188 41.546875 C 31.273438 41.890625 30.570312 42.125 29.789062 42.125 C 28.679688 42.140625 27.492188 41.484375 26.804688 40.921875 C 26.460938 40.640625 25.945312 40.6875 25.664062 41.03125 C 25.398438 41.375 25.445312 41.890625 25.789062 42.171875 C 26.679688 42.875 28.101562 43.71875 29.789062 43.734375 Z M 43.179688 43.75 C 43.351562 43.75 43.523438 43.6875 43.679688 43.578125 C 44.070312 43.3125 44.132812 42.765625 43.867188 42.390625 L 40.898438 38.328125 L 43.867188 34.296875 C 44.132812 33.90625 44.070312 33.375 43.679688 33.109375 C 43.289062 32.8125 42.773438 32.890625 42.476562 33.296875 L 39.851562 36.890625 L 37.210938 33.296875 C 36.945312 32.890625 36.398438 32.8125 36.023438 33.109375 C 35.632812 33.375 35.554688 33.90625 35.820312 34.296875 L 38.789062 38.328125 L 35.820312 42.390625 C 35.554688 42.765625 35.632812 43.3125 36.023438 43.578125 C 36.164062 43.6875 36.335938 43.75 36.523438 43.75 C 36.789062 43.75 37.039062 43.609375 37.210938 43.390625 L 39.851562 39.78125 L 42.476562 43.390625 C 42.648438 43.609375 42.898438 43.75 43.179688 43.75 Z M 43.179688 43.75 \"/>\r\n      </g>`\r\n  },\r\n  zipIcon: {\r\n    extension: '.zip',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 20.175781 46.875 C 20.855469 46.875 21.402344 46.351562 21.402344 45.671875 C 21.402344 44.992188 20.855469 44.445312 20.175781 44.445312 L 13.132812 44.445312 L 21.183594 33.488281 L 21.183594 33.445312 C 21.203125 33.421875 21.226562 33.378906 21.25 33.335938 C 21.269531 33.3125 21.269531 33.289062 21.292969 33.269531 C 21.3125 33.203125 21.3125 33.179688 21.335938 33.136719 C 21.335938 33.09375 21.378906 33.070312 21.378906 33.007812 C 21.378906 32.984375 21.378906 32.960938 21.402344 32.917969 L 21.402344 32.679688 C 21.402344 32.632812 21.402344 32.613281 21.378906 32.546875 C 21.378906 32.503906 21.378906 32.480469 21.335938 32.4375 C 21.335938 32.414062 21.3125 32.371094 21.3125 32.304688 C 21.292969 32.285156 21.269531 32.242188 21.269531 32.21875 C 21.25 32.195312 21.226562 32.152344 21.203125 32.109375 C 21.183594 32.066406 21.160156 32.042969 21.117188 32.023438 C 21.09375 32 21.074219 31.957031 21.050781 31.933594 C 21.03125 31.914062 21.007812 31.867188 20.964844 31.847656 C 20.941406 31.824219 20.941406 31.804688 20.898438 31.78125 L 20.875 31.78125 C 20.832031 31.757812 20.8125 31.738281 20.765625 31.714844 C 20.746094 31.695312 20.722656 31.648438 20.65625 31.648438 L 20.570312 31.605469 L 20.4375 31.585938 C 20.417969 31.585938 20.375 31.5625 20.351562 31.5625 L 10.75 31.5625 C 10.070312 31.5625 9.546875 32.085938 9.546875 32.765625 C 9.546875 33.421875 10.070312 33.992188 10.75 33.992188 L 17.8125 33.992188 L 9.785156 44.972656 L 9.765625 44.972656 C 9.742188 45.015625 9.71875 45.058594 9.699219 45.082031 C 9.699219 45.101562 9.675781 45.148438 9.632812 45.167969 C 9.632812 45.210938 9.609375 45.257812 9.609375 45.277344 C 9.589844 45.320312 9.589844 45.367188 9.566406 45.386719 L 9.566406 45.496094 C 9.546875 45.539062 9.546875 45.585938 9.546875 45.648438 L 9.546875 45.738281 C 9.546875 45.78125 9.566406 45.824219 9.566406 45.890625 C 9.566406 45.933594 9.589844 45.957031 9.589844 45.976562 L 9.632812 46.109375 C 9.632812 46.152344 9.675781 46.175781 9.699219 46.21875 C 9.699219 46.242188 9.71875 46.261719 9.742188 46.328125 C 9.765625 46.351562 9.785156 46.394531 9.808594 46.414062 C 9.828125 46.4375 9.851562 46.460938 9.894531 46.480469 L 9.9375 46.542969 L 9.984375 46.589844 C 10.003906 46.613281 10.027344 46.632812 10.046875 46.632812 L 10.046875 46.65625 C 10.070312 46.679688 10.09375 46.679688 10.136719 46.699219 C 10.179688 46.722656 10.222656 46.742188 10.246094 46.742188 C 10.265625 46.789062 10.289062 46.789062 10.3125 46.808594 C 10.375 46.808594 10.421875 46.832031 10.464844 46.832031 C 10.484375 46.851562 10.507812 46.851562 10.53125 46.851562 L 10.648438 46.871094 Z M 26.214844 46.875 C 26.871094 46.875 27.4375 46.351562 27.4375 45.671875 L 27.4375 32.765625 C 27.4375 32.085938 26.871094 31.5625 26.214844 31.5625 C 25.535156 31.5625 25.011719 32.085938 25.011719 32.765625 L 25.011719 45.671875 C 25.011719 46.351562 25.535156 46.875 26.214844 46.875 Z M 32.734375 46.875 C 33.410156 46.875 33.957031 46.328125 33.957031 45.671875 L 33.957031 40.925781 L 36.648438 40.925781 C 39.25 40.925781 41.351562 38.824219 41.351562 36.265625 C 41.351562 33.664062 39.25 31.5625 36.648438 31.5625 L 32.734375 31.5625 C 32.078125 31.5625 31.53125 32.085938 31.53125 32.765625 L 31.53125 45.671875 C 31.53125 46.328125 32.078125 46.875 32.734375 46.875 Z M 36.648438 38.496094 L 33.957031 38.496094 L 33.957031 33.992188 L 36.648438 33.992188 C 37.917969 33.992188 38.902344 34.996094 38.921875 36.265625 C 38.902344 37.492188 37.917969 38.496094 36.648438 38.496094 Z M 36.648438 38.496094 \"/>\r\n      </g>`\r\n  },\r\n  docxIcon: {\r\n    extension: '.docx',\r\n    path: `<g id=\"surface9\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 7.789062 43.75 C 9.589844 43.75 10.988281 43.269531 11.984375 42.304688 C 12.980469 41.339844 13.476562 39.984375 13.476562 38.234375 C 13.476562 36.496094 12.980469 35.144531 11.984375 34.179688 C 10.988281 33.214844 9.589844 32.734375 7.789062 32.734375 L 4.695312 32.734375 C 4.394531 32.734375 4.15625 32.816406 3.984375 32.984375 C 3.8125 33.152344 3.726562 33.386719 3.726562 33.6875 L 3.726562 42.796875 C 3.726562 43.097656 3.8125 43.332031 3.984375 43.5 C 4.15625 43.667969 4.394531 43.75 4.695312 43.75 Z M 7.664062 42.109375 L 5.742188 42.109375 L 5.742188 34.375 L 7.664062 34.375 C 10.195312 34.375 11.460938 35.660156 11.460938 38.234375 C 11.460938 40.816406 10.195312 42.109375 7.664062 42.109375 Z M 20.414062 43.890625 C 21.476562 43.890625 22.402344 43.660156 23.1875 43.203125 C 23.972656 42.746094 24.582031 42.089844 25.007812 41.234375 C 25.433594 40.378906 25.648438 39.378906 25.648438 38.234375 C 25.648438 37.089844 25.4375 36.089844 25.015625 35.242188 C 24.59375 34.394531 23.988281 33.738281 23.203125 33.28125 C 22.417969 32.824219 21.488281 32.59375 20.414062 32.59375 C 19.339844 32.59375 18.410156 32.824219 17.617188 33.28125 C 16.824219 33.738281 16.21875 34.394531 15.796875 35.242188 C 15.375 36.089844 15.164062 37.089844 15.164062 38.234375 C 15.164062 39.378906 15.378906 40.378906 15.804688 41.234375 C 16.230469 42.089844 16.839844 42.746094 17.625 43.203125 C 18.410156 43.660156 19.339844 43.890625 20.414062 43.890625 Z M 20.414062 42.28125 C 19.394531 42.28125 18.597656 41.933594 18.03125 41.234375 C 17.464844 40.535156 17.179688 39.535156 17.179688 38.234375 C 17.179688 36.933594 17.464844 35.933594 18.03125 35.242188 C 18.597656 34.550781 19.394531 34.203125 20.414062 34.203125 C 21.425781 34.203125 22.214844 34.550781 22.78125 35.242188 C 23.347656 35.933594 23.632812 36.933594 23.632812 38.234375 C 23.632812 39.535156 23.347656 40.535156 22.78125 41.234375 C 22.214844 41.933594 21.425781 42.28125 20.414062 42.28125 Z M 32.601562 43.890625 C 33.289062 43.890625 33.933594 43.789062 34.539062 43.585938 C 35.144531 43.382812 35.679688 43.089844 36.148438 42.703125 C 36.285156 42.597656 36.378906 42.488281 36.429688 42.367188 C 36.480469 42.246094 36.507812 42.109375 36.507812 41.953125 C 36.507812 41.722656 36.445312 41.53125 36.320312 41.375 C 36.195312 41.21875 36.042969 41.140625 35.867188 41.140625 C 35.753906 41.140625 35.644531 41.160156 35.539062 41.203125 C 35.433594 41.246094 35.332031 41.296875 35.226562 41.359375 C 34.746094 41.683594 34.316406 41.910156 33.9375 42.046875 C 33.558594 42.183594 33.144531 42.25 32.695312 42.25 C 31.613281 42.25 30.792969 41.910156 30.234375 41.234375 C 29.675781 40.558594 29.398438 39.558594 29.398438 38.234375 C 29.398438 36.921875 29.675781 35.925781 30.234375 35.25 C 30.792969 34.574219 31.613281 34.234375 32.695312 34.234375 C 33.164062 34.234375 33.589844 34.300781 33.976562 34.429688 C 34.363281 34.558594 34.777344 34.792969 35.226562 35.125 C 35.445312 35.269531 35.660156 35.34375 35.867188 35.34375 C 36.042969 35.34375 36.195312 35.265625 36.320312 35.109375 C 36.445312 34.953125 36.507812 34.761719 36.507812 34.53125 C 36.507812 34.363281 36.480469 34.222656 36.429688 34.109375 C 36.378906 33.996094 36.285156 33.886719 36.148438 33.78125 C 35.679688 33.394531 35.144531 33.101562 34.539062 32.898438 C 33.933594 32.695312 33.289062 32.59375 32.601562 32.59375 C 31.539062 32.59375 30.609375 32.824219 29.8125 33.28125 C 29.015625 33.738281 28.402344 34.394531 27.976562 35.242188 C 27.550781 36.089844 27.335938 37.089844 27.335938 38.234375 C 27.335938 39.378906 27.550781 40.378906 27.976562 41.234375 C 28.402344 42.089844 29.015625 42.746094 29.8125 43.203125 C 30.609375 43.660156 31.539062 43.890625 32.601562 43.890625 Z M 46.132812 43.84375 C 46.382812 43.84375 46.605469 43.75 46.796875 43.5625 C 46.988281 43.375 47.085938 43.15625 47.085938 42.90625 C 47.085938 42.707031 47.003906 42.511719 46.835938 42.3125 L 43.445312 38.15625 L 46.710938 34.171875 C 46.867188 34.003906 46.945312 33.808594 46.945312 33.578125 C 46.945312 33.328125 46.847656 33.113281 46.65625 32.929688 C 46.464844 32.746094 46.242188 32.65625 45.992188 32.65625 C 45.730469 32.65625 45.507812 32.769531 45.320312 33 L 42.273438 36.765625 L 39.226562 33 C 39.027344 32.769531 38.800781 32.65625 38.539062 32.65625 C 38.289062 32.65625 38.070312 32.746094 37.882812 32.929688 C 37.695312 33.113281 37.601562 33.328125 37.601562 33.578125 C 37.601562 33.808594 37.679688 34.003906 37.835938 34.171875 L 41.101562 38.15625 L 37.695312 42.3125 C 37.539062 42.5 37.460938 42.699219 37.460938 42.90625 C 37.460938 43.15625 37.558594 43.371094 37.75 43.554688 C 37.941406 43.738281 38.164062 43.828125 38.414062 43.828125 C 38.675781 43.828125 38.898438 43.71875 39.085938 43.5 L 42.273438 39.5625 L 45.445312 43.5 C 45.644531 43.730469 45.871094 43.84375 46.132812 43.84375 Z M 46.132812 43.84375 \"/>\r\n      </g>`\r\n  },\r\n  jpgIcon: {\r\n    extension: '.jpg',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 8.789062 47.007812 L 9.488281 46.960938 C 12.214844 46.757812 13.578125 45.277344 13.578125 42.523438 L 13.578125 32.742188 C 13.578125 32.320312 13.453125 31.980469 13.195312 31.726562 C 12.941406 31.472656 12.59375 31.34375 12.15625 31.34375 C 11.734375 31.34375 11.394531 31.472656 11.140625 31.726562 C 10.886719 31.980469 10.757812 32.320312 10.757812 32.742188 L 10.757812 42.523438 C 10.757812 43.238281 10.605469 43.769531 10.296875 44.117188 C 9.992188 44.46875 9.539062 44.660156 8.941406 44.6875 L 8.242188 44.730469 C 7.847656 44.761719 7.558594 44.867188 7.378906 45.046875 C 7.195312 45.230469 7.105469 45.496094 7.105469 45.847656 C 7.105469 46.664062 7.667969 47.050781 8.789062 47.007812 Z M 18.304688 47.007812 C 18.742188 47.007812 19.089844 46.878906 19.34375 46.625 C 19.597656 46.367188 19.726562 46.023438 19.726562 45.585938 L 19.726562 40.882812 L 23.640625 40.882812 C 25.289062 40.882812 26.574219 40.464844 27.492188 39.632812 C 28.410156 38.804688 28.871094 37.644531 28.871094 36.15625 C 28.871094 34.667969 28.410156 33.511719 27.492188 32.6875 C 26.574219 31.863281 25.289062 31.453125 23.640625 31.453125 L 18.261719 31.453125 C 17.839844 31.453125 17.507812 31.570312 17.265625 31.804688 C 17.023438 32.035156 16.90625 32.363281 16.90625 32.789062 L 16.90625 45.585938 C 16.90625 46.023438 17.03125 46.367188 17.289062 46.625 C 17.542969 46.878906 17.882812 47.007812 18.304688 47.007812 Z M 23.292969 38.714844 L 19.726562 38.714844 L 19.726562 33.640625 L 23.292969 33.640625 C 25.230469 33.640625 26.203125 34.488281 26.203125 36.179688 C 26.203125 37.871094 25.230469 38.714844 23.292969 38.714844 Z M 38.605469 47.070312 C 39.320312 47.070312 40.0625 47.011719 40.835938 46.898438 C 41.609375 46.78125 42.285156 46.621094 42.871094 46.414062 C 43.410156 46.242188 43.765625 46.015625 43.941406 45.738281 C 44.117188 45.460938 44.203125 44.988281 44.203125 44.316406 L 44.203125 39.613281 C 44.203125 39.292969 44.101562 39.03125 43.898438 38.835938 C 43.695312 38.640625 43.425781 38.539062 43.089844 38.539062 L 39.21875 38.539062 C 38.867188 38.539062 38.59375 38.628906 38.398438 38.804688 C 38.199219 38.976562 38.101562 39.226562 38.101562 39.546875 C 38.101562 39.867188 38.199219 40.117188 38.398438 40.289062 C 38.59375 40.464844 38.867188 40.554688 39.21875 40.554688 L 41.6875 40.554688 L 41.6875 44.425781 C 40.699219 44.703125 39.707031 44.839844 38.714844 44.839844 C 35.390625 44.839844 33.726562 42.945312 33.726562 39.152344 C 33.726562 37.300781 34.132812 35.90625 34.941406 34.964844 C 35.75 34.023438 36.949219 33.554688 38.539062 33.554688 C 39.238281 33.554688 39.867188 33.644531 40.421875 33.828125 C 40.972656 34.007812 41.574219 34.324219 42.214844 34.777344 C 42.390625 34.894531 42.542969 34.980469 42.671875 35.03125 C 42.804688 35.082031 42.949219 35.105469 43.109375 35.105469 C 43.359375 35.105469 43.570312 34.996094 43.746094 34.777344 C 43.921875 34.558594 44.007812 34.289062 44.007812 33.96875 C 44.007812 33.75 43.96875 33.558594 43.886719 33.398438 C 43.808594 33.238281 43.679688 33.078125 43.503906 32.917969 C 42.191406 31.808594 40.507812 31.257812 38.453125 31.257812 C 36.90625 31.257812 35.5625 31.574219 34.425781 32.207031 C 33.289062 32.84375 32.410156 33.753906 31.789062 34.941406 C 31.171875 36.128906 30.859375 37.535156 30.859375 39.152344 C 30.859375 40.800781 31.171875 42.21875 31.789062 43.40625 C 32.410156 44.597656 33.304688 45.503906 34.46875 46.132812 C 35.636719 46.757812 37.015625 47.070312 38.605469 47.070312 Z M 38.605469 47.070312 \"/>\r\n      </g>`\r\n  },\r\n  mp3Icon: {\r\n    extension: '.mp3',\r\n    path: `<g id=\"surface9\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 43.828125 43.710938 C 43.605469 44.28125 43.273438 44.804688 42.84375 45.265625 C 42.40625 45.730469 41.867188 46.113281 41.242188 46.398438 C 40.597656 46.699219 39.851562 46.855469 39.027344 46.855469 C 38.328125 46.855469 37.703125 46.757812 37.160156 46.570312 C 36.609375 46.378906 36.160156 46.136719 35.769531 45.839844 C 35.386719 45.550781 35.050781 45.210938 34.796875 44.832031 C 34.570312 44.507812 34.394531 44.195312 34.265625 43.890625 C 34.140625 43.59375 34.054688 43.335938 33.996094 43.101562 C 33.792969 42.261719 34.304688 41.417969 35.140625 41.210938 C 35.980469 41.007812 36.828125 41.519531 37.03125 42.355469 C 37.039062 42.390625 37.066406 42.488281 37.144531 42.671875 C 37.191406 42.777344 37.265625 42.914062 37.371094 43.0625 C 37.4375 43.160156 37.53125 43.257812 37.65625 43.351562 C 37.792969 43.453125 37.972656 43.542969 38.195312 43.625 C 38.332031 43.667969 38.59375 43.730469 39.027344 43.730469 C 39.390625 43.730469 39.695312 43.675781 39.925781 43.566406 C 40.1875 43.445312 40.398438 43.300781 40.558594 43.132812 C 40.71875 42.957031 40.839844 42.773438 40.914062 42.578125 C 40.996094 42.371094 41.03125 42.195312 41.03125 42.023438 C 41.03125 41.789062 41 41.585938 40.921875 41.398438 C 40.871094 41.257812 40.785156 41.148438 40.660156 41.039062 C 40.515625 40.910156 40.296875 40.792969 40.011719 40.699219 C 39.6875 40.59375 39.253906 40.539062 38.738281 40.535156 C 37.882812 40.527344 37.1875 39.832031 37.1875 38.972656 L 37.1875 38.832031 C 37.1875 37.984375 37.859375 37.292969 38.699219 37.265625 C 39.070312 37.257812 39.398438 37.195312 39.679688 37.101562 C 39.921875 37.011719 40.121094 36.902344 40.273438 36.773438 C 40.40625 36.652344 40.507812 36.519531 40.582031 36.359375 C 40.652344 36.210938 40.6875 36.027344 40.6875 35.8125 C 40.6875 35.523438 40.644531 35.289062 40.574219 35.125 C 40.5 34.96875 40.414062 34.847656 40.304688 34.757812 C 40.1875 34.660156 40.042969 34.582031 39.867188 34.53125 C 39.402344 34.386719 38.878906 34.398438 38.480469 34.542969 C 38.289062 34.617188 38.121094 34.714844 37.976562 34.84375 C 37.820312 34.984375 37.695312 35.148438 37.59375 35.339844 C 37.484375 35.550781 37.40625 35.773438 37.367188 36.039062 C 37.230469 36.890625 36.429688 37.472656 35.574219 37.335938 C 34.722656 37.195312 34.140625 36.398438 34.28125 35.542969 C 34.378906 34.9375 34.5625 34.378906 34.835938 33.871094 C 35.109375 33.355469 35.464844 32.898438 35.890625 32.519531 C 36.320312 32.132812 36.824219 31.828125 37.382812 31.617188 C 38.433594 31.226562 39.667969 31.199219 40.78125 31.539062 C 41.351562 31.714844 41.863281 31.992188 42.308594 32.355469 C 42.777344 32.753906 43.148438 33.242188 43.414062 33.824219 C 43.679688 34.402344 43.8125 35.070312 43.8125 35.8125 C 43.8125 36.476562 43.679688 37.097656 43.421875 37.660156 C 43.25 38.046875 43.023438 38.394531 42.746094 38.707031 C 43.242188 39.148438 43.609375 39.671875 43.835938 40.261719 C 44.046875 40.804688 44.15625 41.398438 44.15625 42.023438 C 44.15625 42.578125 44.046875 43.148438 43.828125 43.710938 Z M 31.445312 38.492188 C 31.148438 39.140625 30.734375 39.703125 30.199219 40.164062 C 29.6875 40.605469 29.078125 40.957031 28.390625 41.199219 C 27.71875 41.4375 26.976562 41.5625 26.191406 41.5625 L 25 41.5625 L 25 45 C 25 45.859375 24.296875 46.5625 23.4375 46.5625 C 22.578125 46.5625 21.875 45.859375 21.875 45 L 21.875 32.8125 C 21.875 31.945312 22.578125 31.25 23.4375 31.25 L 26.191406 31.25 C 27.890625 31.25 29.257812 31.667969 30.253906 32.5 C 31.339844 33.398438 31.886719 34.714844 31.886719 36.40625 C 31.886719 37.148438 31.738281 37.851562 31.445312 38.492188 Z M 18.730469 45.210938 C 18.730469 46.070312 18.03125 46.773438 17.167969 46.773438 C 16.300781 46.773438 15.605469 46.070312 15.605469 45.210938 L 15.605469 39.28125 L 14.015625 43.140625 C 14.007812 43.164062 13.996094 43.191406 13.984375 43.214844 C 13.71875 43.777344 13.15625 44.117188 12.566406 44.117188 L 12.53125 44.117188 C 11.9375 44.117188 11.375 43.777344 11.109375 43.214844 L 11.082031 43.160156 L 9.339844 39.101562 L 9.339844 45.210938 C 9.339844 46.070312 8.640625 46.773438 7.777344 46.773438 C 6.910156 46.773438 6.214844 46.070312 6.214844 45.210938 L 6.214844 32.824219 C 6.214844 31.960938 6.910156 31.261719 7.777344 31.261719 L 7.835938 31.261719 C 8.472656 31.261719 9.046875 31.617188 9.335938 32.1875 L 12.527344 39.09375 L 15.59375 32.207031 C 15.894531 31.617188 16.46875 31.261719 17.105469 31.261719 L 17.167969 31.261719 C 18.03125 31.261719 18.730469 31.960938 18.730469 32.824219 Z M 41.382812 28.125 L 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.136719 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.136719 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 41.382812 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 28.257812 34.902344 C 27.835938 34.550781 27.140625 34.375 26.191406 34.375 L 25 34.375 L 25 38.4375 L 26.191406 38.4375 C 26.621094 38.4375 27.007812 38.375 27.34375 38.253906 C 27.667969 38.140625 27.929688 37.992188 28.148438 37.804688 C 28.34375 37.632812 28.492188 37.4375 28.601562 37.195312 C 28.710938 36.964844 28.757812 36.703125 28.757812 36.40625 C 28.757812 35.324219 28.382812 35.003906 28.257812 34.902344 \"/>\r\n      <path style=\"fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(99.607843%,99.607843%,99.607843%);stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 11.34125 13.57875 C 11.345 13.5925 11.3525 13.62375 11.36375 13.67375 C 11.3775 13.7225 11.3975 13.78125 11.42625 13.85 C 11.45375 13.9175 11.49375 13.9875 11.54625 14.0625 C 11.5975 14.13875 11.66625 14.20875 11.75 14.27125 C 11.83375 14.33625 11.9375 14.38875 12.0575 14.43125 C 12.1775 14.4725 12.32 14.49375 12.4875 14.49375 C 12.67875 14.49375 12.845 14.46125 12.9875 14.39375 C 13.13 14.32875 13.24875 14.245 13.34375 14.1425 C 13.43875 14.0425 13.51125 13.93 13.55875 13.8075 C 13.6075 13.6825 13.63125 13.56375 13.63125 13.4475 C 13.63125 13.31125 13.6075 13.1825 13.5625 13.065 C 13.515 12.9475 13.4425 12.845 13.3425 12.7575 C 13.2425 12.67 13.115 12.6 12.96 12.55 C 12.805 12.49875 12.6175 12.4725 12.4 12.4725 L 12.4 12.42625 C 12.57 12.42 12.72375 12.3925 12.8625 12.34375 C 13.0025 12.29625 13.11875 12.2275 13.21625 12.14375 C 13.31375 12.05875 13.3875 11.96 13.44125 11.845 C 13.4925 11.7275 13.52 11.60125 13.52 11.46 C 13.52 11.29375 13.4925 11.1525 13.43875 11.0325 C 13.38375 10.91375 13.31125 10.81625 13.21875 10.74 C 13.1275 10.66375 13.0225 10.6075 12.90375 10.5725 C 12.78625 10.535 12.66375 10.5175 12.5375 10.5175 C 12.395 10.5175 12.26125 10.54 12.14 10.58625 C 12.0175 10.6325 11.91 10.69625 11.81875 10.77875 C 11.72625 10.8625 11.64875 10.96 11.5875 11.07375 C 11.5275 11.18875 11.48625 11.315 11.4625 11.45375 M 7.5 14.4 L 7.5 10.5 L 8.3825 10.5 C 8.8075 10.5 9.13375 10.595 9.3625 10.78375 C 9.59 10.975 9.7025 11.2625 9.7025 11.65 C 9.7025 11.81625 9.6725 11.97125 9.6075 12.11125 C 9.5425 12.2525 9.4525 12.37375 9.335 12.475 C 9.21875 12.5775 9.0775 12.65625 8.9175 12.71375 C 8.75625 12.77125 8.5775 12.8 8.3825 12.8 L 7.6 12.8 M 2.4875 14.4675 L 2.4875 10.50375 L 2.5075 10.50375 C 2.5225 10.50375 2.53375 10.5125 2.5425 10.52625 L 3.9925 13.58625 C 3.99875 13.5975 4.005 13.6075 4.00875 13.6175 M 4.02125 13.6175 C 4.02625 13.6075 4.03125 13.5975 4.0375 13.58625 L 5.44 10.52625 C 5.4475 10.5125 5.45875 10.50375 5.4725 10.50375 L 5.4925 10.50375 L 5.4925 14.4675 \" transform=\"matrix(3.125,0,0,3.125,0,0)\"/>\r\n      </g>`\r\n  },\r\n  mp4Icon: {\r\n    extension: '.mp4',\r\n    path: `<g id=\"surface6\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 36.898438 40.625 L 40.625 35.480469 L 40.625 40.625 Z M 28.761719 36.40625 C 28.761719 36.703125 28.707031 36.964844 28.605469 37.195312 C 28.496094 37.433594 28.347656 37.632812 28.148438 37.804688 C 27.929688 37.992188 27.667969 38.144531 27.34375 38.257812 C 27.003906 38.375 26.621094 38.4375 26.191406 38.4375 L 25 38.4375 L 25 34.375 L 26.191406 34.375 C 27.140625 34.375 27.835938 34.554688 28.253906 34.902344 C 28.378906 35.007812 28.761719 35.324219 28.761719 36.40625 Z M 44.6875 43.75 L 43.75 43.75 L 43.75 45.3125 C 43.75 46.175781 43.050781 46.875 42.1875 46.875 C 41.324219 46.875 40.625 46.175781 40.625 45.3125 L 40.625 43.75 L 34.066406 43.75 C 33.199219 43.75 32.503906 43.050781 32.503906 42.1875 L 32.503906 41.875 C 32.503906 41.546875 32.605469 41.226562 32.800781 40.957031 L 39.363281 31.898438 C 39.660156 31.492188 40.128906 31.25 40.628906 31.25 L 42.1875 31.25 C 43.050781 31.25 43.75 31.949219 43.75 32.8125 L 43.75 40.625 L 44.6875 40.625 C 45.550781 40.625 46.25 41.324219 46.25 42.1875 C 46.25 43.050781 45.550781 43.75 44.6875 43.75 Z M 31.445312 38.492188 C 31.148438 39.140625 30.730469 39.703125 30.195312 40.167969 C 29.6875 40.605469 29.082031 40.957031 28.390625 41.203125 C 27.71875 41.441406 26.976562 41.5625 26.191406 41.5625 L 25 41.5625 L 25 45 C 25 45.863281 24.300781 46.5625 23.4375 46.5625 C 22.578125 46.5625 21.875 45.863281 21.875 45 L 21.875 32.8125 C 21.875 31.949219 22.578125 31.25 23.4375 31.25 L 26.191406 31.25 C 27.890625 31.25 29.257812 31.671875 30.253906 32.5 C 31.339844 33.398438 31.886719 34.714844 31.886719 36.40625 C 31.886719 37.148438 31.738281 37.851562 31.445312 38.492188 Z M 18.730469 45.210938 C 18.730469 46.070312 18.027344 46.773438 17.167969 46.773438 C 16.300781 46.773438 15.605469 46.070312 15.605469 45.210938 L 15.605469 39.6875 L 14.035156 43.105469 C 14.019531 43.144531 14.003906 43.179688 13.984375 43.214844 C 13.71875 43.78125 13.15625 44.117188 12.566406 44.117188 L 12.53125 44.117188 C 11.941406 44.117188 11.378906 43.78125 11.113281 43.214844 C 11.097656 43.183594 11.078125 43.152344 11.066406 43.125 L 9.339844 39.484375 L 9.339844 45.210938 C 9.339844 46.070312 8.640625 46.773438 7.777344 46.773438 C 6.910156 46.773438 6.214844 46.070312 6.214844 45.210938 L 6.214844 32.824219 C 6.214844 31.960938 6.910156 31.261719 7.777344 31.261719 L 7.835938 31.261719 C 8.472656 31.261719 9.046875 31.617188 9.335938 32.191406 L 9.355469 32.226562 L 12.523438 38.90625 L 15.578125 32.242188 C 15.585938 32.226562 15.597656 32.210938 15.605469 32.191406 C 15.894531 31.617188 16.46875 31.261719 17.105469 31.261719 L 17.164062 31.261719 C 18.027344 31.261719 18.726562 31.960938 18.726562 32.824219 L 18.726562 45.210938 Z M 41.382812 28.125 L 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 41.382812 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface6\" mask=\"url(#mask0)\"/>\r\n      <path style=\"fill:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(99.607843%,99.607843%,99.607843%);stroke-opacity:1;stroke-miterlimit:4;\" d=\"M 14.3 13.5 L 10.90125 13.5 L 10.90125 13.4 L 13.00125 10.5 L 13.5 10.5 L 13.5 14.5 M 7.5 14.4 L 7.5 10.5 L 8.3825 10.5 C 8.8075 10.5 9.13375 10.595 9.3625 10.78375 C 9.59 10.975 9.7025 11.2625 9.7025 11.65 C 9.7025 11.81625 9.6725 11.97125 9.6075 12.11125 C 9.5425 12.2525 9.4525 12.37375 9.335 12.47625 C 9.21875 12.5775 9.0775 12.65625 8.9175 12.71375 C 8.75625 12.77125 8.5775 12.8 8.3825 12.8 L 7.6 12.8 M 2.4875 14.4675 L 2.4875 10.50375 L 2.5075 10.50375 C 2.5225 10.50375 2.53375 10.5125 2.5425 10.52625 L 3.9925 13.58625 C 3.99875 13.5975 4.005 13.6075 4.00875 13.6175 M 4.02125 13.6175 C 4.02625 13.6075 4.03125 13.5975 4.0375 13.58625 L 5.44 10.52625 C 5.4475 10.5125 5.45875 10.50375 5.4725 10.50375 L 5.4925 10.50375 L 5.4925 14.4675 \" transform=\"matrix(3.125,0,0,3.125,0,0)\"/>\r\n      </g>`\r\n  },\r\n  oggIcon: {\r\n    extension: '.ogg',\r\n    path: `<g id=\"surface9\" clip-path=\"url(#clip1)\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.621094 28.125 C 3.859375 28.125 0 31.984375 0 36.742188 L 0 41.378906 C 0 46.140625 3.859375 50 8.621094 50 L 41.378906 50 C 46.140625 50 50 46.140625 50 41.382812 L 50 36.746094 C 50 31.984375 46.140625 28.125 41.382812 28.125 Z M 8.621094 28.125 \"/>\r\n      </g>\r\n      </defs>\r\n      <g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.578125 25 L 39.421875 25 C 41.53125 25 43.527344 25.492188 45.3125 26.367188 L 45.3125 15.367188 C 45.3125 13.90625 44.976562 13.097656 43.984375 12.109375 C 42.996094 11.121094 35.105469 3.226562 34.503906 2.628906 C 33.90625 2.027344 33.070312 1.5625 31.617188 1.5625 L 6.5625 1.5625 C 5.527344 1.5625 4.6875 2.402344 4.6875 3.4375 L 4.6875 26.367188 C 6.476562 25.492188 8.472656 25 10.578125 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.710938 L 42.164062 12.5 L 34.515625 12.5 C 34.464844 12.46875 34.414062 12.425781 34.375 12.390625 Z M 6.25 25.722656 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.25 13.980469 32.496094 15.210938 33.742188 15.539062 C 33.902344 15.59375 34.074219 15.625 34.257812 15.625 L 43.75 15.625 L 43.75 25.722656 C 44.859375 26.105469 45.910156 26.625 46.875 27.269531 L 46.875 15.363281 C 46.875 13.511719 46.375 12.289062 45.089844 11.003906 L 35.609375 1.523438 C 34.582031 0.496094 33.273438 0 31.617188 0 L 6.5625 0 C 4.667969 0 3.125 1.542969 3.125 3.4375 L 3.125 27.269531 C 4.089844 26.625 5.140625 26.105469 6.25 25.722656 Z M 6.25 25.722656 \"/>\r\n      <use xlink:href=\"#surface9\" mask=\"url(#mask0)\"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 8.976562 47.070312 C 10.464844 47.070312 11.757812 46.75 12.859375 46.109375 C 13.960938 45.46875 14.808594 44.550781 15.40625 43.351562 C 16.003906 42.15625 16.304688 40.757812 16.304688 39.152344 C 16.304688 37.550781 16.007812 36.152344 15.417969 34.964844 C 14.828125 33.777344 13.980469 32.859375 12.882812 32.21875 C 11.78125 31.578125 10.480469 31.257812 8.976562 31.257812 C 7.472656 31.257812 6.167969 31.578125 5.0625 32.21875 C 3.953125 32.859375 3.101562 33.777344 2.511719 34.964844 C 1.921875 36.152344 1.625 37.550781 1.625 39.152344 C 1.625 40.757812 1.925781 42.15625 2.523438 43.351562 C 3.121094 44.550781 3.972656 45.46875 5.070312 46.109375 C 6.171875 46.75 7.472656 47.070312 8.976562 47.070312 Z M 8.976562 44.820312 C 7.546875 44.820312 6.433594 44.332031 5.640625 43.351562 C 4.847656 42.375 4.449219 40.976562 4.449219 39.152344 C 4.449219 37.332031 4.847656 35.933594 5.640625 34.964844 C 6.433594 33.996094 7.546875 33.507812 8.976562 33.507812 C 10.390625 33.507812 11.496094 33.996094 12.289062 34.964844 C 13.085938 35.933594 13.484375 37.332031 13.484375 39.152344 C 13.484375 40.976562 13.085938 42.375 12.289062 43.351562 C 11.496094 44.332031 10.390625 44.820312 8.976562 44.820312 Z M 26.410156 47.070312 C 27.125 47.070312 27.871094 47.011719 28.640625 46.898438 C 29.414062 46.78125 30.09375 46.621094 30.675781 46.414062 C 31.214844 46.242188 31.574219 46.015625 31.75 45.738281 C 31.921875 45.460938 32.011719 44.988281 32.011719 44.316406 L 32.011719 39.613281 C 32.011719 39.292969 31.910156 39.03125 31.703125 38.835938 C 31.5 38.640625 31.230469 38.539062 30.894531 38.539062 L 27.023438 38.539062 C 26.671875 38.539062 26.398438 38.628906 26.203125 38.804688 C 26.007812 38.976562 25.90625 39.226562 25.90625 39.546875 C 25.90625 39.867188 26.007812 40.117188 26.203125 40.289062 C 26.398438 40.464844 26.671875 40.554688 27.023438 40.554688 L 29.496094 40.554688 L 29.496094 44.425781 C 28.503906 44.703125 27.511719 44.839844 26.519531 44.839844 C 23.195312 44.839844 21.53125 42.945312 21.53125 39.152344 C 21.53125 37.300781 21.9375 35.90625 22.746094 34.964844 C 23.554688 34.023438 24.753906 33.554688 26.34375 33.554688 C 27.046875 33.554688 27.671875 33.644531 28.226562 33.828125 C 28.78125 34.007812 29.378906 34.324219 30.019531 34.777344 C 30.195312 34.894531 30.347656 34.980469 30.480469 35.03125 C 30.609375 35.082031 30.757812 35.105469 30.917969 35.105469 C 31.164062 35.105469 31.375 34.996094 31.550781 34.777344 C 31.726562 34.558594 31.8125 34.289062 31.8125 33.96875 C 31.8125 33.75 31.773438 33.558594 31.695312 33.398438 C 31.613281 33.238281 31.484375 33.078125 31.3125 32.917969 C 30 31.808594 28.3125 31.257812 26.257812 31.257812 C 24.710938 31.257812 23.371094 31.574219 22.234375 32.207031 C 21.09375 32.84375 20.214844 33.753906 19.597656 34.941406 C 18.976562 36.128906 18.667969 37.535156 18.667969 39.152344 C 18.667969 40.800781 18.976562 42.21875 19.597656 43.40625 C 20.214844 44.597656 21.109375 45.503906 22.277344 46.132812 C 23.441406 46.757812 24.820312 47.070312 26.410156 47.070312 Z M 42.445312 47.070312 C 43.160156 47.070312 43.902344 47.011719 44.675781 46.898438 C 45.449219 46.78125 46.128906 46.621094 46.710938 46.414062 C 47.25 46.242188 47.609375 46.015625 47.78125 45.738281 C 47.957031 45.460938 48.046875 44.988281 48.046875 44.316406 L 48.046875 39.613281 C 48.046875 39.292969 47.941406 39.03125 47.738281 38.835938 C 47.535156 38.640625 47.265625 38.539062 46.929688 38.539062 L 43.058594 38.539062 C 42.707031 38.539062 42.433594 38.628906 42.238281 38.804688 C 42.039062 38.976562 41.941406 39.226562 41.941406 39.546875 C 41.941406 39.867188 42.039062 40.117188 42.238281 40.289062 C 42.433594 40.464844 42.707031 40.554688 43.058594 40.554688 L 45.53125 40.554688 L 45.53125 44.425781 C 44.539062 44.703125 43.546875 44.839844 42.554688 44.839844 C 39.230469 44.839844 37.566406 42.945312 37.566406 39.152344 C 37.566406 37.300781 37.972656 35.90625 38.78125 34.964844 C 39.589844 34.023438 40.789062 33.554688 42.378906 33.554688 C 43.078125 33.554688 43.707031 33.644531 44.261719 33.828125 C 44.816406 34.007812 45.414062 34.324219 46.054688 34.777344 C 46.230469 34.894531 46.382812 34.980469 46.515625 35.03125 C 46.644531 35.082031 46.792969 35.105469 46.953125 35.105469 C 47.199219 35.105469 47.410156 34.996094 47.585938 34.777344 C 47.761719 34.558594 47.847656 34.289062 47.847656 33.96875 C 47.847656 33.75 47.808594 33.558594 47.726562 33.398438 C 47.648438 33.238281 47.519531 33.078125 47.34375 32.917969 C 46.03125 31.808594 44.347656 31.257812 42.292969 31.257812 C 40.746094 31.257812 39.40625 31.574219 38.265625 32.207031 C 37.128906 32.84375 36.25 33.753906 35.632812 34.941406 C 35.011719 36.128906 34.703125 37.535156 34.703125 39.152344 C 34.703125 40.800781 35.011719 42.21875 35.632812 43.40625 C 36.25 44.597656 37.144531 45.503906 38.3125 46.132812 C 39.476562 46.757812 40.855469 47.070312 42.445312 47.070312 Z M 42.445312 47.070312 \"/>\r\n      </g>`\r\n  },\r\n  pdfIcon: {\r\n    extension: '.pdf',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(99.607843%,99.607843%,99.607843%);fill-opacity:1;\" d=\"M 10.59375 25 L 39.4375 25 C 41.476562 25.003906 43.484375 25.472656 45.3125 26.375 L 45.3125 15.375 C 45.347656 14.191406 44.867188 13.054688 44 12.25 L 34.625 2.875 C 33.875 2.003906 32.773438 1.523438 31.625 1.5625 L 6.625 1.5625 C 5.589844 1.5625 4.75 2.402344 4.75 3.4375 L 4.75 26.375 C 6.566406 25.480469 8.566406 25.007812 10.59375 25 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 34.375 4.71875 L 42.15625 12.5 L 34.53125 12.5 C 34.480469 12.511719 34.425781 12.511719 34.375 12.5 Z M 6.25 25.71875 L 6.25 3.4375 C 6.25 3.265625 6.390625 3.125 6.5625 3.125 L 31.25 3.125 L 31.25 12.5 C 31.300781 13.980469 32.316406 15.253906 33.75 15.625 C 33.957031 15.675781 34.167969 15.675781 34.375 15.625 L 43.75 15.625 L 43.75 25.71875 C 44.859375 26.09375 45.910156 26.621094 46.875 27.28125 L 46.875 15.375 C 46.964844 13.722656 46.3125 12.117188 45.09375 11 L 35.71875 1.625 C 34.648438 0.523438 33.160156 -0.0664062 31.625 0 L 6.625 0 C 5.703125 -0.015625 4.8125 0.339844 4.152344 0.984375 C 3.496094 1.632812 3.125 2.515625 3.125 3.4375 L 3.125 27.28125 C 4.09375 26.625 5.144531 26.101562 6.25 25.71875 Z M 6.25 25.71875 \"/>\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 8.625 28.125 C 6.335938 28.117188 4.136719 29.023438 2.515625 30.640625 C 0.898438 32.261719 -0.0078125 34.460938 0 36.75 L 0 41.375 C 0 46.136719 3.863281 50 8.625 50 L 41.375 50 C 46.132812 49.984375 49.984375 46.132812 50 41.375 L 50 36.75 C 50 31.988281 46.136719 28.125 41.375 28.125 Z M 8.625 28.125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 14.40625 41.78125 L 12.09375 41.78125 L 12.09375 45.84375 C 12.003906 46.351562 11.5625 46.726562 11.046875 46.726562 C 10.53125 46.726562 10.089844 46.351562 10 45.84375 L 10 34.78125 C 10 34.210938 10.460938 33.75 11.03125 33.75 L 14.40625 33.75 C 15.925781 33.617188 17.390625 34.351562 18.191406 35.648438 C 18.992188 36.945312 18.992188 38.585938 18.191406 39.882812 C 17.390625 41.179688 15.925781 41.914062 14.40625 41.78125 Z M 12.09375 39.6875 L 14.40625 39.6875 C 15.152344 39.78125 15.882812 39.4375 16.289062 38.804688 C 16.691406 38.171875 16.691406 37.359375 16.289062 36.726562 C 15.882812 36.09375 15.152344 35.75 14.40625 35.84375 L 12.09375 35.84375 Z M 12.09375 39.6875 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 20.3125 45.84375 L 20.3125 34.78125 C 20.3125 34.210938 20.773438 33.75 21.34375 33.75 L 23.5625 33.75 C 27.1875 33.75 30.125 36.6875 30.125 40.3125 C 30.125 43.9375 27.1875 46.875 23.5625 46.875 L 21.34375 46.875 C 20.773438 46.875 20.3125 46.414062 20.3125 45.84375 Z M 22.40625 44.78125 L 23.5625 44.78125 C 26.03125 44.78125 28.03125 42.78125 28.03125 40.3125 C 28.03125 37.84375 26.03125 35.84375 23.5625 35.84375 L 22.40625 35.84375 Z M 22.40625 44.78125 \"/>\r\n      <path style=\" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;\" d=\"M 33.1875 45.84375 L 33.1875 34.78125 C 33.183594 34.476562 33.3125 34.1875 33.542969 33.992188 C 33.769531 33.792969 34.074219 33.703125 34.375 33.75 L 40.625 33.75 C 41.132812 33.839844 41.507812 34.28125 41.507812 34.796875 C 41.507812 35.3125 41.132812 35.753906 40.625 35.84375 L 35.25 35.84375 L 35.25 39.28125 L 39.625 39.28125 C 40.195312 39.28125 40.65625 39.742188 40.65625 40.3125 C 40.65625 40.882812 40.195312 41.34375 39.625 41.34375 L 35.25 41.34375 L 35.25 45.84375 C 35.257812 46.359375 34.882812 46.796875 34.375 46.875 C 34.074219 46.921875 33.769531 46.832031 33.542969 46.632812 C 33.3125 46.4375 33.183594 46.148438 33.1875 45.84375 Z M 33.1875 45.84375 \"/>\r\n      </g>`\r\n  },\r\n  defaultIcon: {\r\n    extension: '.default',\r\n    path: `<g id=\"surface1\">\r\n      <path style=\" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;\" d=\"M 3.117188 44.777344 C 1.394531 44.777344 0 43.386719 0 41.671875 L 0 3.484375 C 0 1.769531 1.394531 0.378906 3.117188 0.378906 L 25.792969 0.378906 C 27.164062 0.304688 28.5 0.808594 29.480469 1.765625 L 37.980469 10.230469 C 39.144531 11.242188 39.769531 12.730469 39.683594 14.265625 L 39.683594 41.671875 C 39.683594 43.386719 38.289062 44.777344 36.5625 44.777344 Z M 25.511719 3.203125 L 3.117188 3.203125 C 2.960938 3.203125 2.832031 3.328125 2.832031 3.484375 L 2.832031 41.671875 C 2.832031 41.828125 2.960938 41.957031 3.117188 41.957031 L 36.5625 41.957031 C 36.679688 41.949219 36.785156 41.867188 36.820312 41.757812 L 36.820312 14.492188 L 28.34375 14.492188 C 28.160156 14.539062 27.964844 14.539062 27.777344 14.492188 C 26.480469 14.15625 25.554688 13.007812 25.511719 11.671875 Z M 28.34375 4.640625 L 28.34375 11.671875 C 28.390625 11.683594 28.441406 11.683594 28.488281 11.671875 L 35.402344 11.671875 Z M 28.34375 4.640625 \"/>\r\n      </g>`\r\n  }\r\n}\r\n","import FE from '../../editor.js'\n\nFE.MODULES.modals = function (editor) {\n  const $ = editor.$\n\n  if (!editor.shared.modals) {\n    editor.shared.modals = {}\n  }\n  let modals = editor.shared.modals\n  let $overlay\n\n  /**\n   * Get the modal with the specific id.\n   */\n  function get(id) {\n    return modals[id]\n  }\n\n  /*\n   *  Get modal html\n   */\n  function _modalHTML(head, body) {\n\n    // Modal wrapper.\n    let html = `<div tabIndex=\"-1\" class=\"fr-modal${editor.opts.theme ? ` ${editor.opts.theme}-theme` : ''}\"><div class=\"fr-modal-wrapper\">`\n\n    // Modal title.\n    const close_button = `<button title=\"${editor.language.translate('Cancel')}\" class=\"fr-command fr-btn fr-modal-close\"><svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\"><path d=\"${FE.SVG.close}\"/></svg></button>`\n    html += `<div class=\"fr-modal-head\">${head}${close_button}</div>`\n\n    // Body.\n    html += `<div tabIndex=\"-1\" class=\"fr-modal-body\">${body}</div>`\n\n    // End Modal.\n    html += '</div></div>'\n\n    const $tmp = $(editor.doc.createElement('DIV'))\n    $tmp.html(html)\n\n    return $tmp.find('> .fr-modal')\n  }\n\n  /*\n   * Create modal.\n   */\n  function create(id, head, body) {\n\n    // Wrap all head elements inside a div\n    head = `<div class=\"fr-modal-head-line\">${head}</div>`\n\n    // Build modal overlay.\n    if (!editor.shared.$overlay) {\n      editor.shared.$overlay = $(editor.doc.createElement('DIV')).addClass('fr-overlay')\n      $('body').first().append(editor.shared.$overlay)\n    }\n    $overlay = editor.shared.$overlay\n\n    if (editor.opts.theme) {\n      $overlay.addClass(`${editor.opts.theme}-theme`)\n    }\n\n    // Build modal.\n    if (!modals[id]) {\n      const $modal = _modalHTML(head, body)\n      modals[id] = {\n        $modal,\n        $head: $modal.find('.fr-modal-head'),\n        $body: $modal.find('.fr-modal-body')\n      }\n\n      // Desktop or mobile device.\n      if (!editor.helpers.isMobile()) {\n        $modal.addClass('fr-desktop')\n      }\n\n      // Append modal to body.\n      $('body').first().append($modal)\n\n      // Click on close button.\n      editor.events.$on($modal, 'click', '.fr-modal-close', () => {\n        hide(id)\n      }, true)\n\n      modals[id].$body.css('margin-top', modals[id].$head.outerHeight())\n\n      // Keydown handler.\n      editor.events.$on($modal, 'keydown', (e) => {\n        const keycode = e.which\n\n        // Esc.\n        if (keycode === FE.KEYCODE.ESC) {\n          hide(id)\n          editor.accessibility.focusModalButton($modal)\n\n          return false\n        }\n        else if (!$(e.currentTarget).is('input[type=text], textarea') && keycode !== FE.KEYCODE.ARROW_UP && keycode !== FE.KEYCODE.ARROW_DOWN && !editor.keys.isBrowserAction(e)) {\n          e.preventDefault()\n          e.stopPropagation()\n\n          return false\n        }\n\n\n        return true\n\n      }, true)\n\n      hide(id, true)\n    }\n\n    return modals[id]\n  }\n\n  /*\n   * Destroy modals.\n   */\n  function destroy() {\n\n    // Destroy all modals.\n    for (const i in modals) {\n      if (Object.prototype.hasOwnProperty.call(modals, i)) {\n        const modalHash = modals[i]\n        if (modalHash && modalHash.$modal) {\n          modalHash.$modal.removeData().remove()\n        }\n      }\n    }\n\n    if ($overlay) {\n      $overlay.removeData().remove()\n    }\n\n    modals = {}\n  }\n\n  /*\n   * Show modal.\n   */\n  function show(id) {\n    if (!modals[id]) {\n      return\n    }\n\n    const $modal = modals[id].$modal\n\n    // Set the current instance for the modal.\n    $modal.data('instance', editor)\n\n    // Show modal.\n    $modal.show()\n    $overlay.show()\n\n    // Prevent scrolling in page.\n    $(editor.o_doc).find('body').first().addClass('prevent-scroll')\n\n    // Mobile device\n    if (editor.helpers.isMobile()) {\n      $(editor.o_doc).find('body').first().addClass('fr-mobile')\n    }\n\n    $modal.addClass('fr-active')\n\n    editor.accessibility.focusModal($modal)\n  }\n\n  /*\n   * Hide modal.\n   */\n  function hide(id, init) {\n    if (!modals[id]) {\n      return\n    }\n\n    const $modal = modals[id].$modal\n    const inst = $modal.data('instance') || editor\n\n    inst.events.enableBlur()\n    $modal.hide()\n    $overlay.hide()\n    $(inst.o_doc).find('body').first().removeClass('prevent-scroll fr-mobile')\n\n    $modal.removeClass('fr-active')\n\n    if (!init) {\n\n      // Restore selection.\n      inst.accessibility.restoreSelection()\n\n      inst.events.trigger('modals.hide')\n    }\n  }\n\n  /**\n   *  Resize modal according to its body or editor heights.\n   */\n  function resize(id) {\n    if (!modals[id]) {\n      return\n    }\n\n    const modalHash = modals[id]\n    const $modal = modalHash.$modal\n    const $body = modalHash.$body\n\n    const height = editor.o_win.innerHeight\n\n    // The wrapper object.\n    const $wrapper = $modal.find('.fr-modal-wrapper')\n\n    // Calculate max allowed height.\n    const allWrapperHeight = $wrapper.outerHeight(true)\n    const exteriorBodyHeight = $wrapper.height() - ($body.outerHeight(true) - $body.height())\n    const maxHeight = height - allWrapperHeight + exteriorBodyHeight\n\n    // Get body content height.\n    const body_content_height = $body.get(0).scrollHeight\n\n    // Calculate the new height.\n    let newHeight = 'auto'\n\n    if (body_content_height > maxHeight) {\n      newHeight = maxHeight\n    }\n\n    $body.height(newHeight)\n  }\n\n  /**\n   * Find visible modal.\n   */\n  function isVisible(id) {\n    let $modal\n\n    // By id.\n    if (typeof id === 'string') {\n      if (!modals[id]) {\n        return\n      }\n      $modal = modals[id].$modal\n    }\n\n    // By modal object.\n    else {\n      $modal = id\n    }\n\n    return $modal && editor.node.hasClass($modal, 'fr-active') && editor.core.sameInstance($modal) || false\n  }\n\n  /**\n   * Check if there is any modal visible.\n   */\n  function areVisible(new_instance) {\n    for (const id in modals) {\n      if (Object.prototype.hasOwnProperty.call(modals, id)) {\n        if (isVisible(id) && (typeof new_instance === 'undefined' || modals[id].$modal.data('instance') === new_instance)) {\n          return modals[id].$modal\n        }\n      }\n    }\n\n    return false\n  }\n\n  /**\n   * Initialization.\n   */\n  function _init() {\n    editor.events.on('shared.destroy', destroy, true)\n  }\n\n  return {\n    _init,\n    get,\n    create,\n    show,\n    hide,\n    resize,\n    isVisible,\n    areVisible\n  }\n}\n","import FE from '../../editor.js'\n\nFE.MODULES.position = function (editor) {\n  const $ = editor.$\n\n  /**\n  * Get bounding rect around selection.\n  *\n  */\n  function getBoundingRect() {\n    const range = editor.selection.ranges(0)\n    let boundingRect = range.getBoundingClientRect()\n\n    if (boundingRect.top === 0 && boundingRect.left === 0 && boundingRect.width === 0 || boundingRect.height === 0) {\n      let remove = false\n\n      if (editor.$el.find('.fr-marker').length === 0) {\n        editor.selection.save()\n        remove = true\n      }\n\n      const $marker = editor.$el.find('.fr-marker').first()\n      $marker.css('display', 'inline')\n      $marker.css('line-height', '')\n      const offset = $marker.offset()\n      const height = $marker.outerHeight()\n      $marker.css('display', 'none')\n      $marker.css('line-height', 0)\n\n      boundingRect = {}\n      boundingRect.left = offset && offset.left;\n      boundingRect.width = 0\n      boundingRect.height = height\n      boundingRect.top = offset && offset.top - (editor.helpers.isMobile() && !editor.helpers.isIOS() || editor.opts.iframe ? 0 : editor.helpers.scrollTop())\n      boundingRect.right = 1\n      boundingRect.bottom = 1\n      boundingRect.ok = true\n\n      if (remove) {\n        editor.selection.restore()\n      }\n    }\n\n    return boundingRect\n  }\n\n  /**\n   * Normalize top positioning.\n   */\n  function _topNormalized($el, top, obj_height) {\n    const height = $el.outerHeight(true)\n\n    if (!editor.helpers.isMobile() && editor.$tb && $el.parent().get(0) !== editor.$tb.get(0)) {\n      // Get the parent of the element.\n      let p_offset = $el.parent().offset().top\n      const new_top = top - height - (obj_height || 0)\n\n      // Parent is scrollable container.\n      // Substract the top of the container.\n      if ($el.parent().get(0) === editor.$sc.get(0)) {\n        p_offset -= $el.parent().position().top\n      }\n\n      // Scrollable container height.\n      const s_height = editor.$sc.get(0).clientHeight\n\n      // 1. Parent offset + toolbar top + toolbar height > scrollableContainer height.\n      // 2. Selection doesn't go above the screen.\n      if (p_offset + top + height > editor.$sc.offset().top + s_height && $el.parent().offset().top + new_top > 0 && new_top > 0) {\n\n        // Make sure we can display it.\n        if (new_top > editor.$wp.scrollTop()) {\n          top = new_top\n          $el.addClass('fr-above')\n        }\n      }\n      else {\n        $el.removeClass('fr-above')\n      }\n    }\n\n    return top\n  }\n\n  /**\n   * Normalize left position.\n   */\n  function _leftNormalized($el, left) {\n    const width = $el.outerWidth(true)\n\n    // Normalize right.\n    if (left + width > editor.$sc.get(0).clientWidth - 10) {\n      left = editor.$sc.get(0).clientWidth - width - 10\n    }\n\n    // Normalize left.\n    if (left < 0) {\n      left = 10\n    }\n\n    return left\n  }\n\n  /**\n   * Place editor below selection.\n   */\n  function forSelection($el) {\n    const selection_rect = getBoundingRect()\n\n    $el.css({\n      top: 0,\n      left: 0\n    })\n\n    let top = selection_rect.top + selection_rect.height\n    const left = selection_rect.left + selection_rect.width / 2 - $el.get(0).offsetWidth / 2 + editor.helpers.scrollLeft()\n\n    if (!editor.opts.iframe) {\n      top += editor.helpers.scrollTop()\n    }\n\n    at(left, top, $el, selection_rect.height)\n  }\n\n  /**\n   * Position element at the specified position.\n   */\n  function at(left, top, $el, obj_height) {\n    const $container = $el.data('container')\n\n    if ($container && ($container.get(0).tagName !== 'BODY' || $container.css('position') !== 'static')) {\n\n      if (left) {\n        left -= $container.offset().left\n      }\n\n      if (top) {\n        top -= $container.offset().top\n      }\n\n      if ($container.get(0).tagName !== 'BODY') {\n        if (left) {\n          left += $container.get(0).scrollLeft\n        }\n\n        if (top) {\n          top += $container.get(0).scrollTop\n        }\n      }\n      else if ($container.css('position') === 'absolute') {\n        if (left) {\n          left += $container.position().left\n        }\n\n        if (top) {\n          top += $container.position().top\n        }\n      }\n    }\n\n    // Apply iframe correction.\n    if (editor.opts.iframe && $container && editor.$tb && $container.get(0) !== editor.$tb.get(0)) {\n      const iframePaddingTop = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-top'))\n      const iframePaddingLeft = editor.helpers.getPX(editor.$wp.find('.fr-iframe').css('padding-left'))\n      if (left) {\n        left += editor.$iframe.offset().left + iframePaddingLeft\n      }\n\n      if (top) {\n        top += editor.$iframe.offset().top + iframePaddingTop\n      }\n    }\n\n    const new_left = _leftNormalized($el, left)\n\n    if (left) {\n\n      // Set the new left.\n      $el.css('left', new_left)\n\n    }\n\n    if (top) {\n      $el.css('top', _topNormalized($el, top, obj_height))\n    }\n  }\n\n  /**\n   * Special case for update sticky on iOS.\n   */\n  function _updateIOSSticky(el) {\n    const $el = $(el)\n    const is_on = $el.is('.fr-sticky-on')\n    const prev_top = $el.data('sticky-top')\n    const scheduled_top = $el.data('sticky-scheduled')\n\n    // Create a dummy div that we show then sticky is on.\n    if (typeof prev_top === 'undefined') {\n      $el.data('sticky-top', 0)\n      const $dummy = $(`<div class=\"fr-sticky-dummy\" style=\"height: ${$el.outerHeight()}px;\"></div>`)\n      editor.$box.prepend($dummy)\n    }\n    else {\n      editor.$box.find('.fr-sticky-dummy').css('height', $el.outerHeight())\n    }\n\n    // Position sticky doesn't work when the keyboard is on the screen.\n    if (editor.core.hasFocus() || editor.$tb.findVisible('input:focus').length > 0) {\n\n      // Get the current scroll.\n      const x_scroll = editor.helpers.scrollTop()\n\n      // Get the current top.\n      // We make sure that we keep it within the editable box.\n      const x_top = Math.min(Math.max(x_scroll - editor.$tb.parent().offset().top, 0), editor.$tb.parent().outerHeight() - $el.outerHeight())\n\n      // Not the same top and different than the already scheduled.\n      if (x_top !== prev_top && x_top !== scheduled_top) {\n\n        // Clear any too soon change to avoid flickering.\n        clearTimeout($el.data('sticky-timeout'))\n\n        // Store the current scheduled top.\n        $el.data('sticky-scheduled', x_top)\n\n        // Hide the toolbar for a rich experience.\n        if ($el.outerHeight() < x_scroll - editor.$tb.parent().offset().top) {\n          $el.addClass('fr-opacity-0')\n        }\n\n        // Set the timeout for changing top.\n        // Based on the test 100ms seems to be the best timeout.\n        $el.data('sticky-timeout', setTimeout(() => {\n\n          // Get the current top.\n          const c_scroll = editor.helpers.scrollTop()\n          let c_top = Math.min(Math.max(c_scroll - editor.$tb.parent().offset().top, 0), editor.$tb.parent().outerHeight() - $el.outerHeight())\n\n          if (c_top > 0 && editor.$tb.parent().get(0).tagName === 'BODY') {\n            c_top += editor.$tb.parent().position().top\n          }\n\n          // Don't update if it is not different than the prev top.\n          if (c_top !== prev_top) {\n            $el.css('top', Math.max(c_top, 0))\n\n            $el.data('sticky-top', c_top)\n            $el.data('sticky-scheduled', c_top)\n          }\n\n          // Show toolbar.\n          $el.removeClass('fr-opacity-0')\n        }, 100))\n      }\n\n      // Turn on sticky mode.\n      if (!is_on) {\n        const $parent = editor.$tb.parent()\n        const parentBorderWidth = $parent.get(0).offsetWidth - $parent.get(0).clientWidth\n\n        $el.css('top', '0')\n        $el.width($parent.width() - parentBorderWidth)\n        $el.addClass('fr-sticky-on')\n        editor.$box.addClass('fr-sticky-box')\n      }\n    }\n\n    // Turn off sticky mode.\n    else {\n      clearTimeout($(el).css('sticky-timeout'))\n      $el.css('top', '0')\n      $el.css('position', '')\n      $el.css('width', '')\n      $el.data('sticky-top', 0)\n      $el.removeClass('fr-sticky-on')\n      editor.$box.removeClass('fr-sticky-box')\n    }\n  }\n\n  /**\n   * Update sticky location for browsers that don't support sticky.\n   * https://github.com/filamentgroup/fixed-sticky\n   *\n   * The MIT License (MIT)\n   *\n   * Copyright (c) 2013 Filament Group\n   */\n  function _updateSticky(el) {\n    if (!el.offsetWidth) {\n      return\n    }\n\n    const $el = $(el)\n    const height = $el.outerHeight()\n\n    let position = $el.data('sticky-position')\n\n    // Viewport height.\n    const viewport_height = $(editor.opts.scrollableContainer === 'body' ? editor.o_win : editor.opts.scrollableContainer).outerHeight()\n\n    let scrollable_top = 0\n    let scrollable_bottom = 0\n\n    if (editor.opts.scrollableContainer !== 'body') {\n      scrollable_top = editor.$sc.offset().top\n      scrollable_bottom = $(editor.o_win).outerHeight() - scrollable_top - viewport_height\n    }\n\n    const offset_top = editor.opts.scrollableContainer === 'body' ? editor.helpers.scrollTop() : scrollable_top\n\n    const is_on = $el.is('.fr-sticky-on')\n\n    // Decide parent.\n    if (!$el.data('sticky-parent')) {\n      $el.data('sticky-parent', $el.parent())\n    }\n    const $parent = $el.data('sticky-parent')\n    const parent_top = $parent.offset().top\n    const parent_height = $parent.outerHeight()\n\n\n    if (!$el.data('sticky-offset')) {\n      $el.data('sticky-offset', true)\n      $el.after(`<div class=\"fr-sticky-dummy\" style=\"height: ${height}px;\"></div>`)\n    }\n    else {\n      editor.$box.find('.fr-sticky-dummy').css('height', `${height}px`)\n    }\n\n    // Detect position placement.\n    if (!position) {\n\n      // Some browsers require fixed/absolute to report accurate top/left values.\n      const skip_setting_fixed = $el.css('top') !== 'auto' || $el.css('bottom') !== 'auto'\n\n      // Set to position fixed for a split of second.\n      if (!skip_setting_fixed) {\n        $el.css('position', 'fixed')\n      }\n\n      // Find position.\n      position = {\n        top: editor.node.hasClass($el.get(0), 'fr-top'),\n        bottom: editor.node.hasClass($el.get(0), 'fr-bottom')\n      }\n\n      // Remove position fixed.\n      if (!skip_setting_fixed) {\n        $el.css('position', '')\n      }\n\n      // Store position.\n      $el.data('sticky-position', position)\n\n      $el.data('top', editor.node.hasClass($el.get(0), 'fr-top') ? $el.css('top') : 'auto')\n      $el.data('bottom', editor.node.hasClass($el.get(0), 'fr-bottom') ? $el.css('bottom') : 'auto')\n    }\n\n    const el_top = editor.helpers.getPX($el.data('top'))\n    const el_bottom = editor.helpers.getPX($el.data('bottom'))\n\n    // Detect if is OK to fix at the top.\n    function isFixedToTop() {\n\n      // 1. Top condition.\n      // 2. Bottom condition.\n      return parent_top < offset_top + el_top &&\n              parent_top + parent_height - height >= offset_top + el_top\n    }\n\n    // Detect if it is OK to fix at the bottom.\n    function isFixedToBottom() {\n      return parent_top + height < offset_top + viewport_height - el_bottom &&\n              parent_top + parent_height > offset_top + viewport_height - el_bottom\n    }\n\n    const at_top = position.top && isFixedToTop() && (editor.helpers.isInViewPort(editor.$sc.get(0)) || editor.opts.scrollableContainer === 'body')\n    const at_bottom = position.bottom && isFixedToBottom()\n\n    // Should be fixed.\n    if (at_top || at_bottom) {\n\n      // Account for parent border in calculating toolbar width\n      const parentBorderWidth = $parent.get(0).offsetWidth - $parent.get(0).clientWidth\n      $el.css('width', `${$parent.get(0).getBoundingClientRect().width - parentBorderWidth}px`);\n\n      if (!is_on) {\n        $el.addClass('fr-sticky-on')\n        $el.removeClass('fr-sticky-off')\n\n        if ($el.css('top')) {\n          if ($el.data('top') !== 'auto') {\n            $el.css('top', editor.helpers.getPX($el.data('top')) + scrollable_top)\n          }\n          else {\n            $el.data('top', 'auto')\n          }\n        }\n\n        if ($el.css('bottom')) {\n          if ($el.data('bottom') !== 'auto') {\n            $el.css('bottom', editor.helpers.getPX($el.data('bottom')) + scrollable_bottom)\n          }\n          else {\n            $el.css('bottom', 'auto')\n          }\n        }\n      }\n    }\n\n    // Shouldn't be fixed.\n    else if (!editor.node.hasClass($el.get(0), 'fr-sticky-off')) {\n\n      // Reset.\n      $el.css('width', '')\n      $el.removeClass('fr-sticky-on')\n      $el.addClass('fr-sticky-off')\n\n      if ($el.css('top') && $el.data('top') !== 'auto' && position.top) {\n        $el.css('top', 0)\n      }\n\n      if ($el.css('bottom') && $el.data('bottom') !== 'auto' && position.bottom) {\n        $el.css('bottom', 0)\n      }\n    }\n  }\n\n  /**\n   * Test if browser supports sticky.\n   */\n  function _testSticky() {\n    return false\n  }\n\n  // Use an animation frame to make sure we're always OK with the updates.\n  function animate() {\n    editor.helpers.requestAnimationFrame()(animate)\n\n    if (editor.events.trigger('position.refresh') === false) {\n      return\n    }\n\n    for (let i = 0; i < editor._stickyElements.length; i++) {\n      _updateIOSSticky(editor._stickyElements[i])\n    }\n  }\n\n  /**\n   * Initialize sticky position.\n   */\n  function _initSticky() {\n    if (!_testSticky()) {\n      editor._stickyElements = []\n\n      // iOS special case.\n      if (editor.helpers.isIOS()) {\n        animate()\n\n        // Hide toolbar on touchmove. This is very useful on iOS versions < 8.\n        editor.events.$on($(editor.o_win), 'scroll', () => {\n          if (editor.core.hasFocus()) {\n            for (let i = 0; i < editor._stickyElements.length; i++) {\n              const $el = $(editor._stickyElements[i])\n              const $parent = $el.parent()\n              const c_scroll = editor.helpers.scrollTop()\n\n              if ($el.outerHeight() < c_scroll - $parent.offset().top) {\n                $el.addClass('fr-opacity-0')\n                $el.data('sticky-top', -1)\n                $el.data('sticky-scheduled', -1)\n              }\n            }\n          }\n        }, true)\n      }\n\n      // Default case. Do the updates on scroll.\n      else {\n        if (editor.opts.scrollableContainer !== 'body') {\n          editor.events.$on($(editor.opts.scrollableContainer), 'scroll', refresh, true)\n        }\n\n        editor.events.$on($(editor.o_win), 'scroll', refresh, true)\n        editor.events.$on($(editor.o_win), 'resize', refresh, true)\n\n        editor.events.on('initialized', refresh)\n        editor.events.on('focus', refresh)\n\n        editor.events.$on($(editor.o_win), 'resize', 'textarea', refresh, true)\n      }\n    }\n\n    editor.events.on('destroy', () => {\n      editor._stickyElements = []\n    })\n  }\n\n  function refresh() {\n    if (editor._stickyElements) {\n      for (let i = 0; i < editor._stickyElements.length; i++) {\n        _updateSticky(editor._stickyElements[i])\n      }\n    }\n  }\n\n  /**\n   * Mark element as sticky.\n   */\n  function addSticky($el) {\n    $el.addClass('fr-sticky')\n\n    if (editor.helpers.isIOS()) {\n      $el.addClass('fr-sticky-ios')\n    }\n\n    if (!_testSticky()) {\n      $el.removeClass('fr-sticky')\n      editor._stickyElements.push($el.get(0))\n    }\n  }\n\n  function _init() {\n    _initSticky()\n  }\n\n  return {\n    _init,\n    forSelection,\n    addSticky,\n    refresh,\n    at,\n    getBoundingRect\n  }\n}\n","import FE from '../../editor.js'\n\nFE.MODULES.refresh = function (editor) {\n  const $ = editor.$\n\n  function undo($btn) {\n    _setDisabled($btn, !editor.undo.canDo())\n  }\n\n  function redo($btn) {\n    _setDisabled($btn, !editor.undo.canRedo())\n  }\n\n  function indent($btn) {\n    if (editor.node.hasClass($btn.get(0), 'fr-no-refresh')) {\n      return false\n    }\n\n    const blocks = editor.selection.blocks()\n\n    for (let i = 0; i < blocks.length; i++) {\n      let p_node = blocks[i].previousSibling\n\n      while (p_node && p_node.nodeType === Node.TEXT_NODE && p_node.textContent.length === 0) {\n        p_node = p_node.previousSibling\n      }\n\n      if (blocks[i].tagName === 'LI' && !p_node) {\n        _setDisabled($btn, true)\n      }\n      else {\n        _setDisabled($btn, false)\n\n        return true\n      }\n    }\n  }\n\n  function outdent($btn) {\n    if (editor.node.hasClass($btn.get(0), 'fr-no-refresh')) {\n      return false\n    }\n\n    const blocks = editor.selection.blocks()\n\n    for (let i = 0; i < blocks.length; i++) {\n      const prop = editor.opts.direction === 'rtl' || $(blocks[i]).css('direction') === 'rtl' ? 'margin-right' : 'margin-left'\n\n      if (blocks[i].tagName === 'LI' || blocks[i].parentNode.tagName === 'LI') {\n        _setDisabled($btn, false)\n\n        return true\n      }\n\n      if (editor.helpers.getPX($(blocks[i]).css(prop)) > 0) {\n        _setDisabled($btn, false)\n\n        return true\n      }\n    }\n\n    _setDisabled($btn, true)\n  }\n\n  /**\n   * Disable/enable buton.\n   */\n  function _setDisabled($btn, disabled) {\n    $btn.toggleClass('fr-disabled', disabled).attr('aria-disabled', disabled)\n  }\n\n  /**\n   * Apply styles to button groups\n   */\n  function more($moreButton) {\n    // Align the hidden toolbar with respect to its corresponding more button\n    // Set its width to cover the complete editor width\n    const $moreToolbar = editor.$tb.find(`.fr-more-toolbar[data-name=\"${$moreButton.attr('data-group-name')}\"]`)\n\n    let offset = _computeMoreToolbarPosition($moreButton, $moreToolbar)\n\n    // Position hidden toolbar w.r.t. more button\n    if (editor.opts.direction === 'rtl') {\n      $moreToolbar.css('padding-right', offset)\n    }\n    else {\n      $moreToolbar.css('padding-left', offset)\n    }\n\n  }\n\n  /**\n   * Compute more toolbar new position w.r.t more button\n   */\n  function _computeMoreToolbarPosition($moreButton, $moreToolbar) {\n\n    // Compute total buttons width in the more toolbar\n    let totalButtonWidth = 0\n    const $moreToolbarBtns = $moreToolbar.find('> .fr-command, > .fr-btn-wrap')\n    $moreToolbarBtns.each((index, btn) => {\n      totalButtonWidth += $(btn).outerWidth()\n    })\n\n    // Calculate the position to place the hidden toolbar w.r.t. its more button\n    const buttonMarginLeft = editor.helpers.getPX($($moreToolbarBtns[0]).css('margin-left'))\n    const buttonMarginRight = editor.helpers.getPX($($moreToolbarBtns[0]).css('margin-right'))\n\n    let offset\n    if (editor.opts.direction === 'rtl') {\n      offset = editor.$tb.outerWidth() - $moreButton.offset().left + editor.$tb.offset().left - (totalButtonWidth + $moreButton.outerWidth() + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight)) / 2\n    }\n    else {\n      offset = $moreButton.offset().left - editor.$tb.offset().left - (totalButtonWidth - $moreButton.outerWidth() + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight)) / 2\n    }\n    \n    // Handle right side going outside the editor\n    if (offset + totalButtonWidth + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight) > editor.$tb.outerWidth()) {\n      offset -= (totalButtonWidth + $moreToolbarBtns.length * (buttonMarginLeft + buttonMarginRight) - $moreButton.outerWidth()) / 2\n    }\n    \n    // Handle left side going outside the editor\n    if (offset < 0) {\n      offset = 0\n    }\n\n    return offset\n  }\n\n  return {\n    undo,\n    redo,\n    outdent,\n    indent,\n    moreText: more,\n    moreParagraph: more,\n    moreMisc: more,\n    moreRich: more\n  }\n}\n","import FE from '../../editor.js'\r\n\r\n// Extend defaults.\r\nObject.assign(FE.DEFAULTS, {\r\n  attribution: true,\r\n  toolbarBottom: false,\r\n  toolbarButtons: null,\r\n  toolbarButtonsXS: null,\r\n  toolbarButtonsSM: null,\r\n  toolbarButtonsMD: null,\r\n  toolbarContainer: null,\r\n  toolbarInline: false,\r\n  toolbarSticky: true,\r\n  toolbarStickyOffset: 0,\r\n  toolbarVisibleWithoutSelection: false\r\n})\r\n\r\n// Default toolbar buttons.\r\nFE.TOOLBAR_BUTTONS = {\r\n  'moreText': {\r\n    'buttons': ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'fontFamily', 'fontSize', 'textColor', 'backgroundColor', 'inlineClass', 'inlineStyle', 'clearFormatting']\r\n  },\r\n  'moreParagraph': {\r\n    'buttons': ['alignLeft', 'alignCenter', 'formatOLSimple', 'alignRight', 'alignJustify', 'formatOL', 'formatUL', 'paragraphFormat', 'paragraphStyle', 'lineHeight', 'outdent', 'indent', 'quote']\r\n  },\r\n  'moreRich': {\r\n    'buttons': ['insertLink', 'insertFiles', 'insertImage', 'insertVideo', 'insertTable', 'emoticons', 'fontAwesome', 'specialCharacters', 'embedly', 'insertFile', 'insertHR']\r\n  },\r\n  'moreMisc': {\r\n    'buttons': ['undo', 'redo', 'fullscreen', 'print', 'getPDF', 'spellChecker', 'selectAll', 'html', 'help'],\r\n    'align': 'right',\r\n    'buttonsVisible': 2\r\n  }\r\n}\r\n\r\nFE.TOOLBAR_BUTTONS_MD = null\r\n\r\nFE.TOOLBAR_BUTTONS_SM = {}\r\nFE.TOOLBAR_BUTTONS_SM.moreText = Object.assign({}, FE.TOOLBAR_BUTTONS.moreText, {'buttonsVisible': 2})\r\nFE.TOOLBAR_BUTTONS_SM.moreParagraph = Object.assign({}, FE.TOOLBAR_BUTTONS.moreParagraph, {'buttonsVisible': 2})\r\nFE.TOOLBAR_BUTTONS_SM.moreRich = Object.assign({}, FE.TOOLBAR_BUTTONS.moreRich, {'buttonsVisible': 2})\r\nFE.TOOLBAR_BUTTONS_SM.moreMisc = Object.assign({}, FE.TOOLBAR_BUTTONS.moreMisc, {'buttonsVisible': 2})\r\n\r\nFE.TOOLBAR_BUTTONS_XS = {}\r\nFE.TOOLBAR_BUTTONS_XS.moreText = Object.assign({}, FE.TOOLBAR_BUTTONS.moreText, {'buttonsVisible': 0})\r\nFE.TOOLBAR_BUTTONS_XS.moreParagraph = Object.assign({}, FE.TOOLBAR_BUTTONS.moreParagraph, {'buttonsVisible': 0})\r\nFE.TOOLBAR_BUTTONS_XS.moreRich = Object.assign({}, FE.TOOLBAR_BUTTONS.moreRich, {'buttonsVisible': 0})\r\nFE.TOOLBAR_BUTTONS_XS.moreMisc = Object.assign({}, FE.TOOLBAR_BUTTONS.moreMisc, {'buttonsVisible': 2})\r\n\r\nFE.POWERED_BY = '<a id=\"logo\" href=\"https://froala.com/wysiwyg-editor\" target=\"_blank\" title=\"Froala WYSIWYG HTML Editor\"><span>Powered by</span><svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 822.8 355.33\"><defs><style>.fr-logo{fill:#b1b2b7;}</style></defs><title>Froala</title><path class=\"fr-logo\" d=\"M123.58,78.65A16.16,16.16,0,0,0,111.13,73H16.6C7.6,73,0,80.78,0,89.94V128.3a16.45,16.45,0,0,0,32.9,0V104.14h78.5A15.63,15.63,0,0,0,126.87,91.2,15.14,15.14,0,0,0,123.58,78.65Z\"/><path class=\"fr-logo\" d=\"M103.54,170a16.05,16.05,0,0,0-11.44-4.85H15.79A15.81,15.81,0,0,0,0,180.93v88.69a16.88,16.88,0,0,0,5,11.92,16,16,0,0,0,11.35,4.7h.17a16.45,16.45,0,0,0,16.41-16.6v-73.4H92.2A15.61,15.61,0,0,0,107.89,181,15.1,15.1,0,0,0,103.54,170Z\"/><path class=\"fr-logo\" d=\"M233,144.17c-5.29-6.22-16-7.52-24.14-7.52-16.68,0-28.72,7.71-36.5,23.47v-5.67a16.15,16.15,0,1,0-32.3,0v115.5a16.15,16.15,0,1,0,32.3,0v-38.7c0-19.09,3.5-63.5,35.9-63.5a44.73,44.73,0,0,1,5.95.27h.12c12.79,1.2,20.06-2.73,21.6-11.69C236.76,151.48,235.78,147.39,233,144.17Z\"/><path class=\"fr-logo\" d=\"M371.83,157c-13.93-13.11-32.9-20.33-53.43-20.33S279,143.86,265.12,157c-14.67,13.88-22.42,32.82-22.42,54.77,0,21.68,8,41.28,22.4,55.2,13.92,13.41,32.85,20.8,53.3,20.8s39.44-7.38,53.44-20.79c14.55-13.94,22.56-33.54,22.56-55.21S386.39,170.67,371.83,157Zm-9.73,54.77c0,25.84-18.38,44.6-43.7,44.6s-43.7-18.76-43.7-44.6c0-25.15,18.38-43.4,43.7-43.4S362.1,186.59,362.1,211.74Z\"/><path class=\"fr-logo\" d=\"M552.7,138.14a16.17,16.17,0,0,0-16,16.3v1C526.41,143.85,509,136.64,490,136.64c-19.83,0-38.19,7.24-51.69,20.4C424,171,416.4,190,416.4,212c0,21.61,7.78,41.16,21.9,55,13.56,13.33,31.92,20.67,51.7,20.67,18.83,0,36.29-7.41,46.7-19.37v1.57a16.15,16.15,0,1,0,32.3,0V154.44A16.32,16.32,0,0,0,552.7,138.14Zm-16.3,73.6c0,30.44-22.81,44.3-44,44.3-24.57,0-43.1-19-43.1-44.3s18.13-43.4,43.1-43.4C513.73,168.34,536.4,183.55,536.4,211.74Z\"/><path class=\"fr-logo\" d=\"M623.5,61.94a16.17,16.17,0,0,0-16,16.3v191.7a16.15,16.15,0,1,0,32.3,0V78.24A16.32,16.32,0,0,0,623.5,61.94Z\"/><path class=\"fr-logo\" d=\"M806.5,138.14a16.17,16.17,0,0,0-16,16.3v1c-10.29-11.63-27.74-18.84-46.7-18.84-19.83,0-38.19,7.24-51.69,20.4-14.33,14-21.91,33-21.91,55,0,21.61,7.78,41.16,21.9,55,13.56,13.33,31.92,20.67,51.7,20.67,18.83,0,36.29-7.41,46.7-19.37v1.57a16.15,16.15,0,1,0,32.3,0V154.44A16.32,16.32,0,0,0,806.5,138.14Zm-16.3,73.6c0,30.44-22.81,44.3-44,44.3-24.57,0-43.1-19-43.1-44.3s18.13-43.4,43.1-43.4C767.53,168.34,790.2,183.55,790.2,211.74Z\"/></svg></a>'\r\n\r\nFE.MODULES.toolbar = function (editor) {\r\n\r\n  const $ = editor.$\r\n\r\n  // Create a button map for each screen size.\r\n  const _buttons_map = []\r\n  _buttons_map[FE.XS] = _normalizeButtons(editor.opts.toolbarButtonsXS || editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS_XS || FE.TOOLBAR_BUTTONS || [])\r\n  _buttons_map[FE.SM] = _normalizeButtons(editor.opts.toolbarButtonsSM || editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS_SM || FE.TOOLBAR_BUTTONS || [])\r\n  _buttons_map[FE.MD] = _normalizeButtons(editor.opts.toolbarButtonsMD || editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS_MD || FE.TOOLBAR_BUTTONS || [])\r\n  _buttons_map[FE.LG] = _normalizeButtons(editor.opts.toolbarButtons || FE.TOOLBAR_BUTTONS || [])\r\n\r\n  // Store previous screen size for resizing optimization\r\n  let previousScreenSize\r\n\r\n  /**\r\n   * Normalize buttons for regular structure.\r\n   */\r\n  function _normalizeButtons (buttons) {\r\n    // All this method should do is to change the structure of the _buttons_map to be inline with the specs for buttons in V3.\r\n    // Buttons is an array\r\n    let buttonGroups = {}\r\n    if (Array.isArray(buttons)) {\r\n\r\n      // Convert from old button list to new button list\r\n      if (!Array.isArray(buttons[0])) {\r\n\r\n        let toolbarButtonGroups = []\r\n        let currentButtonGroup = []\r\n        for (let i = 0; i < buttons.length; i++) {\r\n          // If the value is of type separator then add the currentButtonGroup to the toolbarButtonGroups\r\n          // Re-initialize the currentButtonGroup for new group\r\n          if (buttons[i] === '|' || buttons[i] === '-') {\r\n            if (currentButtonGroup.length > 0) {\r\n              toolbarButtonGroups.push(currentButtonGroup)\r\n            }\r\n            currentButtonGroup = []\r\n          }\r\n          // Otherwise add the button to the currentButtonGroup\r\n          else {\r\n            currentButtonGroup.push(buttons[i])\r\n          }\r\n        }\r\n\r\n        // If there are buttons in the currentButtonGroup then add the group to the toolbar button groups\r\n        if (currentButtonGroup.length > 0) {\r\n          toolbarButtonGroups.push(currentButtonGroup)\r\n        }\r\n\r\n        buttons = toolbarButtonGroups\r\n      }\r\n\r\n      // Create a button group object from button group array\r\n      buttons.forEach((button, index) => {\r\n        buttonGroups[`group${index + 1}`] = { buttons: button }\r\n      })\r\n\r\n      // Don't show more buttons when input buttons is a list\r\n      buttonGroups.showMoreButtons = false\r\n\r\n    }\r\n    // Button is an Object with group name and buttons info\r\n    else if (typeof buttons === 'object' && !Array.isArray(buttons)) {\r\n      buttonGroups = buttons\r\n\r\n      // Show more buttons when input is more button groups\r\n      buttonGroups.showMoreButtons = true\r\n    }\r\n\r\n    return buttonGroups\r\n  }\r\n\r\n  /**\r\n   * Add buttons to the toolbar.\r\n   */\r\n  function _addButtons() {\r\n    const buttons_list = editor.button.buildGroup(_screenButtons())\r\n    editor.$tb.append(buttons_list)\r\n\r\n    // Set the height of all more toolbars\r\n    setMoreToolbarsHeight()\r\n\r\n    editor.button.bindCommands(editor.$tb)\r\n  }\r\n\r\n  /**\r\n   * The buttons that should be visible on the current screen size.\r\n   */\r\n  function _screenButtons() {\r\n    const screen_size = editor.helpers.screenSize()\r\n\r\n    // Update previous screen size\r\n    previousScreenSize = screen_size\r\n\r\n    return _buttons_map[screen_size]\r\n  }\r\n\r\n  /**\r\n   * Remove button group wrappers\r\n   */\r\n  function _removeButtonGroupWrappers() {\r\n    // Remove all wrapper button groups\r\n    let $buttonGroups = editor.$tb.find('.fr-btn-grp, .fr-more-toolbar')\r\n    for (let index = 0; index < $buttonGroups.length; index++) {\r\n      // Remove parent wrapper\r\n      const $buttonGroup = $($buttonGroups[index])\r\n      $buttonGroup.children().each((index, $btn) => {\r\n        $buttonGroup.before($btn)\r\n      })\r\n      $buttonGroup.remove()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the more toolbar height\r\n   */\r\n  function setMoreToolbarsHeight() {\r\n    const $moreToolbars = editor.$tb.find('.fr-more-toolbar')\r\n    let toolbarPaddingBottom = ''\r\n    for (let i = 0; i < $moreToolbars.length; i++) {\r\n      const $moreToolbar = $($moreToolbars[i])\r\n\r\n      // Do only if more toolbar is expanded\r\n      if ($moreToolbar.hasClass('fr-expanded')) {\r\n\r\n        // More toolbar left padding\r\n        let moreToolbarWidth = editor.helpers.getPX($moreToolbar.css('padding-left'))\r\n\r\n        // Get all more toolbar buttons\r\n        const $moreToolbarBtns = $moreToolbar.find('> .fr-command, > .fr-btn-wrap')\r\n        const $moreToolbarBtn = $($moreToolbarBtns[0])\r\n\r\n        // Compute button margins if any\r\n        const buttonMarginLeft = editor.helpers.getPX($moreToolbarBtn.css('margin-left'))\r\n        const buttonMarginRight = editor.helpers.getPX($moreToolbarBtn.css('margin-right'))\r\n        const buttonMarginTop = editor.helpers.getPX($moreToolbarBtn.css('margin-top'))\r\n        const buttonMarginBottom = editor.helpers.getPX($moreToolbarBtn.css('margin-bottom'))\r\n\r\n        // Compute more toolbar content width\r\n        $moreToolbarBtns.each((index, btn) => {\r\n          moreToolbarWidth += ($(btn).outerWidth() + buttonMarginLeft + buttonMarginRight)\r\n        })\r\n\r\n        // Compute complete toolbar width\r\n        const toolbarWidth = editor.$tb.outerWidth()\r\n\r\n        // If all the more toolbar buttons can't be accomodated in one row\r\n        if (moreToolbarWidth > toolbarWidth) {\r\n\r\n          // Compute no of rows required to accomodate all more toolbar buttons\r\n          let moreToolbarRows = Math.floor(moreToolbarWidth / editor.$tb.outerWidth())\r\n          moreToolbarWidth += (moreToolbarRows * (moreToolbarWidth / $moreToolbar[0].childElementCount))\r\n          moreToolbarRows = Math.ceil(moreToolbarWidth / editor.$tb.outerWidth())\r\n\r\n          // Set more toolbar height\r\n          const moreToolbarHeight = (editor.helpers.getPX($moreToolbarBtn.css('height')) + buttonMarginTop + buttonMarginBottom) * moreToolbarRows\r\n          $moreToolbar.css('height', moreToolbarHeight)\r\n          toolbarPaddingBottom = moreToolbarHeight\r\n        }\r\n      }\r\n      // Otherwise reset the properties\r\n      else {\r\n        $moreToolbar.css('height', '')\r\n      }\r\n    }\r\n    // Shift the editor area by the new toolbar height\r\n    editor.$tb.css('padding-bottom', toolbarPaddingBottom)\r\n  }\r\n\r\n  /**\r\n   * Reorder the toolbar buttons on resize\r\n   */\r\n  function _showScreenButtons() {\r\n\r\n    // Update the toolbar only if screen size is changed\r\n    if (previousScreenSize !== editor.helpers.screenSize()) {\r\n\r\n      // Get screen button groups\r\n      let buttonGroups = _screenButtons()\r\n\r\n      // Toolbar groups\r\n      let mainToolbarButtonGroups = $()\r\n      let moreToolbarButtonGroups = $()\r\n\r\n      // Hide all buttons\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command, .fr-btn-grp > .fr-btn-wrap > .fr-command, .fr-more-toolbar > .fr-btn-wrap > .fr-command').addClass('fr-hidden')\r\n\r\n      // Remove wrapper div from button groups\r\n      _removeButtonGroupWrappers()\r\n\r\n      for (const groupName in buttonGroups) {\r\n\r\n        // Current button group\r\n        let buttonGroup = buttonGroups[groupName]\r\n\r\n        // Ignore non-button groups\r\n        if (!buttonGroup.buttons) {\r\n          continue\r\n        }\r\n\r\n        // Current button group Details\r\n        let moreToolbarButtons\r\n        let buttonCount = 0\r\n        let visibleButtons = 3\r\n        const mainToolbarButtons = $(`<div class=\"fr-btn-grp fr-float-${buttonGroups[groupName].align ? buttonGroups[groupName].align : 'left'}\"></div>`)\r\n        if (buttonGroups.showMoreButtons) {\r\n          moreToolbarButtons = $('<div class=\"fr-more-toolbar\"></div>').data('name', `${groupName}-${editor.id}`)\r\n        }\r\n\r\n        for (let i = 0; i < buttonGroup.buttons.length; i++) {\r\n\r\n          // If buttonVisible is provided then use it\r\n          if (buttonGroup.buttonsVisible !== undefined) {\r\n            visibleButtons = buttonGroup.buttonsVisible\r\n          }\r\n\r\n          // Get the button for the command\r\n          let $btn = editor.$tb.find('> .fr-command[data-cmd=\"' + buttonGroup.buttons[i] + '\"], > div.fr-btn-wrap > .fr-command[data-cmd=\"' + buttonGroup.buttons[i] + '\"]')\r\n          let $dropdown = null\r\n\r\n          // If it is a dropdown button\r\n          if (editor.node.hasClass($btn.next().get(0), 'fr-dropdown-menu')) {\r\n            $dropdown = $btn.next()\r\n          }\r\n\r\n          // If it is a button with options\r\n          if (editor.node.hasClass($btn.next().get(0), 'fr-options')) {\r\n            $btn.removeClass('fr-hidden')\r\n            $btn.next().removeClass('fr-hidden')\r\n            $btn = $btn.parent()\r\n          }\r\n\r\n          // Show the buttons in the toolbar\r\n          $btn.removeClass('fr-hidden')\r\n\r\n          // Wrap the buttons in a button group\r\n          if (buttonGroups.showMoreButtons && buttonCount >= visibleButtons) {\r\n            moreToolbarButtons.append($btn)\r\n            if ($dropdown) {\r\n              moreToolbarButtons.append($dropdown)\r\n            }\r\n          }\r\n          else {\r\n            mainToolbarButtons.append($btn)\r\n            if ($dropdown) {\r\n              mainToolbarButtons.append($dropdown)\r\n            }\r\n          }\r\n\r\n          buttonCount++\r\n        }\r\n\r\n        // Add more button if buttons in group are more than 'buttonsVisible'\r\n        if (buttonGroups.showMoreButtons && buttonCount > visibleButtons) {\r\n          let $moreButton = editor.$tb.find(`.fr-command[data-cmd=\"${groupName}\"]`)\r\n          if ($moreButton.length > 0) {\r\n            $moreButton.removeClass('fr-hidden fr-open')\r\n          }\r\n          else {\r\n            // Create a new more button if not present already\r\n            const cmdName = groupName\r\n            const cmdInfo = FE.COMMANDS[cmdName]\r\n            cmdInfo.more_btn = true\r\n            $moreButton = $(editor.button.build(cmdName, cmdInfo, true))\r\n\r\n            // Register the more button\r\n            editor.button.addButtons($moreButton)\r\n          }\r\n          mainToolbarButtons.append($moreButton)\r\n        }\r\n\r\n        // Append visible buttons on the main toolbar\r\n        mainToolbarButtonGroups.push(mainToolbarButtons)\r\n\r\n        // Append more toolbar buttons\r\n        if (buttonGroups.showMoreButtons) {\r\n          moreToolbarButtonGroups.push(moreToolbarButtons)\r\n        }\r\n      }\r\n\r\n      // Append button groups to the editor\r\n      if (editor.opts.toolbarBottom) {\r\n        editor.$tb.append(moreToolbarButtonGroups)\r\n        editor.$tb.find('.fr-newline').remove()\r\n        editor.$tb.append('<div class=\"fr-newline\"></div>')\r\n        editor.$tb.append(mainToolbarButtonGroups)\r\n      }\r\n      else {\r\n        editor.$tb.append(mainToolbarButtonGroups)\r\n        editor.$tb.find('.fr-newline').remove()\r\n        editor.$tb.append('<div class=\"fr-newline\"></div>')\r\n        editor.$tb.append(moreToolbarButtonGroups)\r\n      }\r\n\r\n      // Close the more toolbar\r\n      editor.$tb.removeClass('fr-toolbar-open')\r\n      editor.$box.removeClass('fr-toolbar-open')\r\n\r\n      // Switch to normal view if in code view\r\n      editor.events.trigger('codeView.toggle')\r\n    }\r\n\r\n    // Refresh more toolbar height on resize\r\n    setMoreToolbarsHeight()\r\n  }\r\n\r\n  /**\r\n   * Set the buttons visibility based on screen size.\r\n   */\r\n  function _setVisibility() {\r\n    editor.events.$on($(editor.o_win), 'resize', _showScreenButtons)\r\n    editor.events.$on($(editor.o_win), 'orientationchange', _showScreenButtons)\r\n  }\r\n\r\n  function showInline(e, force) {\r\n    setTimeout(() => {\r\n\r\n      // https://github.com/froala-labs/froala-editor-js-2/issues/1571\r\n      // Condition added to avoid showing toolbar when the table has contenteditable:false\r\n      if ((!e || e.which != FE.KEYCODE.ESC) && editor.selection.inEditor() && editor.core.hasFocus() && !editor.popups.areVisible() && $(editor.selection.blocks()[0]).closest('table').attr('contenteditable') != 'false') {\r\n        if (editor.opts.toolbarVisibleWithoutSelection || !editor.selection.isCollapsed() && !editor.keys.isIME() || force) {\r\n          editor.$tb.data('instance', editor)\r\n\r\n          // Check if we should actually show the toolbar.\r\n          if (editor.events.trigger('toolbar.show', [e]) === false) {\r\n            return\r\n          }\r\n\r\n          editor.$tb.show()\r\n\r\n          if (!editor.opts.toolbarContainer) {\r\n            editor.position.forSelection(editor.$tb)\r\n          }\r\n\r\n          if (editor.opts.zIndex > 1) {\r\n            editor.$tb.css('z-index', editor.opts.zIndex + 1)\r\n          }\r\n          else {\r\n            editor.$tb.css('z-index', null)\r\n          }\r\n        }\r\n      }\r\n    }, 0)\r\n  }\r\n\r\n  function hide(e) {\r\n\r\n    // Prevent hiding the editor toolbar when changing the window.\r\n    if (e && e.type === 'blur' && document.activeElement === editor.el) {\r\n      return false\r\n    }\r\n\r\n    // Do not hide toolbar if we press CTRL.\r\n    if (e && e.type === 'keydown' && editor.keys.ctrlKey(e)) {\r\n      return true\r\n    }\r\n\r\n    // Prevent hiding when dropdown is active and we scoll in it.\r\n    // https://github.com/froala/wysiwyg-editor/issues/1290\r\n    const $active_dropdowns = editor.button.getButtons('.fr-dropdown.fr-active')\r\n\r\n    if ($active_dropdowns.next().find(editor.o_doc.activeElement).length) {\r\n      return true\r\n    }\r\n\r\n    // Check if we should actually hide the toolbar.\r\n    if (editor.events.trigger('toolbar.hide') !== false) {\r\n      editor.$tb.hide()\r\n    }\r\n  }\r\n\r\n  function show() {\r\n\r\n    // Check if we should actually hide the toolbar.\r\n    if (editor.events.trigger('toolbar.show') === false) {\r\n      return false\r\n    }\r\n\r\n    editor.$tb.show()\r\n  }\r\n\r\n  let tm = null\r\n\r\n  function _showInlineWithTimeout(e) {\r\n    clearTimeout(tm)\r\n\r\n    if (!e || e.which !== FE.KEYCODE.ESC) {\r\n      tm = setTimeout(showInline, editor.opts.typingTimer)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the events for show / hide toolbar.\r\n   */\r\n  function _initInlineBehavior() {\r\n\r\n    // Window mousedown.\r\n    editor.events.on('window.mousedown', hide)\r\n\r\n    // Element keydown.\r\n    editor.events.on('keydown', hide)\r\n\r\n    // Element blur.\r\n    editor.events.on('blur', hide)\r\n\r\n    // Position the toolbar after expanding the more toolbar completely if toolbar is inline\r\n    editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', function() {\r\n      editor.position.forSelection(editor.$tb)\r\n    })\r\n\r\n    // Window mousedown.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.events.on('window.mouseup', showInline)\r\n    }\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      if (!editor.helpers.isIOS()) {\r\n        editor.events.on('window.touchend', showInline)\r\n\r\n        if (editor.browser.mozilla) {\r\n          setInterval(showInline, 200)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      editor.events.on('window.keyup', _showInlineWithTimeout)\r\n    }\r\n\r\n    // Hide editor on ESC.\r\n    editor.events.on('keydown', (e) => {\r\n      if (e && e.which === FE.KEYCODE.ESC) {\r\n        hide()\r\n      }\r\n    })\r\n\r\n    // Enable accessibility shortcut.\r\n    editor.events.on('keydown', (e) => {\r\n      if (e.which === FE.KEYCODE.ALT) {\r\n        e.stopPropagation()\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    editor.events.$on(editor.$wp, 'scroll.toolbar', showInline)\r\n    editor.events.on('commands.after', showInline)\r\n\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$doc, 'selectionchange', _showInlineWithTimeout)\r\n      editor.events.$on(editor.$doc, 'orientationchange', showInline)\r\n    }\r\n  }\r\n\r\n\r\n  function _initPositioning() {\r\n\r\n    // Toolbar is inline.\r\n    if (editor.opts.toolbarInline) {\r\n\r\n      // Mobile should handle this as regular.\r\n      editor.$sc.append(editor.$tb)\r\n\r\n      // Add toolbar to body.\r\n      editor.$tb.data('container', editor.$sc)\r\n\r\n      // Add inline class.\r\n      editor.$tb.addClass('fr-inline')\r\n\r\n\r\n      // Init mouse behavior.\r\n      _initInlineBehavior()\r\n\r\n      editor.opts.toolbarBottom = false\r\n    }\r\n\r\n    // Toolbar is normal.\r\n    else {\r\n\r\n      // Won't work on iOS.\r\n      if (editor.opts.toolbarBottom && !editor.helpers.isIOS()) {\r\n        editor.$box.append(editor.$tb)\r\n        editor.$tb.addClass('fr-bottom')\r\n        editor.$box.addClass('fr-bottom')\r\n      }\r\n      else {\r\n        editor.opts.toolbarBottom = false\r\n        editor.$box.prepend(editor.$tb)\r\n        editor.$tb.addClass('fr-top')\r\n        editor.$box.addClass('fr-top')\r\n      }\r\n\r\n      editor.$tb.addClass('fr-basic')\r\n\r\n      if (editor.opts.toolbarSticky) {\r\n        if (editor.opts.toolbarStickyOffset) {\r\n          if (editor.opts.toolbarBottom) {\r\n            editor.$tb.css('bottom', editor.opts.toolbarStickyOffset)\r\n          }\r\n          else {\r\n            editor.$tb.css('top', editor.opts.toolbarStickyOffset)\r\n          }\r\n        }\r\n\r\n        editor.position.addSticky(editor.$tb)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy.\r\n   */\r\n  function _sharedDestroy() {\r\n    editor.$tb.html('').removeData().remove()\r\n    editor.$tb = null\r\n\r\n    if (editor.$second_tb) {\r\n      editor.$second_tb.html('').removeData().remove()\r\n      editor.$second_tb = null\r\n    }\r\n  }\r\n\r\n  function _destroy() {\r\n    editor.$box.removeClass('fr-top fr-bottom fr-inline fr-basic')\r\n    editor.$box.find('.fr-sticky-dummy').remove()\r\n  }\r\n\r\n  function _setDefaults() {\r\n    if (editor.opts.theme) {\r\n      editor.$tb.addClass(`${editor.opts.theme}-theme`)\r\n    }\r\n\r\n    if (editor.opts.zIndex > 1) {\r\n      editor.$tb.css('z-index', editor.opts.zIndex + 1)\r\n    }\r\n\r\n    // Set direction.\r\n    if (editor.opts.direction !== 'auto') {\r\n      editor.$tb.removeClass('fr-ltr fr-rtl').addClass(`fr-${editor.opts.direction}`)\r\n    }\r\n\r\n    // Mark toolbar for desktop / mobile.\r\n    if (!editor.helpers.isMobile()) {\r\n      editor.$tb.addClass('fr-desktop')\r\n    }\r\n    else {\r\n      editor.$tb.addClass('fr-mobile')\r\n    }\r\n\r\n    // Set the toolbar specific position inline / normal.\r\n    if (!editor.opts.toolbarContainer) {\r\n      _initPositioning()\r\n    }\r\n    else {\r\n      if (editor.opts.toolbarInline) {\r\n        _initInlineBehavior()\r\n        hide()\r\n      }\r\n\r\n      if (editor.opts.toolbarBottom) {\r\n        editor.$tb.addClass('fr-bottom')\r\n      }\r\n      else {\r\n        editor.$tb.addClass('fr-top')\r\n      }\r\n    }\r\n\r\n    // Add buttons to the toolbar.\r\n    // Set their visibility for different screens.\r\n    // Asses commands to the butttons.\r\n    _addButtons()\r\n    _setVisibility()\r\n\r\n    editor.accessibility.registerToolbar(editor.$tb)\r\n\r\n    // Make sure we don't trigger blur.\r\n    editor.events.$on(editor.$tb, `${editor._mousedown} ${editor._mouseup}`, (e) => {\r\n      const originalTarget = e.originalEvent ? e.originalEvent.target || e.originalEvent.originalTarget : null\r\n\r\n      if (originalTarget && originalTarget.tagName !== 'INPUT' && !editor.edit.isDisabled()) {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n\r\n        return false\r\n      }\r\n    }, true)\r\n\r\n    // https://github.com/froala-labs/froala-editor-js-2/issues/1972\r\n    if (editor.helpers.isMobile()) {\r\n      editor.events.$on(editor.$tb,'click',() =>{\r\n        editor.$el.focus();\r\n      })\r\n    }\r\n\r\n    // Refresh the screen size if in fullscreen mode after the more toolbar expands completely\r\n    editor.events.$on(editor.$tb, 'transitionend', '.fr-more-toolbar', () => {\r\n      if (editor.$box.hasClass('fr-fullscreen')) {\r\n        editor.opts.height = editor.o_win.innerHeight - (editor.opts.toolbarInline ? 0 : editor.$tb.outerHeight() + (editor.$second_tb ? editor.$second_tb.outerHeight() : 0))\r\n        editor.size.refresh()\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Initialize\r\n   */\r\n  function _init() {\r\n    editor.$sc = $(editor.opts.scrollableContainer).first()\r\n\r\n    if (!editor.$wp) {\r\n      return false\r\n    }\r\n\r\n    // Add second toolbar\r\n    if (!editor.opts.toolbarInline && !editor.opts.toolbarBottom) {\r\n      editor.$second_tb = $(editor.doc.createElement('div')).attr('class', 'second-toolbar')\r\n      editor.$box.append(editor.$second_tb)\r\n\r\n      // Add powered by attribution.\r\n      if (!(editor.ul === false && !editor.opts.attribution)) {\r\n        editor.$second_tb.prepend(FE.POWERED_BY)\r\n      }\r\n    }\r\n\r\n    // Container for toolbar.\r\n    if (editor.opts.toolbarContainer) {\r\n\r\n      // Shared toolbar.\r\n      if (!editor.shared.$tb) {\r\n        editor.shared.$tb = $(editor.doc.createElement('DIV'))\r\n        editor.shared.$tb.addClass('fr-toolbar')\r\n        editor.$tb = editor.shared.$tb\r\n        $(editor.opts.toolbarContainer).append(editor.$tb)\r\n        _setDefaults()\r\n        editor.$tb.data('instance', editor)\r\n      }\r\n      else {\r\n        editor.$tb = editor.shared.$tb\r\n\r\n        if (editor.opts.toolbarInline) {\r\n          _initInlineBehavior()\r\n        }\r\n      }\r\n\r\n      if (editor.opts.toolbarInline) {\r\n\r\n        // Update box.\r\n        editor.$box.addClass('fr-inline')\r\n      }\r\n      else {\r\n        editor.$box.addClass('fr-basic')\r\n      }\r\n\r\n      // On focus set the current instance.\r\n      editor.events.on('focus', () => {\r\n        editor.$tb.data('instance', editor)\r\n      }, true)\r\n\r\n      editor.opts.toolbarInline = false\r\n    }\r\n    else if (editor.opts.toolbarInline) {\r\n      // Update box.\r\n      editor.$box.addClass('fr-inline')\r\n\r\n      // Check for shared toolbar.\r\n      if (!editor.shared.$tb) {\r\n        editor.shared.$tb = $(editor.doc.createElement('DIV'))\r\n        editor.shared.$tb.addClass('fr-toolbar')\r\n        editor.$tb = editor.shared.$tb\r\n        _setDefaults()\r\n      }\r\n      else {\r\n        editor.$tb = editor.shared.$tb\r\n\r\n        // Init mouse behavior.\r\n        _initInlineBehavior()\r\n      }\r\n    }\r\n    else {\r\n      editor.$box.addClass('fr-basic')\r\n      editor.$tb = $(editor.doc.createElement('DIV'))\r\n      editor.$tb.addClass('fr-toolbar')\r\n      _setDefaults()\r\n\r\n      editor.$tb.data('instance', editor)\r\n    }\r\n\r\n    // Destroy.\r\n    editor.events.on('destroy', _destroy, true)\r\n    editor.events.on(!editor.opts.toolbarInline && !editor.opts.toolbarContainer ? 'destroy' : 'shared.destroy', _sharedDestroy, true)\r\n\r\n    // Bind edit on /off events.\r\n    editor.events.on('edit.on', function () {\r\n      editor.$tb.removeClass('fr-disabled').removeAttr('aria-disabled')\r\n    })\r\n\r\n    editor.events.on('edit.off', function () {\r\n      editor.$tb.addClass('fr-disabled').attr('aria-disabled', true)\r\n    })\r\n\r\n    _initShortcuts();\r\n  }\r\n\r\n  function _initShortcuts() {\r\n    editor.events.on('shortcut', function (e, cmd, val) {\r\n      // Search for button.\r\n      let $btn\r\n\r\n      if (cmd && !val) {\r\n        $btn = editor.$tb.find(`.fr-command[data-cmd=\"${cmd}\"]`)\r\n      }\r\n      else if (cmd && val) {\r\n        $btn = editor.$tb.find(`.fr-command[data-cmd=\"${cmd}\"][data-param1=\"${val}\"]`)\r\n      }\r\n\r\n      // Button found.\r\n      if ($btn.length) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        $btn.parents('.fr-toolbar').data('instance', editor)\r\n\r\n        if (e.type === 'keydown') {\r\n          editor.button.exec($btn)\r\n\r\n          return false\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  let disabled = false\r\n\r\n  function disable() {\r\n    if (!disabled && editor.$tb) {\r\n      // Toolbar Button is two level down from toolbar div\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').addClass('fr-disabled fr-no-refresh').attr('aria-disabled', true)\r\n      disabled = true\r\n    }\r\n  }\r\n\r\n  function enable() {\r\n    if (disabled && editor.$tb) {\r\n      // Toolbar Button is two level down from toolbar div\r\n      editor.$tb.find('.fr-btn-grp > .fr-command, .fr-more-toolbar > .fr-command').removeClass('fr-disabled fr-no-refresh').attr('aria-disabled', false)\r\n      disabled = false\r\n    }\r\n\r\n    editor.button.bulkRefresh()\r\n  }\r\n\r\n  return {\r\n    _init,\r\n    hide,\r\n    show,\r\n    showInline,\r\n    disable,\r\n    enable,\r\n    setMoreToolbarsHeight\r\n  }\r\n}\r\n","\r\nconst passiveEvents = ['scroll', 'wheel', 'touchmove', 'touchstart', 'touchend']\r\n\r\n// All possible prefixes of an event\r\nconst eventPrefixes = [ 'webkit', 'moz', 'ms', 'o' ]\r\n\r\n// Events which are browser dependent\r\nconst irregularEvents = [ 'transitionend' ]\r\n\r\n// List of all styles\r\nconst stylesList = document.createElement('div').style\r\n\r\n// All possible prefixes of a css property\r\nconst cssPrefixes = [ 'Webkit', 'Moz', 'ms', 'O', 'css', 'style' ]\r\n\r\n// Properties to be applied to get correct element styles\r\nconst cssShow = { visibility: 'hidden', display: 'block' }\r\n\r\n// Special Events\r\nconst specialEvents = ['focus', 'blur', 'click']\r\n\r\n// Map to cache computed correct style names\r\nconst correctStyleName = {}\r\n\r\nvar _getEvent = function (e, target) {\r\n  return {\r\n    altKey: e.altKey,\r\n    bubbles: e.bubbles,\r\n    cancelable: e.cancelable,\r\n    changedTouches: e.changedTouches,\r\n    ctrlKey: e.ctrlKey,\r\n    detail: e.detail,\r\n    eventPhase: e.eventPhase,\r\n    metaKey: e.metaKey,\r\n    pageX: e.pageX,\r\n    pageY: e.pageY,\r\n    shiftKey: e.shiftKey,\r\n    view: e.view,\r\n    'char': e.char,\r\n    key: e.key,\r\n    keyCode: e.keyCode,\r\n    button: e.button,\r\n    buttons: e.buttons,\r\n    clientX: e.clientX,\r\n    clientY: e.clientY,\r\n    offsetX: e.offsetX,\r\n    offsetY: e.offsetY,\r\n    pointerId: e.pointerId,\r\n    pointerType: e.pointerType,\r\n    screenX: e.screenX,\r\n    screenY: e.screenY,\r\n    targetTouches: e.targetTouches,\r\n    toElement: e.toElement,\r\n    touches: e.touches,\r\n    type: e.type,\r\n    which: e.which,\r\n    target: e.target,\r\n    currentTarget: target,\r\n    originalEvent: e,\r\n    stopPropagation: function () { e.stopPropagation(); },\r\n    stopImmediatePropagation: function () { e.stopImmediatePropagation(); },\r\n    preventDefault: function () {\r\n      if (passiveEvents.indexOf(e.type) === -1) { \r\n        e.preventDefault(); \r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar isPartOfDOM = function isPartOfDOM (target) {\r\n  return ((target.ownerDocument && target.ownerDocument.body.contains(target)) || target.nodeName === '#document' || target.nodeName === 'HTML' || target === window)\r\n}\r\n\r\nvar _getDelegator = function (fn, selector) {\r\n  return function (e) {\r\n    // Get the element the event was raised by.\r\n    let target = e.target;\r\n\r\n    // Loop parents.\r\n    if (selector) {\r\n      selector = _normalizeSelector(selector);\r\n\r\n      while (target && target !== this) {\r\n\r\n        // Check if the current target matches\r\n        if (target.matches && target.matches(_normalizeSelector(selector))) {\r\n\r\n          fn.call(target, _getEvent(e, target));\r\n        }\r\n\r\n        target = target.parentNode;\r\n      }\r\n    }\r\n    else {\r\n      if(isPartOfDOM(target)) {\r\n        fn.call(target, _getEvent(e, target));\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar jQuery = function (selector, context) {\r\n  return new init(selector, context);\r\n}\r\n\r\nvar _normalizeSelector = function(selector) {\r\n  if (selector && typeof selector == 'string') {\r\n    // Modified the regex to handle the spaces before '>'\r\n    return selector.replace(/^\\s*>/g, ':scope >').replace(/,\\s*>/g, ', :scope >');\r\n  }\r\n  return selector;\r\n};\r\n\r\nvar isFunction = function isFunction(obj) {\r\n\r\n  // Support: Chrome <=57, Firefox <=52\r\n  // In some browsers, typeof returns \"function\" for HTML <object> elements\r\n  // (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\r\n  // We don't want to classify *any* DOM node as a function.\r\n  return typeof obj === 'function' && typeof obj.nodeType !== 'number';\r\n};\r\n\r\nvar $ = jQuery;\r\n\r\njQuery.fn = jQuery.prototype = {\r\n  constructor: jQuery,\r\n\r\n  // The default length of a jQuery object is 0\r\n  length: 0,\r\n\r\n  contains: function (obj) {\r\n    if (!obj) return false;\r\n\r\n    if (Array.isArray(obj)) {\r\n      for (let i = 0; i < obj.length; i++) {\r\n        if (this.contains(obj[i]) && this != obj[i]) return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      let node = obj;\r\n\r\n      while (node) {\r\n        if (node == this[i] || (node[0] && node[0].isEqualNode(this[i]))) {\r\n          return true\r\n        }\r\n\r\n        node = node.parentNode\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  findVisible: function (selector) {\r\n    const $els = this.find(selector);\r\n\r\n    for (let i = $els.length - 1; i >= 0; i--) {\r\n      if (!$($els[i]).isVisible()) {\r\n        $els.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    return $els;\r\n  },\r\n\r\n  // Encode URL parameters\r\n  formatParams: function ( params ){\r\n    var formattedParams = `${Object\r\n      .keys(params)\r\n      .map(function(key){\r\n        return `${key}=${encodeURIComponent(params[key])}`\r\n      })\r\n      .join('&')}`\r\n\r\n    return formattedParams ? formattedParams : '';\r\n  },\r\n\r\n  // Takes a request object for making http requests using XMLHttpRequest\r\n  ajax: function (request) {\r\n\r\n    const xhr = new XMLHttpRequest()\r\n    const data = this.formatParams(request.data)\r\n\r\n    // Add request params to the URL for GET request \r\n    if(request.method.toUpperCase() === 'GET'){\r\n      request.url = data ? request.url + '?' + data : request.url\r\n    }\r\n\r\n    // Make it async.\r\n    xhr.open(request.method, request.url, true)\r\n\r\n    // Set with credentials.\r\n    if (request.withCredentials) {\r\n      xhr.withCredentials = true\r\n    }\r\n\r\n    // Set with CORS\r\n    if (request.crossDomain) {\r\n      xhr.setRequestHeader('Access-Control-Allow-Origin', '*')\r\n    }\r\n\r\n    // Set headers.\r\n    for (const header in request.headers) {\r\n      if (Object.prototype.hasOwnProperty.call(request.headers, header)) {\r\n        xhr.setRequestHeader(header, request.headers[header])\r\n      }\r\n    }\r\n\r\n    if(!Object.prototype.hasOwnProperty.call(request.headers, 'Content-Type')) {\r\n      // Set json data type\r\n      if (request.dataType === 'json') {\r\n        xhr.setRequestHeader('Content-Type', 'application/json')\r\n      } else {\r\n        //Set deafult Content-Type\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8')\r\n      }\r\n    }\r\n\r\n    // Set events.\r\n    xhr.onload = function () {\r\n      if (xhr.status == 200) {\r\n        let data = xhr.responseText\r\n        if (request.dataType === 'json') {\r\n          data = JSON.parse(data)\r\n        }\r\n        request.done(data, xhr.status, xhr)  \r\n      } else {\r\n        request.fail(xhr)\r\n      }\r\n    }\r\n\r\n    // Send data.\r\n    xhr.send(data)\r\n  },\r\n\r\n  // Get all previous siblings of an element\r\n  prevAll: function() {\r\n    const res = $()\r\n    if (!this[0]) {\r\n      return res\r\n    }\r\n\r\n    let elem = this[0]\r\n    while (elem && elem.previousSibling) {\r\n      elem = elem.previousSibling\r\n      res.push(elem)\r\n    }\r\n    return res\r\n  },\r\n\r\n  // Determine the position of an element within the set\r\n  index: function( elem ) {\r\n\r\n    // No argument, return index in parent\r\n    if ( !elem ) {\r\n      return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\r\n    }\r\n\r\n    // Index in selector\r\n    if ( typeof elem === 'string' ) {\r\n      return [].indexOf.call( $( elem ), this[ 0 ] );\r\n    }\r\n\r\n    // Locate the position of the desired element\r\n    return [].indexOf.call( this,\r\n\r\n      // If it receives a jQuery object, the first element is used\r\n      elem.length ? elem[ 0 ] : elem\r\n    );\r\n  },\r\n\r\n  isVisible: function () {\r\n    if(!this[0]){\r\n      return false\r\n    }\r\n    return !!(this[0].offsetWidth || this[0].offsetHeight || this[0].getClientRects().length)\r\n  },\r\n\r\n  toArray: function () {\r\n    return [].slice.call(this);\r\n  },\r\n\r\n  // Get the Nth element in the matched element set OR\r\n  // Get the whole matched element set as a clean array\r\n  get: function (num) {\r\n\r\n    // Return all the elements in a clean array\r\n    if (num == null) {\r\n      return [].slice.call(this);\r\n    }\r\n\r\n    // Return just the one element from the set\r\n    return num < 0 ? this[num + this.length] : this[num];\r\n  },\r\n\r\n  // Take an array of elements and push it onto the stack\r\n  // (returning the new matched element set)\r\n  pushStack: function (elems) {\r\n\r\n    // Build a new jQuery matched element set\r\n    const ret = jQuery.merge(this.constructor(), elems);\r\n\r\n    // Add the old object onto the stack (as a reference)\r\n    ret.prevObject = this;\r\n\r\n    // Return the newly-formed element set\r\n    return ret;\r\n  },\r\n\r\n  wrapAll: function (html) {\r\n    let wrap;\r\n\r\n    if (this[0]) {\r\n      if (isFunction(html)) {\r\n        html = html.call(this[0]);\r\n      }\r\n\r\n      // The elements to wrap the target around\r\n      wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);\r\n\r\n      if (this[0].parentNode) {\r\n        wrap.insertBefore(this[0]);\r\n      }\r\n\r\n      wrap.map(function () {\r\n        let elem = this;\r\n\r\n        while (elem.firstElementChild) {\r\n          elem = elem.firstElementChild;\r\n        }\r\n\r\n        return elem;\r\n      }).append(this);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  wrapInner: function(wrapper) {\r\n    if (typeof wrapper === 'string') {\r\n      const wrapperProps = wrapper.split(' ')\r\n      let i = 0\r\n\r\n      // Remove all empty props\r\n      while (i < wrapperProps.length && wrapperProps[i].trim().length === 0) i++\r\n\r\n      // First non-empty property is the element itself\r\n      if (i < wrapperProps.length) {\r\n\r\n        // https://github.com/froala-labs/froala-editor-js-2/issues/1928\r\n        if ($(wrapper).length && wrapperProps[i].trim() === $(wrapper)[0].tagName) {\r\n          wrapper = document.createElement(wrapperProps[i].trim())\r\n        }\r\n\r\n        i++\r\n      }\r\n\r\n      // Make sure it is re-initialized\r\n      if (typeof wrapper !== 'string') {\r\n        \r\n        // Add all wrapper attributes\r\n        const $wrapper = $(wrapper)\r\n        for (; i < wrapperProps.length; i++) {\r\n          wrapperProps[i] = wrapperProps[i].trim()\r\n          const attr = wrapperProps[i].split('=')\r\n          $wrapper.attr(attr[0], attr[1].replace('\"', ''))\r\n        }\r\n      }\r\n    }\r\n\r\n    while(!this[0].firstChild && this[0].firstChild !== wrapper) {\r\n      wrapper.appendChild(this[0].firstChild)\r\n    }\r\n  },\r\n\r\n  wrap: function (html) {\r\n    const htmlIsFunction = isFunction(html);\r\n\r\n    return this.each(function (i) {\r\n      $(this).wrapAll(htmlIsFunction ? html.call(this, i) : html);\r\n    });\r\n  },\r\n\r\n  unwrap: function() {\r\n\r\n    return this.parent().each( function() {\r\n      if ( !(this.nodeName && this.nodeName.toLowerCase() === name.toLowerCase())) {\r\n        jQuery( this ).replaceWith( this.childNodes );\r\n      }\r\n    } );\r\n\r\n  },\r\n\r\n  grep: function (elems, callback, invert) {\r\n    let callbackInverse,\r\n      matches = [],\r\n      i = 0,\r\n      length = elems.length,\r\n      callbackExpect = !invert;\r\n\r\n    // Go through the array, only saving the items\r\n    // that pass the validator function\r\n    for (; i < length; i++) {\r\n      callbackInverse = !callback(elems[i], i);\r\n      if (callbackInverse !== callbackExpect) {\r\n        matches.push(elems[i]);\r\n      }\r\n    }\r\n\r\n    return matches;\r\n  },\r\n\r\n  map: function (callback) {\r\n    return this.pushStack(jQuery.map(this, function (elem, i) {\r\n      return callback.call(elem, i, elem);\r\n    }));\r\n  },\r\n\r\n  slice: function () {\r\n    return this.pushStack([].slice.apply(this, arguments));\r\n  },\r\n\r\n  each: function (fn) {\r\n    if (this.length) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (fn.call(this[i], i, this[i]) === false) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  first: function () {\r\n    return this.eq(0);\r\n  },\r\n\r\n  last: function () {\r\n    return this.eq(-1);\r\n  },\r\n\r\n  eq: function (i) {\r\n    const len = this.length,\r\n      j = +i + (i < 0 ? len : 0);\r\n    return this.pushStack(j >= 0 && j < len ? [this[j]] : []);\r\n  },\r\n\r\n  empty: function () {\r\n    for (let i = 0; i < this.length; i++) {\r\n      this[i].innerHTML = ''\r\n    }\r\n  },\r\n\r\n  \r\n\r\n  contents: function () {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const cldrn = this[i].childNodes;\r\n      for (let j = 0; j < cldrn.length; j++) {\r\n        ret.push(cldrn[j]);\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  attr: function (name, val) {\r\n    if (typeof name === 'object') {\r\n      for (let k in name) {\r\n        if (Object.prototype.hasOwnProperty.call(name, k)) {\r\n          if(name[k] !== null) {\r\n            this.attr(k, name[k])\r\n          }\r\n        } \r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    if (typeof val !== 'undefined') {\r\n\r\n      if(name === 'checked') {\r\n        for(let i = 0; i < this.length; i++) { \r\n          this[i].checked = val\r\n        }\r\n      }\r\n      else if (name === 'tagName') {\r\n        for(let i = 0; i < this.length; i++) { \r\n          this[i].tagName = val\r\n        }\r\n      }\r\n      else {\r\n        for (let i = 0; i < this.length; i++) {\r\n          this[i].setAttribute(name, val);\r\n        }\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n    else {\r\n      if (this.length === 0 || !(this[0].getAttribute || name === 'checked')) {\r\n        return undefined;\r\n      }\r\n\r\n      if(name === 'checked') {\r\n        return this[0].checked\r\n      }\r\n      else if (name === 'tagName') {\r\n        return this[0].tagName\r\n      }\r\n\r\n      return this[0].getAttribute(name);\r\n    }\r\n  },\r\n\r\n  removeAttr: function (name) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].removeAttribute) this[i].removeAttribute(name);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  hide: function () {\r\n    this.css('display', 'none');\r\n\r\n    return this;\r\n  },\r\n\r\n  show: function () {\r\n    this.css('display', 'block');\r\n\r\n    return this;\r\n  },\r\n\r\n  focus: function () {\r\n    if (this.length) {\r\n      this[0].focus();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  blur: function () {\r\n    if (this.length) {\r\n      this[0].blur();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  data: function (name, val) {\r\n    // Object.\r\n    if (typeof val !== 'undefined') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i]['data-' + name] = val;\r\n\r\n        if (typeof val !== 'object' && typeof val !== 'function') {\r\n          if(this[i].setAttribute) {\r\n            this[i].setAttribute('data-' + name, val);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n    else {\r\n      if (typeof val !== 'undefined') {\r\n        return this.attr('data-' + name, val);\r\n      }\r\n      else {\r\n        if (this.length === 0) return undefined;\r\n\r\n        for (let i = 0; i < this.length; i++) {\r\n          let dt = this[i]['data-' + name];\r\n\r\n          if (typeof dt === 'undefined' || dt === null) {\r\n            if (this[i].getAttribute) {\r\n              dt = this[i].getAttribute('data-' + name);\r\n            }\r\n          }\r\n\r\n          if (typeof dt != 'undefined' && dt != null) {\r\n            return dt;\r\n          }\r\n        }\r\n\r\n        return undefined;\r\n      }\r\n    }\r\n  },\r\n\r\n  removeData: function (name) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].removeAttribute) this[i].removeAttribute('data-' + name);\r\n      this[i]['data-' + name] = null;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  getCorrectStyleName: function (name) {\r\n    // Compute only if not computed before\r\n    if (!correctStyleName[name]) {\r\n      let finalName\r\n      \r\n      // If a style with same name exists then it is the original name\r\n      if (name in stylesList) {\r\n        finalName = name\r\n      }\r\n      \r\n      // Make first letter capital\r\n      let capName = name[0].toUpperCase() + name.slice(1)\r\n\r\n      // Try attaching the prefixes and checking if it is a valid style name\r\n      let i = cssPrefixes.length\r\n      while (i--) {\r\n        name = cssPrefixes[i] + capName;\r\n        if (name in stylesList) {\r\n          finalName = name\r\n        }\r\n      }\r\n\r\n      // Store for future use\r\n      correctStyleName[name] = finalName\r\n    }\r\n    return correctStyleName[name]\r\n  },\r\n\r\n  css: function (name, val) {\r\n\r\n    if (typeof val !== 'undefined') {\r\n      if (this.length === 0) return this;\r\n\r\n      if (((typeof val === 'string' && val.trim() !== '' && !isNaN(val)) || typeof val === 'number') && /(margin)|(padding)|(height)|(width)|(top)|(left)|(right)|(bottom)/gi.test(name) && !/(line-height)/gi.test(name)) {\r\n        val = val + 'px'\r\n      }\r\n\r\n      for (let i = 0; i < this.length; i++) {\r\n        // Make sure the style name is correct\r\n        name = $(this).getCorrectStyleName(name)\r\n        this[i].style[name] = val;\r\n      }\r\n\r\n      return this;\r\n    }\r\n    else if (typeof name == 'string') {\r\n      if (this.length === 0) return undefined;\r\n\r\n      const doc = this[0].ownerDocument || document;\r\n      const win = doc.defaultView || doc.parentWindow;\r\n\r\n      // Make sure the style name is correct\r\n      name = $(this).getCorrectStyleName(name)\r\n      \r\n      return win.getComputedStyle(this[0])[name];\r\n    }\r\n    else {\r\n      for (let key in name) {\r\n        if (Object.prototype.hasOwnProperty.call(name, key)) {\r\n          this.css(key, name[key]);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    }\r\n  },\r\n\r\n  toggleClass: function (name, val) {\r\n    if (name.split(' ').length > 1) {\r\n      const names = name.split(' ');\r\n      for (let i = 0; i < names.length; i++) {\r\n        this.toggleClass(names[i], val);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (typeof val === 'undefined') {\r\n        if(this[i].classList.contains(name)){\r\n          this[i].classList.remove(name)\r\n        }\r\n        else {\r\n          this[i].classList.add(name)\r\n        }\r\n      } \r\n      else {\r\n        if (val) {\r\n          if(!this[i].classList.contains(name)){\r\n            this[i].classList.add(name)\r\n          }\r\n        }\r\n        else {\r\n          if(this[i].classList.contains(name)){\r\n            this[i].classList.remove(name)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  addClass: function (name) {\r\n    if (name.length === 0) return this;\r\n\r\n    if (name.split(' ').length > 1) {\r\n      const names = name.split(' ');\r\n      for (let i = 0; i < names.length; i++) {\r\n        this.addClass(names[i]);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      this[i].classList.add(name);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  removeClass: function (name) {\r\n    if (name.split(' ').length > 1) {\r\n      const names = name.split(' ');\r\n      for (let i = 0; i < names.length; i++) {\r\n        names[i] = names[i].trim();\r\n\r\n        if (names[i].length) {\r\n          this.removeClass(names[i]);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (name.length) {\r\n        this[i].classList.remove(name);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  \r\n  getClass: function getClass( elem ) {\r\n    return elem.getAttribute && elem.getAttribute( 'class' ) || '';\r\n  },\r\n\r\n  stripAndCollapse: function stripAndCollapse( value ) {\r\n    const rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\r\n    const tokens = value.match( rnothtmlwhite ) || [];\r\n    return tokens.join( ' ' );\r\n  },\r\n\r\n  hasClass: function( selector ) {\r\n    let className, elem,\r\n      i = 0;\r\n\r\n    className = ' ' + selector + ' ';\r\n    while ( ( elem = this[ i++ ] ) ) {\r\n      if ( elem.nodeType === 1 &&\r\n\t\t\t\t( ' ' + $(this).stripAndCollapse( $(this).getClass( elem ) ) + ' ' ).indexOf( className ) > -1 ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  scrollTop: function (val) {\r\n    if (typeof val !== 'undefined') {\r\n\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i] === document) {\r\n          window.scrollTo(document.documentElement.scrollLeft, val)\r\n        } \r\n        else {\r\n          this[i].scrollTop = val\r\n        }\r\n      }\r\n    }\r\n    else {\r\n\r\n      if (this.length === 0) return undefined\r\n\r\n      if (this[0] === document) {\r\n        return document.documentElement.scrollTop\r\n      }\r\n\r\n      return this[0].scrollTop\r\n    }\r\n  },\r\n\r\n  scrollLeft: function (val) {\r\n    if (typeof val !== 'undefined') {\r\n\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i] === document) {\r\n          window.scrollTo(val, document.documentElement.scrollTop)\r\n        } \r\n        else {\r\n          this[i].scrollLeft = val\r\n        }\r\n      }\r\n    }\r\n    else {\r\n\r\n      if (this.length === 0) return undefined\r\n\r\n      if (this[0] === document) {\r\n        return document.documentElement.scrollLeft\r\n      }\r\n\r\n      return this[0].scrollLeft\r\n    }\r\n  },\r\n\r\n\r\n  on: function (eventName, selector, fn) {\r\n    if (eventName.split(' ').length > 1) {\r\n      const events = eventName.split(' ');\r\n      for (let i = 0; i < events.length; i++) {\r\n        // If it is a browser dependent or irregular event\r\n        if (irregularEvents.indexOf(eventName) !== -1) {\r\n          // Bind all events created by attaching all possible prefixes\r\n          for (let j = 0; j < eventPrefixes.length; j++) {\r\n            this.on(eventPrefixes[j] + eventName[0].toUpperCase() + eventName.slice(1), selector, fn)\r\n          }\r\n        }\r\n        else {\r\n          this.on(events[i], selector, fn)\r\n        }\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n\r\n    if (typeof selector === 'function') {\r\n      fn = _getDelegator(selector, null);\r\n    }\r\n    else {\r\n      fn = _getDelegator(fn, selector);\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const $el = $(this[i]);\r\n\r\n      if (!$el.data('events')) {\r\n        $el.data('events', []);\r\n      }\r\n\r\n      const eventHandlers = $el.data('events');\r\n\r\n      eventHandlers.push([eventName, fn]);\r\n\r\n      let domEvent = eventName.split('.');\r\n      domEvent = domEvent[0];\r\n\r\n      if (passiveEvents.indexOf(domEvent) >= 0) {\r\n        $el.get(0).addEventListener(domEvent, fn, { passive: true })\r\n      } \r\n      else {\r\n        $el.get(0).addEventListener(domEvent, fn)\r\n      }\r\n    }\r\n  },\r\n\r\n  off: function (eventName) {\r\n    if (eventName.split(' ').length > 1) {\r\n      const events = eventName.split(' ');\r\n      for (let i = 0; i < events.length; i++) {\r\n        this.off(events[i]);\r\n      }\r\n\r\n      // Chain.\r\n      return this;\r\n    }\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const $el = $(this[i]);\r\n\r\n      const eventHandlers = $el.data('events');\r\n\r\n      if (eventHandlers) {\r\n        let domEvent = eventName.split('.');\r\n        domEvent = domEvent[0];\r\n\r\n        const eventHandlers = $el.data('events') || [];\r\n\r\n        for (let k = eventHandlers.length - 1; k >= 0; k--) {\r\n          const eventHandler = eventHandlers[k];\r\n\r\n          if (eventHandler[0] == eventName) {\r\n            $el.get(0).removeEventListener(domEvent, eventHandler[1]);\r\n\r\n            eventHandlers.splice(k, 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  trigger: function (type) {\r\n    for(let i = 0; i < this.length; i++) {\r\n      let event;\r\n      // If it is a mouse event\r\n      if (typeof(Event) === 'function') {\r\n        if (type.search(/^mouse/g) >= 0) {\r\n          event = new MouseEvent(type, { view: window, cancelable: true, bubbles: true })\r\n        }\r\n        else {\r\n          event = new Event(type)\r\n        }\r\n      }\r\n      else {\r\n        // If it is a mouse event\r\n        if (type.search(/^mouse/g) >= 0) {\r\n          event = document.createEvent('MouseEvents')\r\n          event.initMouseEvent(type, true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\r\n        }\r\n        else {\r\n          event = document.createEvent('Event')\r\n          event.initEvent(type, true, true)\r\n        }\r\n      }\r\n      // Handle special events separately\r\n      if (specialEvents.indexOf(type) >= 0 && typeof this[i][type] === 'function') {\r\n        this[i][type]()\r\n      } \r\n      else {\r\n        this[i].dispatchEvent(event)\r\n      }\r\n    }\r\n  },\r\n\r\n  triggerHandler: function () {\r\n  },\r\n\r\n  val: function (new_val) {\r\n    if (typeof new_val != 'undefined') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i].value = new_val;\r\n      }\r\n\r\n      return this;\r\n    }\r\n    else {\r\n      return this[0].value;\r\n    }\r\n  },\r\n\r\n  siblings: function () {\r\n    return $(this[0]).parent().children().not(this);\r\n  },\r\n\r\n  find: function (selector) {\r\n    \r\n    const ret = $();\r\n\r\n    if(typeof selector !== 'string') {\r\n      for (let i = 0; i < selector.length; i++) {\r\n        for (let j = 0; j < this.length; j++ ) {\r\n          if ( this[j] !== selector[i] && $(this[j]).contains( selector[i]) ) {\r\n            ret.push(selector[i])\r\n            break\r\n          }\r\n        }\r\n      }\r\n      return ret\r\n    }\r\n\r\n    \r\n    const isElement = function (o) {\r\n      return (\r\n        typeof HTMLElement === 'object' ? o instanceof HTMLElement : //DOM2\r\n          o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string'\r\n      )\r\n    }\r\n\r\n    selector = _normalizeSelector(selector);\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].querySelectorAll) {\r\n        let els = []\r\n        if (selector && typeof selector == 'string') {\r\n          els = this[i].querySelectorAll(selector);\r\n        } else if (isElement(selector)) {\r\n          els = [selector];\r\n        }\r\n        for (let j = 0; j < els.length; j++) {\r\n          ret.push(els[j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  children: function () {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const cldrn = this[i].children;\r\n      for (let j = 0; j < cldrn.length; j++) {\r\n        ret.push(cldrn[j]);\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  not: function (selector) {\r\n    if (typeof selector === 'string') {\r\n      for (let i = this.length - 1; i >= 0; i--) {\r\n        if (this[i].matches(selector)) {\r\n          this.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      if (selector instanceof jQuery) {\r\n        for (let i = this.length - 1; i >= 0; i--) {\r\n          for (let j = 0; j < selector.length; j++) {\r\n            if (this[i] === selector[j]) {\r\n              this.splice(i, 1);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        for (let i = this.length - 1; i >= 0; i--) {\r\n          if (this[i] === selector[0]) {\r\n            this.splice(i, 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  add: function (ary) {\r\n    for (let i = 0; i < ary.length; i++) {\r\n      this.push(ary[i]);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  closest: function (selector) {\r\n    for (let i = 0; i < this.length; i++) {\r\n      const clst = this[i].closest && this[i].closest(selector);\r\n\r\n      if (clst) return $(clst);\r\n    }\r\n\r\n    return $();\r\n  },\r\n\r\n  html: function (str) {\r\n    if (typeof str == 'undefined') {\r\n      if (this.length === 0) return undefined;\r\n\r\n      return this[0].innerHTML;\r\n    }\r\n\r\n    if (typeof str === 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i].innerHTML = str;\r\n\r\n        // If any of the child nodes are scripts then run them\r\n        let children = this[i].children\r\n        let doc = this[i].ownerDocument || document\r\n        for (let j = 0; j < children.length; j++) {\r\n          if (children[j].tagName === 'SCRIPT') {\r\n            const script = doc.createElement('script')\r\n            script.innerHTML = children[j].innerHTML\r\n            doc.head.appendChild( script ).parentNode.removeChild( script )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      this[0].innerHTML = '';\r\n\r\n      this.append(str[0]);\r\n\r\n      // Execute if it is script tag\r\n      let doc = this[0].ownerDocument || document\r\n      if (str[0].tagName === 'SCRIPT') {\r\n        const script = doc.createElement('script')\r\n        script.innerHTML = str[0].innerHTML\r\n        doc.head.appendChild( script ).parentNode.removeChild( script )\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  text: function (content) {\r\n    if (content) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this[i].textContent = content;\r\n      }\r\n    }\r\n    else {\r\n      if (!this.length) return '';\r\n\r\n      return this[0].textContent;\r\n    }\r\n  },\r\n\r\n  after: function (content) {\r\n    if (content) {\r\n      if (typeof content == 'string') {\r\n        for (let i = 0; i < this.length; i++) {\r\n          const after = this[i];\r\n\r\n          if (after.nodeType != Node.ELEMENT_NODE) {\r\n            const doc = after.ownerDocument;\r\n            const tmp = doc.createElement('SPAN');\r\n\r\n            $(after).after(tmp);\r\n            $(tmp).after(content).remove();\r\n          }\r\n          else {\r\n            after.insertAdjacentHTML('afterend', content);\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        const after = this[0];\r\n\r\n        if (after.nextSibling) {\r\n          if (content instanceof jQuery) {\r\n            for (let i = 0; i < content.length; i++) {\r\n              after.nextSibling.parentNode.insertBefore(content[i], after.nextSibling)\r\n            }\r\n          }\r\n          else {\r\n            after.nextSibling.parentNode.insertBefore(content, after.nextSibling)\r\n          }\r\n        }\r\n        else {\r\n          $(after.parentNode).append(content);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  clone: function (deep) {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      ret.push(this[i].cloneNode(deep));\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  replaceWith: function (content) {\r\n    if (typeof content === 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i].parentNode) {\r\n          this[i].outerHTML = content\r\n        }\r\n      }\r\n    }\r\n    else if (content.length) {\r\n      for (let i = 0; i < this.length; i++) {\r\n        this.replaceWith(content[i]);\r\n      }\r\n    }\r\n    else {\r\n      this.after(content).remove();\r\n    }\r\n  },\r\n\r\n  insertBefore: function (el) {\r\n    $(el).before(this[0]);\r\n\r\n    return this;\r\n  },\r\n\r\n  before: function (content) {\r\n    if (content instanceof jQuery) {\r\n      for (let i = 0; i < content.length; i++) {\r\n        this.before(content[i]);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    if (content) {\r\n      if (typeof content == 'string') {\r\n        for (let i = 0; i < this.length; i++) {\r\n          const before = this[i];\r\n\r\n          if (before.nodeType != Node.ELEMENT_NODE) {\r\n            const doc = before.ownerDocument;\r\n            const tmp = doc.createElement('SPAN')\r\n\r\n            $(before).before(tmp);\r\n            $(tmp).before(content).remove();\r\n          }\r\n          else {\r\n            if(before.parentNode) {\r\n              before.insertAdjacentHTML('beforebegin', content);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        const before = this[0];\r\n        if(before.parentNode) {\r\n          if (content instanceof jQuery) {\r\n            for (let i = 0; i < content.length; i++) {\r\n              before.parentNode.insertBefore(content[i], before)\r\n            }\r\n          }\r\n          else {\r\n            before.parentNode.insertBefore(content, before)\r\n          }\r\n        }\r\n      } \r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  append: function (content) {\r\n    if (this.length == 0) return this;\r\n\r\n    if (typeof content == 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        const parent = this[i];\r\n        const doc = parent.ownerDocument;\r\n        const tmp = doc.createElement('SPAN');\r\n\r\n        $(parent).append(tmp);\r\n        $(tmp).after(content).remove();\r\n      }\r\n    }\r\n    else {\r\n      if (content instanceof jQuery || Array.isArray(content)) {\r\n        for (let i = 0; i < content.length; i++) {\r\n          this.append(content[i]);\r\n        }\r\n      }\r\n      else {\r\n        if (typeof content !== 'function') {\r\n          this[0].appendChild(content);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n  \r\n  prepend: function (content) {\r\n    if (this.length == 0) return this;\r\n\r\n    if (typeof content == 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        const parent = this[i];\r\n\r\n        const doc = parent.ownerDocument;\r\n        const tmp = doc.createElement('SPAN')\r\n\r\n        $(parent).prepend(tmp);\r\n        $(tmp).before(content).remove();\r\n      }\r\n    }\r\n    else {\r\n      if (content instanceof jQuery) {\r\n        for (let i = 0; i < content.length; i++) {\r\n          this.prepend(content[i]);\r\n        }\r\n      }\r\n      else {\r\n        const parent = this[0];\r\n\r\n        if (!parent.firstChild) {\r\n          $(parent).append(content);\r\n        }\r\n        else {\r\n          if (parent.firstChild) {\r\n            parent.insertBefore(content, parent.firstChild);\r\n          }\r\n          else {\r\n            parent.appendChild(content);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  remove: function () {\r\n    for (let i = 0; i < this.length; i++) {\r\n      if (this[i].parentNode) {\r\n        this[i].parentNode.removeChild(this[i]);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  prev: function () {\r\n    // replicate the jQuery behavior\r\n    if (this.length && this[0].previousElementSibling) {\r\n      return $(this[0].previousElementSibling);\r\n    }\r\n    else {\r\n      return $();\r\n    }\r\n  },\r\n\r\n  next: function () {\r\n    if (this.length && this[0].nextElementSibling) {\r\n      return $(this[0].nextElementSibling);\r\n    }\r\n    else {\r\n      return $();\r\n    }\r\n  },\r\n\r\n  //https://github.com/froala-labs/froala-editor-js-2/issues/1874\r\n  nextAllVisible: function () {\r\n    return this.next();\r\n  },\r\n\r\n  //https://github.com/froala-labs/froala-editor-js-2/issues/1874\r\n  prevAllVisible: function () {\r\n    return this.prev();\r\n  },\r\n\r\n  outerHeight: function (margin) {\r\n    if (this.length === 0) return undefined\r\n\r\n    const el = this[0]\r\n    \r\n    if (el === el.window) {\r\n      return el.innerHeight\r\n    }\r\n\r\n    // Remember the old values, and insert the new ones\r\n    const old = {}\r\n    const isVisible = this.isVisible()\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        old[ name ] = el.style[ name ]\r\n        el.style[ name ] = cssShow[ name ]\r\n      }\r\n    }\r\n\r\n    let height = el.offsetHeight\r\n    if (margin) {\r\n      height += parseInt($(el).css('marginTop')) + parseInt($(el).css('marginBottom'))\r\n    }\r\n\r\n    // Revert the old values\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        el.style[ name ] = old[ name ]\r\n      }\r\n    }\r\n\r\n    return height\r\n  },\r\n\r\n  outerWidth: function (margin) {\r\n    if (this.length === 0) return undefined\r\n\r\n    const el = this[0]\r\n\r\n    if (el === el.window) {\r\n      return el.outerWidth\r\n    }\r\n\r\n    // Remember the old values, and insert the new ones\r\n    const old = {}\r\n    const isVisible = this.isVisible()\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        old[ name ] = el.style[ name ]\r\n        el.style[ name ] = cssShow[ name ]\r\n      }\r\n    }\r\n\r\n    let width = el.offsetWidth\r\n    if (margin) {\r\n      width += parseInt($(el).css('marginLeft')) + parseInt($(el).css('marginRight'))\r\n    }\r\n\r\n    // Revert the old values\r\n    if (!isVisible) {\r\n      for (const name in cssShow ) {\r\n        el.style[ name ] = old[ name ]\r\n      }\r\n    }\r\n\r\n    return width\r\n  },\r\n\r\n  width: function (newWidth) {\r\n    if(newWidth === undefined){\r\n      if (this[0] instanceof HTMLDocument) {\r\n        return this[0].body.offsetWidth\r\n      }\r\n\r\n      return this[0].offsetWidth\r\n    }\r\n    else {\r\n      this[0].style.width = newWidth + 'px'\r\n    }\r\n  },\r\n\r\n  height: function (newHeight) {\r\n    const elem = this[0]\r\n    if(newHeight === undefined){\r\n      if (elem instanceof HTMLDocument) {\r\n        const doc = elem.documentElement\r\n        return Math.max(elem.body.scrollHeight, doc.scrollHeight,\r\n          elem.body.offsetHeight, doc.offsetHeight,\r\n          doc.clientHeight);\r\n      }\r\n  \r\n      return elem.offsetHeight;\r\n    }\r\n    else {\r\n      elem.style.height = newHeight + 'px'\r\n    }\r\n    \r\n  },\r\n\r\n  is: function (el) {\r\n    if (this.length === 0) return false;\r\n\r\n    if (typeof el == 'string' && this[0].matches) {\r\n      return this[0].matches(el);\r\n    }\r\n    else if (el instanceof jQuery) {\r\n      return this[0] == el[0];\r\n    }\r\n    else {\r\n      return this[0] == el;\r\n    }\r\n  },\r\n\r\n  parent: function () {\r\n    if (this.length === 0) return $();\r\n\r\n    return $(this[0].parentNode);\r\n  },\r\n\r\n  parents: function (selector) {\r\n    const ret = $();\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      let el = this[i].parentNode;\r\n\r\n      while (el && el != document && el.matches) {\r\n        if (selector) {\r\n\r\n          if (el.matches(selector)) {\r\n            ret.push(el);\r\n          }\r\n        }\r\n        else {\r\n          ret.push(el);\r\n        }\r\n\r\n        el = el.parentNode;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  parentsUntil: function (until, selector) {\r\n    const ret = $();\r\n    \r\n    if (until instanceof jQuery && until.length > 0) {\r\n      until = until[0]\r\n    }\r\n    \r\n    for (let i = 0; i < this.length; i++) {\r\n      let el = this[i].parentNode;\r\n\r\n      while (el && el != document && el.matches && el != until && this[i] != until && !(typeof until == 'string' && el.matches(until))) {\r\n        if (selector) {\r\n          if (el.matches(selector)) {\r\n            ret.push(el);\r\n          }\r\n        }\r\n        else {\r\n          ret.push(el);\r\n        }\r\n\r\n        el = el.parentNode;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  insertAfter: function(elem) {\r\n    const parentNode = elem.parent()[0]\r\n    if ( parentNode ) {\r\n      parentNode.insertBefore(this[0], elem[0].nextElementSibling)\r\n    }\r\n  },\r\n\r\n  filter: function (fn) {\r\n    const ret = $();\r\n\r\n    if (typeof fn === 'function') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (fn.call(this[i], this[i])) {\r\n          ret.push(this[i]);\r\n        }\r\n      }\r\n    }\r\n    else if (typeof fn === 'string') {\r\n      for (let i = 0; i < this.length; i++) {\r\n        if (this[i].matches(fn)) {\r\n          ret.push(this[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  offset: function () {\r\n    const rect = this[0].getBoundingClientRect();\r\n    const win = this[0].ownerDocument.defaultView;\r\n\r\n    return {\r\n      top: rect.top + win.pageYOffset,\r\n      left: rect.left + win.pageXOffset\r\n    }\r\n  },\r\n\r\n  position: function () {\r\n    return {\r\n      left: this[0].offsetLeft,\r\n      top: this[0].offsetTop\r\n    }\r\n  },\r\n\r\n  // For internal use only.\r\n  // Behaves like an Array's method, not like a jQuery method.\r\n  push: [].push,\r\n  splice: [].splice\r\n};\r\n\r\njQuery.extend = function (new_obj) {\r\n  new_obj = new_obj || {};\r\n\r\n  // Loop arguments.\r\n  for (let i = 1; i < arguments.length; i++) {\r\n    if (!arguments[i])\r\n      continue;\r\n\r\n    for (let key in arguments[i]) {\r\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key))\r\n        new_obj[key] = arguments[i][key];\r\n    }\r\n  }\r\n\r\n  return new_obj;\r\n}\r\n\r\njQuery.merge = function (first, second) {\r\n  let len = +second.length,\r\n    j = 0,\r\n    i = first.length;\r\n\r\n  for (; j < len; j++) {\r\n    first[i++] = second[j];\r\n  }\r\n\r\n  first.length = i;\r\n\r\n  return first;\r\n}\r\n\r\njQuery.map = function (elems, callback, arg) {\r\n  let length, value,\r\n    i = 0,\r\n    ret = [];\r\n\r\n  // Go through the array, translating each of the items to their new values\r\n  if (Array.isArray(elems)) {\r\n    length = elems.length;\r\n    for (; i < length; i++) {\r\n      value = callback(elems[i], i, arg);\r\n\r\n      if (value != null) {\r\n        ret.push(value);\r\n      }\r\n    }\r\n\r\n    // Go through every key on the object,\r\n  } else {\r\n    for (i in elems) {\r\n      value = callback(elems[i], i, arg);\r\n\r\n      if (value != null) {\r\n        ret.push(value);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Flatten any nested arrays\r\n  return [].concat.apply([], ret);\r\n}\r\n\r\nvar init = function (selector, context) {\r\n  if (!selector) {\r\n    return this;\r\n  }\r\n\r\n  if (typeof selector == 'string' && selector[0] === '<') {\r\n    const tmp = document.createElement('DIV')\r\n    tmp.innerHTML = selector\r\n\r\n    return $(tmp.firstElementChild);\r\n  }\r\n\r\n  context = context instanceof jQuery ? context[0] : context;\r\n\r\n  if (typeof selector == 'string') {\r\n\r\n    selector = _normalizeSelector(selector);\r\n\r\n    const els = (context || document).querySelectorAll(selector);\r\n\r\n    for (let i = 0; i < els.length; i++) {\r\n      this[i] = els[i];\r\n    }\r\n\r\n    this.length = els.length;\r\n\r\n    return this;\r\n  }\r\n  else {\r\n    if (!(selector instanceof jQuery)) {\r\n      this[0] = selector;\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n    return selector;\r\n  }\r\n}\r\n\r\ninit.prototype = jQuery.prototype;\r\n\r\nexport default jQuery;\r\n","import './modules/core.js';\nimport './modules/ui.js';\n\nimport $ from './$.js'\nimport FroalaEditor from './editor'\nconst FE = FroalaEditor\n\nfunction init(e) {\n  if (e.type === 'touchend' && !this.$el.data('touched')) {\n    return true\n  }\n\n  if (e.which === 1 || !e.which) {\n    this.$el.off('mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init')\n\n    this.load(FE.MODULES)\n    this.load(FE.PLUGINS)\n\n    const target = e.originalEvent && e.originalEvent.originalTarget\n\n    if (target && target.tagName === 'IMG') {\n      $(target).trigger('mousedown')\n    }\n\n    if (typeof this.ul === 'undefined') {\n      this.destroy()\n    }\n\n    if (e.type === 'touchend' && this.image && e.originalEvent && e.originalEvent.target && $(e.originalEvent.target).is('img')) {\n      const that = this\n\n      setTimeout(() => {\n        that.image.edit($(e.originalEvent.target))\n      }, 100)\n    }\n\n    this.ready = true\n    this.events.trigger('initialized')\n  }\n}\n\nfunction doInit() {\n  this.doc = this.$el.get(0).ownerDocument\n  this.win = 'defaultView' in this.doc ? this.doc.defaultView : this.doc.parentWindow\n  this.$doc = $(this.doc)\n  this.$win = $(this.win)\n\n  if (!this.opts.pluginsEnabled) {\n    this.opts.pluginsEnabled = Object.keys(FE.PLUGINS)\n  }\n\n  if (this.opts.initOnClick) {\n    this.load(FE.MODULES)\n\n    // https://github.com/froala/wysiwyg-editor/issues/1207.\n    this.$el.on('touchstart.init', function () {\n      $(this).data('touched', true)\n    })\n\n    this.$el.on('touchmove.init', function () {\n      $(this).removeData('touched')\n    })\n\n    this.$el.on('mousedown.init touchend.init dragenter.init focus.init', init.bind(this))\n\n    this.events.trigger('initializationDelayed')\n  }\n  else {\n    this.load(FE.MODULES)\n    this.load(FE.PLUGINS)\n\n    $(this.o_win).scrollTop(this.c_scroll)\n\n    if (typeof this.ul === 'undefined') {\n      this.destroy()\n    }\n\n    this.ready = true\n    this.events.trigger('initialized')\n  }\n}\n\nFE.Bootstrap = function (element, options, initCallback) {\n  this.id = ++FE.ID\n  this.$ = $\n\n  let presets = {}\n\n  // If init callback is passed and no options.\n  if (typeof options == 'function') {\n    initCallback = options\n    options = {}\n  }\n\n  if (initCallback) {\n    if (!options.events) options.events = {}\n    options.events.initialized = initCallback\n  }\n\n  if (options && options.documentReady) {\n    presets.toolbarButtons = [ ['fullscreen', 'undo', 'redo', 'getPDF', 'print'], ['bold', 'italic', 'underline', 'textColor', 'backgroundColor', 'clearFormatting'], ['alignLeft', 'alignCenter', 'alignRight', 'alignJustify'], ['formatOL', 'formatUL', 'indent', 'outdent'], ['paragraphFormat'], ['fontFamily'], ['fontSize'], ['insertLink', 'insertImage', 'quote'] ]\n    presets.paragraphFormatSelection = true\n    presets.fontFamilySelection = true\n    presets.fontSizeSelection = true\n    presets.placeholderText = ''\n    presets.quickInsertEnabled = false\n    presets.charCounterCount = false\n  }\n\n  this.opts = Object.assign({}, Object.assign({}, FE.DEFAULTS, presets, typeof options === 'object' && options))\n  const opts_string = JSON.stringify(this.opts)\n\n  FE.OPTS_MAPPING[opts_string] = FE.OPTS_MAPPING[opts_string] || this.id\n  this.sid = FE.OPTS_MAPPING[opts_string]\n  FE.SHARED[this.sid] = FE.SHARED[this.sid] || {}\n  this.shared = FE.SHARED[this.sid]\n  this.shared.count = (this.shared.count || 0) + 1\n\n  this.$oel = $(element)\n  this.$oel.data('froala.editor', this)\n\n  this.o_doc = element.ownerDocument\n  this.o_win = 'defaultView' in this.o_doc ? this.o_doc.defaultView : this.o_doc.parentWindow\n  this.c_scroll = $(this.o_win).scrollTop()\n\n  this._init()\n}\n\nFE.Bootstrap.prototype._init = function () {\n\n  // Get the tag name of the original element.\n  const tag_name = this.$oel.get(0).tagName\n\n  if (this.$oel.closest('label').length >= 1) {\n    //\n    console.warn('Note! It is not recommended to initialize the Froala Editor within a label tag.')\n  }\n\n  const initOnDefault = function () {\n    if (tag_name !== 'TEXTAREA') {\n      this._original_html = this._original_html || this.$oel.html()\n    }\n\n    this.$box = this.$box || this.$oel\n\n    // Turn on iframe if fullPage is on.\n    if (this.opts.fullPage) {\n      this.opts.iframe = true\n    }\n\n    if (!this.opts.iframe) {\n      this.$el = $(this.o_doc.createElement('DIV'))\n      this.el = this.$el.get(0)\n      this.$wp = $(this.o_doc.createElement('DIV')).append(this.$el)\n      this.$box.html(this.$wp)\n\n      setTimeout(doInit.bind(this), 0)\n    }\n    else {\n      this.$iframe = $('<iframe src=\"about:blank\" frameBorder=\"0\">')\n      this.$wp = $('<div></div>')\n      this.$box.html(this.$wp)\n      this.$wp.append(this.$iframe)\n      this.$iframe.get(0).contentWindow.document.open()\n      this.$iframe.get(0).contentWindow.document.write('<!DOCTYPE html>')\n      this.$iframe.get(0).contentWindow.document.write('<html><head></head><body></body></html>')\n      this.$iframe.get(0).contentWindow.document.close()\n\n      this.iframe_document = this.$iframe.get(0).contentWindow.document\n\n      this.$el = $(this.iframe_document.querySelector('body'))\n      this.el = this.$el.get(0)\n      this.$head = $(this.iframe_document.querySelector('head'))\n      this.$html = $(this.iframe_document.querySelector('html'))\n\n      setTimeout(doInit.bind(this), 0)\n    }\n  }.bind(this)\n\n  const initOnTextarea = function () {\n    this.$box = $('<div>')\n    this.$oel.before(this.$box).hide()\n\n    this._original_html = this.$oel.val()\n\n    // Before submit textarea do a sync.\n    const that = this\n\n    this.$oel.parents('form').on(`submit.${this.id}`, () => {\n      that.events.trigger('form.submit')\n    })\n\n    this.$oel.parents('form').on(`reset.${this.id}`, () => {\n      that.events.trigger('form.reset')\n    })\n\n    initOnDefault()\n  }.bind(this)\n\n  const initOnA = function () {\n    this.$el = this.$oel\n    this.el = this.$el.get(0)\n    this.$el.attr('contenteditable', true).css('outline', 'none').css('display', 'inline-block')\n    this.opts.multiLine = false\n    this.opts.toolbarInline = false\n\n    setTimeout(doInit.bind(this), 0)\n  }.bind(this)\n\n  const initOnImg = function () {\n    this.$el = this.$oel\n    this.el = this.$el.get(0)\n    this.opts.toolbarInline = false\n\n    setTimeout(doInit.bind(this), 0)\n  }.bind(this)\n\n  const editInPopup = function () {\n    this.$el = this.$oel\n    this.el = this.$el.get(0)\n    this.opts.toolbarInline = false\n\n    this.$oel.on('click.popup', (e) => {\n      e.preventDefault()\n    })\n\n    setTimeout(doInit.bind(this), 0)\n  }.bind(this)\n\n  // Check on what element it was initialized.\n  if (this.opts.editInPopup) {\n    editInPopup()\n  }\n  else if (tag_name === 'TEXTAREA') {\n    initOnTextarea()\n  }\n  else if (tag_name === 'A') {\n    initOnA()\n  }\n  else if (tag_name === 'IMG') {\n    initOnImg()\n  }\n  else if (tag_name === 'BUTTON' || tag_name === 'INPUT') {\n    this.opts.editInPopup = true\n    this.opts.toolbarInline = false\n    editInPopup()\n  }\n  else {\n    initOnDefault()\n  }\n}\n\nFE.Bootstrap.prototype.load = function (module_list) {\n  // Bind modules to the current instance and tear them up.\n  for (const m_name in module_list) {\n    if (Object.prototype.hasOwnProperty.call(module_list, m_name)) {\n      if (this[m_name]) {\n        continue\n      }\n\n      // Do not include plugin.\n      if (FE.PLUGINS[m_name] && this.opts.pluginsEnabled.indexOf(m_name) < 0) {\n        continue\n      }\n\n      this[m_name] = new module_list[m_name](this)\n\n      if (this[m_name]._init) {\n        this[m_name]._init()\n\n        if (this.opts.initOnClick && m_name === 'core') {\n\n          return false\n        }\n      }\n    }\n  }\n}\n\nFE.Bootstrap.prototype.destroy = function () {\n  this.destrying = true\n\n  this.shared.count--\n\n  this.events && this.events.$off()\n\n  // HTML.\n  const html = this.html && this.html.get()\n\n  // Focus main frame.\n  if (this.opts.iframe) {\n    this.events.disableBlur()\n    this.win.focus()\n    this.events.enableBlur()\n  }\n\n  if(this.events) {\n    this.events.trigger('destroy', [], true)\n    this.events.trigger('shared.destroy', [], true)\n  }\n\n  // Remove shared.\n  if (this.shared.count === 0) {\n    for (const k in this.shared) {\n      if (Object.prototype.hasOwnProperty.call(this.shared, k)) {\n        this.shared[k] = null\n        FE.SHARED[this.sid][k] = null\n      }\n    }\n\n    delete FE.SHARED[this.sid]\n  }\n\n  this.$oel.parents('form').off(`.${this.id}`)\n  this.$oel.off('click.popup')\n  this.$oel.removeData('froala.editor')\n\n  this.$oel.off('froalaEditor')\n\n  // Destroy editor basic elements.\n  if (this.core) {\n    this.core.destroy(html)\n  }\n\n  FE.INSTANCES.splice(FE.INSTANCES.indexOf(this), 1)\n}\n\nexport default FroalaEditor"],"names":["Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","document","documentElement","contains","parentElement","parentNode","nodeType","matchesSelector","mozMatchesSelector","oMatchesSelector","ownerDocument","querySelectorAll","i","length","item","Array","isArray","arg","Object","toString","call","assign","defineProperty","value","target","varArgs","TypeError","to","index","arguments","nextSource","nextKey","hasOwnProperty","writable","configurable","_scopeShim","scopeRE","scopeREComma","container","createElement","overrideNodeMethod","methodName","oldMethod","query","nodeList","gaveId","gaveContainer","match","appendChild","id","Date","getTime","replace","removeChild","e","HTMLElement","self","createElementNS","t","n","r","String","trim","o","indexOf","c","name","code","DOMException","message","a","test","l","getAttribute","split","push","_updateClassName","setAttribute","u","h","Error","add","remove","splice","toggle","join","f","get","enumerable","p","number","__defineGetter__","classList","DOMTokenList","slice","apply","DEFAULTS","initOnClick","pluginsEnabled","MODULES","PLUGINS","VERSION","INSTANCES","OPTS_MAPPING","SHARED","ID","FroalaEditor","selector","options","initCallback","els","iframe_document","inst","existing_instance","console","warn","Bootstrap","RegisterPlugins","plgList","defaults","FE","node","editor","$","getContents","tagName","childNodes","isBlock","Node","ELEMENT_NODE","BLOCK_TAGS","toLowerCase","isLink","isEmpty","ignore_markers","querySelector","contents","has_br","hasClass","TEXT_NODE","textContent","VOID_ELEMENTS","opts","htmlAllowedEmptyTags","htmlDoNotWrapTags","blockParent","deepestParent","until","simple_enter","SIMPLE_ENTER_TAGS","rawAttributes","attrs","atts","attributes","att","nodeName","str","keys","sort","clearAttributes","removeAttribute","openTagString","closeTagString","isFirstSibling","sibling","previousSibling","isLastSibling","nextSibling","isVoid","isList","isElement","isDeletable","hasFocus","doc","activeElement","Boolean","type","href","tabIndex","isEditable","cls","filter","callback","browser","msie","acceptNode","htmlAllowedTags","htmlRemoveTags","htmlAllowedAttrs","htmlAllowedStyleProps","htmlAllowComments","htmlUntouched","fullPage","HTML5Map","B","I","STRIKE","clean","allowedTagsRE","removeTagsRE","allowedAttrsRE","allowedStylePropsRE","_removeInvisible","markers","normalize","insertBefore","cloneNode","_toHTML","is_pre","COMMENT_NODE","nodeValue","outerHTML","temp","node_clone","innerHTML","scripts","_encode","dirty_html","_decode","a1","parseInt","_cleanStyle","style","cleaned_style","charAt","_cleanAttrs","nm","is_attr_allowed","allowed_style_props_matches","_rebuild","body_html","head_html","original_html","doctype","html","extractDoctype","html_attrs","extractNodeAttrs","extractNode","head_attrs","body_attrs","_process","func","implementation","createHTMLDocument","append","new_html","exec","parse_head","b_html","h_html","invisibleSpaces","toHTML5","sel_saved","selection","save","replaceWith","restore","_convertHref","div","innerText","_node","_cleanPre","helpers","sanitizeURL","pasteAllowLocalImages","tg","new_node","insertAdjacentHTML","data","isMac","styleString","classValues","rxp","curMatch","className","substring","forEach","safari","attr","_run","pre","content","denied_tags","denied_attrs","full_page","allowed_tags","merge","allowed_attrs","RegExp","_tablesWrapTHEAD","trs","children","ok","j","tr","thead","firstChild","tables","_listsWrapMissplacedLI","lis","filterListItem","li","ul","tmp","li_sel","_listsJoinSiblings","sibling_lists","k","list","childs","_listsRemoveEmpty","do_remove","removeEmptyList","lst","empty_lis","remaining_lists","_listsWrapLists","direct_lists","prev_li","wrap","_listsNoTagAfterNested","nested_lists","$new_li","after","_listsTypeInNested","before","prev_node","_listsRemoveEmptyLI","_listsFindMissplacedText","lists","$li","prepend","_init","XS","SM","MD","LG","screenSm","screenMd","screenLg","x","LinkRegExCommon","LinkRegExEnd","LinkRegExTLD","LinkRegExHTTP","LinkRegExAuth","LinkRegExWWW","LinkRegEx","LinkProtocols","MAIL_REGEX","_ieVersion","rv","ua","re","navigator","appName","userAgent","parseFloat","$1","_browser","ie_version","matched","version","chrome","webkit","isIOS","isWindowsPhone","isAndroid","isBlackberry","isMobile","requestAnimationFrame","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","getPX","val","screenSize","width","ex","isTouch","DocumentTouch","isURL","url","test_reg","isEmail","local_path","encodeURIComponent","obj","propertyIsEnumerable","RGBToHex","rgb","hex","toUpperCase","HEXtoRGB","shorthandRegex","m","g","b","result","default_alignment","getAlignment","$block","css","alignment","$div","direction","$el","first","l1","find","getBoundingClientRect","left","l2","is_mac","platform","scrollTop","o_win","pageYOffset","o_doc","body","scrollLeft","pageXOffset","isInViewPort","rect","top","Math","round","bottom","innerHeight","clientHeight","events","_events","_do_blur","_assignEvent","evs","handler","$on","_forPaste","trigger","_forElement","on","popups","areVisible","_forKeys","_forWindow","$win","_mousedown","enableBlur","_mouseup","_forDocument","$doc","focus","do_focus","info","$wp","core","st","$box","$sc","disableBlur","atStart","isCollapsed","defaultTag","marker","insert","element","blockTagsQuery","MARKERS","focused","_forFocus","blurActive","blur","_forMouse","_move","_mousemove","_buttonMouseDown","$btn","currentTarget","edit","isDisabled","preventDefault","which","parents","stopPropagation","addClass","_buttonMouseUp","button","getButtons","stopImmediatePropagation","removeClass","removeData","timeout","clearTimeout","bindClick","$element","prev","next","names","callbacks","shared","unshift","$_events","ary","sid","eventName","_$off","off","$off","count","args","force","chainTrigger","param","resp","_destroy","_sharedDestroy","indentMargin","COMMANDS","bold","title","refresh","format","is","toggleClass","italic","underline","strikeThrough","subscript","superscript","outdent","indent","undo","forcedRefresh","disabled","redo","insertHR","clearFormatting","selectAll","moreText","moreParagraph","moreRich","moreMisc","RegisterCommand","commands","_createDefaultTag","empty","mapping","_execCommand","run","_processIndent","show","toolbarInline","toolbar","showInline","$hr","removeAttr","check","default_tag","setAfter","setBefore","execCommand","cmd","_moreExec","$tb","_toggleMoreButton","setMoreToolbarsHeight","$buttonGroup","not","params","accessibilityFocus","accessibility","saveStep","tag","blocks","prop","margin_left","max","unwrap","callExec","isArrow","KEYCODE","ARROW_LEFT","ARROW_UP","setAtEnd","ARROW_RIGHT","ARROW_DOWN","setAtStart","s_el","e_el","endElement","cursorLists","_firstParentLI","p_node","_firstParentList","_startEnter","next_li","o_str","c_str","br_str","nd","new_str","ndx","_middleEnter","add_invisible","cursor","isAtEnd","INVISIBLE_SPACE","clone","keepFormatOnDelete","_endEnter","end_str","start_str","_backspace","each","_del","last_node","next_node","NO_DELETE_TAGS","_atEnd","_atStart","_isAtStart","_isAtEnd","_inLi","parentsUntil","_getExtremityCharacterLength","text","special_chars_regex","_startBackspace","quote","deep_parent","current_block","m_parent","last","prev_children","_middleBackspace","txt","len","tabSpaces","tab_str","substr","UNICODE_NBSP","deleted","t_node","copy_node","backspace","do_default","charCodeAt","_cleanEmptyBlockquotes","fillEmptyBlocks","cleanEmptyTags","spaces","normalizeAroundCursor","_endDel","_middleDel","del","blks","_cleanNodesToRemove","shift","c_node","open_default_tag","close_default_tag","nextElementSibling","enter","isAtStart","A","D","C","abs","w","d","G","E","endsWith","F","H","parent","key","Image","src","domain","cookie","disableDesign","mozilla","addEventListener","srcElement","_openTag","_closeTag","_query","_matches","_processNodeFormat","start_node","$span","selections","$marker","start_marker","inner_spans","$mk","_split","$node","collapsed","changed","close_str","open_str","$p_node","p_html","node_str","_processNodeRemove","should_remove","toLocaleLowerCase","nodes","reassess","$clone","anchorNode","win","getSelection","multiSelection","getRangeAt","startOffset","endOffset","removeZeroWidth","range","newOffset","search","tmprange","createRange","removeAllRanges","setStart","setEnd","addRange","txtNodeToFocus","tmpNode","compareNode","isSameNode","_cleanFormat","elem","$elem","_filterSpans","applyStyle","$parent","_splitParents","$child","_normalize","$outer_span","to_remove","ic_str","io_str","$spans","msp","just_spans","$x","$p","removeStyle","ranges","startContainer","f_child","_normalizeNode","browser_way","n_node","parent_node","enterTags","tagOptsValues","ENTER_P","ENTER_DIV","ENTER_BR","isPreformatted","new_text","getComputedStyle","display","walker","createTreeWalker","NodeFilter","SHOW_TEXT","temp_node","nextNode","currentNode","START_MARKER","END_MARKER","_build","place","mk","boundary","cloneRange","collapse","insertNode","dom_marker","commonAncestorContainer","original_range","clear","firstElementChild","insertAtPoint","clientX","y","clientY","start","caretPositionFromPoint","offsetNode","offset","caretRangeFromPoint","sel","createTextRange","moveToPoint","end_range","duplicate","setEndPoint","select","rangeCount","child","node_found","endContainer","rangeElement","rangeContainer","block_parent","inEditor","rngs","end_node","was_into","rgs","new_ranges","start_m","end_m","setStartAfter","setEndBefore","edge","end_marker","ghost","special_case","s_node","e_node","first_node","createTextNode","_normalizedMarker","setStartBefore","setEndAfter","_canDelete","atEnd","selRange","testRange","selectNodeContents","moveToElementText","isFull","full","inf","_emptyInnerNodes","span","_filterFrInner","_processNodeDelete","should_delete","_prevSibling","_nextSibling","start_markers","sm","end_markers","em","$first_node","start_parent","end_parent","list_start","list_end","tmp_node","last_marker","first_marker","deep","getElementsByClassName","lastChild","use_current_node","language","LANGUAGE","lang","translate","translation","placeholderText","placeholder","$placeholder","_add","margin_offset","iframe","$iframe","outerHeight","margin_top","margin_right","padding_top","padding_left","padding_right","ready","marginTop","paddingTop","paddingLeft","marginLeft","paddingRight","marginRight","textAlign","$oel","hide","isVisible","fromCharCode","htmlSimpleAmpersand","htmlIgnoreCSSProperties","htmlExecuteScripts","look_up","emptyBlocks","around_markers","empty_blocks","qr","found","emptyBlockTagsQuery","remove_blocks","elms","_wrapElement","main_doc","createDocumentFragment","anchor","_wrapElements","_wrap","blockquote","inner","wp_st","block","cleanBlankSpaces","is_block_or_element","_extractMatch","reg_exp","_newDoctype","string","createDocumentType","getDoctype","publicId","systemId","_processBR","br","cleanBRs","brs","getElementsByTagName","checkIfEmpty","$dv","_setHtml","set","cleaned_html","clean_html","head_bad_html","map","toArray","spellcheck","$head","$html","replaceChild","injectStyle","iframeDefaultStyle","iframeStyle","useClasses","_specifity","idRegex","attributeRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","regex","_processOnGet","_el","_sortElementsBySpec","syncInputs","inputs","checked","keep_markers","keep_classes","updated_elms","elms_info","elems_specs","ignoreRegEx","styleSheets","rules","head_style","cssRules","ownerNode","idx","selectorText","cssText","spec","css_text","rule","specs_elem","original_rules","splits","original_rule","heightMin","height","heightMax","size","getSelected","wrapSelection","wrapInner","selectionParent","cloneContents","htmlText","_hasBlockTags","_setCursorAtEnd","escapeEntities","_unwrapForLists","default_tag_els","insertAfter","do_split","positionCaret","cleanWhiteTags","ignore_selection","current_el","current_white","total_white","possible_elements","removed","_cleanTags","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","ESC","SPACE","DELETE","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","FF_SEMICOLON","FF_EQUALS","QUESTION_MARK","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","META","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","FF_HYPHEN","SEMICOLON","DASH","EQUALS","COMMA","HYPHEN","PERIOD","SLASH","APOSTROPHE","TILDE","SINGLE_QUOTE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","IME","multiLine","_enter","_shiftEnter","_ctlBackspace","deleteContents","modify","_space","_input","start_container","start_offset","_cut","bulkRefresh","_tab","shiftKey","_mapKeyPress","_clearIME","isIME","key_down_code","_empty","ImageCaptionSpace","sel_el","strHTML","orgStr","_mapKeyDown","key_code","char_key","isCharacter","ctrlKey","altKey","del_key","metaKey","_replaceU200B","position","getBoundingRect","toolbarBottom","toolbarStickyOffset","_mapKeyUp","has_invisible","ios_CJK","CJKRegEx","_typing_timeout","_temp_snapshot","_typingKeyDown","keycode","snapshot","canDo","typingTimer","_typingKeyUp","forceUndo","isBrowserAction","_isEmpty","_allowTypingOnEdges","dt","undefined","disable","enable","offsetHeight","offsetTop","offsetY","_clearTypingTimer","pastePlain","pasteDeniedTags","pasteDeniedAttrs","pasteAllowedStyleProps","paste","clipboard_html","clipboard_rtf","$paste_div","saveCopiedText","plain","localStorage","setItem","_handleCopy","copied_html","stop_paste","_handlePaste","isContetnEditable","originalEvent","clipboardData","getData","types","clipboard_types","_processPaste","_beforePaste","contentEditable","_dropPaste","dataTransfer","_wordClean","word_tags","oldHTML","p_li","previousElementSibling","_plainPasteClean","cleanComments","is_word","response","_isFromEditor","possible_text","getItem","_buildTabs","tabs","keep_formatting","is_gdocs","is_editor_content","htmlAllowedStylePropsCopy","cleanEmptyTagsAndDivs","wordPaste","spans","linkAlwaysBlank","aTags","aTag","selection_el","in_list","removeEmptyTags","_afterPaste","getRtfClipboard","_filterNoAttrs","arry","divs","dv","empty_tags","capture","removeEventListener","shortcutsEnabled","shortcutsHint","SHORTCUTS_MAP","RegisterShortcut","letter","option","shortcuts","inverse_map","srct","active","map_key","_getNodeIndex","prevNode","isEmptyText","twoTexts","emptyPrevNode","_getNodeLocation","loc","reverse","_getRealNodeOffset","_getRange","scLoc","scOffset","ecLoc","ecOffset","_getNodeByLocation","_restoreRange","range_snapshot","startNode","endNode","equal","s1","s2","JSON","stringify","_disableBrowserUndo","keyCode","undo_stack","undo_index","canRedo","last_html","undoing","dropRedo","pop","_do","_content_changed_timer","hideAll","_redo","reset","syncIframe","documentReady","editorClass","requestWithCORS","requestWithCredentials","requestHeaders","iframeStyleFiles","zIndex","disableRightClick","scrollableContainer","theme","$link","_initElementStyle","_initStyle","_initDrag","drag_support","filereader","FileReader","formdata","FormData","progress","XMLHttpRequest","getXHR","method","xhr","open","withCredentials","header","setRequestHeader","sameInstance","$obj","_original_html","autofocus","destroy","POPUP_TEMPLATES","RegisterTemplate","template","screenHeightofBrowser","$btnActivePopups","setContainer","$container","setFileListHeight","$popup","activeLayerIndex","prevHeight","setPopupDimensions","isDelete","innerWidth","refreshContainer","_inputRefreshEmptyOnFocus","_inputRefreshEmptyOnBlur","$elm","_addLabel","$inputElms","elm","$label","obj_height","applyLeftOffset","$active_dropdowns","is_visible","outerWidth","iframePaddingTop","iframePaddingLeft","at","focusPopup","_repositionPopup","_unmarkExit","onShow","new_instance","filesManager","isChildWindowOpen","onHide","ev","_bindInstanceEvents","onRefresh","btns","except","exit_flag","_markExit","_canExit","_buildTemplate","editInPopup","$colorHexLayer","spanWidth","colorsStep","bindCommands","_windowResize","_inputFocus","$target","_inputBlur","_editorKeydown","findVisible","_preventFocus","originalTarget","hideActiveDropdowns","input_selector","_editorMouseup","_windowMouseup","_windowKeydown","focusPopupButton","p_top","w_height","_checkboxLabelClick","$checkbox","create","$labelElms","registerPopup","can_blur","focusToolbarElement","contenteditableEl","focusedEditableEl","ind","$f_el","focusToolbar","_reorderToolbarButtons","_getVisibleToolbarButtons","focusContentElement","saveSelection","focusContent","$content","backward","$first_input","with_kb","$active_item","$first_tab_index","restoreSelection","$popup_content","$focused_item","focusModal","$modal","focusToolbars","_getActiveFocusedDropdown","$activeDropdown","$buttons","moreBtnIndex","firstMoreToolbarBtnIndex","$moreToolbarBtns","right","btn","$moreToolbar","_moveHorizontally","tab_key","forward","click","status","moveForward","moveBackward","_moveVertically","down","$destination","nextAllVisible","prevAllVisible","moveDown","moveUp","$visible_popup","$visible_modal","modals","focusEditor","esc","registerToolbar","$hovered_el","_getPopupEvents","_tiMouseenter","_tiKeydown","$active_button","_clearPopupButton","$popup_button","focusModalButton","$modal_button","_editorKeydownHandler","focused_content","tooltips","tooltip","$tooltip","above","ceil","bind","TOOLBAR_VISIBLE_BUTTONS","buttons","toolbarContainer","popup_buttons","addButtons","$btns","_filterButtons","butons_list","search_dropdowns","$filtered_buttons","$button","$dropdown_menu_items","$popup_buttons","$modal_hash","$modal_buttons","getPosition","toolbarBottomOffset","topOffset","_expandDropdown","$dropdownWrapper","maxHeight","min","_dropdownButtonClick","$dropdown","ht","dropdownMaxHeight","refreshOnShow","dropdownOffsetTop","moreToolbarHeight","$prevBtn","$active_element","_commandButtonClick","refreshAfterCallback","_click","_dropdownMenuClick","_dropdownWrapperClick","tooltipAbove","_document","_window","defaultView","parentWindow","hideDropdowns","_content","command","shortcut","build","visible","showOnMobile","display_selection","displaySelection","icon","default_selection","defaultSelection","displaySelectionWidth","popup","modal","button_id","dropdown_id","more_btn","back","dropdown","hasOptions","buildList","visible_buttons","cmd_name","cmd_info","plugin","buildGroup","buttonGroups","mainToolbarGroupsHTML","moreToolbarGroupsHTML","groupName","buttonGroup","mainToolbarButtonsHTML","moreToolbarButtonsHTML","buttonCount","visibleButtons","cmdName","cmdInfo","align","buttonsVisible","showMoreButtons","_bulkRefresh","refresh_timeout","delayedBulkRefresh","ICON_TEMPLATES","font_awesome","font_awesome_5","font_awesome_5r","font_awesome_5l","font_awesome_5b","image","svg","ICONS","NAME","SVG_KEY","cancel","color","FA5NAME","insertAll","minimize","DefineIconTemplate","DefineIcon","iconsTemplate","ICON_DEFAULT_TEMPLATE","PATH","SVG","getTemplate","getFileIcon","FILEICONS","advancedImageEditor","alignCenter","alignJustify","alignLeft","alignRight","anchors","autoplay","backgroundColor","cellBackground","cellBorderColor","cellOptions","cellStyle","close","codeView","cogs","columns","exitFullscreen","fileInsert","fileManager","fontAwesome","fontFamily","fontSize","fullscreen","help","horizontalLine","imageAltText","imageCaption","imageClass","imageDisplay","imageManager","imageSize","inlineClass","inlineStyle","insertEmbed","insertFile","insertImage","insertLink","insertMore","insertTable","insertVideo","upload","uploadFiles","lineHeight","linkStyles","mention","more","openLink","orderedList","pageBreaker","paragraphFormat","paragraphMore","paragraphStyle","pdfExport","print","removeTable","replaceImage","row","smile","star","symbols","tags","tableHeader","tableStyle","textColor","textMore","unlink","unorderedList","verticalAlignBottom","verticalAlignMiddle","verticalAlignTop","docIcon","extension","path","gifIcon","jpegIcon","logIcon","movIcon","ogvIcon","pngIcon","txtIcon","webmIcon","webpIcon","wmvIcon","xlsIcon","xlsxIcon","zipIcon","docxIcon","jpgIcon","mp3Icon","mp4Icon","oggIcon","pdfIcon","defaultIcon","$overlay","_modalHTML","head","close_button","$tmp","$body","modalHash","init","resize","$wrapper","allWrapperHeight","exteriorBodyHeight","body_content_height","scrollHeight","newHeight","boundingRect","_topNormalized","p_offset","new_top","s_height","_leftNormalized","clientWidth","forSelection","selection_rect","offsetWidth","new_left","_updateIOSSticky","is_on","prev_top","scheduled_top","$dummy","x_scroll","x_top","c_scroll","c_top","parentBorderWidth","_updateSticky","viewport_height","scrollable_top","scrollable_bottom","offset_top","parent_top","parent_height","skip_setting_fixed","el_top","el_bottom","isFixedToTop","isFixedToBottom","at_top","at_bottom","_testSticky","animate","_stickyElements","_initSticky","addSticky","_setDisabled","$moreButton","_computeMoreToolbarPosition","totalButtonWidth","buttonMarginLeft","buttonMarginRight","attribution","toolbarButtons","toolbarButtonsXS","toolbarButtonsSM","toolbarButtonsMD","toolbarSticky","toolbarVisibleWithoutSelection","TOOLBAR_BUTTONS","TOOLBAR_BUTTONS_MD","TOOLBAR_BUTTONS_SM","TOOLBAR_BUTTONS_XS","POWERED_BY","_buttons_map","_normalizeButtons","previousScreenSize","toolbarButtonGroups","currentButtonGroup","_addButtons","buttons_list","_screenButtons","screen_size","_removeButtonGroupWrappers","$buttonGroups","$moreToolbars","toolbarPaddingBottom","moreToolbarWidth","$moreToolbarBtn","buttonMarginTop","buttonMarginBottom","toolbarWidth","moreToolbarRows","floor","childElementCount","_showScreenButtons","mainToolbarButtonGroups","moreToolbarButtonGroups","moreToolbarButtons","mainToolbarButtons","_setVisibility","tm","_showInlineWithTimeout","_initInlineBehavior","setInterval","_initPositioning","$second_tb","_setDefaults","_initShortcuts","passiveEvents","eventPrefixes","irregularEvents","stylesList","cssPrefixes","cssShow","visibility","specialEvents","correctStyleName","_getEvent","bubbles","cancelable","changedTouches","detail","eventPhase","pageX","pageY","view","offsetX","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","isPartOfDOM","_getDelegator","fn","_normalizeSelector","jQuery","context","isFunction","constructor","isEqualNode","$els","formatParams","formattedParams","ajax","request","crossDomain","headers","dataType","onload","responseText","parse","done","fail","send","prevAll","res","getClientRects","num","pushStack","elems","ret","prevObject","wrapAll","eq","wrapper","wrapperProps","htmlIsFunction","grep","invert","callbackInverse","callbackExpect","cldrn","getCorrectStyleName","finalName","capName","isNaN","getClass","stripAndCollapse","rnothtmlwhite","tokens","scrollTo","eventHandlers","domEvent","passive","eventHandler","event","Event","MouseEvent","createEvent","initMouseEvent","initEvent","dispatchEvent","triggerHandler","new_val","siblings","clst","script","margin","old","newWidth","HTMLDocument","offsetLeft","extend","new_obj","second","concat","load","that","doInit","presets","initialized","paragraphFormatSelection","fontFamilySelection","fontSizeSelection","quickInsertEnabled","charCounterCount","opts_string","tag_name","initOnDefault","contentWindow","write","initOnTextarea","initOnA","initOnImg","module_list","m_name","destrying"],"mappings":"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"}